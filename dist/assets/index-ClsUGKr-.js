var lT=Object.defineProperty;var Ex=a=>{throw TypeError(a)};var cT=(a,e,t)=>e in a?lT(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var Se=(a,e,t)=>cT(a,typeof e!="symbol"?e+"":e,t),hy=(a,e,t)=>e.has(a)||Ex("Cannot "+t);var c=(a,e,t)=>(hy(a,e,"read from private field"),t?t.call(a):e.get(a)),E=(a,e,t)=>e.has(a)?Ex("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),b=(a,e,t,n)=>(hy(a,e,"write to private field"),n?n.call(a,t):e.set(a,t),t),S=(a,e,t)=>(hy(a,e,"access private method"),t);var wn=(a,e,t,n)=>({set _(s){b(a,e,s,t)},get _(){return c(a,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function mg(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var py={exports:{}},md={},fy={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx;function uT(){if(Sx)return je;Sx=1;var a=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),w=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=w&&L[w]||L["@@iterator"],typeof L=="function"?L:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function k(L,$,pe){this.props=L,this.context=$,this.refs=C,this.updater=pe||_}k.prototype.isReactComponent={},k.prototype.setState=function(L,$){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,$,"setState")},k.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function T(){}T.prototype=k.prototype;function P(L,$,pe){this.props=L,this.context=$,this.refs=C,this.updater=pe||_}var O=P.prototype=new T;O.constructor=P,x(O,k.prototype),O.isPureReactComponent=!0;var N=Array.isArray,U=Object.prototype.hasOwnProperty,F={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function H(L,$,pe){var Ae,Le={},ye=null,we=null;if($!=null)for(Ae in $.ref!==void 0&&(we=$.ref),$.key!==void 0&&(ye=""+$.key),$)U.call($,Ae)&&!j.hasOwnProperty(Ae)&&(Le[Ae]=$[Ae]);var Fe=arguments.length-2;if(Fe===1)Le.children=pe;else if(1<Fe){for(var qe=Array(Fe),Ct=0;Ct<Fe;Ct++)qe[Ct]=arguments[Ct+2];Le.children=qe}if(L&&L.defaultProps)for(Ae in Fe=L.defaultProps,Fe)Le[Ae]===void 0&&(Le[Ae]=Fe[Ae]);return{$$typeof:a,type:L,key:ye,ref:we,props:Le,_owner:F.current}}function G(L,$){return{$$typeof:a,type:L.type,key:$,ref:L.ref,props:L.props,_owner:L._owner}}function X(L){return typeof L=="object"&&L!==null&&L.$$typeof===a}function Z(L){var $={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(pe){return $[pe]})}var ce=/\/+/g;function be(L,$){return typeof L=="object"&&L!==null&&L.key!=null?Z(""+L.key):$.toString(36)}function de(L,$,pe,Ae,Le){var ye=typeof L;(ye==="undefined"||ye==="boolean")&&(L=null);var we=!1;if(L===null)we=!0;else switch(ye){case"string":case"number":we=!0;break;case"object":switch(L.$$typeof){case a:case e:we=!0}}if(we)return we=L,Le=Le(we),L=Ae===""?"."+be(we,0):Ae,N(Le)?(pe="",L!=null&&(pe=L.replace(ce,"$&/")+"/"),de(Le,$,pe,"",function(Ct){return Ct})):Le!=null&&(X(Le)&&(Le=G(Le,pe+(!Le.key||we&&we.key===Le.key?"":(""+Le.key).replace(ce,"$&/")+"/")+L)),$.push(Le)),1;if(we=0,Ae=Ae===""?".":Ae+":",N(L))for(var Fe=0;Fe<L.length;Fe++){ye=L[Fe];var qe=Ae+be(ye,Fe);we+=de(ye,$,pe,qe,Le)}else if(qe=y(L),typeof qe=="function")for(L=qe.call(L),Fe=0;!(ye=L.next()).done;)ye=ye.value,qe=Ae+be(ye,Fe++),we+=de(ye,$,pe,qe,Le);else if(ye==="object")throw $=String(L),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return we}function Pe(L,$,pe){if(L==null)return L;var Ae=[],Le=0;return de(L,Ae,"","",function(ye){return $.call(pe,ye,Le++)}),Ae}function J(L){if(L._status===-1){var $=L._result;$=$(),$.then(function(pe){(L._status===0||L._status===-1)&&(L._status=1,L._result=pe)},function(pe){(L._status===0||L._status===-1)&&(L._status=2,L._result=pe)}),L._status===-1&&(L._status=0,L._result=$)}if(L._status===1)return L._result.default;throw L._result}var ne={current:null},Y={transition:null},ie={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Y,ReactCurrentOwner:F};function ee(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:Pe,forEach:function(L,$,pe){Pe(L,function(){$.apply(this,arguments)},pe)},count:function(L){var $=0;return Pe(L,function(){$++}),$},toArray:function(L){return Pe(L,function($){return $})||[]},only:function(L){if(!X(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},je.Component=k,je.Fragment=t,je.Profiler=s,je.PureComponent=P,je.StrictMode=n,je.Suspense=h,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,je.act=ee,je.cloneElement=function(L,$,pe){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ae=x({},L.props),Le=L.key,ye=L.ref,we=L._owner;if($!=null){if($.ref!==void 0&&(ye=$.ref,we=F.current),$.key!==void 0&&(Le=""+$.key),L.type&&L.type.defaultProps)var Fe=L.type.defaultProps;for(qe in $)U.call($,qe)&&!j.hasOwnProperty(qe)&&(Ae[qe]=$[qe]===void 0&&Fe!==void 0?Fe[qe]:$[qe])}var qe=arguments.length-2;if(qe===1)Ae.children=pe;else if(1<qe){Fe=Array(qe);for(var Ct=0;Ct<qe;Ct++)Fe[Ct]=arguments[Ct+2];Ae.children=Fe}return{$$typeof:a,type:L.type,key:Le,ref:ye,props:Ae,_owner:we}},je.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:o,_context:L},L.Consumer=L},je.createElement=H,je.createFactory=function(L){var $=H.bind(null,L);return $.type=L,$},je.createRef=function(){return{current:null}},je.forwardRef=function(L){return{$$typeof:d,render:L}},je.isValidElement=X,je.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:J}},je.memo=function(L,$){return{$$typeof:f,type:L,compare:$===void 0?null:$}},je.startTransition=function(L){var $=Y.transition;Y.transition={};try{L()}finally{Y.transition=$}},je.unstable_act=ee,je.useCallback=function(L,$){return ne.current.useCallback(L,$)},je.useContext=function(L){return ne.current.useContext(L)},je.useDebugValue=function(){},je.useDeferredValue=function(L){return ne.current.useDeferredValue(L)},je.useEffect=function(L,$){return ne.current.useEffect(L,$)},je.useId=function(){return ne.current.useId()},je.useImperativeHandle=function(L,$,pe){return ne.current.useImperativeHandle(L,$,pe)},je.useInsertionEffect=function(L,$){return ne.current.useInsertionEffect(L,$)},je.useLayoutEffect=function(L,$){return ne.current.useLayoutEffect(L,$)},je.useMemo=function(L,$){return ne.current.useMemo(L,$)},je.useReducer=function(L,$,pe){return ne.current.useReducer(L,$,pe)},je.useRef=function(L){return ne.current.useRef(L)},je.useState=function(L){return ne.current.useState(L)},je.useSyncExternalStore=function(L,$,pe){return ne.current.useSyncExternalStore(L,$,pe)},je.useTransition=function(){return ne.current.useTransition()},je.version="18.3.1",je}var Cx;function u0(){return Cx||(Cx=1,fy.exports=uT()),fy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function dT(){if(kx)return md;kx=1;var a=u0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(d,h,f){var m,w={},y=null,_=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(_=h.ref);for(m in h)n.call(h,m)&&!o.hasOwnProperty(m)&&(w[m]=h[m]);if(d&&d.defaultProps)for(m in h=d.defaultProps,h)w[m]===void 0&&(w[m]=h[m]);return{$$typeof:e,type:d,key:y,ref:_,props:w,_owner:s.current}}return md.Fragment=t,md.jsx=l,md.jsxs=l,md}var Tx;function hT(){return Tx||(Tx=1,py.exports=dT()),py.exports}var V=hT(),Ie=u0();const cE=mg(Ie);var Uf={},my={exports:{}},Mn={},gy={exports:{}},vy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix;function pT(){return Ix||(Ix=1,(function(a){function e(Y,ie){var ee=Y.length;Y.push(ie);e:for(;0<ee;){var L=ee-1>>>1,$=Y[L];if(0<s($,ie))Y[L]=ie,Y[ee]=$,ee=L;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ie=Y[0],ee=Y.pop();if(ee!==ie){Y[0]=ee;e:for(var L=0,$=Y.length,pe=$>>>1;L<pe;){var Ae=2*(L+1)-1,Le=Y[Ae],ye=Ae+1,we=Y[ye];if(0>s(Le,ee))ye<$&&0>s(we,Le)?(Y[L]=we,Y[ye]=ee,L=ye):(Y[L]=Le,Y[Ae]=ee,L=Ae);else if(ye<$&&0>s(we,ee))Y[L]=we,Y[ye]=ee,L=ye;else break e}}return ie}function s(Y,ie){var ee=Y.sortIndex-ie.sortIndex;return ee!==0?ee:Y.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();a.unstable_now=function(){return l.now()-d}}var h=[],f=[],m=1,w=null,y=3,_=!1,x=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(Y){for(var ie=t(f);ie!==null;){if(ie.callback===null)n(f);else if(ie.startTime<=Y)n(f),ie.sortIndex=ie.expirationTime,e(h,ie);else break;ie=t(f)}}function N(Y){if(C=!1,O(Y),!x)if(t(h)!==null)x=!0,J(U);else{var ie=t(f);ie!==null&&ne(N,ie.startTime-Y)}}function U(Y,ie){x=!1,C&&(C=!1,T(H),H=-1),_=!0;var ee=y;try{for(O(ie),w=t(h);w!==null&&(!(w.expirationTime>ie)||Y&&!Z());){var L=w.callback;if(typeof L=="function"){w.callback=null,y=w.priorityLevel;var $=L(w.expirationTime<=ie);ie=a.unstable_now(),typeof $=="function"?w.callback=$:w===t(h)&&n(h),O(ie)}else n(h);w=t(h)}if(w!==null)var pe=!0;else{var Ae=t(f);Ae!==null&&ne(N,Ae.startTime-ie),pe=!1}return pe}finally{w=null,y=ee,_=!1}}var F=!1,j=null,H=-1,G=5,X=-1;function Z(){return!(a.unstable_now()-X<G)}function ce(){if(j!==null){var Y=a.unstable_now();X=Y;var ie=!0;try{ie=j(!0,Y)}finally{ie?be():(F=!1,j=null)}}else F=!1}var be;if(typeof P=="function")be=function(){P(ce)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Pe=de.port2;de.port1.onmessage=ce,be=function(){Pe.postMessage(null)}}else be=function(){k(ce,0)};function J(Y){j=Y,F||(F=!0,be())}function ne(Y,ie){H=k(function(){Y(a.unstable_now())},ie)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Y){Y.callback=null},a.unstable_continueExecution=function(){x||_||(x=!0,J(U))},a.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<Y?Math.floor(1e3/Y):5},a.unstable_getCurrentPriorityLevel=function(){return y},a.unstable_getFirstCallbackNode=function(){return t(h)},a.unstable_next=function(Y){switch(y){case 1:case 2:case 3:var ie=3;break;default:ie=y}var ee=y;y=ie;try{return Y()}finally{y=ee}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Y,ie){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ee=y;y=Y;try{return ie()}finally{y=ee}},a.unstable_scheduleCallback=function(Y,ie,ee){var L=a.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?L+ee:L):ee=L,Y){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,Y={id:m++,callback:ie,priorityLevel:Y,startTime:ee,expirationTime:$,sortIndex:-1},ee>L?(Y.sortIndex=ee,e(f,Y),t(h)===null&&Y===t(f)&&(C?(T(H),H=-1):C=!0,ne(N,ee-L))):(Y.sortIndex=$,e(h,Y),x||_||(x=!0,J(U))),Y},a.unstable_shouldYield=Z,a.unstable_wrapCallback=function(Y){var ie=y;return function(){var ee=y;y=ie;try{return Y.apply(this,arguments)}finally{y=ee}}}})(vy)),vy}var Rx;function fT(){return Rx||(Rx=1,gy.exports=pT()),gy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function mT(){if(Px)return Mn;Px=1;var a=u0(),e=fT();function t(i){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function o(i,r){l(i,r),l(i+"Capture",r)}function l(i,r){for(s[i]=r,i=0;i<r.length;i++)n.add(r[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},w={};function y(i){return h.call(w,i)?!0:h.call(m,i)?!1:f.test(i)?w[i]=!0:(m[i]=!0,!1)}function _(i,r,u,p){if(u!==null&&u.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function x(i,r,u,p){if(r===null||typeof r>"u"||_(i,r,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function C(i,r,u,p,g,v,A){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=r,this.sanitizeURL=v,this.removeEmptyString=A}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){k[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var r=i[0];k[r]=new C(r,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){k[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){k[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){k[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){k[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){k[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){k[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){k[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function P(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var r=i.replace(T,P);k[r]=new C(r,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var r=i.replace(T,P);k[r]=new C(r,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var r=i.replace(T,P);k[r]=new C(r,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){k[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){k[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function O(i,r,u,p){var g=k.hasOwnProperty(r)?k[r]:null;(g!==null?g.type!==0:p||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(x(r,u,g,p)&&(u=null),p||g===null?y(r)&&(u===null?i.removeAttribute(r):i.setAttribute(r,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(r=g.attributeName,p=g.attributeNamespace,u===null?i.removeAttribute(r):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?i.setAttributeNS(p,r,u):i.setAttribute(r,u))))}var N=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),F=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),Z=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ie(i){return i===null||typeof i!="object"?null:(i=Y&&i[Y]||i["@@iterator"],typeof i=="function"?i:null)}var ee=Object.assign,L;function $(i){if(L===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+i}var pe=!1;function Ae(i,r){if(!i||pe)return"";pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(B){var p=B}Reflect.construct(i,[],r)}else{try{r.call()}catch(B){p=B}i.call(r.prototype)}else{try{throw Error()}catch(B){p=B}i()}}catch(B){if(B&&p&&typeof B.stack=="string"){for(var g=B.stack.split(`
`),v=p.stack.split(`
`),A=g.length-1,I=v.length-1;1<=A&&0<=I&&g[A]!==v[I];)I--;for(;1<=A&&0<=I;A--,I--)if(g[A]!==v[I]){if(A!==1||I!==1)do if(A--,I--,0>I||g[A]!==v[I]){var R=`
`+g[A].replace(" at new "," at ");return i.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",i.displayName)),R}while(1<=A&&0<=I);break}}}finally{pe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?$(i):""}function Le(i){switch(i.tag){case 5:return $(i.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function ye(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case F:return"Portal";case G:return"Profiler";case H:return"StrictMode";case be:return"Suspense";case de:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Z:return(i.displayName||"Context")+".Consumer";case X:return(i._context.displayName||"Context")+".Provider";case ce:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Pe:return r=i.displayName||null,r!==null?r:ye(i.type)||"Memo";case J:r=i._payload,i=i._init;try{return ye(i(r))}catch{}}return null}function we(i){var r=i.type;switch(i.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=r.render,i=i.displayName||i.name||"",r.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(r);case 8:return r===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Fe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function qe(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ct(i){var r=qe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),p=""+i[r];if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(A){p=""+A,v.call(this,A)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(A){p=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Rs(i){i._valueTracker||(i._valueTracker=Ct(i))}function Ps(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var u=r.getValue(),p="";return i&&(p=qe(i)?i.checked?"true":"false":i.value),i=p,i!==u?(r.setValue(i),!0):!1}function Ha(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Tl(i,r){var u=r.checked;return ee({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ku(i,r){var u=r.defaultValue==null?"":r.defaultValue,p=r.checked!=null?r.checked:r.defaultChecked;u=Fe(r.value!=null?r.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Tu(i,r){r=r.checked,r!=null&&O(i,"checked",r,!1)}function Ji(i,r){Tu(i,r);var u=Fe(r.value),p=r.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}r.hasOwnProperty("value")?kr(i,r.type,u):r.hasOwnProperty("defaultValue")&&kr(i,r.type,Fe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(i.defaultChecked=!!r.defaultChecked)}function Il(i,r,u){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var p=r.type;if(!(p!=="submit"&&p!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+i._wrapperState.initialValue,u||r===i.value||(i.value=r),i.defaultValue=r}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function kr(i,r,u){(r!=="number"||Ha(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Zi=Array.isArray;function Tr(i,r,u,p){if(i=i.options,r){r={};for(var g=0;g<u.length;g++)r["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=r.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&p&&(i[u].defaultSelected=!0)}else{for(u=""+Fe(u),r=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,p&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function Iu(i,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},r,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Dp(i,r){var u=r.value;if(u==null){if(u=r.children,r=r.defaultValue,u!=null){if(r!=null)throw Error(t(92));if(Zi(u)){if(1<u.length)throw Error(t(93));u=u[0]}r=u}r==null&&(r=""),u=r}i._wrapperState={initialValue:Fe(u)}}function se(i,r){var u=Fe(r.value),p=Fe(r.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),r.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Ee(i){var r=i.textContent;r===i._wrapperState.initialValue&&r!==""&&r!==null&&(i.value=r)}function dt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(i,r){return i==null||i==="http://www.w3.org/1999/xhtml"?dt(r):i==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var jt,Ir=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,u,p,g){MSApp.execUnsafeLocalFunction(function(){return i(r,u,p,g)})}:i})(function(i,r){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=r;else{for(jt=jt||document.createElement("div"),jt.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=jt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;r.firstChild;)i.appendChild(r.firstChild)}});function li(i,r){if(r){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=r;return}}i.textContent=r}var Ds={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ru=["Webkit","ms","Moz","O"];Object.keys(Ds).forEach(function(i){Ru.forEach(function(r){r=r+i.charAt(0).toUpperCase()+i.substring(1),Ds[r]=Ds[i]})});function Rl(i,r,u){return r==null||typeof r=="boolean"||r===""?"":u||typeof r!="number"||r===0||Ds.hasOwnProperty(i)&&Ds[i]?(""+r).trim():r+"px"}function $a(i,r){i=i.style;for(var u in r)if(r.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Rl(u,r[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,g):i[u]=g}}var Pu=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Va(i,r){if(r){if(Pu[i]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Wa(i,r){if(i.indexOf("-")===-1)return typeof r.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ga=null;function Du(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Tg=null,Pl=null,Dl=null;function U0(i){if(i=ed(i)){if(typeof Tg!="function")throw Error(t(280));var r=i.stateNode;r&&(r=tf(r),Tg(i.stateNode,i.type,r))}}function H0(i){Pl?Dl?Dl.push(i):Dl=[i]:Pl=i}function $0(){if(Pl){var i=Pl,r=Dl;if(Dl=Pl=null,U0(i),r)for(i=0;i<r.length;i++)U0(r[i])}}function V0(i,r){return i(r)}function W0(){}var Ig=!1;function G0(i,r,u){if(Ig)return i(r,u);Ig=!0;try{return V0(i,r,u)}finally{Ig=!1,(Pl!==null||Dl!==null)&&(W0(),$0())}}function Lu(i,r){var u=i.stateNode;if(u===null)return null;var p=tf(u);if(p===null)return null;u=p[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,r,typeof u));return u}var Rg=!1;if(d)try{var Mu={};Object.defineProperty(Mu,"passive",{get:function(){Rg=!0}}),window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{Rg=!1}function fC(i,r,u,p,g,v,A,I,R){var B=Array.prototype.slice.call(arguments,3);try{r.apply(u,B)}catch(q){this.onError(q)}}var Nu=!1,Lp=null,Mp=!1,Pg=null,mC={onError:function(i){Nu=!0,Lp=i}};function gC(i,r,u,p,g,v,A,I,R){Nu=!1,Lp=null,fC.apply(mC,arguments)}function vC(i,r,u,p,g,v,A,I,R){if(gC.apply(this,arguments),Nu){if(Nu){var B=Lp;Nu=!1,Lp=null}else throw Error(t(198));Mp||(Mp=!0,Pg=B)}}function qa(i){var r=i,u=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(u=r.return),i=r.return;while(i)}return r.tag===3?u:null}function q0(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function K0(i){if(qa(i)!==i)throw Error(t(188))}function yC(i){var r=i.alternate;if(!r){if(r=qa(i),r===null)throw Error(t(188));return r!==i?null:i}for(var u=i,p=r;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return K0(g),i;if(v===p)return K0(g),r;v=v.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=v;else{for(var A=!1,I=g.child;I;){if(I===u){A=!0,u=g,p=v;break}if(I===p){A=!0,p=g,u=v;break}I=I.sibling}if(!A){for(I=v.child;I;){if(I===u){A=!0,u=v,p=g;break}if(I===p){A=!0,p=v,u=g;break}I=I.sibling}if(!A)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:r}function X0(i){return i=yC(i),i!==null?Y0(i):null}function Y0(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var r=Y0(i);if(r!==null)return r;i=i.sibling}return null}var Q0=e.unstable_scheduleCallback,J0=e.unstable_cancelCallback,wC=e.unstable_shouldYield,bC=e.unstable_requestPaint,_t=e.unstable_now,_C=e.unstable_getCurrentPriorityLevel,Dg=e.unstable_ImmediatePriority,Z0=e.unstable_UserBlockingPriority,Np=e.unstable_NormalPriority,xC=e.unstable_LowPriority,eb=e.unstable_IdlePriority,Op=null,es=null;function AC(i){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(Op,i,void 0,(i.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:CC,EC=Math.log,SC=Math.LN2;function CC(i){return i>>>=0,i===0?32:31-(EC(i)/SC|0)|0}var Fp=64,jp=4194304;function Ou(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function zp(i,r){var u=i.pendingLanes;if(u===0)return 0;var p=0,g=i.suspendedLanes,v=i.pingedLanes,A=u&268435455;if(A!==0){var I=A&~g;I!==0?p=Ou(I):(v&=A,v!==0&&(p=Ou(v)))}else A=u&~g,A!==0?p=Ou(A):v!==0&&(p=Ou(v));if(p===0)return 0;if(r!==0&&r!==p&&(r&g)===0&&(g=p&-p,v=r&-r,g>=v||g===16&&(v&4194240)!==0))return r;if((p&4)!==0&&(p|=u&16),r=i.entangledLanes,r!==0)for(i=i.entanglements,r&=p;0<r;)u=31-Ci(r),g=1<<u,p|=i[u],r&=~g;return p}function kC(i,r){switch(i){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TC(i,r){for(var u=i.suspendedLanes,p=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes;0<v;){var A=31-Ci(v),I=1<<A,R=g[A];R===-1?((I&u)===0||(I&p)!==0)&&(g[A]=kC(I,r)):R<=r&&(i.expiredLanes|=I),v&=~I}}function Lg(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function tb(){var i=Fp;return Fp<<=1,(Fp&4194240)===0&&(Fp=64),i}function Mg(i){for(var r=[],u=0;31>u;u++)r.push(i);return r}function Fu(i,r,u){i.pendingLanes|=r,r!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,r=31-Ci(r),i[r]=u}function IC(i,r){var u=i.pendingLanes&~r;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=r,i.mutableReadLanes&=r,i.entangledLanes&=r,r=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-Ci(u),v=1<<g;r[g]=0,p[g]=-1,i[g]=-1,u&=~v}}function Ng(i,r){var u=i.entangledLanes|=r;for(i=i.entanglements;u;){var p=31-Ci(u),g=1<<p;g&r|i[p]&r&&(i[p]|=r),u&=~g}}var Ke=0;function nb(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var ib,Og,sb,rb,ab,Fg=!1,Bp=[],Rr=null,Pr=null,Dr=null,ju=new Map,zu=new Map,Lr=[],RC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ob(i,r){switch(i){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":ju.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zu.delete(r.pointerId)}}function Bu(i,r,u,p,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:u,eventSystemFlags:p,nativeEvent:v,targetContainers:[g]},r!==null&&(r=ed(r),r!==null&&Og(r)),i):(i.eventSystemFlags|=p,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function PC(i,r,u,p,g){switch(r){case"focusin":return Rr=Bu(Rr,i,r,u,p,g),!0;case"dragenter":return Pr=Bu(Pr,i,r,u,p,g),!0;case"mouseover":return Dr=Bu(Dr,i,r,u,p,g),!0;case"pointerover":var v=g.pointerId;return ju.set(v,Bu(ju.get(v)||null,i,r,u,p,g)),!0;case"gotpointercapture":return v=g.pointerId,zu.set(v,Bu(zu.get(v)||null,i,r,u,p,g)),!0}return!1}function lb(i){var r=Ka(i.target);if(r!==null){var u=qa(r);if(u!==null){if(r=u.tag,r===13){if(r=q0(u),r!==null){i.blockedOn=r,ab(i.priority,function(){sb(u)});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Up(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var u=zg(i.domEventName,i.eventSystemFlags,r[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Ga=p,u.target.dispatchEvent(p),Ga=null}else return r=ed(u),r!==null&&Og(r),i.blockedOn=u,!1;r.shift()}return!0}function cb(i,r,u){Up(i)&&u.delete(r)}function DC(){Fg=!1,Rr!==null&&Up(Rr)&&(Rr=null),Pr!==null&&Up(Pr)&&(Pr=null),Dr!==null&&Up(Dr)&&(Dr=null),ju.forEach(cb),zu.forEach(cb)}function Uu(i,r){i.blockedOn===r&&(i.blockedOn=null,Fg||(Fg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,DC)))}function Hu(i){function r(g){return Uu(g,i)}if(0<Bp.length){Uu(Bp[0],i);for(var u=1;u<Bp.length;u++){var p=Bp[u];p.blockedOn===i&&(p.blockedOn=null)}}for(Rr!==null&&Uu(Rr,i),Pr!==null&&Uu(Pr,i),Dr!==null&&Uu(Dr,i),ju.forEach(r),zu.forEach(r),u=0;u<Lr.length;u++)p=Lr[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Lr.length&&(u=Lr[0],u.blockedOn===null);)lb(u),u.blockedOn===null&&Lr.shift()}var Ll=N.ReactCurrentBatchConfig,Hp=!0;function LC(i,r,u,p){var g=Ke,v=Ll.transition;Ll.transition=null;try{Ke=1,jg(i,r,u,p)}finally{Ke=g,Ll.transition=v}}function MC(i,r,u,p){var g=Ke,v=Ll.transition;Ll.transition=null;try{Ke=4,jg(i,r,u,p)}finally{Ke=g,Ll.transition=v}}function jg(i,r,u,p){if(Hp){var g=zg(i,r,u,p);if(g===null)nv(i,r,p,$p,u),ob(i,p);else if(PC(g,i,r,u,p))p.stopPropagation();else if(ob(i,p),r&4&&-1<RC.indexOf(i)){for(;g!==null;){var v=ed(g);if(v!==null&&ib(v),v=zg(i,r,u,p),v===null&&nv(i,r,p,$p,u),v===g)break;g=v}g!==null&&p.stopPropagation()}else nv(i,r,p,null,u)}}var $p=null;function zg(i,r,u,p){if($p=null,i=Du(p),i=Ka(i),i!==null)if(r=qa(i),r===null)i=null;else if(u=r.tag,u===13){if(i=q0(r),i!==null)return i;i=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null);return $p=i,null}function ub(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_C()){case Dg:return 1;case Z0:return 4;case Np:case xC:return 16;case eb:return 536870912;default:return 16}default:return 16}}var Mr=null,Bg=null,Vp=null;function db(){if(Vp)return Vp;var i,r=Bg,u=r.length,p,g="value"in Mr?Mr.value:Mr.textContent,v=g.length;for(i=0;i<u&&r[i]===g[i];i++);var A=u-i;for(p=1;p<=A&&r[u-p]===g[v-p];p++);return Vp=g.slice(i,1<p?1-p:void 0)}function Wp(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Gp(){return!0}function hb(){return!1}function Hn(i){function r(u,p,g,v,A){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(u=i[I],this[I]=u?u(v):v[I]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Gp:hb,this.isPropagationStopped=hb,this}return ee(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Gp)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Gp)},persist:function(){},isPersistent:Gp}),r}var Ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ug=Hn(Ml),$u=ee({},Ml,{view:0,detail:0}),NC=Hn($u),Hg,$g,Vu,qp=ee({},$u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vu&&(Vu&&i.type==="mousemove"?(Hg=i.screenX-Vu.screenX,$g=i.screenY-Vu.screenY):$g=Hg=0,Vu=i),Hg)},movementY:function(i){return"movementY"in i?i.movementY:$g}}),pb=Hn(qp),OC=ee({},qp,{dataTransfer:0}),FC=Hn(OC),jC=ee({},$u,{relatedTarget:0}),Vg=Hn(jC),zC=ee({},Ml,{animationName:0,elapsedTime:0,pseudoElement:0}),BC=Hn(zC),UC=ee({},Ml,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),HC=Hn(UC),$C=ee({},Ml,{data:0}),fb=Hn($C),VC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qC(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=GC[i])?!!r[i]:!1}function Wg(){return qC}var KC=ee({},$u,{key:function(i){if(i.key){var r=VC[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Wp(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?WC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wg,charCode:function(i){return i.type==="keypress"?Wp(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Wp(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),XC=Hn(KC),YC=ee({},qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mb=Hn(YC),QC=ee({},$u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wg}),JC=Hn(QC),ZC=ee({},Ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),ek=Hn(ZC),tk=ee({},qp,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),nk=Hn(tk),ik=[9,13,27,32],Gg=d&&"CompositionEvent"in window,Wu=null;d&&"documentMode"in document&&(Wu=document.documentMode);var sk=d&&"TextEvent"in window&&!Wu,gb=d&&(!Gg||Wu&&8<Wu&&11>=Wu),vb=" ",yb=!1;function wb(i,r){switch(i){case"keyup":return ik.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Nl=!1;function rk(i,r){switch(i){case"compositionend":return bb(r);case"keypress":return r.which!==32?null:(yb=!0,vb);case"textInput":return i=r.data,i===vb&&yb?null:i;default:return null}}function ak(i,r){if(Nl)return i==="compositionend"||!Gg&&wb(i,r)?(i=db(),Vp=Bg=Mr=null,Nl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return gb&&r.locale!=="ko"?null:r.data;default:return null}}var ok={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _b(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!ok[i.type]:r==="textarea"}function xb(i,r,u,p){H0(p),r=Jp(r,"onChange"),0<r.length&&(u=new Ug("onChange","change",null,u,p),i.push({event:u,listeners:r}))}var Gu=null,qu=null;function lk(i){Bb(i,0)}function Kp(i){var r=Bl(i);if(Ps(r))return i}function ck(i,r){if(i==="change")return r}var Ab=!1;if(d){var qg;if(d){var Kg="oninput"in document;if(!Kg){var Eb=document.createElement("div");Eb.setAttribute("oninput","return;"),Kg=typeof Eb.oninput=="function"}qg=Kg}else qg=!1;Ab=qg&&(!document.documentMode||9<document.documentMode)}function Sb(){Gu&&(Gu.detachEvent("onpropertychange",Cb),qu=Gu=null)}function Cb(i){if(i.propertyName==="value"&&Kp(qu)){var r=[];xb(r,qu,i,Du(i)),G0(lk,r)}}function uk(i,r,u){i==="focusin"?(Sb(),Gu=r,qu=u,Gu.attachEvent("onpropertychange",Cb)):i==="focusout"&&Sb()}function dk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Kp(qu)}function hk(i,r){if(i==="click")return Kp(r)}function pk(i,r){if(i==="input"||i==="change")return Kp(r)}function fk(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ki=typeof Object.is=="function"?Object.is:fk;function Ku(i,r){if(ki(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var u=Object.keys(i),p=Object.keys(r);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!h.call(r,g)||!ki(i[g],r[g]))return!1}return!0}function kb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Tb(i,r){var u=kb(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=r&&p>=r)return{node:u,offset:r-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=kb(u)}}function Ib(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Ib(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Rb(){for(var i=window,r=Ha();r instanceof i.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)i=r.contentWindow;else break;r=Ha(i.document)}return r}function Xg(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}function mk(i){var r=Rb(),u=i.focusedElem,p=i.selectionRange;if(r!==u&&u&&u.ownerDocument&&Ib(u.ownerDocument.documentElement,u)){if(p!==null&&Xg(u)){if(r=p.start,i=p.end,i===void 0&&(i=r),"selectionStart"in u)u.selectionStart=r,u.selectionEnd=Math.min(i,u.value.length);else if(i=(r=u.ownerDocument||document)&&r.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,v=Math.min(p.start,g);p=p.end===void 0?v:Math.min(p.end,g),!i.extend&&v>p&&(g=p,p=v,v=g),g=Tb(u,v);var A=Tb(u,p);g&&A&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==A.node||i.focusOffset!==A.offset)&&(r=r.createRange(),r.setStart(g.node,g.offset),i.removeAllRanges(),v>p?(i.addRange(r),i.extend(A.node,A.offset)):(r.setEnd(A.node,A.offset),i.addRange(r)))}}for(r=[],i=u;i=i.parentNode;)i.nodeType===1&&r.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<r.length;u++)i=r[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var gk=d&&"documentMode"in document&&11>=document.documentMode,Ol=null,Yg=null,Xu=null,Qg=!1;function Pb(i,r,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qg||Ol==null||Ol!==Ha(p)||(p=Ol,"selectionStart"in p&&Xg(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Xu&&Ku(Xu,p)||(Xu=p,p=Jp(Yg,"onSelect"),0<p.length&&(r=new Ug("onSelect","select",null,r,u),i.push({event:r,listeners:p}),r.target=Ol)))}function Xp(i,r){var u={};return u[i.toLowerCase()]=r.toLowerCase(),u["Webkit"+i]="webkit"+r,u["Moz"+i]="moz"+r,u}var Fl={animationend:Xp("Animation","AnimationEnd"),animationiteration:Xp("Animation","AnimationIteration"),animationstart:Xp("Animation","AnimationStart"),transitionend:Xp("Transition","TransitionEnd")},Jg={},Db={};d&&(Db=document.createElement("div").style,"AnimationEvent"in window||(delete Fl.animationend.animation,delete Fl.animationiteration.animation,delete Fl.animationstart.animation),"TransitionEvent"in window||delete Fl.transitionend.transition);function Yp(i){if(Jg[i])return Jg[i];if(!Fl[i])return i;var r=Fl[i],u;for(u in r)if(r.hasOwnProperty(u)&&u in Db)return Jg[i]=r[u];return i}var Lb=Yp("animationend"),Mb=Yp("animationiteration"),Nb=Yp("animationstart"),Ob=Yp("transitionend"),Fb=new Map,jb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(i,r){Fb.set(i,r),o(r,[i])}for(var Zg=0;Zg<jb.length;Zg++){var ev=jb[Zg],vk=ev.toLowerCase(),yk=ev[0].toUpperCase()+ev.slice(1);Nr(vk,"on"+yk)}Nr(Lb,"onAnimationEnd"),Nr(Mb,"onAnimationIteration"),Nr(Nb,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Ob,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function zb(i,r,u){var p=i.type||"unknown-event";i.currentTarget=u,vC(p,r,void 0,i),i.currentTarget=null}function Bb(i,r){r=(r&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],g=p.event;p=p.listeners;e:{var v=void 0;if(r)for(var A=p.length-1;0<=A;A--){var I=p[A],R=I.instance,B=I.currentTarget;if(I=I.listener,R!==v&&g.isPropagationStopped())break e;zb(g,I,B),v=R}else for(A=0;A<p.length;A++){if(I=p[A],R=I.instance,B=I.currentTarget,I=I.listener,R!==v&&g.isPropagationStopped())break e;zb(g,I,B),v=R}}}if(Mp)throw i=Pg,Mp=!1,Pg=null,i}function st(i,r){var u=r[lv];u===void 0&&(u=r[lv]=new Set);var p=i+"__bubble";u.has(p)||(Ub(r,i,2,!1),u.add(p))}function tv(i,r,u){var p=0;r&&(p|=4),Ub(u,i,p,r)}var Qp="_reactListening"+Math.random().toString(36).slice(2);function Qu(i){if(!i[Qp]){i[Qp]=!0,n.forEach(function(u){u!=="selectionchange"&&(wk.has(u)||tv(u,!1,i),tv(u,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Qp]||(r[Qp]=!0,tv("selectionchange",!1,r))}}function Ub(i,r,u,p){switch(ub(r)){case 1:var g=LC;break;case 4:g=MC;break;default:g=jg}u=g.bind(null,r,u,i),g=void 0,!Rg||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),p?g!==void 0?i.addEventListener(r,u,{capture:!0,passive:g}):i.addEventListener(r,u,!0):g!==void 0?i.addEventListener(r,u,{passive:g}):i.addEventListener(r,u,!1)}function nv(i,r,u,p,g){var v=p;if((r&1)===0&&(r&2)===0&&p!==null)e:for(;;){if(p===null)return;var A=p.tag;if(A===3||A===4){var I=p.stateNode.containerInfo;if(I===g||I.nodeType===8&&I.parentNode===g)break;if(A===4)for(A=p.return;A!==null;){var R=A.tag;if((R===3||R===4)&&(R=A.stateNode.containerInfo,R===g||R.nodeType===8&&R.parentNode===g))return;A=A.return}for(;I!==null;){if(A=Ka(I),A===null)return;if(R=A.tag,R===5||R===6){p=v=A;continue e}I=I.parentNode}}p=p.return}G0(function(){var B=v,q=Du(u),K=[];e:{var W=Fb.get(i);if(W!==void 0){var re=Ug,he=i;switch(i){case"keypress":if(Wp(u)===0)break e;case"keydown":case"keyup":re=XC;break;case"focusin":he="focus",re=Vg;break;case"focusout":he="blur",re=Vg;break;case"beforeblur":case"afterblur":re=Vg;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=pb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=FC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=JC;break;case Lb:case Mb:case Nb:re=BC;break;case Ob:re=ek;break;case"scroll":re=NC;break;case"wheel":re=nk;break;case"copy":case"cut":case"paste":re=HC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=mb}var fe=(r&4)!==0,xt=!fe&&i==="scroll",M=fe?W!==null?W+"Capture":null:W;fe=[];for(var D=B,z;D!==null;){z=D;var Q=z.stateNode;if(z.tag===5&&Q!==null&&(z=Q,M!==null&&(Q=Lu(D,M),Q!=null&&fe.push(Ju(D,Q,z)))),xt)break;D=D.return}0<fe.length&&(W=new re(W,he,null,u,q),K.push({event:W,listeners:fe}))}}if((r&7)===0){e:{if(W=i==="mouseover"||i==="pointerover",re=i==="mouseout"||i==="pointerout",W&&u!==Ga&&(he=u.relatedTarget||u.fromElement)&&(Ka(he)||he[Ls]))break e;if((re||W)&&(W=q.window===q?q:(W=q.ownerDocument)?W.defaultView||W.parentWindow:window,re?(he=u.relatedTarget||u.toElement,re=B,he=he?Ka(he):null,he!==null&&(xt=qa(he),he!==xt||he.tag!==5&&he.tag!==6)&&(he=null)):(re=null,he=B),re!==he)){if(fe=pb,Q="onMouseLeave",M="onMouseEnter",D="mouse",(i==="pointerout"||i==="pointerover")&&(fe=mb,Q="onPointerLeave",M="onPointerEnter",D="pointer"),xt=re==null?W:Bl(re),z=he==null?W:Bl(he),W=new fe(Q,D+"leave",re,u,q),W.target=xt,W.relatedTarget=z,Q=null,Ka(q)===B&&(fe=new fe(M,D+"enter",he,u,q),fe.target=z,fe.relatedTarget=xt,Q=fe),xt=Q,re&&he)t:{for(fe=re,M=he,D=0,z=fe;z;z=jl(z))D++;for(z=0,Q=M;Q;Q=jl(Q))z++;for(;0<D-z;)fe=jl(fe),D--;for(;0<z-D;)M=jl(M),z--;for(;D--;){if(fe===M||M!==null&&fe===M.alternate)break t;fe=jl(fe),M=jl(M)}fe=null}else fe=null;re!==null&&Hb(K,W,re,fe,!1),he!==null&&xt!==null&&Hb(K,xt,he,fe,!0)}}e:{if(W=B?Bl(B):window,re=W.nodeName&&W.nodeName.toLowerCase(),re==="select"||re==="input"&&W.type==="file")var me=ck;else if(_b(W))if(Ab)me=pk;else{me=dk;var _e=uk}else(re=W.nodeName)&&re.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(me=hk);if(me&&(me=me(i,B))){xb(K,me,u,q);break e}_e&&_e(i,W,B),i==="focusout"&&(_e=W._wrapperState)&&_e.controlled&&W.type==="number"&&kr(W,"number",W.value)}switch(_e=B?Bl(B):window,i){case"focusin":(_b(_e)||_e.contentEditable==="true")&&(Ol=_e,Yg=B,Xu=null);break;case"focusout":Xu=Yg=Ol=null;break;case"mousedown":Qg=!0;break;case"contextmenu":case"mouseup":case"dragend":Qg=!1,Pb(K,u,q);break;case"selectionchange":if(gk)break;case"keydown":case"keyup":Pb(K,u,q)}var xe;if(Gg)e:{switch(i){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Nl?wb(i,u)&&(ke="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(ke="onCompositionStart");ke&&(gb&&u.locale!=="ko"&&(Nl||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Nl&&(xe=db()):(Mr=q,Bg="value"in Mr?Mr.value:Mr.textContent,Nl=!0)),_e=Jp(B,ke),0<_e.length&&(ke=new fb(ke,i,null,u,q),K.push({event:ke,listeners:_e}),xe?ke.data=xe:(xe=bb(u),xe!==null&&(ke.data=xe)))),(xe=sk?rk(i,u):ak(i,u))&&(B=Jp(B,"onBeforeInput"),0<B.length&&(q=new fb("onBeforeInput","beforeinput",null,u,q),K.push({event:q,listeners:B}),q.data=xe))}Bb(K,r)})}function Ju(i,r,u){return{instance:i,listener:r,currentTarget:u}}function Jp(i,r){for(var u=r+"Capture",p=[];i!==null;){var g=i,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Lu(i,u),v!=null&&p.unshift(Ju(i,v,g)),v=Lu(i,r),v!=null&&p.push(Ju(i,v,g))),i=i.return}return p}function jl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Hb(i,r,u,p,g){for(var v=r._reactName,A=[];u!==null&&u!==p;){var I=u,R=I.alternate,B=I.stateNode;if(R!==null&&R===p)break;I.tag===5&&B!==null&&(I=B,g?(R=Lu(u,v),R!=null&&A.unshift(Ju(u,R,I))):g||(R=Lu(u,v),R!=null&&A.push(Ju(u,R,I)))),u=u.return}A.length!==0&&i.push({event:r,listeners:A})}var bk=/\r\n?/g,_k=/\u0000|\uFFFD/g;function $b(i){return(typeof i=="string"?i:""+i).replace(bk,`
`).replace(_k,"")}function Zp(i,r,u){if(r=$b(r),$b(i)!==r&&u)throw Error(t(425))}function ef(){}var iv=null,sv=null;function rv(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var av=typeof setTimeout=="function"?setTimeout:void 0,xk=typeof clearTimeout=="function"?clearTimeout:void 0,Vb=typeof Promise=="function"?Promise:void 0,Ak=typeof queueMicrotask=="function"?queueMicrotask:typeof Vb<"u"?function(i){return Vb.resolve(null).then(i).catch(Ek)}:av;function Ek(i){setTimeout(function(){throw i})}function ov(i,r){var u=r,p=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){i.removeChild(g),Hu(r);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);Hu(r)}function Or(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return i}function Wb(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(r===0)return i;r--}else u==="/$"&&r++}i=i.previousSibling}return null}var zl=Math.random().toString(36).slice(2),ts="__reactFiber$"+zl,Zu="__reactProps$"+zl,Ls="__reactContainer$"+zl,lv="__reactEvents$"+zl,Sk="__reactListeners$"+zl,Ck="__reactHandles$"+zl;function Ka(i){var r=i[ts];if(r)return r;for(var u=i.parentNode;u;){if(r=u[Ls]||u[ts]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(i=Wb(i);i!==null;){if(u=i[ts])return u;i=Wb(i)}return r}i=u,u=i.parentNode}return null}function ed(i){return i=i[ts]||i[Ls],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Bl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function tf(i){return i[Zu]||null}var cv=[],Ul=-1;function Fr(i){return{current:i}}function rt(i){0>Ul||(i.current=cv[Ul],cv[Ul]=null,Ul--)}function nt(i,r){Ul++,cv[Ul]=i.current,i.current=r}var jr={},nn=Fr(jr),In=Fr(!1),Xa=jr;function Hl(i,r){var u=i.type.contextTypes;if(!u)return jr;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===r)return p.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=r[v];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=g),g}function Rn(i){return i=i.childContextTypes,i!=null}function nf(){rt(In),rt(nn)}function Gb(i,r,u){if(nn.current!==jr)throw Error(t(168));nt(nn,r),nt(In,u)}function qb(i,r,u){var p=i.stateNode;if(r=r.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in r))throw Error(t(108,we(i)||"Unknown",g));return ee({},u,p)}function sf(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||jr,Xa=nn.current,nt(nn,i),nt(In,In.current),!0}function Kb(i,r,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=qb(i,r,Xa),p.__reactInternalMemoizedMergedChildContext=i,rt(In),rt(nn),nt(nn,i)):rt(In),nt(In,u)}var Ms=null,rf=!1,uv=!1;function Xb(i){Ms===null?Ms=[i]:Ms.push(i)}function kk(i){rf=!0,Xb(i)}function zr(){if(!uv&&Ms!==null){uv=!0;var i=0,r=Ke;try{var u=Ms;for(Ke=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}Ms=null,rf=!1}catch(g){throw Ms!==null&&(Ms=Ms.slice(i+1)),Q0(Dg,zr),g}finally{Ke=r,uv=!1}}return null}var $l=[],Vl=0,af=null,of=0,ci=[],ui=0,Ya=null,Ns=1,Os="";function Qa(i,r){$l[Vl++]=of,$l[Vl++]=af,af=i,of=r}function Yb(i,r,u){ci[ui++]=Ns,ci[ui++]=Os,ci[ui++]=Ya,Ya=i;var p=Ns;i=Os;var g=32-Ci(p)-1;p&=~(1<<g),u+=1;var v=32-Ci(r)+g;if(30<v){var A=g-g%5;v=(p&(1<<A)-1).toString(32),p>>=A,g-=A,Ns=1<<32-Ci(r)+g|u<<g|p,Os=v+i}else Ns=1<<v|u<<g|p,Os=i}function dv(i){i.return!==null&&(Qa(i,1),Yb(i,1,0))}function hv(i){for(;i===af;)af=$l[--Vl],$l[Vl]=null,of=$l[--Vl],$l[Vl]=null;for(;i===Ya;)Ya=ci[--ui],ci[ui]=null,Os=ci[--ui],ci[ui]=null,Ns=ci[--ui],ci[ui]=null}var $n=null,Vn=null,ot=!1,Ti=null;function Qb(i,r){var u=fi(5,null,null,0);u.elementType="DELETED",u.stateNode=r,u.return=i,r=i.deletions,r===null?(i.deletions=[u],i.flags|=16):r.push(u)}function Jb(i,r){switch(i.tag){case 5:var u=i.type;return r=r.nodeType!==1||u.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(i.stateNode=r,$n=i,Vn=Or(r.firstChild),!0):!1;case 6:return r=i.pendingProps===""||r.nodeType!==3?null:r,r!==null?(i.stateNode=r,$n=i,Vn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(u=Ya!==null?{id:Ns,overflow:Os}:null,i.memoizedState={dehydrated:r,treeContext:u,retryLane:1073741824},u=fi(18,null,null,0),u.stateNode=r,u.return=i,i.child=u,$n=i,Vn=null,!0):!1;default:return!1}}function pv(i){return(i.mode&1)!==0&&(i.flags&128)===0}function fv(i){if(ot){var r=Vn;if(r){var u=r;if(!Jb(i,r)){if(pv(i))throw Error(t(418));r=Or(u.nextSibling);var p=$n;r&&Jb(i,r)?Qb(p,u):(i.flags=i.flags&-4097|2,ot=!1,$n=i)}}else{if(pv(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,$n=i}}}function Zb(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;$n=i}function lf(i){if(i!==$n)return!1;if(!ot)return Zb(i),ot=!0,!1;var r;if((r=i.tag!==3)&&!(r=i.tag!==5)&&(r=i.type,r=r!=="head"&&r!=="body"&&!rv(i.type,i.memoizedProps)),r&&(r=Vn)){if(pv(i))throw e_(),Error(t(418));for(;r;)Qb(i,r),r=Or(r.nextSibling)}if(Zb(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(r===0){Vn=Or(i.nextSibling);break e}r--}else u!=="$"&&u!=="$!"&&u!=="$?"||r++}i=i.nextSibling}Vn=null}}else Vn=$n?Or(i.stateNode.nextSibling):null;return!0}function e_(){for(var i=Vn;i;)i=Or(i.nextSibling)}function Wl(){Vn=$n=null,ot=!1}function mv(i){Ti===null?Ti=[i]:Ti.push(i)}var Tk=N.ReactCurrentBatchConfig;function td(i,r,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var g=p,v=""+i;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===v?r.ref:(r=function(A){var I=g.refs;A===null?delete I[v]:I[v]=A},r._stringRef=v,r)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function cf(i,r){throw i=Object.prototype.toString.call(r),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i))}function t_(i){var r=i._init;return r(i._payload)}function n_(i){function r(M,D){if(i){var z=M.deletions;z===null?(M.deletions=[D],M.flags|=16):z.push(D)}}function u(M,D){if(!i)return null;for(;D!==null;)r(M,D),D=D.sibling;return null}function p(M,D){for(M=new Map;D!==null;)D.key!==null?M.set(D.key,D):M.set(D.index,D),D=D.sibling;return M}function g(M,D){return M=qr(M,D),M.index=0,M.sibling=null,M}function v(M,D,z){return M.index=z,i?(z=M.alternate,z!==null?(z=z.index,z<D?(M.flags|=2,D):z):(M.flags|=2,D)):(M.flags|=1048576,D)}function A(M){return i&&M.alternate===null&&(M.flags|=2),M}function I(M,D,z,Q){return D===null||D.tag!==6?(D=ay(z,M.mode,Q),D.return=M,D):(D=g(D,z),D.return=M,D)}function R(M,D,z,Q){var me=z.type;return me===j?q(M,D,z.props.children,Q,z.key):D!==null&&(D.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===J&&t_(me)===D.type)?(Q=g(D,z.props),Q.ref=td(M,D,z),Q.return=M,Q):(Q=Lf(z.type,z.key,z.props,null,M.mode,Q),Q.ref=td(M,D,z),Q.return=M,Q)}function B(M,D,z,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=oy(z,M.mode,Q),D.return=M,D):(D=g(D,z.children||[]),D.return=M,D)}function q(M,D,z,Q,me){return D===null||D.tag!==7?(D=ro(z,M.mode,Q,me),D.return=M,D):(D=g(D,z),D.return=M,D)}function K(M,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=ay(""+D,M.mode,z),D.return=M,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case U:return z=Lf(D.type,D.key,D.props,null,M.mode,z),z.ref=td(M,null,D),z.return=M,z;case F:return D=oy(D,M.mode,z),D.return=M,D;case J:var Q=D._init;return K(M,Q(D._payload),z)}if(Zi(D)||ie(D))return D=ro(D,M.mode,z,null),D.return=M,D;cf(M,D)}return null}function W(M,D,z,Q){var me=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return me!==null?null:I(M,D,""+z,Q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case U:return z.key===me?R(M,D,z,Q):null;case F:return z.key===me?B(M,D,z,Q):null;case J:return me=z._init,W(M,D,me(z._payload),Q)}if(Zi(z)||ie(z))return me!==null?null:q(M,D,z,Q,null);cf(M,z)}return null}function re(M,D,z,Q,me){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return M=M.get(z)||null,I(D,M,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case U:return M=M.get(Q.key===null?z:Q.key)||null,R(D,M,Q,me);case F:return M=M.get(Q.key===null?z:Q.key)||null,B(D,M,Q,me);case J:var _e=Q._init;return re(M,D,z,_e(Q._payload),me)}if(Zi(Q)||ie(Q))return M=M.get(z)||null,q(D,M,Q,me,null);cf(D,Q)}return null}function he(M,D,z,Q){for(var me=null,_e=null,xe=D,ke=D=0,Ut=null;xe!==null&&ke<z.length;ke++){xe.index>ke?(Ut=xe,xe=null):Ut=xe.sibling;var Ve=W(M,xe,z[ke],Q);if(Ve===null){xe===null&&(xe=Ut);break}i&&xe&&Ve.alternate===null&&r(M,xe),D=v(Ve,D,ke),_e===null?me=Ve:_e.sibling=Ve,_e=Ve,xe=Ut}if(ke===z.length)return u(M,xe),ot&&Qa(M,ke),me;if(xe===null){for(;ke<z.length;ke++)xe=K(M,z[ke],Q),xe!==null&&(D=v(xe,D,ke),_e===null?me=xe:_e.sibling=xe,_e=xe);return ot&&Qa(M,ke),me}for(xe=p(M,xe);ke<z.length;ke++)Ut=re(xe,M,ke,z[ke],Q),Ut!==null&&(i&&Ut.alternate!==null&&xe.delete(Ut.key===null?ke:Ut.key),D=v(Ut,D,ke),_e===null?me=Ut:_e.sibling=Ut,_e=Ut);return i&&xe.forEach(function(Kr){return r(M,Kr)}),ot&&Qa(M,ke),me}function fe(M,D,z,Q){var me=ie(z);if(typeof me!="function")throw Error(t(150));if(z=me.call(z),z==null)throw Error(t(151));for(var _e=me=null,xe=D,ke=D=0,Ut=null,Ve=z.next();xe!==null&&!Ve.done;ke++,Ve=z.next()){xe.index>ke?(Ut=xe,xe=null):Ut=xe.sibling;var Kr=W(M,xe,Ve.value,Q);if(Kr===null){xe===null&&(xe=Ut);break}i&&xe&&Kr.alternate===null&&r(M,xe),D=v(Kr,D,ke),_e===null?me=Kr:_e.sibling=Kr,_e=Kr,xe=Ut}if(Ve.done)return u(M,xe),ot&&Qa(M,ke),me;if(xe===null){for(;!Ve.done;ke++,Ve=z.next())Ve=K(M,Ve.value,Q),Ve!==null&&(D=v(Ve,D,ke),_e===null?me=Ve:_e.sibling=Ve,_e=Ve);return ot&&Qa(M,ke),me}for(xe=p(M,xe);!Ve.done;ke++,Ve=z.next())Ve=re(xe,M,ke,Ve.value,Q),Ve!==null&&(i&&Ve.alternate!==null&&xe.delete(Ve.key===null?ke:Ve.key),D=v(Ve,D,ke),_e===null?me=Ve:_e.sibling=Ve,_e=Ve);return i&&xe.forEach(function(oT){return r(M,oT)}),ot&&Qa(M,ke),me}function xt(M,D,z,Q){if(typeof z=="object"&&z!==null&&z.type===j&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case U:e:{for(var me=z.key,_e=D;_e!==null;){if(_e.key===me){if(me=z.type,me===j){if(_e.tag===7){u(M,_e.sibling),D=g(_e,z.props.children),D.return=M,M=D;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===J&&t_(me)===_e.type){u(M,_e.sibling),D=g(_e,z.props),D.ref=td(M,_e,z),D.return=M,M=D;break e}u(M,_e);break}else r(M,_e);_e=_e.sibling}z.type===j?(D=ro(z.props.children,M.mode,Q,z.key),D.return=M,M=D):(Q=Lf(z.type,z.key,z.props,null,M.mode,Q),Q.ref=td(M,D,z),Q.return=M,M=Q)}return A(M);case F:e:{for(_e=z.key;D!==null;){if(D.key===_e)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){u(M,D.sibling),D=g(D,z.children||[]),D.return=M,M=D;break e}else{u(M,D);break}else r(M,D);D=D.sibling}D=oy(z,M.mode,Q),D.return=M,M=D}return A(M);case J:return _e=z._init,xt(M,D,_e(z._payload),Q)}if(Zi(z))return he(M,D,z,Q);if(ie(z))return fe(M,D,z,Q);cf(M,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(u(M,D.sibling),D=g(D,z),D.return=M,M=D):(u(M,D),D=ay(z,M.mode,Q),D.return=M,M=D),A(M)):u(M,D)}return xt}var Gl=n_(!0),i_=n_(!1),uf=Fr(null),df=null,ql=null,gv=null;function vv(){gv=ql=df=null}function yv(i){var r=uf.current;rt(uf),i._currentValue=r}function wv(i,r,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),i===u)break;i=i.return}}function Kl(i,r){df=i,gv=ql=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&r)!==0&&(Pn=!0),i.firstContext=null)}function di(i){var r=i._currentValue;if(gv!==i)if(i={context:i,memoizedValue:r,next:null},ql===null){if(df===null)throw Error(t(308));ql=i,df.dependencies={lanes:0,firstContext:i}}else ql=ql.next=i;return r}var Ja=null;function bv(i){Ja===null?Ja=[i]:Ja.push(i)}function s_(i,r,u,p){var g=r.interleaved;return g===null?(u.next=u,bv(r)):(u.next=g.next,g.next=u),r.interleaved=u,Fs(i,p)}function Fs(i,r){i.lanes|=r;var u=i.alternate;for(u!==null&&(u.lanes|=r),u=i,i=i.return;i!==null;)i.childLanes|=r,u=i.alternate,u!==null&&(u.childLanes|=r),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Br=!1;function _v(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r_(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function js(i,r){return{eventTime:i,lane:r,tag:0,payload:null,callback:null,next:null}}function Ur(i,r,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(He&2)!==0){var g=p.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),p.pending=r,Fs(i,u)}return g=p.interleaved,g===null?(r.next=r,bv(p)):(r.next=g.next,g.next=r),p.interleaved=r,Fs(i,u)}function hf(i,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194240)!==0)){var p=r.lanes;p&=i.pendingLanes,u|=p,r.lanes=u,Ng(i,u)}}function a_(i,r){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var A={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=A:v=v.next=A,u=u.next}while(u!==null);v===null?g=v=r:v=v.next=r}else g=v=r;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=r:i.next=r,u.lastBaseUpdate=r}function pf(i,r,u,p){var g=i.updateQueue;Br=!1;var v=g.firstBaseUpdate,A=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var R=I,B=R.next;R.next=null,A===null?v=B:A.next=B,A=R;var q=i.alternate;q!==null&&(q=q.updateQueue,I=q.lastBaseUpdate,I!==A&&(I===null?q.firstBaseUpdate=B:I.next=B,q.lastBaseUpdate=R))}if(v!==null){var K=g.baseState;A=0,q=B=R=null,I=v;do{var W=I.lane,re=I.eventTime;if((p&W)===W){q!==null&&(q=q.next={eventTime:re,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var he=i,fe=I;switch(W=r,re=u,fe.tag){case 1:if(he=fe.payload,typeof he=="function"){K=he.call(re,K,W);break e}K=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,W=typeof he=="function"?he.call(re,K,W):he,W==null)break e;K=ee({},K,W);break e;case 2:Br=!0}}I.callback!==null&&I.lane!==0&&(i.flags|=64,W=g.effects,W===null?g.effects=[I]:W.push(I))}else re={eventTime:re,lane:W,tag:I.tag,payload:I.payload,callback:I.callback,next:null},q===null?(B=q=re,R=K):q=q.next=re,A|=W;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;W=I,I=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);if(q===null&&(R=K),g.baseState=R,g.firstBaseUpdate=B,g.lastBaseUpdate=q,r=g.shared.interleaved,r!==null){g=r;do A|=g.lane,g=g.next;while(g!==r)}else v===null&&(g.shared.lanes=0);to|=A,i.lanes=A,i.memoizedState=K}}function o_(i,r,u){if(i=r.effects,r.effects=null,i!==null)for(r=0;r<i.length;r++){var p=i[r],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var nd={},ns=Fr(nd),id=Fr(nd),sd=Fr(nd);function Za(i){if(i===nd)throw Error(t(174));return i}function xv(i,r){switch(nt(sd,r),nt(id,i),nt(ns,nd),i=r.nodeType,i){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:yt(null,"");break;default:i=i===8?r.parentNode:r,r=i.namespaceURI||null,i=i.tagName,r=yt(r,i)}rt(ns),nt(ns,r)}function Xl(){rt(ns),rt(id),rt(sd)}function l_(i){Za(sd.current);var r=Za(ns.current),u=yt(r,i.type);r!==u&&(nt(id,i),nt(ns,u))}function Av(i){id.current===i&&(rt(ns),rt(id))}var ht=Fr(0);function ff(i){for(var r=i;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ev=[];function Sv(){for(var i=0;i<Ev.length;i++)Ev[i]._workInProgressVersionPrimary=null;Ev.length=0}var mf=N.ReactCurrentDispatcher,Cv=N.ReactCurrentBatchConfig,eo=0,pt=null,Pt=null,zt=null,gf=!1,rd=!1,ad=0,Ik=0;function sn(){throw Error(t(321))}function kv(i,r){if(r===null)return!1;for(var u=0;u<r.length&&u<i.length;u++)if(!ki(i[u],r[u]))return!1;return!0}function Tv(i,r,u,p,g,v){if(eo=v,pt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,mf.current=i===null||i.memoizedState===null?Lk:Mk,i=u(p,g),rd){v=0;do{if(rd=!1,ad=0,25<=v)throw Error(t(301));v+=1,zt=Pt=null,r.updateQueue=null,mf.current=Nk,i=u(p,g)}while(rd)}if(mf.current=wf,r=Pt!==null&&Pt.next!==null,eo=0,zt=Pt=pt=null,gf=!1,r)throw Error(t(300));return i}function Iv(){var i=ad!==0;return ad=0,i}function is(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?pt.memoizedState=zt=i:zt=zt.next=i,zt}function hi(){if(Pt===null){var i=pt.alternate;i=i!==null?i.memoizedState:null}else i=Pt.next;var r=zt===null?pt.memoizedState:zt.next;if(r!==null)zt=r,Pt=i;else{if(i===null)throw Error(t(310));Pt=i,i={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},zt===null?pt.memoizedState=zt=i:zt=zt.next=i}return zt}function od(i,r){return typeof r=="function"?r(i):r}function Rv(i){var r=hi(),u=r.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Pt,g=p.baseQueue,v=u.pending;if(v!==null){if(g!==null){var A=g.next;g.next=v.next,v.next=A}p.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,p=p.baseState;var I=A=null,R=null,B=v;do{var q=B.lane;if((eo&q)===q)R!==null&&(R=R.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),p=B.hasEagerState?B.eagerState:i(p,B.action);else{var K={lane:q,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};R===null?(I=R=K,A=p):R=R.next=K,pt.lanes|=q,to|=q}B=B.next}while(B!==null&&B!==v);R===null?A=p:R.next=I,ki(p,r.memoizedState)||(Pn=!0),r.memoizedState=p,r.baseState=A,r.baseQueue=R,u.lastRenderedState=p}if(i=u.interleaved,i!==null){g=i;do v=g.lane,pt.lanes|=v,to|=v,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[r.memoizedState,u.dispatch]}function Pv(i){var r=hi(),u=r.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,g=u.pending,v=r.memoizedState;if(g!==null){u.pending=null;var A=g=g.next;do v=i(v,A.action),A=A.next;while(A!==g);ki(v,r.memoizedState)||(Pn=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),u.lastRenderedState=v}return[v,p]}function c_(){}function u_(i,r){var u=pt,p=hi(),g=r(),v=!ki(p.memoizedState,g);if(v&&(p.memoizedState=g,Pn=!0),p=p.queue,Dv(p_.bind(null,u,p,i),[i]),p.getSnapshot!==r||v||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,ld(9,h_.bind(null,u,p,g,r),void 0,null),Bt===null)throw Error(t(349));(eo&30)!==0||d_(u,r,g)}return g}function d_(i,r,u){i.flags|=16384,i={getSnapshot:r,value:u},r=pt.updateQueue,r===null?(r={lastEffect:null,stores:null},pt.updateQueue=r,r.stores=[i]):(u=r.stores,u===null?r.stores=[i]:u.push(i))}function h_(i,r,u,p){r.value=u,r.getSnapshot=p,f_(r)&&m_(i)}function p_(i,r,u){return u(function(){f_(r)&&m_(i)})}function f_(i){var r=i.getSnapshot;i=i.value;try{var u=r();return!ki(i,u)}catch{return!0}}function m_(i){var r=Fs(i,1);r!==null&&Di(r,i,1,-1)}function g_(i){var r=is();return typeof i=="function"&&(i=i()),r.memoizedState=r.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:i},r.queue=i,i=i.dispatch=Dk.bind(null,pt,i),[r.memoizedState,i]}function ld(i,r,u,p){return i={tag:i,create:r,destroy:u,deps:p,next:null},r=pt.updateQueue,r===null?(r={lastEffect:null,stores:null},pt.updateQueue=r,r.lastEffect=i.next=i):(u=r.lastEffect,u===null?r.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,r.lastEffect=i)),i}function v_(){return hi().memoizedState}function vf(i,r,u,p){var g=is();pt.flags|=i,g.memoizedState=ld(1|r,u,void 0,p===void 0?null:p)}function yf(i,r,u,p){var g=hi();p=p===void 0?null:p;var v=void 0;if(Pt!==null){var A=Pt.memoizedState;if(v=A.destroy,p!==null&&kv(p,A.deps)){g.memoizedState=ld(r,u,v,p);return}}pt.flags|=i,g.memoizedState=ld(1|r,u,v,p)}function y_(i,r){return vf(8390656,8,i,r)}function Dv(i,r){return yf(2048,8,i,r)}function w_(i,r){return yf(4,2,i,r)}function b_(i,r){return yf(4,4,i,r)}function __(i,r){if(typeof r=="function")return i=i(),r(i),function(){r(null)};if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function x_(i,r,u){return u=u!=null?u.concat([i]):null,yf(4,4,__.bind(null,r,i),u)}function Lv(){}function A_(i,r){var u=hi();r=r===void 0?null:r;var p=u.memoizedState;return p!==null&&r!==null&&kv(r,p[1])?p[0]:(u.memoizedState=[i,r],i)}function E_(i,r){var u=hi();r=r===void 0?null:r;var p=u.memoizedState;return p!==null&&r!==null&&kv(r,p[1])?p[0]:(i=i(),u.memoizedState=[i,r],i)}function S_(i,r,u){return(eo&21)===0?(i.baseState&&(i.baseState=!1,Pn=!0),i.memoizedState=u):(ki(u,r)||(u=tb(),pt.lanes|=u,to|=u,i.baseState=!0),r)}function Rk(i,r){var u=Ke;Ke=u!==0&&4>u?u:4,i(!0);var p=Cv.transition;Cv.transition={};try{i(!1),r()}finally{Ke=u,Cv.transition=p}}function C_(){return hi().memoizedState}function Pk(i,r,u){var p=Wr(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},k_(i))T_(r,u);else if(u=s_(i,r,u,p),u!==null){var g=yn();Di(u,i,p,g),I_(u,r,p)}}function Dk(i,r,u){var p=Wr(i),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(k_(i))T_(r,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,I=v(A,u);if(g.hasEagerState=!0,g.eagerState=I,ki(I,A)){var R=r.interleaved;R===null?(g.next=g,bv(r)):(g.next=R.next,R.next=g),r.interleaved=g;return}}catch{}finally{}u=s_(i,r,g,p),u!==null&&(g=yn(),Di(u,i,p,g),I_(u,r,p))}}function k_(i){var r=i.alternate;return i===pt||r!==null&&r===pt}function T_(i,r){rd=gf=!0;var u=i.pending;u===null?r.next=r:(r.next=u.next,u.next=r),i.pending=r}function I_(i,r,u){if((u&4194240)!==0){var p=r.lanes;p&=i.pendingLanes,u|=p,r.lanes=u,Ng(i,u)}}var wf={readContext:di,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},Lk={readContext:di,useCallback:function(i,r){return is().memoizedState=[i,r===void 0?null:r],i},useContext:di,useEffect:y_,useImperativeHandle:function(i,r,u){return u=u!=null?u.concat([i]):null,vf(4194308,4,__.bind(null,r,i),u)},useLayoutEffect:function(i,r){return vf(4194308,4,i,r)},useInsertionEffect:function(i,r){return vf(4,2,i,r)},useMemo:function(i,r){var u=is();return r=r===void 0?null:r,i=i(),u.memoizedState=[i,r],i},useReducer:function(i,r,u){var p=is();return r=u!==void 0?u(r):r,p.memoizedState=p.baseState=r,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:r},p.queue=i,i=i.dispatch=Pk.bind(null,pt,i),[p.memoizedState,i]},useRef:function(i){var r=is();return i={current:i},r.memoizedState=i},useState:g_,useDebugValue:Lv,useDeferredValue:function(i){return is().memoizedState=i},useTransition:function(){var i=g_(!1),r=i[0];return i=Rk.bind(null,i[1]),is().memoizedState=i,[r,i]},useMutableSource:function(){},useSyncExternalStore:function(i,r,u){var p=pt,g=is();if(ot){if(u===void 0)throw Error(t(407));u=u()}else{if(u=r(),Bt===null)throw Error(t(349));(eo&30)!==0||d_(p,r,u)}g.memoizedState=u;var v={value:u,getSnapshot:r};return g.queue=v,y_(p_.bind(null,p,v,i),[i]),p.flags|=2048,ld(9,h_.bind(null,p,v,u,r),void 0,null),u},useId:function(){var i=is(),r=Bt.identifierPrefix;if(ot){var u=Os,p=Ns;u=(p&~(1<<32-Ci(p)-1)).toString(32)+u,r=":"+r+"R"+u,u=ad++,0<u&&(r+="H"+u.toString(32)),r+=":"}else u=Ik++,r=":"+r+"r"+u.toString(32)+":";return i.memoizedState=r},unstable_isNewReconciler:!1},Mk={readContext:di,useCallback:A_,useContext:di,useEffect:Dv,useImperativeHandle:x_,useInsertionEffect:w_,useLayoutEffect:b_,useMemo:E_,useReducer:Rv,useRef:v_,useState:function(){return Rv(od)},useDebugValue:Lv,useDeferredValue:function(i){var r=hi();return S_(r,Pt.memoizedState,i)},useTransition:function(){var i=Rv(od)[0],r=hi().memoizedState;return[i,r]},useMutableSource:c_,useSyncExternalStore:u_,useId:C_,unstable_isNewReconciler:!1},Nk={readContext:di,useCallback:A_,useContext:di,useEffect:Dv,useImperativeHandle:x_,useInsertionEffect:w_,useLayoutEffect:b_,useMemo:E_,useReducer:Pv,useRef:v_,useState:function(){return Pv(od)},useDebugValue:Lv,useDeferredValue:function(i){var r=hi();return Pt===null?r.memoizedState=i:S_(r,Pt.memoizedState,i)},useTransition:function(){var i=Pv(od)[0],r=hi().memoizedState;return[i,r]},useMutableSource:c_,useSyncExternalStore:u_,useId:C_,unstable_isNewReconciler:!1};function Ii(i,r){if(i&&i.defaultProps){r=ee({},r),i=i.defaultProps;for(var u in i)r[u]===void 0&&(r[u]=i[u]);return r}return r}function Mv(i,r,u,p){r=i.memoizedState,u=u(p,r),u=u==null?r:ee({},r,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var bf={isMounted:function(i){return(i=i._reactInternals)?qa(i)===i:!1},enqueueSetState:function(i,r,u){i=i._reactInternals;var p=yn(),g=Wr(i),v=js(p,g);v.payload=r,u!=null&&(v.callback=u),r=Ur(i,v,g),r!==null&&(Di(r,i,g,p),hf(r,i,g))},enqueueReplaceState:function(i,r,u){i=i._reactInternals;var p=yn(),g=Wr(i),v=js(p,g);v.tag=1,v.payload=r,u!=null&&(v.callback=u),r=Ur(i,v,g),r!==null&&(Di(r,i,g,p),hf(r,i,g))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var u=yn(),p=Wr(i),g=js(u,p);g.tag=2,r!=null&&(g.callback=r),r=Ur(i,g,p),r!==null&&(Di(r,i,p,u),hf(r,i,p))}};function R_(i,r,u,p,g,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,v,A):r.prototype&&r.prototype.isPureReactComponent?!Ku(u,p)||!Ku(g,v):!0}function P_(i,r,u){var p=!1,g=jr,v=r.contextType;return typeof v=="object"&&v!==null?v=di(v):(g=Rn(r)?Xa:nn.current,p=r.contextTypes,v=(p=p!=null)?Hl(i,g):jr),r=new r(u,v),i.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=bf,i.stateNode=r,r._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=v),r}function D_(i,r,u,p){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,p),r.state!==i&&bf.enqueueReplaceState(r,r.state,null)}function Nv(i,r,u,p){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},_v(i);var v=r.contextType;typeof v=="object"&&v!==null?g.context=di(v):(v=Rn(r)?Xa:nn.current,g.context=Hl(i,v)),g.state=i.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Mv(i,r,v,u),g.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(r=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),r!==g.state&&bf.enqueueReplaceState(g,g.state,null),pf(i,u,g,p),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Yl(i,r){try{var u="",p=r;do u+=Le(p),p=p.return;while(p);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:r,stack:g,digest:null}}function Ov(i,r,u){return{value:i,source:null,stack:u??null,digest:r??null}}function Fv(i,r){try{console.error(r.value)}catch(u){setTimeout(function(){throw u})}}var Ok=typeof WeakMap=="function"?WeakMap:Map;function L_(i,r,u){u=js(-1,u),u.tag=3,u.payload={element:null};var p=r.value;return u.callback=function(){kf||(kf=!0,Jv=p),Fv(i,r)},u}function M_(i,r,u){u=js(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var g=r.value;u.payload=function(){return p(g)},u.callback=function(){Fv(i,r)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Fv(i,r),typeof p!="function"&&($r===null?$r=new Set([this]):$r.add(this));var A=r.stack;this.componentDidCatch(r.value,{componentStack:A!==null?A:""})}),u}function N_(i,r,u){var p=i.pingCache;if(p===null){p=i.pingCache=new Ok;var g=new Set;p.set(r,g)}else g=p.get(r),g===void 0&&(g=new Set,p.set(r,g));g.has(u)||(g.add(u),i=Yk.bind(null,i,r,u),r.then(i,i))}function O_(i){do{var r;if((r=i.tag===13)&&(r=i.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return i;i=i.return}while(i!==null);return null}function F_(i,r,u,p,g){return(i.mode&1)===0?(i===r?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(r=js(-1,1),r.tag=2,Ur(u,r,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var Fk=N.ReactCurrentOwner,Pn=!1;function vn(i,r,u,p){r.child=i===null?i_(r,null,u,p):Gl(r,i.child,u,p)}function j_(i,r,u,p,g){u=u.render;var v=r.ref;return Kl(r,g),p=Tv(i,r,u,p,v,g),u=Iv(),i!==null&&!Pn?(r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~g,zs(i,r,g)):(ot&&u&&dv(r),r.flags|=1,vn(i,r,p,g),r.child)}function z_(i,r,u,p,g){if(i===null){var v=u.type;return typeof v=="function"&&!ry(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(r.tag=15,r.type=v,B_(i,r,v,p,g)):(i=Lf(u.type,null,p,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,(i.lanes&g)===0){var A=v.memoizedProps;if(u=u.compare,u=u!==null?u:Ku,u(A,p)&&i.ref===r.ref)return zs(i,r,g)}return r.flags|=1,i=qr(v,p),i.ref=r.ref,i.return=r,r.child=i}function B_(i,r,u,p,g){if(i!==null){var v=i.memoizedProps;if(Ku(v,p)&&i.ref===r.ref)if(Pn=!1,r.pendingProps=p=v,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Pn=!0);else return r.lanes=i.lanes,zs(i,r,g)}return jv(i,r,u,p,g)}function U_(i,r,u){var p=r.pendingProps,g=p.children,v=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Jl,Wn),Wn|=u;else{if((u&1073741824)===0)return i=v!==null?v.baseLanes|u:u,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:i,cachePool:null,transitions:null},r.updateQueue=null,nt(Jl,Wn),Wn|=i,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:u,nt(Jl,Wn),Wn|=p}else v!==null?(p=v.baseLanes|u,r.memoizedState=null):p=u,nt(Jl,Wn),Wn|=p;return vn(i,r,g,u),r.child}function H_(i,r){var u=r.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(r.flags|=512,r.flags|=2097152)}function jv(i,r,u,p,g){var v=Rn(u)?Xa:nn.current;return v=Hl(r,v),Kl(r,g),u=Tv(i,r,u,p,v,g),p=Iv(),i!==null&&!Pn?(r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~g,zs(i,r,g)):(ot&&p&&dv(r),r.flags|=1,vn(i,r,u,g),r.child)}function $_(i,r,u,p,g){if(Rn(u)){var v=!0;sf(r)}else v=!1;if(Kl(r,g),r.stateNode===null)xf(i,r),P_(r,u,p),Nv(r,u,p,g),p=!0;else if(i===null){var A=r.stateNode,I=r.memoizedProps;A.props=I;var R=A.context,B=u.contextType;typeof B=="object"&&B!==null?B=di(B):(B=Rn(u)?Xa:nn.current,B=Hl(r,B));var q=u.getDerivedStateFromProps,K=typeof q=="function"||typeof A.getSnapshotBeforeUpdate=="function";K||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(I!==p||R!==B)&&D_(r,A,p,B),Br=!1;var W=r.memoizedState;A.state=W,pf(r,p,A,g),R=r.memoizedState,I!==p||W!==R||In.current||Br?(typeof q=="function"&&(Mv(r,u,q,p),R=r.memoizedState),(I=Br||R_(r,u,I,p,W,R,B))?(K||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(r.flags|=4194308)):(typeof A.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=R),A.props=p,A.state=R,A.context=B,p=I):(typeof A.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{A=r.stateNode,r_(i,r),I=r.memoizedProps,B=r.type===r.elementType?I:Ii(r.type,I),A.props=B,K=r.pendingProps,W=A.context,R=u.contextType,typeof R=="object"&&R!==null?R=di(R):(R=Rn(u)?Xa:nn.current,R=Hl(r,R));var re=u.getDerivedStateFromProps;(q=typeof re=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(I!==K||W!==R)&&D_(r,A,p,R),Br=!1,W=r.memoizedState,A.state=W,pf(r,p,A,g);var he=r.memoizedState;I!==K||W!==he||In.current||Br?(typeof re=="function"&&(Mv(r,u,re,p),he=r.memoizedState),(B=Br||R_(r,u,B,p,W,he,R)||!1)?(q||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(p,he,R),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(p,he,R)),typeof A.componentDidUpdate=="function"&&(r.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof A.componentDidUpdate!="function"||I===i.memoizedProps&&W===i.memoizedState||(r.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===i.memoizedProps&&W===i.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=he),A.props=p,A.state=he,A.context=R,p=B):(typeof A.componentDidUpdate!="function"||I===i.memoizedProps&&W===i.memoizedState||(r.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===i.memoizedProps&&W===i.memoizedState||(r.flags|=1024),p=!1)}return zv(i,r,u,p,v,g)}function zv(i,r,u,p,g,v){H_(i,r);var A=(r.flags&128)!==0;if(!p&&!A)return g&&Kb(r,u,!1),zs(i,r,v);p=r.stateNode,Fk.current=r;var I=A&&typeof u.getDerivedStateFromError!="function"?null:p.render();return r.flags|=1,i!==null&&A?(r.child=Gl(r,i.child,null,v),r.child=Gl(r,null,I,v)):vn(i,r,I,v),r.memoizedState=p.state,g&&Kb(r,u,!0),r.child}function V_(i){var r=i.stateNode;r.pendingContext?Gb(i,r.pendingContext,r.pendingContext!==r.context):r.context&&Gb(i,r.context,!1),xv(i,r.containerInfo)}function W_(i,r,u,p,g){return Wl(),mv(g),r.flags|=256,vn(i,r,u,p),r.child}var Bv={dehydrated:null,treeContext:null,retryLane:0};function Uv(i){return{baseLanes:i,cachePool:null,transitions:null}}function G_(i,r,u){var p=r.pendingProps,g=ht.current,v=!1,A=(r.flags&128)!==0,I;if((I=A)||(I=i!==null&&i.memoizedState===null?!1:(g&2)!==0),I?(v=!0,r.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),nt(ht,g&1),i===null)return fv(r),i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((r.mode&1)===0?r.lanes=1:i.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(A=p.children,i=p.fallback,v?(p=r.mode,v=r.child,A={mode:"hidden",children:A},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=A):v=Mf(A,p,0,null),i=ro(i,p,u,null),v.return=r,i.return=r,v.sibling=i,r.child=v,r.child.memoizedState=Uv(u),r.memoizedState=Bv,i):Hv(r,A));if(g=i.memoizedState,g!==null&&(I=g.dehydrated,I!==null))return jk(i,r,A,p,I,g,u);if(v){v=p.fallback,A=r.mode,g=i.child,I=g.sibling;var R={mode:"hidden",children:p.children};return(A&1)===0&&r.child!==g?(p=r.child,p.childLanes=0,p.pendingProps=R,r.deletions=null):(p=qr(g,R),p.subtreeFlags=g.subtreeFlags&14680064),I!==null?v=qr(I,v):(v=ro(v,A,u,null),v.flags|=2),v.return=r,p.return=r,p.sibling=v,r.child=p,p=v,v=r.child,A=i.child.memoizedState,A=A===null?Uv(u):{baseLanes:A.baseLanes|u,cachePool:null,transitions:A.transitions},v.memoizedState=A,v.childLanes=i.childLanes&~u,r.memoizedState=Bv,p}return v=i.child,i=v.sibling,p=qr(v,{mode:"visible",children:p.children}),(r.mode&1)===0&&(p.lanes=u),p.return=r,p.sibling=null,i!==null&&(u=r.deletions,u===null?(r.deletions=[i],r.flags|=16):u.push(i)),r.child=p,r.memoizedState=null,p}function Hv(i,r){return r=Mf({mode:"visible",children:r},i.mode,0,null),r.return=i,i.child=r}function _f(i,r,u,p){return p!==null&&mv(p),Gl(r,i.child,null,u),i=Hv(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function jk(i,r,u,p,g,v,A){if(u)return r.flags&256?(r.flags&=-257,p=Ov(Error(t(422))),_f(i,r,A,p)):r.memoizedState!==null?(r.child=i.child,r.flags|=128,null):(v=p.fallback,g=r.mode,p=Mf({mode:"visible",children:p.children},g,0,null),v=ro(v,g,A,null),v.flags|=2,p.return=r,v.return=r,p.sibling=v,r.child=p,(r.mode&1)!==0&&Gl(r,i.child,null,A),r.child.memoizedState=Uv(A),r.memoizedState=Bv,v);if((r.mode&1)===0)return _f(i,r,A,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var I=p.dgst;return p=I,v=Error(t(419)),p=Ov(v,p,void 0),_f(i,r,A,p)}if(I=(A&i.childLanes)!==0,Pn||I){if(p=Bt,p!==null){switch(A&-A){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|A))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Fs(i,g),Di(p,i,g,-1))}return sy(),p=Ov(Error(t(421))),_f(i,r,A,p)}return g.data==="$?"?(r.flags|=128,r.child=i.child,r=Qk.bind(null,i),g._reactRetry=r,null):(i=v.treeContext,Vn=Or(g.nextSibling),$n=r,ot=!0,Ti=null,i!==null&&(ci[ui++]=Ns,ci[ui++]=Os,ci[ui++]=Ya,Ns=i.id,Os=i.overflow,Ya=r),r=Hv(r,p.children),r.flags|=4096,r)}function q_(i,r,u){i.lanes|=r;var p=i.alternate;p!==null&&(p.lanes|=r),wv(i.return,r,u)}function $v(i,r,u,p,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=u,v.tailMode=g)}function K_(i,r,u){var p=r.pendingProps,g=p.revealOrder,v=p.tail;if(vn(i,r,p.children,u),p=ht.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&q_(i,u,r);else if(i.tag===19)q_(i,u,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(nt(ht,p),(r.mode&1)===0)r.memoizedState=null;else switch(g){case"forwards":for(u=r.child,g=null;u!==null;)i=u.alternate,i!==null&&ff(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=r.child,r.child=null):(g=u.sibling,u.sibling=null),$v(r,!1,g,u,v);break;case"backwards":for(u=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&ff(i)===null){r.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}$v(r,!0,u,null,v);break;case"together":$v(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function xf(i,r){(r.mode&1)===0&&i!==null&&(i.alternate=null,r.alternate=null,r.flags|=2)}function zs(i,r,u){if(i!==null&&(r.dependencies=i.dependencies),to|=r.lanes,(u&r.childLanes)===0)return null;if(i!==null&&r.child!==i.child)throw Error(t(153));if(r.child!==null){for(i=r.child,u=qr(i,i.pendingProps),r.child=u,u.return=r;i.sibling!==null;)i=i.sibling,u=u.sibling=qr(i,i.pendingProps),u.return=r;u.sibling=null}return r.child}function zk(i,r,u){switch(r.tag){case 3:V_(r),Wl();break;case 5:l_(r);break;case 1:Rn(r.type)&&sf(r);break;case 4:xv(r,r.stateNode.containerInfo);break;case 10:var p=r.type._context,g=r.memoizedProps.value;nt(uf,p._currentValue),p._currentValue=g;break;case 13:if(p=r.memoizedState,p!==null)return p.dehydrated!==null?(nt(ht,ht.current&1),r.flags|=128,null):(u&r.child.childLanes)!==0?G_(i,r,u):(nt(ht,ht.current&1),i=zs(i,r,u),i!==null?i.sibling:null);nt(ht,ht.current&1);break;case 19:if(p=(u&r.childLanes)!==0,(i.flags&128)!==0){if(p)return K_(i,r,u);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),nt(ht,ht.current),p)break;return null;case 22:case 23:return r.lanes=0,U_(i,r,u)}return zs(i,r,u)}var X_,Vv,Y_,Q_;X_=function(i,r){for(var u=r.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Vv=function(){},Y_=function(i,r,u,p){var g=i.memoizedProps;if(g!==p){i=r.stateNode,Za(ns.current);var v=null;switch(u){case"input":g=Tl(i,g),p=Tl(i,p),v=[];break;case"select":g=ee({},g,{value:void 0}),p=ee({},p,{value:void 0}),v=[];break;case"textarea":g=Iu(i,g),p=Iu(i,p),v=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=ef)}Va(u,p);var A;u=null;for(B in g)if(!p.hasOwnProperty(B)&&g.hasOwnProperty(B)&&g[B]!=null)if(B==="style"){var I=g[B];for(A in I)I.hasOwnProperty(A)&&(u||(u={}),u[A]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(s.hasOwnProperty(B)?v||(v=[]):(v=v||[]).push(B,null));for(B in p){var R=p[B];if(I=g!=null?g[B]:void 0,p.hasOwnProperty(B)&&R!==I&&(R!=null||I!=null))if(B==="style")if(I){for(A in I)!I.hasOwnProperty(A)||R&&R.hasOwnProperty(A)||(u||(u={}),u[A]="");for(A in R)R.hasOwnProperty(A)&&I[A]!==R[A]&&(u||(u={}),u[A]=R[A])}else u||(v||(v=[]),v.push(B,u)),u=R;else B==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,I=I?I.__html:void 0,R!=null&&I!==R&&(v=v||[]).push(B,R)):B==="children"?typeof R!="string"&&typeof R!="number"||(v=v||[]).push(B,""+R):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(s.hasOwnProperty(B)?(R!=null&&B==="onScroll"&&st("scroll",i),v||I===R||(v=[])):(v=v||[]).push(B,R))}u&&(v=v||[]).push("style",u);var B=v;(r.updateQueue=B)&&(r.flags|=4)}},Q_=function(i,r,u,p){u!==p&&(r.flags|=4)};function cd(i,r){if(!ot)switch(i.tailMode){case"hidden":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function rn(i){var r=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(r)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=p,i.childLanes=u,r}function Bk(i,r,u){var p=r.pendingProps;switch(hv(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(r),null;case 1:return Rn(r.type)&&nf(),rn(r),null;case 3:return p=r.stateNode,Xl(),rt(In),rt(nn),Sv(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(lf(r)?r.flags|=4:i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ti!==null&&(ty(Ti),Ti=null))),Vv(i,r),rn(r),null;case 5:Av(r);var g=Za(sd.current);if(u=r.type,i!==null&&r.stateNode!=null)Y_(i,r,u,p,g),i.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!p){if(r.stateNode===null)throw Error(t(166));return rn(r),null}if(i=Za(ns.current),lf(r)){p=r.stateNode,u=r.type;var v=r.memoizedProps;switch(p[ts]=r,p[Zu]=v,i=(r.mode&1)!==0,u){case"dialog":st("cancel",p),st("close",p);break;case"iframe":case"object":case"embed":st("load",p);break;case"video":case"audio":for(g=0;g<Yu.length;g++)st(Yu[g],p);break;case"source":st("error",p);break;case"img":case"image":case"link":st("error",p),st("load",p);break;case"details":st("toggle",p);break;case"input":ku(p,v),st("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},st("invalid",p);break;case"textarea":Dp(p,v),st("invalid",p)}Va(u,v),g=null;for(var A in v)if(v.hasOwnProperty(A)){var I=v[A];A==="children"?typeof I=="string"?p.textContent!==I&&(v.suppressHydrationWarning!==!0&&Zp(p.textContent,I,i),g=["children",I]):typeof I=="number"&&p.textContent!==""+I&&(v.suppressHydrationWarning!==!0&&Zp(p.textContent,I,i),g=["children",""+I]):s.hasOwnProperty(A)&&I!=null&&A==="onScroll"&&st("scroll",p)}switch(u){case"input":Rs(p),Il(p,v,!0);break;case"textarea":Rs(p),Ee(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=ef)}p=g,r.updateQueue=p,p!==null&&(r.flags|=4)}else{A=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=dt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=A.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=A.createElement(u,{is:p.is}):(i=A.createElement(u),u==="select"&&(A=i,p.multiple?A.multiple=!0:p.size&&(A.size=p.size))):i=A.createElementNS(i,u),i[ts]=r,i[Zu]=p,X_(i,r,!1,!1),r.stateNode=i;e:{switch(A=Wa(u,p),u){case"dialog":st("cancel",i),st("close",i),g=p;break;case"iframe":case"object":case"embed":st("load",i),g=p;break;case"video":case"audio":for(g=0;g<Yu.length;g++)st(Yu[g],i);g=p;break;case"source":st("error",i),g=p;break;case"img":case"image":case"link":st("error",i),st("load",i),g=p;break;case"details":st("toggle",i),g=p;break;case"input":ku(i,p),g=Tl(i,p),st("invalid",i);break;case"option":g=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},g=ee({},p,{value:void 0}),st("invalid",i);break;case"textarea":Dp(i,p),g=Iu(i,p),st("invalid",i);break;default:g=p}Va(u,g),I=g;for(v in I)if(I.hasOwnProperty(v)){var R=I[v];v==="style"?$a(i,R):v==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Ir(i,R)):v==="children"?typeof R=="string"?(u!=="textarea"||R!=="")&&li(i,R):typeof R=="number"&&li(i,""+R):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?R!=null&&v==="onScroll"&&st("scroll",i):R!=null&&O(i,v,R,A))}switch(u){case"input":Rs(i),Il(i,p,!1);break;case"textarea":Rs(i),Ee(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Fe(p.value));break;case"select":i.multiple=!!p.multiple,v=p.value,v!=null?Tr(i,!!p.multiple,v,!1):p.defaultValue!=null&&Tr(i,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=ef)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return rn(r),null;case 6:if(i&&r.stateNode!=null)Q_(i,r,i.memoizedProps,p);else{if(typeof p!="string"&&r.stateNode===null)throw Error(t(166));if(u=Za(sd.current),Za(ns.current),lf(r)){if(p=r.stateNode,u=r.memoizedProps,p[ts]=r,(v=p.nodeValue!==u)&&(i=$n,i!==null))switch(i.tag){case 3:Zp(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Zp(p.nodeValue,u,(i.mode&1)!==0)}v&&(r.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[ts]=r,r.stateNode=p}return rn(r),null;case 13:if(rt(ht),p=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&Vn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)e_(),Wl(),r.flags|=98560,v=!1;else if(v=lf(r),p!==null&&p.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[ts]=r}else Wl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;rn(r),v=!1}else Ti!==null&&(ty(Ti),Ti=null),v=!0;if(!v)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=u,r):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(r.child.flags|=8192,(r.mode&1)!==0&&(i===null||(ht.current&1)!==0?Dt===0&&(Dt=3):sy())),r.updateQueue!==null&&(r.flags|=4),rn(r),null);case 4:return Xl(),Vv(i,r),i===null&&Qu(r.stateNode.containerInfo),rn(r),null;case 10:return yv(r.type._context),rn(r),null;case 17:return Rn(r.type)&&nf(),rn(r),null;case 19:if(rt(ht),v=r.memoizedState,v===null)return rn(r),null;if(p=(r.flags&128)!==0,A=v.rendering,A===null)if(p)cd(v,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(A=ff(i),A!==null){for(r.flags|=128,cd(v,!1),p=A.updateQueue,p!==null&&(r.updateQueue=p,r.flags|=4),r.subtreeFlags=0,p=u,u=r.child;u!==null;)v=u,i=p,v.flags&=14680066,A=v.alternate,A===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,v.type=A.type,i=A.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return nt(ht,ht.current&1|2),r.child}i=i.sibling}v.tail!==null&&_t()>Zl&&(r.flags|=128,p=!0,cd(v,!1),r.lanes=4194304)}else{if(!p)if(i=ff(A),i!==null){if(r.flags|=128,p=!0,u=i.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),cd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!A.alternate&&!ot)return rn(r),null}else 2*_t()-v.renderingStartTime>Zl&&u!==1073741824&&(r.flags|=128,p=!0,cd(v,!1),r.lanes=4194304);v.isBackwards?(A.sibling=r.child,r.child=A):(u=v.last,u!==null?u.sibling=A:r.child=A,v.last=A)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=_t(),r.sibling=null,u=ht.current,nt(ht,p?u&1|2:u&1),r):(rn(r),null);case 22:case 23:return iy(),p=r.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(r.flags|=8192),p&&(r.mode&1)!==0?(Wn&1073741824)!==0&&(rn(r),r.subtreeFlags&6&&(r.flags|=8192)):rn(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function Uk(i,r){switch(hv(r),r.tag){case 1:return Rn(r.type)&&nf(),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Xl(),rt(In),rt(nn),Sv(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 5:return Av(r),null;case 13:if(rt(ht),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Wl()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return rt(ht),null;case 4:return Xl(),null;case 10:return yv(r.type._context),null;case 22:case 23:return iy(),null;case 24:return null;default:return null}}var Af=!1,an=!1,Hk=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Ql(i,r){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){wt(i,r,p)}else u.current=null}function Wv(i,r,u){try{u()}catch(p){wt(i,r,p)}}var J_=!1;function $k(i,r){if(iv=Hp,i=Rb(),Xg(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var A=0,I=-1,R=-1,B=0,q=0,K=i,W=null;t:for(;;){for(var re;K!==u||g!==0&&K.nodeType!==3||(I=A+g),K!==v||p!==0&&K.nodeType!==3||(R=A+p),K.nodeType===3&&(A+=K.nodeValue.length),(re=K.firstChild)!==null;)W=K,K=re;for(;;){if(K===i)break t;if(W===u&&++B===g&&(I=A),W===v&&++q===p&&(R=A),(re=K.nextSibling)!==null)break;K=W,W=K.parentNode}K=re}u=I===-1||R===-1?null:{start:I,end:R}}else u=null}u=u||{start:0,end:0}}else u=null;for(sv={focusedElem:i,selectionRange:u},Hp=!1,oe=r;oe!==null;)if(r=oe,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,oe=i;else for(;oe!==null;){r=oe;try{var he=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var fe=he.memoizedProps,xt=he.memoizedState,M=r.stateNode,D=M.getSnapshotBeforeUpdate(r.elementType===r.type?fe:Ii(r.type,fe),xt);M.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Q){wt(r,r.return,Q)}if(i=r.sibling,i!==null){i.return=r.return,oe=i;break}oe=r.return}return he=J_,J_=!1,he}function ud(i,r,u){var p=r.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&i)===i){var v=g.destroy;g.destroy=void 0,v!==void 0&&Wv(r,u,v)}g=g.next}while(g!==p)}}function Ef(i,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var u=r=r.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==r)}}function Gv(i){var r=i.ref;if(r!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof r=="function"?r(i):r.current=i}}function Z_(i){var r=i.alternate;r!==null&&(i.alternate=null,Z_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&(delete r[ts],delete r[Zu],delete r[lv],delete r[Sk],delete r[Ck])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function ex(i){return i.tag===5||i.tag===3||i.tag===4}function tx(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ex(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qv(i,r,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,r?u.nodeType===8?u.parentNode.insertBefore(i,r):u.insertBefore(i,r):(u.nodeType===8?(r=u.parentNode,r.insertBefore(i,u)):(r=u,r.appendChild(i)),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=ef));else if(p!==4&&(i=i.child,i!==null))for(qv(i,r,u),i=i.sibling;i!==null;)qv(i,r,u),i=i.sibling}function Kv(i,r,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,r?u.insertBefore(i,r):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Kv(i,r,u),i=i.sibling;i!==null;)Kv(i,r,u),i=i.sibling}var Kt=null,Ri=!1;function Hr(i,r,u){for(u=u.child;u!==null;)nx(i,r,u),u=u.sibling}function nx(i,r,u){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(Op,u)}catch{}switch(u.tag){case 5:an||Ql(u,r);case 6:var p=Kt,g=Ri;Kt=null,Hr(i,r,u),Kt=p,Ri=g,Kt!==null&&(Ri?(i=Kt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Kt.removeChild(u.stateNode));break;case 18:Kt!==null&&(Ri?(i=Kt,u=u.stateNode,i.nodeType===8?ov(i.parentNode,u):i.nodeType===1&&ov(i,u),Hu(i)):ov(Kt,u.stateNode));break;case 4:p=Kt,g=Ri,Kt=u.stateNode.containerInfo,Ri=!0,Hr(i,r,u),Kt=p,Ri=g;break;case 0:case 11:case 14:case 15:if(!an&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var v=g,A=v.destroy;v=v.tag,A!==void 0&&((v&2)!==0||(v&4)!==0)&&Wv(u,r,A),g=g.next}while(g!==p)}Hr(i,r,u);break;case 1:if(!an&&(Ql(u,r),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(I){wt(u,r,I)}Hr(i,r,u);break;case 21:Hr(i,r,u);break;case 22:u.mode&1?(an=(p=an)||u.memoizedState!==null,Hr(i,r,u),an=p):Hr(i,r,u);break;default:Hr(i,r,u)}}function ix(i){var r=i.updateQueue;if(r!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new Hk),r.forEach(function(p){var g=Jk.bind(null,i,p);u.has(p)||(u.add(p),p.then(g,g))})}}function Pi(i,r){var u=r.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var v=i,A=r,I=A;e:for(;I!==null;){switch(I.tag){case 5:Kt=I.stateNode,Ri=!1;break e;case 3:Kt=I.stateNode.containerInfo,Ri=!0;break e;case 4:Kt=I.stateNode.containerInfo,Ri=!0;break e}I=I.return}if(Kt===null)throw Error(t(160));nx(v,A,g),Kt=null,Ri=!1;var R=g.alternate;R!==null&&(R.return=null),g.return=null}catch(B){wt(g,r,B)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)sx(r,i),r=r.sibling}function sx(i,r){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Pi(r,i),ss(i),p&4){try{ud(3,i,i.return),Ef(3,i)}catch(fe){wt(i,i.return,fe)}try{ud(5,i,i.return)}catch(fe){wt(i,i.return,fe)}}break;case 1:Pi(r,i),ss(i),p&512&&u!==null&&Ql(u,u.return);break;case 5:if(Pi(r,i),ss(i),p&512&&u!==null&&Ql(u,u.return),i.flags&32){var g=i.stateNode;try{li(g,"")}catch(fe){wt(i,i.return,fe)}}if(p&4&&(g=i.stateNode,g!=null)){var v=i.memoizedProps,A=u!==null?u.memoizedProps:v,I=i.type,R=i.updateQueue;if(i.updateQueue=null,R!==null)try{I==="input"&&v.type==="radio"&&v.name!=null&&Tu(g,v),Wa(I,A);var B=Wa(I,v);for(A=0;A<R.length;A+=2){var q=R[A],K=R[A+1];q==="style"?$a(g,K):q==="dangerouslySetInnerHTML"?Ir(g,K):q==="children"?li(g,K):O(g,q,K,B)}switch(I){case"input":Ji(g,v);break;case"textarea":se(g,v);break;case"select":var W=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var re=v.value;re!=null?Tr(g,!!v.multiple,re,!1):W!==!!v.multiple&&(v.defaultValue!=null?Tr(g,!!v.multiple,v.defaultValue,!0):Tr(g,!!v.multiple,v.multiple?[]:"",!1))}g[Zu]=v}catch(fe){wt(i,i.return,fe)}}break;case 6:if(Pi(r,i),ss(i),p&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,v=i.memoizedProps;try{g.nodeValue=v}catch(fe){wt(i,i.return,fe)}}break;case 3:if(Pi(r,i),ss(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Hu(r.containerInfo)}catch(fe){wt(i,i.return,fe)}break;case 4:Pi(r,i),ss(i);break;case 13:Pi(r,i),ss(i),g=i.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Qv=_t())),p&4&&ix(i);break;case 22:if(q=u!==null&&u.memoizedState!==null,i.mode&1?(an=(B=an)||q,Pi(r,i),an=B):Pi(r,i),ss(i),p&8192){if(B=i.memoizedState!==null,(i.stateNode.isHidden=B)&&!q&&(i.mode&1)!==0)for(oe=i,q=i.child;q!==null;){for(K=oe=q;oe!==null;){switch(W=oe,re=W.child,W.tag){case 0:case 11:case 14:case 15:ud(4,W,W.return);break;case 1:Ql(W,W.return);var he=W.stateNode;if(typeof he.componentWillUnmount=="function"){p=W,u=W.return;try{r=p,he.props=r.memoizedProps,he.state=r.memoizedState,he.componentWillUnmount()}catch(fe){wt(p,u,fe)}}break;case 5:Ql(W,W.return);break;case 22:if(W.memoizedState!==null){ox(K);continue}}re!==null?(re.return=W,oe=re):ox(K)}q=q.sibling}e:for(q=null,K=i;;){if(K.tag===5){if(q===null){q=K;try{g=K.stateNode,B?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(I=K.stateNode,R=K.memoizedProps.style,A=R!=null&&R.hasOwnProperty("display")?R.display:null,I.style.display=Rl("display",A))}catch(fe){wt(i,i.return,fe)}}}else if(K.tag===6){if(q===null)try{K.stateNode.nodeValue=B?"":K.memoizedProps}catch(fe){wt(i,i.return,fe)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===i)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===i)break e;for(;K.sibling===null;){if(K.return===null||K.return===i)break e;q===K&&(q=null),K=K.return}q===K&&(q=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Pi(r,i),ss(i),p&4&&ix(i);break;case 21:break;default:Pi(r,i),ss(i)}}function ss(i){var r=i.flags;if(r&2){try{e:{for(var u=i.return;u!==null;){if(ex(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(li(g,""),p.flags&=-33);var v=tx(i);Kv(i,v,g);break;case 3:case 4:var A=p.stateNode.containerInfo,I=tx(i);qv(i,I,A);break;default:throw Error(t(161))}}catch(R){wt(i,i.return,R)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Vk(i,r,u){oe=i,rx(i)}function rx(i,r,u){for(var p=(i.mode&1)!==0;oe!==null;){var g=oe,v=g.child;if(g.tag===22&&p){var A=g.memoizedState!==null||Af;if(!A){var I=g.alternate,R=I!==null&&I.memoizedState!==null||an;I=Af;var B=an;if(Af=A,(an=R)&&!B)for(oe=g;oe!==null;)A=oe,R=A.child,A.tag===22&&A.memoizedState!==null?lx(g):R!==null?(R.return=A,oe=R):lx(g);for(;v!==null;)oe=v,rx(v),v=v.sibling;oe=g,Af=I,an=B}ax(i)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,oe=v):ax(i)}}function ax(i){for(;oe!==null;){var r=oe;if((r.flags&8772)!==0){var u=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:an||Ef(5,r);break;case 1:var p=r.stateNode;if(r.flags&4&&!an)if(u===null)p.componentDidMount();else{var g=r.elementType===r.type?u.memoizedProps:Ii(r.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=r.updateQueue;v!==null&&o_(r,v,p);break;case 3:var A=r.updateQueue;if(A!==null){if(u=null,r.child!==null)switch(r.child.tag){case 5:u=r.child.stateNode;break;case 1:u=r.child.stateNode}o_(r,A,u)}break;case 5:var I=r.stateNode;if(u===null&&r.flags&4){u=I;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&u.focus();break;case"img":R.src&&(u.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var B=r.alternate;if(B!==null){var q=B.memoizedState;if(q!==null){var K=q.dehydrated;K!==null&&Hu(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||r.flags&512&&Gv(r)}catch(W){wt(r,r.return,W)}}if(r===i){oe=null;break}if(u=r.sibling,u!==null){u.return=r.return,oe=u;break}oe=r.return}}function ox(i){for(;oe!==null;){var r=oe;if(r===i){oe=null;break}var u=r.sibling;if(u!==null){u.return=r.return,oe=u;break}oe=r.return}}function lx(i){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var u=r.return;try{Ef(4,r)}catch(R){wt(r,u,R)}break;case 1:var p=r.stateNode;if(typeof p.componentDidMount=="function"){var g=r.return;try{p.componentDidMount()}catch(R){wt(r,g,R)}}var v=r.return;try{Gv(r)}catch(R){wt(r,v,R)}break;case 5:var A=r.return;try{Gv(r)}catch(R){wt(r,A,R)}}}catch(R){wt(r,r.return,R)}if(r===i){oe=null;break}var I=r.sibling;if(I!==null){I.return=r.return,oe=I;break}oe=r.return}}var Wk=Math.ceil,Sf=N.ReactCurrentDispatcher,Xv=N.ReactCurrentOwner,pi=N.ReactCurrentBatchConfig,He=0,Bt=null,kt=null,Xt=0,Wn=0,Jl=Fr(0),Dt=0,dd=null,to=0,Cf=0,Yv=0,hd=null,Dn=null,Qv=0,Zl=1/0,Bs=null,kf=!1,Jv=null,$r=null,Tf=!1,Vr=null,If=0,pd=0,Zv=null,Rf=-1,Pf=0;function yn(){return(He&6)!==0?_t():Rf!==-1?Rf:Rf=_t()}function Wr(i){return(i.mode&1)===0?1:(He&2)!==0&&Xt!==0?Xt&-Xt:Tk.transition!==null?(Pf===0&&(Pf=tb()),Pf):(i=Ke,i!==0||(i=window.event,i=i===void 0?16:ub(i.type)),i)}function Di(i,r,u,p){if(50<pd)throw pd=0,Zv=null,Error(t(185));Fu(i,u,p),((He&2)===0||i!==Bt)&&(i===Bt&&((He&2)===0&&(Cf|=u),Dt===4&&Gr(i,Xt)),Ln(i,p),u===1&&He===0&&(r.mode&1)===0&&(Zl=_t()+500,rf&&zr()))}function Ln(i,r){var u=i.callbackNode;TC(i,r);var p=zp(i,i===Bt?Xt:0);if(p===0)u!==null&&J0(u),i.callbackNode=null,i.callbackPriority=0;else if(r=p&-p,i.callbackPriority!==r){if(u!=null&&J0(u),r===1)i.tag===0?kk(ux.bind(null,i)):Xb(ux.bind(null,i)),Ak(function(){(He&6)===0&&zr()}),u=null;else{switch(nb(p)){case 1:u=Dg;break;case 4:u=Z0;break;case 16:u=Np;break;case 536870912:u=eb;break;default:u=Np}u=yx(u,cx.bind(null,i))}i.callbackPriority=r,i.callbackNode=u}}function cx(i,r){if(Rf=-1,Pf=0,(He&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ec()&&i.callbackNode!==u)return null;var p=zp(i,i===Bt?Xt:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||r)r=Df(i,p);else{r=p;var g=He;He|=2;var v=hx();(Bt!==i||Xt!==r)&&(Bs=null,Zl=_t()+500,io(i,r));do try{Kk();break}catch(I){dx(i,I)}while(!0);vv(),Sf.current=v,He=g,kt!==null?r=0:(Bt=null,Xt=0,r=Dt)}if(r!==0){if(r===2&&(g=Lg(i),g!==0&&(p=g,r=ey(i,g))),r===1)throw u=dd,io(i,0),Gr(i,p),Ln(i,_t()),u;if(r===6)Gr(i,p);else{if(g=i.current.alternate,(p&30)===0&&!Gk(g)&&(r=Df(i,p),r===2&&(v=Lg(i),v!==0&&(p=v,r=ey(i,v))),r===1))throw u=dd,io(i,0),Gr(i,p),Ln(i,_t()),u;switch(i.finishedWork=g,i.finishedLanes=p,r){case 0:case 1:throw Error(t(345));case 2:so(i,Dn,Bs);break;case 3:if(Gr(i,p),(p&130023424)===p&&(r=Qv+500-_t(),10<r)){if(zp(i,0)!==0)break;if(g=i.suspendedLanes,(g&p)!==p){yn(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=av(so.bind(null,i,Dn,Bs),r);break}so(i,Dn,Bs);break;case 4:if(Gr(i,p),(p&4194240)===p)break;for(r=i.eventTimes,g=-1;0<p;){var A=31-Ci(p);v=1<<A,A=r[A],A>g&&(g=A),p&=~v}if(p=g,p=_t()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*Wk(p/1960))-p,10<p){i.timeoutHandle=av(so.bind(null,i,Dn,Bs),p);break}so(i,Dn,Bs);break;case 5:so(i,Dn,Bs);break;default:throw Error(t(329))}}}return Ln(i,_t()),i.callbackNode===u?cx.bind(null,i):null}function ey(i,r){var u=hd;return i.current.memoizedState.isDehydrated&&(io(i,r).flags|=256),i=Df(i,r),i!==2&&(r=Dn,Dn=u,r!==null&&ty(r)),i}function ty(i){Dn===null?Dn=i:Dn.push.apply(Dn,i)}function Gk(i){for(var r=i;;){if(r.flags&16384){var u=r.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],v=g.getSnapshot;g=g.value;try{if(!ki(v(),g))return!1}catch{return!1}}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Gr(i,r){for(r&=~Yv,r&=~Cf,i.suspendedLanes|=r,i.pingedLanes&=~r,i=i.expirationTimes;0<r;){var u=31-Ci(r),p=1<<u;i[u]=-1,r&=~p}}function ux(i){if((He&6)!==0)throw Error(t(327));ec();var r=zp(i,0);if((r&1)===0)return Ln(i,_t()),null;var u=Df(i,r);if(i.tag!==0&&u===2){var p=Lg(i);p!==0&&(r=p,u=ey(i,p))}if(u===1)throw u=dd,io(i,0),Gr(i,r),Ln(i,_t()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=r,so(i,Dn,Bs),Ln(i,_t()),null}function ny(i,r){var u=He;He|=1;try{return i(r)}finally{He=u,He===0&&(Zl=_t()+500,rf&&zr())}}function no(i){Vr!==null&&Vr.tag===0&&(He&6)===0&&ec();var r=He;He|=1;var u=pi.transition,p=Ke;try{if(pi.transition=null,Ke=1,i)return i()}finally{Ke=p,pi.transition=u,He=r,(He&6)===0&&zr()}}function iy(){Wn=Jl.current,rt(Jl)}function io(i,r){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,xk(u)),kt!==null)for(u=kt.return;u!==null;){var p=u;switch(hv(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&nf();break;case 3:Xl(),rt(In),rt(nn),Sv();break;case 5:Av(p);break;case 4:Xl();break;case 13:rt(ht);break;case 19:rt(ht);break;case 10:yv(p.type._context);break;case 22:case 23:iy()}u=u.return}if(Bt=i,kt=i=qr(i.current,null),Xt=Wn=r,Dt=0,dd=null,Yv=Cf=to=0,Dn=hd=null,Ja!==null){for(r=0;r<Ja.length;r++)if(u=Ja[r],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,v=u.pending;if(v!==null){var A=v.next;v.next=g,p.next=A}u.pending=p}Ja=null}return i}function dx(i,r){do{var u=kt;try{if(vv(),mf.current=wf,gf){for(var p=pt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}gf=!1}if(eo=0,zt=Pt=pt=null,rd=!1,ad=0,Xv.current=null,u===null||u.return===null){Dt=1,dd=r,kt=null;break}e:{var v=i,A=u.return,I=u,R=r;if(r=Xt,I.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var B=R,q=I,K=q.tag;if((q.mode&1)===0&&(K===0||K===11||K===15)){var W=q.alternate;W?(q.updateQueue=W.updateQueue,q.memoizedState=W.memoizedState,q.lanes=W.lanes):(q.updateQueue=null,q.memoizedState=null)}var re=O_(A);if(re!==null){re.flags&=-257,F_(re,A,I,v,r),re.mode&1&&N_(v,B,r),r=re,R=B;var he=r.updateQueue;if(he===null){var fe=new Set;fe.add(R),r.updateQueue=fe}else he.add(R);break e}else{if((r&1)===0){N_(v,B,r),sy();break e}R=Error(t(426))}}else if(ot&&I.mode&1){var xt=O_(A);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),F_(xt,A,I,v,r),mv(Yl(R,I));break e}}v=R=Yl(R,I),Dt!==4&&(Dt=2),hd===null?hd=[v]:hd.push(v),v=A;do{switch(v.tag){case 3:v.flags|=65536,r&=-r,v.lanes|=r;var M=L_(v,R,r);a_(v,M);break e;case 1:I=R;var D=v.type,z=v.stateNode;if((v.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&($r===null||!$r.has(z)))){v.flags|=65536,r&=-r,v.lanes|=r;var Q=M_(v,I,r);a_(v,Q);break e}}v=v.return}while(v!==null)}fx(u)}catch(me){r=me,kt===u&&u!==null&&(kt=u=u.return);continue}break}while(!0)}function hx(){var i=Sf.current;return Sf.current=wf,i===null?wf:i}function sy(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Bt===null||(to&268435455)===0&&(Cf&268435455)===0||Gr(Bt,Xt)}function Df(i,r){var u=He;He|=2;var p=hx();(Bt!==i||Xt!==r)&&(Bs=null,io(i,r));do try{qk();break}catch(g){dx(i,g)}while(!0);if(vv(),He=u,Sf.current=p,kt!==null)throw Error(t(261));return Bt=null,Xt=0,Dt}function qk(){for(;kt!==null;)px(kt)}function Kk(){for(;kt!==null&&!wC();)px(kt)}function px(i){var r=vx(i.alternate,i,Wn);i.memoizedProps=i.pendingProps,r===null?fx(i):kt=r,Xv.current=null}function fx(i){var r=i;do{var u=r.alternate;if(i=r.return,(r.flags&32768)===0){if(u=Bk(u,r,Wn),u!==null){kt=u;return}}else{if(u=Uk(u,r),u!==null){u.flags&=32767,kt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Dt=6,kt=null;return}}if(r=r.sibling,r!==null){kt=r;return}kt=r=i}while(r!==null);Dt===0&&(Dt=5)}function so(i,r,u){var p=Ke,g=pi.transition;try{pi.transition=null,Ke=1,Xk(i,r,u,p)}finally{pi.transition=g,Ke=p}return null}function Xk(i,r,u,p){do ec();while(Vr!==null);if((He&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=u.lanes|u.childLanes;if(IC(i,v),i===Bt&&(kt=Bt=null,Xt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Tf||(Tf=!0,yx(Np,function(){return ec(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=pi.transition,pi.transition=null;var A=Ke;Ke=1;var I=He;He|=4,Xv.current=null,$k(i,u),sx(u,i),mk(sv),Hp=!!iv,sv=iv=null,i.current=u,Vk(u),bC(),He=I,Ke=A,pi.transition=v}else i.current=u;if(Tf&&(Tf=!1,Vr=i,If=g),v=i.pendingLanes,v===0&&($r=null),AC(u.stateNode),Ln(i,_t()),r!==null)for(p=i.onRecoverableError,u=0;u<r.length;u++)g=r[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(kf)throw kf=!1,i=Jv,Jv=null,i;return(If&1)!==0&&i.tag!==0&&ec(),v=i.pendingLanes,(v&1)!==0?i===Zv?pd++:(pd=0,Zv=i):pd=0,zr(),null}function ec(){if(Vr!==null){var i=nb(If),r=pi.transition,u=Ke;try{if(pi.transition=null,Ke=16>i?16:i,Vr===null)var p=!1;else{if(i=Vr,Vr=null,If=0,(He&6)!==0)throw Error(t(331));var g=He;for(He|=4,oe=i.current;oe!==null;){var v=oe,A=v.child;if((oe.flags&16)!==0){var I=v.deletions;if(I!==null){for(var R=0;R<I.length;R++){var B=I[R];for(oe=B;oe!==null;){var q=oe;switch(q.tag){case 0:case 11:case 15:ud(8,q,v)}var K=q.child;if(K!==null)K.return=q,oe=K;else for(;oe!==null;){q=oe;var W=q.sibling,re=q.return;if(Z_(q),q===B){oe=null;break}if(W!==null){W.return=re,oe=W;break}oe=re}}}var he=v.alternate;if(he!==null){var fe=he.child;if(fe!==null){he.child=null;do{var xt=fe.sibling;fe.sibling=null,fe=xt}while(fe!==null)}}oe=v}}if((v.subtreeFlags&2064)!==0&&A!==null)A.return=v,oe=A;else e:for(;oe!==null;){if(v=oe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:ud(9,v,v.return)}var M=v.sibling;if(M!==null){M.return=v.return,oe=M;break e}oe=v.return}}var D=i.current;for(oe=D;oe!==null;){A=oe;var z=A.child;if((A.subtreeFlags&2064)!==0&&z!==null)z.return=A,oe=z;else e:for(A=D;oe!==null;){if(I=oe,(I.flags&2048)!==0)try{switch(I.tag){case 0:case 11:case 15:Ef(9,I)}}catch(me){wt(I,I.return,me)}if(I===A){oe=null;break e}var Q=I.sibling;if(Q!==null){Q.return=I.return,oe=Q;break e}oe=I.return}}if(He=g,zr(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(Op,i)}catch{}p=!0}return p}finally{Ke=u,pi.transition=r}}return!1}function mx(i,r,u){r=Yl(u,r),r=L_(i,r,1),i=Ur(i,r,1),r=yn(),i!==null&&(Fu(i,1,r),Ln(i,r))}function wt(i,r,u){if(i.tag===3)mx(i,i,u);else for(;r!==null;){if(r.tag===3){mx(r,i,u);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&($r===null||!$r.has(p))){i=Yl(u,i),i=M_(r,i,1),r=Ur(r,i,1),i=yn(),r!==null&&(Fu(r,1,i),Ln(r,i));break}}r=r.return}}function Yk(i,r,u){var p=i.pingCache;p!==null&&p.delete(r),r=yn(),i.pingedLanes|=i.suspendedLanes&u,Bt===i&&(Xt&u)===u&&(Dt===4||Dt===3&&(Xt&130023424)===Xt&&500>_t()-Qv?io(i,0):Yv|=u),Ln(i,r)}function gx(i,r){r===0&&((i.mode&1)===0?r=1:(r=jp,jp<<=1,(jp&130023424)===0&&(jp=4194304)));var u=yn();i=Fs(i,r),i!==null&&(Fu(i,r,u),Ln(i,u))}function Qk(i){var r=i.memoizedState,u=0;r!==null&&(u=r.retryLane),gx(i,u)}function Jk(i,r){var u=0;switch(i.tag){case 13:var p=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(r),gx(i,u)}var vx;vx=function(i,r,u){if(i!==null)if(i.memoizedProps!==r.pendingProps||In.current)Pn=!0;else{if((i.lanes&u)===0&&(r.flags&128)===0)return Pn=!1,zk(i,r,u);Pn=(i.flags&131072)!==0}else Pn=!1,ot&&(r.flags&1048576)!==0&&Yb(r,of,r.index);switch(r.lanes=0,r.tag){case 2:var p=r.type;xf(i,r),i=r.pendingProps;var g=Hl(r,nn.current);Kl(r,u),g=Tv(null,r,p,i,g,u);var v=Iv();return r.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Rn(p)?(v=!0,sf(r)):v=!1,r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,_v(r),g.updater=bf,r.stateNode=g,g._reactInternals=r,Nv(r,p,i,u),r=zv(null,r,p,!0,v,u)):(r.tag=0,ot&&v&&dv(r),vn(null,r,g,u),r=r.child),r;case 16:p=r.elementType;e:{switch(xf(i,r),i=r.pendingProps,g=p._init,p=g(p._payload),r.type=p,g=r.tag=eT(p),i=Ii(p,i),g){case 0:r=jv(null,r,p,i,u);break e;case 1:r=$_(null,r,p,i,u);break e;case 11:r=j_(null,r,p,i,u);break e;case 14:r=z_(null,r,p,Ii(p.type,i),u);break e}throw Error(t(306,p,""))}return r;case 0:return p=r.type,g=r.pendingProps,g=r.elementType===p?g:Ii(p,g),jv(i,r,p,g,u);case 1:return p=r.type,g=r.pendingProps,g=r.elementType===p?g:Ii(p,g),$_(i,r,p,g,u);case 3:e:{if(V_(r),i===null)throw Error(t(387));p=r.pendingProps,v=r.memoizedState,g=v.element,r_(i,r),pf(r,p,null,u);var A=r.memoizedState;if(p=A.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){g=Yl(Error(t(423)),r),r=W_(i,r,p,u,g);break e}else if(p!==g){g=Yl(Error(t(424)),r),r=W_(i,r,p,u,g);break e}else for(Vn=Or(r.stateNode.containerInfo.firstChild),$n=r,ot=!0,Ti=null,u=i_(r,null,p,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Wl(),p===g){r=zs(i,r,u);break e}vn(i,r,p,u)}r=r.child}return r;case 5:return l_(r),i===null&&fv(r),p=r.type,g=r.pendingProps,v=i!==null?i.memoizedProps:null,A=g.children,rv(p,g)?A=null:v!==null&&rv(p,v)&&(r.flags|=32),H_(i,r),vn(i,r,A,u),r.child;case 6:return i===null&&fv(r),null;case 13:return G_(i,r,u);case 4:return xv(r,r.stateNode.containerInfo),p=r.pendingProps,i===null?r.child=Gl(r,null,p,u):vn(i,r,p,u),r.child;case 11:return p=r.type,g=r.pendingProps,g=r.elementType===p?g:Ii(p,g),j_(i,r,p,g,u);case 7:return vn(i,r,r.pendingProps,u),r.child;case 8:return vn(i,r,r.pendingProps.children,u),r.child;case 12:return vn(i,r,r.pendingProps.children,u),r.child;case 10:e:{if(p=r.type._context,g=r.pendingProps,v=r.memoizedProps,A=g.value,nt(uf,p._currentValue),p._currentValue=A,v!==null)if(ki(v.value,A)){if(v.children===g.children&&!In.current){r=zs(i,r,u);break e}}else for(v=r.child,v!==null&&(v.return=r);v!==null;){var I=v.dependencies;if(I!==null){A=v.child;for(var R=I.firstContext;R!==null;){if(R.context===p){if(v.tag===1){R=js(-1,u&-u),R.tag=2;var B=v.updateQueue;if(B!==null){B=B.shared;var q=B.pending;q===null?R.next=R:(R.next=q.next,q.next=R),B.pending=R}}v.lanes|=u,R=v.alternate,R!==null&&(R.lanes|=u),wv(v.return,u,r),I.lanes|=u;break}R=R.next}}else if(v.tag===10)A=v.type===r.type?null:v.child;else if(v.tag===18){if(A=v.return,A===null)throw Error(t(341));A.lanes|=u,I=A.alternate,I!==null&&(I.lanes|=u),wv(A,u,r),A=v.sibling}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===r){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}vn(i,r,g.children,u),r=r.child}return r;case 9:return g=r.type,p=r.pendingProps.children,Kl(r,u),g=di(g),p=p(g),r.flags|=1,vn(i,r,p,u),r.child;case 14:return p=r.type,g=Ii(p,r.pendingProps),g=Ii(p.type,g),z_(i,r,p,g,u);case 15:return B_(i,r,r.type,r.pendingProps,u);case 17:return p=r.type,g=r.pendingProps,g=r.elementType===p?g:Ii(p,g),xf(i,r),r.tag=1,Rn(p)?(i=!0,sf(r)):i=!1,Kl(r,u),P_(r,p,g),Nv(r,p,g,u),zv(null,r,p,!0,i,u);case 19:return K_(i,r,u);case 22:return U_(i,r,u)}throw Error(t(156,r.tag))};function yx(i,r){return Q0(i,r)}function Zk(i,r,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(i,r,u,p){return new Zk(i,r,u,p)}function ry(i){return i=i.prototype,!(!i||!i.isReactComponent)}function eT(i){if(typeof i=="function")return ry(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ce)return 11;if(i===Pe)return 14}return 2}function qr(i,r){var u=i.alternate;return u===null?(u=fi(i.tag,r,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=r,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,r=i.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Lf(i,r,u,p,g,v){var A=2;if(p=i,typeof i=="function")ry(i)&&(A=1);else if(typeof i=="string")A=5;else e:switch(i){case j:return ro(u.children,g,v,r);case H:A=8,g|=8;break;case G:return i=fi(12,u,r,g|2),i.elementType=G,i.lanes=v,i;case be:return i=fi(13,u,r,g),i.elementType=be,i.lanes=v,i;case de:return i=fi(19,u,r,g),i.elementType=de,i.lanes=v,i;case ne:return Mf(u,g,v,r);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case X:A=10;break e;case Z:A=9;break e;case ce:A=11;break e;case Pe:A=14;break e;case J:A=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return r=fi(A,u,r,g),r.elementType=i,r.type=p,r.lanes=v,r}function ro(i,r,u,p){return i=fi(7,i,p,r),i.lanes=u,i}function Mf(i,r,u,p){return i=fi(22,i,p,r),i.elementType=ne,i.lanes=u,i.stateNode={isHidden:!1},i}function ay(i,r,u){return i=fi(6,i,null,r),i.lanes=u,i}function oy(i,r,u){return r=fi(4,i.children!==null?i.children:[],i.key,r),r.lanes=u,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}function tT(i,r,u,p,g){this.tag=r,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mg(0),this.expirationTimes=Mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mg(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function ly(i,r,u,p,g,v,A,I,R){return i=new tT(i,r,u,I,R),r===1?(r=1,v===!0&&(r|=8)):r=0,v=fi(3,null,null,r),i.current=v,v.stateNode=i,v.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(v),i}function nT(i,r,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:p==null?null:""+p,children:i,containerInfo:r,implementation:u}}function wx(i){if(!i)return jr;i=i._reactInternals;e:{if(qa(i)!==i||i.tag!==1)throw Error(t(170));var r=i;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Rn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Rn(u))return qb(i,u,r)}return r}function bx(i,r,u,p,g,v,A,I,R){return i=ly(u,p,!0,i,g,v,A,I,R),i.context=wx(null),u=i.current,p=yn(),g=Wr(u),v=js(p,g),v.callback=r??null,Ur(u,v,g),i.current.lanes=g,Fu(i,g,p),Ln(i,p),i}function Nf(i,r,u,p){var g=r.current,v=yn(),A=Wr(g);return u=wx(u),r.context===null?r.context=u:r.pendingContext=u,r=js(v,A),r.payload={element:i},p=p===void 0?null:p,p!==null&&(r.callback=p),i=Ur(g,r,A),i!==null&&(Di(i,g,A,v),hf(i,g,A)),A}function Of(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function _x(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<r?u:r}}function cy(i,r){_x(i,r),(i=i.alternate)&&_x(i,r)}function iT(){return null}var xx=typeof reportError=="function"?reportError:function(i){console.error(i)};function uy(i){this._internalRoot=i}Ff.prototype.render=uy.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(t(409));Nf(i,r,null,null)},Ff.prototype.unmount=uy.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;no(function(){Nf(null,i,null,null)}),r[Ls]=null}};function Ff(i){this._internalRoot=i}Ff.prototype.unstable_scheduleHydration=function(i){if(i){var r=rb();i={blockedOn:null,target:i,priority:r};for(var u=0;u<Lr.length&&r!==0&&r<Lr[u].priority;u++);Lr.splice(u,0,i),u===0&&lb(i)}};function dy(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function jf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Ax(){}function sT(i,r,u,p,g){if(g){if(typeof p=="function"){var v=p;p=function(){var B=Of(A);v.call(B)}}var A=bx(r,p,i,0,null,!1,!1,"",Ax);return i._reactRootContainer=A,i[Ls]=A.current,Qu(i.nodeType===8?i.parentNode:i),no(),A}for(;g=i.lastChild;)i.removeChild(g);if(typeof p=="function"){var I=p;p=function(){var B=Of(R);I.call(B)}}var R=ly(i,0,!1,null,null,!1,!1,"",Ax);return i._reactRootContainer=R,i[Ls]=R.current,Qu(i.nodeType===8?i.parentNode:i),no(function(){Nf(r,R,u,p)}),R}function zf(i,r,u,p,g){var v=u._reactRootContainer;if(v){var A=v;if(typeof g=="function"){var I=g;g=function(){var R=Of(A);I.call(R)}}Nf(r,A,i,g)}else A=sT(u,r,i,g,p);return Of(A)}ib=function(i){switch(i.tag){case 3:var r=i.stateNode;if(r.current.memoizedState.isDehydrated){var u=Ou(r.pendingLanes);u!==0&&(Ng(r,u|1),Ln(r,_t()),(He&6)===0&&(Zl=_t()+500,zr()))}break;case 13:no(function(){var p=Fs(i,1);if(p!==null){var g=yn();Di(p,i,1,g)}}),cy(i,1)}},Og=function(i){if(i.tag===13){var r=Fs(i,134217728);if(r!==null){var u=yn();Di(r,i,134217728,u)}cy(i,134217728)}},sb=function(i){if(i.tag===13){var r=Wr(i),u=Fs(i,r);if(u!==null){var p=yn();Di(u,i,r,p)}cy(i,r)}},rb=function(){return Ke},ab=function(i,r){var u=Ke;try{return Ke=i,r()}finally{Ke=u}},Tg=function(i,r,u){switch(r){case"input":if(Ji(i,u),r=u.name,u.type==="radio"&&r!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<u.length;r++){var p=u[r];if(p!==i&&p.form===i.form){var g=tf(p);if(!g)throw Error(t(90));Ps(p),Ji(p,g)}}}break;case"textarea":se(i,u);break;case"select":r=u.value,r!=null&&Tr(i,!!u.multiple,r,!1)}},V0=ny,W0=no;var rT={usingClientEntryPoint:!1,Events:[ed,Bl,tf,H0,$0,ny]},fd={findFiberByHostInstance:Ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aT={bundleType:fd.bundleType,version:fd.version,rendererPackageName:fd.rendererPackageName,rendererConfig:fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=X0(i),i===null?null:i.stateNode},findFiberByHostInstance:fd.findFiberByHostInstance||iT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bf.isDisabled&&Bf.supportsFiber)try{Op=Bf.inject(aT),es=Bf}catch{}}return Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rT,Mn.createPortal=function(i,r){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dy(r))throw Error(t(200));return nT(i,r,null,u)},Mn.createRoot=function(i,r){if(!dy(i))throw Error(t(299));var u=!1,p="",g=xx;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),r=ly(i,1,!1,null,null,u,!1,p,g),i[Ls]=r.current,Qu(i.nodeType===8?i.parentNode:i),new uy(r)},Mn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=X0(r),i=i===null?null:i.stateNode,i},Mn.flushSync=function(i){return no(i)},Mn.hydrate=function(i,r,u){if(!jf(r))throw Error(t(200));return zf(null,i,r,!0,u)},Mn.hydrateRoot=function(i,r,u){if(!dy(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,v="",A=xx;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(A=u.onRecoverableError)),r=bx(r,null,i,1,u??null,g,!1,v,A),i[Ls]=r.current,Qu(i),p)for(i=0;i<p.length;i++)u=p[i],g=u._getVersion,g=g(u._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[u,g]:r.mutableSourceEagerHydrationData.push(u,g);return new Ff(r)},Mn.render=function(i,r,u){if(!jf(r))throw Error(t(200));return zf(null,i,r,!1,u)},Mn.unmountComponentAtNode=function(i){if(!jf(i))throw Error(t(40));return i._reactRootContainer?(no(function(){zf(null,null,i,!1,function(){i._reactRootContainer=null,i[Ls]=null})}),!0):!1},Mn.unstable_batchedUpdates=ny,Mn.unstable_renderSubtreeIntoContainer=function(i,r,u,p){if(!jf(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return zf(i,r,u,!1,p)},Mn.version="18.3.1-next-f1338f8080-20240426",Mn}var Dx;function gT(){if(Dx)return my.exports;Dx=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),my.exports=mT(),my.exports}var Lx;function vT(){if(Lx)return Uf;Lx=1;var a=gT();return Uf.createRoot=a.createRoot,Uf.hydrateRoot=a.hydrateRoot,Uf}var yT=vT();const wT=mg(yT),bT=()=>{};var Mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=function(a){const e=[];let t=0;for(let n=0;n<a.length;n++){let s=a.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<a.length&&(a.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(a.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},_T=function(a){const e=[];let t=0,n=0;for(;t<a.length;){const s=a[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const o=a[t++];e[n++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=a[t++],l=a[t++],d=a[t++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|d&63)-65536;e[n++]=String.fromCharCode(55296+(h>>10)),e[n++]=String.fromCharCode(56320+(h&1023))}else{const o=a[t++],l=a[t++];e[n++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<a.length;s+=3){const o=a[s],l=s+1<a.length,d=l?a[s+1]:0,h=s+2<a.length,f=h?a[s+2]:0,m=o>>2,w=(o&3)<<4|d>>4;let y=(d&15)<<2|f>>6,_=f&63;h||(_=64,l||(y=64)),n.push(t[m],t[w],t[y],t[_])}return n.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(uE(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):_T(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<a.length;){const o=t[a.charAt(s++)],d=s<a.length?t[a.charAt(s)]:0;++s;const f=s<a.length?t[a.charAt(s)]:64;++s;const w=s<a.length?t[a.charAt(s)]:64;if(++s,o==null||d==null||f==null||w==null)throw new xT;const y=o<<2|d>>4;if(n.push(y),f!==64){const _=d<<4&240|f>>2;if(n.push(_),w!==64){const x=f<<6&192|w;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class xT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AT=function(a){const e=uE(a);return dE.encodeByteArray(e,!0)},hE=function(a){return AT(a).replace(/\./g,"")},pE=function(a){try{return dE.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=()=>ET().__FIREBASE_DEFAULTS__,CT=()=>{if(typeof process>"u"||typeof Mx>"u")return;const a=Mx.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},kT=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&pE(a[1]);return e&&JSON.parse(e)},d0=()=>{try{return bT()||ST()||CT()||kT()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},TT=a=>{var e,t;return(t=(e=d0())==null?void 0:e.emulatorHosts)==null?void 0:t[a]},fE=()=>{var a;return(a=d0())==null?void 0:a.config},mE=a=>{var e;return(e=d0())==null?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function RT(a){return(await fetch(a,{credentials:"include"})).ok}const Fd={};function PT(){const a={prod:[],emulator:[]};for(const e of Object.keys(Fd))Fd[e]?a.emulator.push(e):a.prod.push(e);return a}function DT(a){let e=document.getElementById(a),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),t=!0),{created:t,element:e}}let Nx=!1;function LT(a,e){if(typeof window>"u"||typeof document>"u"||!gg(window.location.host)||Fd[a]===e||Fd[a]||Nx)return;Fd[a]=e;function t(y){return`__firebase__banner__${y}`}const n="__firebase__banner",o=PT().prod.length>0;function l(){const y=document.getElementById(n);y&&y.remove()}function d(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function h(y,_){y.setAttribute("width","24"),y.setAttribute("id",_),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Nx=!0,l()},y}function m(y,_){y.setAttribute("id",_),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function w(){const y=DT(n),_=t("text"),x=document.getElementById(_)||document.createElement("span"),C=t("learnmore"),k=document.getElementById(C)||document.createElement("a"),T=t("preprendIcon"),P=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const O=y.element;d(O),m(k,C);const N=f();h(P,T),O.append(P,x,k,N),document.body.appendChild(O)}o?(x.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function NT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OT(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function FT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jT(){const a=Tn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function zT(){try{return typeof indexedDB=="object"}catch{return!1}}function BT(){return new Promise((a,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),a(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="FirebaseError";class za extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=UT,Object.setPrototypeOf(this,za.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xp.prototype.create)}}class xp{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?HT(o,n):"Error",d=`${this.serviceName}: ${l} (${s}).`;return new za(s,d,n)}}function HT(a,e){return a.replace($T,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const $T=/\{\$([^}]+)}/g;function VT(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function xu(a,e){if(a===e)return!0;const t=Object.keys(a),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const o=a[s],l=e[s];if(Ox(o)&&Ox(l)){if(!xu(o,l))return!1}else if(o!==l)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function Ox(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(a){const e=[];for(const[t,n]of Object.entries(a))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function WT(a,e){const t=new GT(a,e);return t.subscribe.bind(t)}class GT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");qT(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=yy),s.error===void 0&&(s.error=yy),s.complete===void 0&&(s.complete=yy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qT(a,e){if(typeof a!="object"||a===null)return!1;for(const t of e)if(t in a&&typeof a[t]=="function")return!0;return!1}function yy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(a){return a&&a._delegate?a._delegate:a}class Au{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new IT;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YT(e))try{this.getOrInitializeService({instanceIdentifier:ao})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});n.resolve(o)}catch{}}}}clearInstance(e=ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ao){return this.instances.has(e)}getOptions(e=ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);n===d&&l.resolve(s)}return s}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const o=this.instances.get(n);return o&&e(o,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:XT(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ao){return this.component?this.component.multipleInstances?e:ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XT(a){return a===ao?void 0:a}function YT(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new KT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(et||(et={}));const JT={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},ZT=et.INFO,eI={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},tI=(a,e,...t)=>{if(e<a.logLevel)return;const n=new Date().toISOString(),s=eI[e];if(s)console[s](`[${n}]  ${a.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gE{constructor(e){this.name=e,this._logLevel=ZT,this._logHandler=tI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const nI=(a,e)=>e.some(t=>a instanceof t);let Fx,jx;function iI(){return Fx||(Fx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sI(){return jx||(jx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vE=new WeakMap,Fy=new WeakMap,yE=new WeakMap,wy=new WeakMap,h0=new WeakMap;function rI(a){const e=new Promise((t,n)=>{const s=()=>{a.removeEventListener("success",o),a.removeEventListener("error",l)},o=()=>{t(Da(a.result)),s()},l=()=>{n(a.error),s()};a.addEventListener("success",o),a.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&vE.set(t,a)}).catch(()=>{}),h0.set(e,a),e}function aI(a){if(Fy.has(a))return;const e=new Promise((t,n)=>{const s=()=>{a.removeEventListener("complete",o),a.removeEventListener("error",l),a.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{n(a.error||new DOMException("AbortError","AbortError")),s()};a.addEventListener("complete",o),a.addEventListener("error",l),a.addEventListener("abort",l)});Fy.set(a,e)}let jy={get(a,e,t){if(a instanceof IDBTransaction){if(e==="done")return Fy.get(a);if(e==="objectStoreNames")return a.objectStoreNames||yE.get(a);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Da(a[e])},set(a,e,t){return a[e]=t,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function oI(a){jy=a(jy)}function lI(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=a.call(by(this),e,...t);return yE.set(n,e.sort?e.sort():[e]),Da(n)}:sI().includes(a)?function(...e){return a.apply(by(this),e),Da(vE.get(this))}:function(...e){return Da(a.apply(by(this),e))}}function cI(a){return typeof a=="function"?lI(a):(a instanceof IDBTransaction&&aI(a),nI(a,iI())?new Proxy(a,jy):a)}function Da(a){if(a instanceof IDBRequest)return rI(a);if(wy.has(a))return wy.get(a);const e=cI(a);return e!==a&&(wy.set(a,e),h0.set(e,a)),e}const by=a=>h0.get(a);function uI(a,e,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const l=indexedDB.open(a,e),d=Da(l);return n&&l.addEventListener("upgradeneeded",h=>{n(Da(l.result),h.oldVersion,h.newVersion,Da(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const dI=["get","getKey","getAll","getAllKeys","count"],hI=["put","add","delete","clear"],_y=new Map;function zx(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(_y.get(e))return _y.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=hI.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||dI.includes(t)))return;const o=async function(l,...d){const h=this.transaction(l,s?"readwrite":"readonly");let f=h.store;return n&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),s&&h.done]))[0]};return _y.set(e,o),o}oI(a=>({...a,get:(e,t,n)=>zx(e,t)||a.get(e,t,n),has:(e,t)=>!!zx(e,t)||a.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fI(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function fI(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zy="@firebase/app",Bx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new gE("@firebase/app"),mI="@firebase/app-compat",gI="@firebase/analytics-compat",vI="@firebase/analytics",yI="@firebase/app-check-compat",wI="@firebase/app-check",bI="@firebase/auth",_I="@firebase/auth-compat",xI="@firebase/database",AI="@firebase/data-connect",EI="@firebase/database-compat",SI="@firebase/functions",CI="@firebase/functions-compat",kI="@firebase/installations",TI="@firebase/installations-compat",II="@firebase/messaging",RI="@firebase/messaging-compat",PI="@firebase/performance",DI="@firebase/performance-compat",LI="@firebase/remote-config",MI="@firebase/remote-config-compat",NI="@firebase/storage",OI="@firebase/storage-compat",FI="@firebase/firestore",jI="@firebase/ai",zI="@firebase/firestore-compat",BI="firebase",UI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="[DEFAULT]",HI={[zy]:"fire-core",[mI]:"fire-core-compat",[vI]:"fire-analytics",[gI]:"fire-analytics-compat",[wI]:"fire-app-check",[yI]:"fire-app-check-compat",[bI]:"fire-auth",[_I]:"fire-auth-compat",[xI]:"fire-rtdb",[AI]:"fire-data-connect",[EI]:"fire-rtdb-compat",[SI]:"fire-fn",[CI]:"fire-fn-compat",[kI]:"fire-iid",[TI]:"fire-iid-compat",[II]:"fire-fcm",[RI]:"fire-fcm-compat",[PI]:"fire-perf",[DI]:"fire-perf-compat",[LI]:"fire-rc",[MI]:"fire-rc-compat",[NI]:"fire-gcs",[OI]:"fire-gcs-compat",[FI]:"fire-fst",[zI]:"fire-fst-compat",[jI]:"fire-vertex","fire-js":"fire-js",[BI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=new Map,$I=new Map,Uy=new Map;function Ux(a,e){try{a.container.addComponent(e)}catch(t){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,t)}}function Hd(a){const e=a.name;if(Uy.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;Uy.set(e,a);for(const t of Dm.values())Ux(t,a);for(const t of $I.values())Ux(t,a);return!0}function wE(a,e){const t=a.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),a.container.getProvider(e)}function Cs(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},La=new xp("app","Firebase",VI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Au("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw La.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=UI;function bE(a,e={}){let t=a;typeof e!="object"&&(e={name:e});const n={name:By,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw La.create("bad-app-name",{appName:String(s)});if(t||(t=fE()),!t)throw La.create("no-options");const o=Dm.get(s);if(o){if(xu(t,o.options)&&xu(n,o.config))return o;throw La.create("duplicate-app",{appName:s})}const l=new QT(s);for(const h of Uy.values())l.addComponent(h);const d=new WI(t,n,l);return Dm.set(s,d),d}function GI(a=By){const e=Dm.get(a);if(!e&&a===By&&fE())return bE();if(!e)throw La.create("no-app",{appName:a});return e}function dc(a,e,t){let n=HI[a]??a;t&&(n+=`-${t}`);const s=n.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${n}" with version "${e}":`];s&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(l.join(" "));return}Hd(new Au(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="firebase-heartbeat-database",KI=1,$d="firebase-heartbeat-store";let xy=null;function _E(){return xy||(xy=uI(qI,KI,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore($d)}catch(t){console.warn(t)}}}}).catch(a=>{throw La.create("idb-open",{originalErrorMessage:a.message})})),xy}async function XI(a){try{const t=(await _E()).transaction($d),n=await t.objectStore($d).get(xE(a));return await t.done,n}catch(e){if(e instanceof za)Ar.warn(e.message);else{const t=La.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(t.message)}}}async function Hx(a,e){try{const n=(await _E()).transaction($d,"readwrite");await n.objectStore($d).put(e,xE(a)),await n.done}catch(t){if(t instanceof za)Ar.warn(t.message);else{const n=La.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ar.warn(n.message)}}}function xE(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=1024,QI=30;class JI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new eR(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=$x();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>QI){const l=tR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ar.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$x(),{heartbeatsToSend:n,unsentEntries:s}=ZI(this._heartbeatsCache.heartbeats),o=hE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ar.warn(t),""}}}function $x(){return new Date().toISOString().substring(0,10)}function ZI(a,e=YI){const t=[];let n=a.slice();for(const s of a){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Vx(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Vx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class eR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zT()?BT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await XI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Hx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Vx(a){return hE(JSON.stringify({version:2,heartbeats:a})).length}function tR(a){if(a.length===0)return-1;let e=0,t=a[0].date;for(let n=1;n<a.length;n++)a[n].date<t&&(t=a[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(a){Hd(new Au("platform-logger",e=>new pI(e),"PRIVATE")),Hd(new Au("heartbeat",e=>new JI(e),"PRIVATE")),dc(zy,Bx,a),dc(zy,Bx,"esm2020"),dc("fire-js","")}nR("");var iR="firebase",sR="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dc(iR,sR,"app");function AE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rR=AE,EE=new xp("auth","Firebase",AE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=new gE("@firebase/auth");function aR(a,...e){Lm.logLevel<=et.WARN&&Lm.warn(`Auth (${Ep}): ${a}`,...e)}function Xf(a,...e){Lm.logLevel<=et.ERROR&&Lm.error(`Auth (${Ep}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(a,...e){throw f0(a,...e)}function Xi(a,...e){return f0(a,...e)}function p0(a,e,t){const n={...rR(),[e]:t};return new xp("auth","Firebase",n).create(e,{appName:a.name})}function wl(a){return p0(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oR(a,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ts(a,"argument-error"),p0(a,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function f0(a,...e){if(typeof a!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=a.name),a._errorFactory.create(t,...n)}return EE.create(a,...e)}function Te(a,e,...t){if(!a)throw f0(e,...t)}function wr(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Xf(e),new Error(e)}function Er(a,e){a||wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.href)||""}function lR(){return Wx()==="http:"||Wx()==="https:"}function Wx(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lR()||OT()||"connection"in navigator)?navigator.onLine:!0}function uR(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.shortDelay=e,this.longDelay=t,Er(t>e,"Short delay should be less than long delay!"),this.isMobile=MT()||FT()}get(){return cR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(a,e){Er(a.emulator,"Emulator should always be set here");const{url:t}=a.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pR=new Sp(3e4,6e4);function g0(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function Cu(a,e,t,n,s={}){return CE(a,s,async()=>{let o={},l={};n&&(e==="GET"?l=n:o={body:JSON.stringify(n)});const d=Ap({key:a.config.apiKey,...l}).slice(1),h=await a._getAdditionalHeaders();h["Content-Type"]="application/json",a.languageCode&&(h["X-Firebase-Locale"]=a.languageCode);const f={method:e,headers:h,...o};return NT()||(f.referrerPolicy="no-referrer"),a.emulatorConfig&&gg(a.emulatorConfig.host)&&(f.credentials="include"),SE.fetch()(await kE(a,a.config.apiHost,t,d),f)})}async function CE(a,e,t){a._canInitEmulator=!1;const n={...dR,...e};try{const s=new mR(a),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Hf(a,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const d=o.ok?l.errorMessage:l.error.message,[h,f]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hf(a,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Hf(a,"email-already-in-use",l);if(h==="USER_DISABLED")throw Hf(a,"user-disabled",l);const m=n[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw p0(a,m,f);Ts(a,m)}}catch(s){if(s instanceof za)throw s;Ts(a,"network-request-failed",{message:String(s)})}}async function fR(a,e,t,n,s={}){const o=await Cu(a,e,t,n,s);return"mfaPendingCredential"in o&&Ts(a,"multi-factor-auth-required",{_serverResponse:o}),o}async function kE(a,e,t,n){const s=`${e}${t}?${n}`,o=a,l=o.config.emulator?m0(a.config,s):`${a.config.apiScheme}://${s}`;return hR.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class mR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Xi(this.auth,"network-request-failed")),pR.get())})}}function Hf(a,e,t){const n={appName:a.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=Xi(a,e,n);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(a,e){return Cu(a,"POST","/v1/accounts:delete",e)}async function Mm(a,e){return Cu(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vR(a,e=!1){const t=Ba(a),n=await t.getIdToken(e),s=v0(n);Te(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:n,authTime:jd(Ay(s.auth_time)),issuedAtTime:jd(Ay(s.iat)),expirationTime:jd(Ay(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ay(a){return Number(a)*1e3}function v0(a){const[e,t,n]=a.split(".");if(e===void 0||t===void 0||n===void 0)return Xf("JWT malformed, contained fewer than 3 sections"),null;try{const s=pE(t);return s?JSON.parse(s):(Xf("Failed to decode base64 JWT payload"),null)}catch(s){return Xf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Gx(a){const e=v0(a);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(a,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof za&&yR(n)&&a.auth.currentUser===a&&await a.auth.signOut(),n}}function yR({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jd(this.lastLoginAt),this.creationTime=jd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(a){var w;const e=a.auth,t=await a.getIdToken(),n=await Vd(a,Mm(e,{idToken:t}));Te(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];a._notifyReloadListener(s);const o=(w=s.providerUserInfo)!=null&&w.length?TE(s.providerUserInfo):[],l=_R(a.providerData,o),d=a.isAnonymous,h=!(a.email&&s.passwordHash)&&!(l!=null&&l.length),f=d?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new $y(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(a,m)}async function bR(a){const e=Ba(a);await Nm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _R(a,e){return[...a.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function TE(a){return a.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(a,e){const t=await CE(a,{},async()=>{const n=Ap({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=a.config,l=await kE(a,s,"/v1/token",`key=${o}`),d=await a._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:n};return a.emulatorConfig&&gg(a.emulatorConfig.host)&&(h.credentials="include"),SE.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AR(a,e){return Cu(a,"POST","/v2/accounts:revokeToken",g0(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=Gx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:o}=await xR(e,t);this.updateTokensAndExpiration(n,s,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:o}=t,l=new hc;return n&&(Te(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),s&&(Te(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Te(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hc,this.toJSON())}_performRefresh(){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(a,e){Te(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class qi{constructor({uid:e,auth:t,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new wR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $y(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Vd(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vR(this,e)}reload(){return bR(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Nm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cs(this.auth.app))return Promise.reject(wl(this.auth));const e=await this.getIdToken();return await Vd(this,gR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:w,emailVerified:y,isAnonymous:_,providerData:x,stsTokenManager:C}=t;Te(w&&C,e,"internal-error");const k=hc.fromJSON(this.name,C);Te(typeof w=="string",e,"internal-error"),Xr(n,e.name),Xr(s,e.name),Te(typeof y=="boolean",e,"internal-error"),Te(typeof _=="boolean",e,"internal-error"),Xr(o,e.name),Xr(l,e.name),Xr(d,e.name),Xr(h,e.name),Xr(f,e.name),Xr(m,e.name);const T=new qi({uid:w,auth:e,email:s,emailVerified:y,displayName:n,isAnonymous:_,photoURL:l,phoneNumber:o,tenantId:d,stsTokenManager:k,createdAt:f,lastLoginAt:m});return x&&Array.isArray(x)&&(T.providerData=x.map(P=>({...P}))),h&&(T._redirectEventId=h),T}static async _fromIdTokenResponse(e,t,n=!1){const s=new hc;s.updateFromServerResponse(t);const o=new qi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Nm(o),o}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];Te(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?TE(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),d=new hc;d.updateFromIdToken(n);const h=new qi({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new $y(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new Map;function br(a){Er(a instanceof Function,"Expected a class definition");let e=qx.get(a);return e?(Er(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,qx.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IE.type="NONE";const Kx=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(a,e,t){return`firebase:${a}:${e}:${t}`}class pc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:o}=this.auth;this.fullUserKey=Yf(this.userKey,s.apiKey,o),this.fullPersistenceKey=Yf("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Mm(this.auth,{idToken:e}).catch(()=>{});return t?qi._fromGetAccountInfoResponse(this.auth,t,e):null}return qi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new pc(br(Kx),e,n);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||br(Kx);const l=Yf(n,e.config.apiKey,e.name);let d=null;for(const f of t)try{const m=await f._get(l);if(m){let w;if(typeof m=="string"){const y=await Mm(e,{idToken:m}).catch(()=>{});if(!y)break;w=await qi._fromGetAccountInfoResponse(e,y,m)}else w=qi._fromJSON(e,m);f!==o&&(d=w),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new pc(o,e,n):(o=h[0],d&&await o._set(l,d.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new pc(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NE(e))return"Blackberry";if(OE(e))return"Webos";if(PE(e))return"Safari";if((e.includes("chrome/")||DE(e))&&!e.includes("edge/"))return"Chrome";if(ME(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=a.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function RE(a=Tn()){return/firefox\//i.test(a)}function PE(a=Tn()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DE(a=Tn()){return/crios\//i.test(a)}function LE(a=Tn()){return/iemobile/i.test(a)}function ME(a=Tn()){return/android/i.test(a)}function NE(a=Tn()){return/blackberry/i.test(a)}function OE(a=Tn()){return/webos/i.test(a)}function y0(a=Tn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function ER(a=Tn()){var e;return y0(a)&&!!((e=window.navigator)!=null&&e.standalone)}function SR(){return jT()&&document.documentMode===10}function FE(a=Tn()){return y0(a)||ME(a)||OE(a)||NE(a)||/windows phone/i.test(a)||LE(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(a,e=[]){let t;switch(a){case"Browser":t=Xx(Tn());break;case"Worker":t=`${Xx(Tn())}-${a}`;break;default:t=a}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ep}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((l,d)=>{try{const h=e(o);l(h)}catch(h){d(h)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(a,e={}){return Cu(a,"GET","/v2/passwordPolicy",g0(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=6;class IR{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??TR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yx(this),this.idTokenSubscription=new Yx(this),this.beforeStateQueue=new CR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue(async()=>{var n,s,o;if(!this._deleted&&(this.persistenceManager=await pc.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mm(this,{idToken:e}),n=await qi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Cs(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,d=n==null?void 0:n._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===d)&&(h!=null&&h.user)&&(n=h.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(l){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nm(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cs(this.app))return Promise.reject(wl(this));const t=e?Ba(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cs(this.app)?Promise.reject(wl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cs(this.app)?Promise.reject(wl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kR(this),t=new IR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xp("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await AR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&br(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await pc.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(d,this,"internal-error"),d.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,n,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Cs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&aR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vg(a){return Ba(a)}class Yx{constructor(e){this.auth=e,this.observer=null,this.addObserver=WT(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PR(a){w0=a}function DR(a){return w0.loadJS(a)}function LR(){return w0.gapiScript}function MR(a){return`__${a}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(a,e){const t=wE(a,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(xu(o,e??{}))return s;Ts(s,"already-initialized")}return t.initialize({options:e})}function OR(a,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(br);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function FR(a,e,t){const n=vg(a);Te(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,o=zE(e),{host:l,port:d}=jR(e),h=d===null?"":`:${d}`,f={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Te(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Te(xu(f,n.config.emulator)&&xu(m,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=f,n.emulatorConfig=m,n.settings.appVerificationDisabledForTesting=!0,gg(l)?(RT(`${o}//${l}${h}`),LT("Auth",!0)):zR()}function zE(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function jR(a){const e=zE(a),t=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const o=s[1];return{host:o,port:Qx(n.substr(o.length+1))}}else{const[o,l]=n.split(":");return{host:o,port:Qx(l)}}}function Qx(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function zR(){function a(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wr("not implemented")}_getIdTokenResponse(e){return wr("not implemented")}_linkToIdToken(e,t){return wr("not implemented")}_getReauthenticationResolver(e){return wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(a,e){return fR(a,"POST","/v1/accounts:signInWithIdp",g0(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="http://localhost";class bl extends BE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ts("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...o}=t;if(!n||!s)return null;const l=new bl(n,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return fc(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,fc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fc(e,t)}buildRequest(){const e={requestUri:BR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ap(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends b0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Cp{constructor(){super("facebook.com")}static credential(e){return bl._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Cp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bl._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return vr.credential(t,n)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Cp{constructor(){super("github.com")}static credential(e){return bl._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.GITHUB_SIGN_IN_METHOD="github.com";Zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Cp{constructor(){super("twitter.com")}static credential(e,t){return bl._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ea.credential(t,n)}catch{return null}}}ea.TWITTER_SIGN_IN_METHOD="twitter.com";ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const o=await qi._fromIdTokenResponse(e,n,s),l=Jx(n);return new Eu({user:o,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=Jx(n);return new Eu({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function Jx(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om extends za{constructor(e,t,n,s){super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Om.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new Om(e,t,n,s)}}function UE(a,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(a):t._getIdTokenResponse(a)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Om._fromErrorAndOperation(a,o,e,n):o})}async function UR(a,e,t=!1){const n=await Vd(a,e._linkToIdToken(a.auth,await a.getIdToken()),t);return Eu._forOperation(a,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(a,e,t=!1){const{auth:n}=a;if(Cs(n.app))return Promise.reject(wl(n));const s="reauthenticate";try{const o=await Vd(a,UE(n,s,e,a),t);Te(o.idToken,n,"internal-error");const l=v0(o.idToken);Te(l,n,"internal-error");const{sub:d}=l;return Te(a.uid===d,n,"user-mismatch"),Eu._forOperation(a,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ts(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(a,e,t=!1){if(Cs(a.app))return Promise.reject(wl(a));const n="signIn",s=await UE(a,n,e),o=await Eu._fromIdTokenResponse(a,n,s);return t||await a._updateCurrentUser(o.user),o}function VR(a,e,t,n){return Ba(a).onIdTokenChanged(e,t,n)}function WR(a,e,t){return Ba(a).beforeAuthStateChanged(e,t)}function GR(a,e,t,n){return Ba(a).onAuthStateChanged(e,t,n)}function HE(a){return Ba(a).signOut()}const Fm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fm,"1"),this.storage.removeItem(Fm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=1e3,KR=10;class VE extends $E{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,h)=>{this.notifyListeners(l,h)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},o=this.storage.getItem(n);SR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KR):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},qR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}VE.type="LOCAL";const XR=VE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends $E{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WE.type="SESSION";const GE=WE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new yg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const d=Array.from(l).map(async f=>f(t.origin,o)),h=await YR(d);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(a="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return a+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((d,h)=>{const f=_0("",20);s.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},n);l={messageChannel:s,onMessage(w){const y=w;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(y.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function JR(a){ks().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function ZR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eP(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)==null?void 0:a.controller)||null}function tP(){return qE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="firebaseLocalStorageDb",nP=1,jm="firebaseLocalStorage",XE="fbase_key";class kp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wg(a,e){return a.transaction([jm],e?"readwrite":"readonly").objectStore(jm)}function iP(){const a=indexedDB.deleteDatabase(KE);return new kp(a).toPromise()}function Vy(){const a=indexedDB.open(KE,nP);return new Promise((e,t)=>{a.addEventListener("error",()=>{t(a.error)}),a.addEventListener("upgradeneeded",()=>{const n=a.result;try{n.createObjectStore(jm,{keyPath:XE})}catch(s){t(s)}}),a.addEventListener("success",async()=>{const n=a.result;n.objectStoreNames.contains(jm)?e(n):(n.close(),await iP(),e(await Vy()))})})}async function Zx(a,e,t){const n=wg(a,!0).put({[XE]:e,value:t});return new kp(n).toPromise()}async function sP(a,e){const t=wg(a,!1).get(e),n=await new kp(t).toPromise();return n===void 0?null:n.value}function eA(a,e){const t=wg(a,!0).delete(e);return new kp(t).toPromise()}const rP=800,aP=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>aP)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yg._getInstance(tP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await ZR(),!this.activeServiceWorker)return;this.sender=new QR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vy();return await Zx(e,Fm,"1"),await eA(e,Fm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zx(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>sP(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=wg(s,!1).getAll();return new kp(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const oP=YE;new Sp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(a,e){return e?br(e):(Te(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends BE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lP(a){return $R(a.auth,new x0(a),a.bypassAuthState)}function cP(a){const{auth:e,user:t}=a;return Te(t,e,"internal-error"),HR(t,new x0(a),a.bypassAuthState)}async function uP(a){const{auth:e,user:t}=a;return Te(t,e,"internal-error"),UR(t,new x0(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,n,s,o=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:o,error:l,type:d}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lP;case"linkViaPopup":case"linkViaRedirect":return uP;case"reauthViaPopup":case"reauthViaRedirect":return cP;default:Ts(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new Sp(2e3,1e4);async function hP(a,e,t){if(Cs(a.app))return Promise.reject(Xi(a,"operation-not-supported-in-this-environment"));const n=vg(a);oR(a,e,b0);const s=QE(n,t);return new fo(n,"signInViaPopup",e,s).executeNotNull()}class fo extends JE{constructor(e,t,n,s,o){super(e,t,s,o),this.provider=n,this.authWindow=null,this.pollId=null,fo.currentPopupAction&&fo.currentPopupAction.cancel(),fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=_0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dP.get())};e()}}fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="pendingRedirect",Qf=new Map;class fP extends JE{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Qf.get(this.auth._key());if(!e){try{const n=await mP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Qf.set(this.auth._key(),e)}return this.bypassAuthState||Qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mP(a,e){const t=yP(e),n=vP(a);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function gP(a,e){Qf.set(a._key(),e)}function vP(a){return br(a._redirectPersistence)}function yP(a){return Yf(pP,a.config.apiKey,a.name)}async function wP(a,e,t=!1){if(Cs(a.app))return Promise.reject(wl(a));const n=vg(a),s=QE(n,e),l=await new fP(n,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=600*1e3;class _P{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ZE(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xi(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bP&&this.cachedEventUids.clear(),this.cachedEventUids.has(tA(e))}saveEventToCache(e){this.cachedEventUids.add(tA(e)),this.lastProcessedEventTime=Date.now()}}function tA(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function ZE({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xP(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZE(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(a,e={}){return Cu(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SP=/^https?/;async function CP(a){if(a.config.emulator)return;const{authorizedDomains:e}=await AP(a);for(const t of e)try{if(kP(t))return}catch{}Ts(a,"unauthorized-domain")}function kP(a){const e=Hy(),{protocol:t,hostname:n}=new URL(e);if(a.startsWith("chrome-extension://")){const l=new URL(a);return l.hostname===""&&n===""?t==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!SP.test(t))return!1;if(EP.test(a))return n===a;const s=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=new Sp(3e4,6e4);function nA(){const a=ks().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let t=0;t<a.CP.length;t++)a.CP[t]=null}}function IP(a){return new Promise((e,t)=>{var s,o,l;function n(){nA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nA(),t(Xi(a,"network-request-failed"))},timeout:TP.get()})}if((o=(s=ks().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=ks().gapi)!=null&&l.load)n();else{const d=MR("iframefcb");return ks()[d]=()=>{gapi.load?n():t(Xi(a,"network-request-failed"))},DR(`${LR()}?onload=${d}`).catch(h=>t(h))}}).catch(e=>{throw Jf=null,e})}let Jf=null;function RP(a){return Jf=Jf||IP(a),Jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=new Sp(5e3,15e3),DP="__/auth/iframe",LP="emulator/auth/iframe",MP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OP(a){const e=a.config;Te(e.authDomain,a,"auth-domain-config-required");const t=e.emulator?m0(e,LP):`https://${a.config.authDomain}/${DP}`,n={apiKey:e.apiKey,appName:a.name,v:Ep},s=NP.get(a.config.apiHost);s&&(n.eid=s);const o=a._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Ap(n).slice(1)}`}async function FP(a){const e=await RP(a),t=ks().gapi;return Te(t,a,"internal-error"),e.open({where:document.body,url:OP(a),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MP,dontclear:!0},n=>new Promise(async(s,o)=>{await n.restyle({setHideOnLeave:!1});const l=Xi(a,"network-request-failed"),d=ks().setTimeout(()=>{o(l)},PP.get());function h(){ks().clearTimeout(d),s(n)}n.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zP=500,BP=600,UP="_blank",HP="http://localhost";class iA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $P(a,e,t,n=zP,s=BP){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let d="";const h={...jP,width:n.toString(),height:s.toString(),top:o,left:l},f=Tn().toLowerCase();t&&(d=DE(f)?UP:t),RE(f)&&(e=e||HP,h.scrollbars="yes");const m=Object.entries(h).reduce((y,[_,x])=>`${y}${_}=${x},`,"");if(ER(f)&&d!=="_self")return VP(e||"",d),new iA(null);const w=window.open(e||"",d,m);Te(w,a,"popup-blocked");try{w.focus()}catch{}return new iA(w)}function VP(a,e){const t=document.createElement("a");t.href=a,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="__/auth/handler",GP="emulator/auth/handler",qP=encodeURIComponent("fac");async function sA(a,e,t,n,s,o){Te(a.config.authDomain,a,"auth-domain-config-required"),Te(a.config.apiKey,a,"invalid-api-key");const l={apiKey:a.config.apiKey,appName:a.name,authType:t,redirectUrl:n,v:Ep,eventId:s};if(e instanceof b0){e.setDefaultLanguage(a.languageCode),l.providerId=e.providerId||"",VT(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,w]of Object.entries({}))l[m]=w}if(e instanceof Cp){const m=e.getScopes().filter(w=>w!=="");m.length>0&&(l.scopes=m.join(","))}a.tenantId&&(l.tid=a.tenantId);const d=l;for(const m of Object.keys(d))d[m]===void 0&&delete d[m];const h=await a._getAppCheckToken(),f=h?`#${qP}=${encodeURIComponent(h)}`:"";return`${KP(a)}?${Ap(d).slice(1)}${f}`}function KP({config:a}){return a.emulator?m0(a,GP):`https://${a.authDomain}/${WP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="webStorageSupport";class XP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GE,this._completeRedirectFn=wP,this._overrideRedirectResult=gP}async _openPopup(e,t,n,s){var l;Er((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await sA(e,t,n,Hy(),s);return $P(e,o,_0())}async _openRedirect(e,t,n,s){await this._originValidation(e);const o=await sA(e,t,n,Hy(),s);return JR(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Er(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await FP(e),n=new _P(e);return t.register("authEvent",s=>(Te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ey,{type:Ey},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Ey];o!==void 0&&t(!!o),Ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return FE()||PE()||y0()}}const YP=XP;var rA="@firebase/auth",aA="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZP(a){Hd(new Au("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=n.options;Te(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const h={apiKey:l,authDomain:d,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jE(a)},f=new RR(n,s,o,h);return OR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Hd(new Au("auth-internal",e=>{const t=vg(e.getProvider("auth").getImmediate());return(n=>new QP(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dc(rA,aA,JP(a)),dc(rA,aA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=300,tD=mE("authIdTokenMaxAge")||eD;let oA=null;const nD=a=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>tD)return;const s=t==null?void 0:t.token;oA!==s&&(oA=s,await fetch(a,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iD(a=GI()){const e=wE(a,"auth");if(e.isInitialized())return e.getImmediate();const t=NR(a,{popupRedirectResolver:YP,persistence:[oP,XR,GE]}),n=mE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const l=nD(o.toString());WR(t,l,()=>l(t.currentUser)),VR(t,d=>l(d))}}const s=TT("auth");return s&&FR(t,`http://${s}`),t}function sD(){var a;return((a=document.getElementsByTagName("head"))==null?void 0:a[0])??document}PR({loadJS(a){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",a),n.onload=e,n.onerror=s=>{const o=Xi("internal-error");o.customData=s,t(o)},n.type="text/javascript",n.charset="UTF-8",sD().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZP("Browser");const rD={apiKey:"AIzaSyDSlB5z-NparOYnEPGWjY2KQ9MEEPuxDJY",authDomain:"ab-rename-46741219-ba4bc.firebaseapp.com",projectId:"ab-rename-46741219-ba4bc",storageBucket:"ab-rename-46741219-ba4bc.firebasestorage.app",messagingSenderId:"600072389128",appId:"1:600072389128:web:648657cf4c2fbe2d94c7bd"},aD=bE(rD),Zf=iD(aD);var Sy={exports:{}},Cy,lA;function oD(){if(lA)return Cy;lA=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Cy=a,Cy}var ky,cA;function lD(){if(cA)return ky;cA=1;var a=oD();function e(){}function t(){}return t.resetWarningCache=e,ky=function(){function n(l,d,h,f,m,w){if(w!==a){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function s(){return n}var o={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},ky}var uA;function cD(){return uA||(uA=1,Sy.exports=lD()()),Sy.exports}var uD=cD();const Ze=mg(uD);function Cl(a,e,t,n){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function d(m){try{f(n.next(m))}catch(w){l(w)}}function h(m){try{f(n.throw(m))}catch(w){l(w)}}function f(m){m.done?o(m.value):s(m.value).then(d,h)}f((n=n.apply(a,e||[])).next())})}const dD=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Su(a,e,t){const n=hD(a),{webkitRelativePath:s}=a,o=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${a.name}`;return typeof n.path!="string"&&dA(n,"path",o),dA(n,"relativePath",o),n}function hD(a){const{name:e}=a;if(e&&e.lastIndexOf(".")!==-1&&!a.type){const n=e.split(".").pop().toLowerCase(),s=dD.get(n);s&&Object.defineProperty(a,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return a}function dA(a,e,t){Object.defineProperty(a,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const pD=[".DS_Store","Thumbs.db"];function fD(a){return Cl(this,void 0,void 0,function*(){return zm(a)&&mD(a.dataTransfer)?wD(a.dataTransfer,a.type):gD(a)?vD(a):Array.isArray(a)&&a.every(e=>"getFile"in e&&typeof e.getFile=="function")?yD(a):[]})}function mD(a){return zm(a)}function gD(a){return zm(a)&&zm(a.target)}function zm(a){return typeof a=="object"&&a!==null}function vD(a){return Wy(a.target.files).map(e=>Su(e))}function yD(a){return Cl(this,void 0,void 0,function*(){return(yield Promise.all(a.map(t=>t.getFile()))).map(t=>Su(t))})}function wD(a,e){return Cl(this,void 0,void 0,function*(){if(a.items){const t=Wy(a.items).filter(s=>s.kind==="file");if(e!=="drop")return t;const n=yield Promise.all(t.map(bD));return hA(eS(n))}return hA(Wy(a.files).map(t=>Su(t)))})}function hA(a){return a.filter(e=>pD.indexOf(e.name)===-1)}function Wy(a){if(a===null)return[];const e=[];for(let t=0;t<a.length;t++){const n=a[t];e.push(n)}return e}function bD(a){if(typeof a.webkitGetAsEntry!="function")return pA(a);const e=a.webkitGetAsEntry();return e&&e.isDirectory?tS(e):pA(a,e)}function eS(a){return a.reduce((e,t)=>[...e,...Array.isArray(t)?eS(t):[t]],[])}function pA(a,e){return Cl(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof a.getAsFileSystemHandle=="function"){const o=yield a.getAsFileSystemHandle();if(o===null)throw new Error(`${a} is not a File`);if(o!==void 0){const l=yield o.getFile();return l.handle=o,Su(l)}}const n=a.getAsFile();if(!n)throw new Error(`${a} is not a File`);return Su(n,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function _D(a){return Cl(this,void 0,void 0,function*(){return a.isDirectory?tS(a):xD(a)})}function tS(a){const e=a.createReader();return new Promise((t,n)=>{const s=[];function o(){e.readEntries(l=>Cl(this,void 0,void 0,function*(){if(l.length){const d=Promise.all(l.map(_D));s.push(d),o()}else try{const d=yield Promise.all(s);t(d)}catch(d){n(d)}}),l=>{n(l)})}o()})}function xD(a){return Cl(this,void 0,void 0,function*(){return new Promise((e,t)=>{a.file(n=>{const s=Su(n,a.fullPath);e(s)},n=>{t(n)})})})}var $f={},fA;function AD(){return fA||(fA=1,$f.__esModule=!0,$f.default=function(a,e){if(a&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var n=a.name||"",s=(a.type||"").toLowerCase(),o=s.replace(/\/.*$/,"");return t.some(function(l){var d=l.trim().toLowerCase();return d.charAt(0)==="."?n.toLowerCase().endsWith(d):d.endsWith("/*")?o===d.replace(/\/.*$/,""):s===d})}return!0}),$f}var ED=AD();const Ty=mg(ED);function mA(a){return kD(a)||CD(a)||iS(a)||SD()}function SD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CD(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function kD(a){if(Array.isArray(a))return Gy(a)}function gA(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),t.push.apply(t,n)}return t}function vA(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gA(Object(t),!0).forEach(function(n){nS(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):gA(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function nS(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Wd(a,e){return RD(a)||ID(a,e)||iS(a,e)||TD()}function TD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iS(a,e){if(a){if(typeof a=="string")return Gy(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gy(a,e)}}function Gy(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function ID(a,e){var t=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var n=[],s=!0,o=!1,l,d;try{for(t=t.call(a);!(s=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));s=!0);}catch(h){o=!0,d=h}finally{try{!s&&t.return!=null&&t.return()}finally{if(o)throw d}}return n}}function RD(a){if(Array.isArray(a))return a}var PD=typeof Ty=="function"?Ty:Ty.default,DD="file-invalid-type",LD="file-too-large",MD="file-too-small",ND="too-many-files",OD=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),n=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:DD,message:"File type must be ".concat(n)}},yA=function(e){return{code:LD,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},wA=function(e){return{code:MD,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},FD={code:ND,message:"Too many files"};function sS(a,e){var t=a.type==="application/x-moz-file"||PD(a,e);return[t,t?null:OD(e)]}function rS(a,e,t){if(uo(a.size))if(uo(e)&&uo(t)){if(a.size>t)return[!1,yA(t)];if(a.size<e)return[!1,wA(e)]}else{if(uo(e)&&a.size<e)return[!1,wA(e)];if(uo(t)&&a.size>t)return[!1,yA(t)]}return[!0,null]}function uo(a){return a!=null}function jD(a){var e=a.files,t=a.accept,n=a.minSize,s=a.maxSize,o=a.multiple,l=a.maxFiles,d=a.validator;return!o&&e.length>1||o&&l>=1&&e.length>l?!1:e.every(function(h){var f=sS(h,t),m=Wd(f,1),w=m[0],y=rS(h,n,s),_=Wd(y,1),x=_[0],C=d?d(h):null;return w&&x&&!C})}function Bm(a){return typeof a.isPropagationStopped=="function"?a.isPropagationStopped():typeof a.cancelBubble<"u"?a.cancelBubble:!1}function Vf(a){return a.dataTransfer?Array.prototype.some.call(a.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!a.target&&!!a.target.files}function bA(a){a.preventDefault()}function zD(a){return a.indexOf("MSIE")!==-1||a.indexOf("Trident/")!==-1}function BD(a){return a.indexOf("Edge/")!==-1}function UD(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return zD(a)||BD(a)}function rs(){for(var a=arguments.length,e=new Array(a),t=0;t<a;t++)e[t]=arguments[t];return function(n){for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return e.some(function(d){return!Bm(n)&&d&&d.apply(void 0,[n].concat(o)),Bm(n)})}}function HD(){return"showOpenFilePicker"in window}function $D(a){if(uo(a)){var e=Object.entries(a).filter(function(t){var n=Wd(t,2),s=n[0],o=n[1],l=!0;return aS(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(o)||!o.every(oS))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(t,n){var s=Wd(n,2),o=s[0],l=s[1];return vA(vA({},t),{},nS({},o,l))},{});return[{description:"Files",accept:e}]}return a}function VD(a){if(uo(a))return Object.entries(a).reduce(function(e,t){var n=Wd(t,2),s=n[0],o=n[1];return[].concat(mA(e),[s],mA(o))},[]).filter(function(e){return aS(e)||oS(e)}).join(",")}function WD(a){return a instanceof DOMException&&(a.name==="AbortError"||a.code===a.ABORT_ERR)}function GD(a){return a instanceof DOMException&&(a.name==="SecurityError"||a.code===a.SECURITY_ERR)}function aS(a){return a==="audio/*"||a==="video/*"||a==="image/*"||a==="text/*"||a==="application/*"||/\w+\/[-+.\w]+/g.test(a)}function oS(a){return/^.*\.[\w]+$/.test(a)}var qD=["children"],KD=["open"],XD=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],YD=["refKey","onChange","onClick"];function QD(a){return eL(a)||ZD(a)||lS(a)||JD()}function JD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZD(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function eL(a){if(Array.isArray(a))return qy(a)}function Iy(a,e){return iL(a)||nL(a,e)||lS(a,e)||tL()}function tL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lS(a,e){if(a){if(typeof a=="string")return qy(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qy(a,e)}}function qy(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function nL(a,e){var t=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var n=[],s=!0,o=!1,l,d;try{for(t=t.call(a);!(s=(l=t.next()).done)&&(n.push(l.value),!(e&&n.length===e));s=!0);}catch(h){o=!0,d=h}finally{try{!s&&t.return!=null&&t.return()}finally{if(o)throw d}}return n}}function iL(a){if(Array.isArray(a))return a}function _A(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(a,s).enumerable})),t.push.apply(t,n)}return t}function gt(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_A(Object(t),!0).forEach(function(n){Ky(a,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):_A(Object(t)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(t,n))})}return a}function Ky(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function Um(a,e){if(a==null)return{};var t=sL(a,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(a,n)&&(t[n]=a[n])}return t}function sL(a,e){if(a==null)return{};var t={},n=Object.keys(a),s,o;for(o=0;o<n.length;o++)s=n[o],!(e.indexOf(s)>=0)&&(t[s]=a[s]);return t}var A0=Ie.forwardRef(function(a,e){var t=a.children,n=Um(a,qD),s=uS(n),o=s.open,l=Um(s,KD);return Ie.useImperativeHandle(e,function(){return{open:o}},[o]),cE.createElement(Ie.Fragment,null,t(gt(gt({},l),{},{open:o})))});A0.displayName="Dropzone";var cS={disabled:!1,getFilesFromEvent:fD,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};A0.defaultProps=cS;A0.propTypes={children:Ze.func,accept:Ze.objectOf(Ze.arrayOf(Ze.string)),multiple:Ze.bool,preventDropOnDocument:Ze.bool,noClick:Ze.bool,noKeyboard:Ze.bool,noDrag:Ze.bool,noDragEventsBubbling:Ze.bool,minSize:Ze.number,maxSize:Ze.number,maxFiles:Ze.number,disabled:Ze.bool,getFilesFromEvent:Ze.func,onFileDialogCancel:Ze.func,onFileDialogOpen:Ze.func,useFsAccessApi:Ze.bool,autoFocus:Ze.bool,onDragEnter:Ze.func,onDragLeave:Ze.func,onDragOver:Ze.func,onDrop:Ze.func,onDropAccepted:Ze.func,onDropRejected:Ze.func,onError:Ze.func,validator:Ze.func};var Xy={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function uS(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=gt(gt({},cS),a),t=e.accept,n=e.disabled,s=e.getFilesFromEvent,o=e.maxSize,l=e.minSize,d=e.multiple,h=e.maxFiles,f=e.onDragEnter,m=e.onDragLeave,w=e.onDragOver,y=e.onDrop,_=e.onDropAccepted,x=e.onDropRejected,C=e.onFileDialogCancel,k=e.onFileDialogOpen,T=e.useFsAccessApi,P=e.autoFocus,O=e.preventDropOnDocument,N=e.noClick,U=e.noKeyboard,F=e.noDrag,j=e.noDragEventsBubbling,H=e.onError,G=e.validator,X=Ie.useMemo(function(){return VD(t)},[t]),Z=Ie.useMemo(function(){return $D(t)},[t]),ce=Ie.useMemo(function(){return typeof k=="function"?k:xA},[k]),be=Ie.useMemo(function(){return typeof C=="function"?C:xA},[C]),de=Ie.useRef(null),Pe=Ie.useRef(null),J=Ie.useReducer(rL,Xy),ne=Iy(J,2),Y=ne[0],ie=ne[1],ee=Y.isFocused,L=Y.isFileDialogActive,$=Ie.useRef(typeof window<"u"&&window.isSecureContext&&T&&HD()),pe=function(){!$.current&&L&&setTimeout(function(){if(Pe.current){var Ee=Pe.current.files;Ee.length||(ie({type:"closeDialog"}),be())}},300)};Ie.useEffect(function(){return window.addEventListener("focus",pe,!1),function(){window.removeEventListener("focus",pe,!1)}},[Pe,L,be,$]);var Ae=Ie.useRef([]),Le=function(Ee){de.current&&de.current.contains(Ee.target)||(Ee.preventDefault(),Ae.current=[])};Ie.useEffect(function(){return O&&(document.addEventListener("dragover",bA,!1),document.addEventListener("drop",Le,!1)),function(){O&&(document.removeEventListener("dragover",bA),document.removeEventListener("drop",Le))}},[de,O]),Ie.useEffect(function(){return!n&&P&&de.current&&de.current.focus(),function(){}},[de,P,n]);var ye=Ie.useCallback(function(se){H?H(se):console.error(se)},[H]),we=Ie.useCallback(function(se){se.preventDefault(),se.persist(),Zi(se),Ae.current=[].concat(QD(Ae.current),[se.target]),Vf(se)&&Promise.resolve(s(se)).then(function(Ee){if(!(Bm(se)&&!j)){var dt=Ee.length,yt=dt>0&&jD({files:Ee,accept:X,minSize:l,maxSize:o,multiple:d,maxFiles:h,validator:G}),jt=dt>0&&!yt;ie({isDragAccept:yt,isDragReject:jt,isDragActive:!0,type:"setDraggedFiles"}),f&&f(se)}}).catch(function(Ee){return ye(Ee)})},[s,f,ye,j,X,l,o,d,h,G]),Fe=Ie.useCallback(function(se){se.preventDefault(),se.persist(),Zi(se);var Ee=Vf(se);if(Ee&&se.dataTransfer)try{se.dataTransfer.dropEffect="copy"}catch{}return Ee&&w&&w(se),!1},[w,j]),qe=Ie.useCallback(function(se){se.preventDefault(),se.persist(),Zi(se);var Ee=Ae.current.filter(function(yt){return de.current&&de.current.contains(yt)}),dt=Ee.indexOf(se.target);dt!==-1&&Ee.splice(dt,1),Ae.current=Ee,!(Ee.length>0)&&(ie({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Vf(se)&&m&&m(se))},[de,m,j]),Ct=Ie.useCallback(function(se,Ee){var dt=[],yt=[];se.forEach(function(jt){var Ir=sS(jt,X),li=Iy(Ir,2),Ds=li[0],Ru=li[1],Rl=rS(jt,l,o),$a=Iy(Rl,2),Pu=$a[0],Va=$a[1],Wa=G?G(jt):null;if(Ds&&Pu&&!Wa)dt.push(jt);else{var Ga=[Ru,Va];Wa&&(Ga=Ga.concat(Wa)),yt.push({file:jt,errors:Ga.filter(function(Du){return Du})})}}),(!d&&dt.length>1||d&&h>=1&&dt.length>h)&&(dt.forEach(function(jt){yt.push({file:jt,errors:[FD]})}),dt.splice(0)),ie({acceptedFiles:dt,fileRejections:yt,isDragReject:yt.length>0,type:"setFiles"}),y&&y(dt,yt,Ee),yt.length>0&&x&&x(yt,Ee),dt.length>0&&_&&_(dt,Ee)},[ie,d,X,l,o,h,y,_,x,G]),Rs=Ie.useCallback(function(se){se.preventDefault(),se.persist(),Zi(se),Ae.current=[],Vf(se)&&Promise.resolve(s(se)).then(function(Ee){Bm(se)&&!j||Ct(Ee,se)}).catch(function(Ee){return ye(Ee)}),ie({type:"reset"})},[s,Ct,ye,j]),Ps=Ie.useCallback(function(){if($.current){ie({type:"openDialog"}),ce();var se={multiple:d,types:Z};window.showOpenFilePicker(se).then(function(Ee){return s(Ee)}).then(function(Ee){Ct(Ee,null),ie({type:"closeDialog"})}).catch(function(Ee){WD(Ee)?(be(Ee),ie({type:"closeDialog"})):GD(Ee)?($.current=!1,Pe.current?(Pe.current.value=null,Pe.current.click()):ye(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ye(Ee)});return}Pe.current&&(ie({type:"openDialog"}),ce(),Pe.current.value=null,Pe.current.click())},[ie,ce,be,T,Ct,ye,Z,d]),Ha=Ie.useCallback(function(se){!de.current||!de.current.isEqualNode(se.target)||(se.key===" "||se.key==="Enter"||se.keyCode===32||se.keyCode===13)&&(se.preventDefault(),Ps())},[de,Ps]),Tl=Ie.useCallback(function(){ie({type:"focus"})},[]),ku=Ie.useCallback(function(){ie({type:"blur"})},[]),Tu=Ie.useCallback(function(){N||(UD()?setTimeout(Ps,0):Ps())},[N,Ps]),Ji=function(Ee){return n?null:Ee},Il=function(Ee){return U?null:Ji(Ee)},kr=function(Ee){return F?null:Ji(Ee)},Zi=function(Ee){j&&Ee.stopPropagation()},Tr=Ie.useMemo(function(){return function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=se.refKey,dt=Ee===void 0?"ref":Ee,yt=se.role,jt=se.onKeyDown,Ir=se.onFocus,li=se.onBlur,Ds=se.onClick,Ru=se.onDragEnter,Rl=se.onDragOver,$a=se.onDragLeave,Pu=se.onDrop,Va=Um(se,XD);return gt(gt(Ky({onKeyDown:Il(rs(jt,Ha)),onFocus:Il(rs(Ir,Tl)),onBlur:Il(rs(li,ku)),onClick:Ji(rs(Ds,Tu)),onDragEnter:kr(rs(Ru,we)),onDragOver:kr(rs(Rl,Fe)),onDragLeave:kr(rs($a,qe)),onDrop:kr(rs(Pu,Rs)),role:typeof yt=="string"&&yt!==""?yt:"presentation"},dt,de),!n&&!U?{tabIndex:0}:{}),Va)}},[de,Ha,Tl,ku,Tu,we,Fe,qe,Rs,U,F,n]),Iu=Ie.useCallback(function(se){se.stopPropagation()},[]),Dp=Ie.useMemo(function(){return function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ee=se.refKey,dt=Ee===void 0?"ref":Ee,yt=se.onChange,jt=se.onClick,Ir=Um(se,YD),li=Ky({accept:X,multiple:d,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ji(rs(yt,Rs)),onClick:Ji(rs(jt,Iu)),tabIndex:-1},dt,Pe);return gt(gt({},li),Ir)}},[Pe,t,d,Rs,n]);return gt(gt({},Y),{},{isFocused:ee&&!n,getRootProps:Tr,getInputProps:Dp,rootRef:de,inputRef:Pe,open:Ji(Ps)})}function rL(a,e){switch(e.type){case"focus":return gt(gt({},a),{},{isFocused:!0});case"blur":return gt(gt({},a),{},{isFocused:!1});case"openDialog":return gt(gt({},Xy),{},{isFileDialogActive:!0});case"closeDialog":return gt(gt({},a),{},{isFileDialogActive:!1});case"setDraggedFiles":return gt(gt({},a),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return gt(gt({},a),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return gt({},Xy);default:return a}}function xA(){}const aL=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),oL=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),lL=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...a,children:V.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),AA=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),cL=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),uL=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),dL=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),hL=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...a,children:V.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09a2.09 2.09 0 00-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),pL=a=>V.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...a,children:V.jsxs("g",{transform:"translate(-4, 3)",children:[V.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),V.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})}),fL=a=>V.jsxs("svg",{className:`animate-spin ${a.className}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...a,children:[V.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),V.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),mL=({onFilesAdded:a,isProcessing:e})=>{const t=Ie.useCallback(d=>{a(d)},[a]),{getRootProps:n,getInputProps:s,isDragActive:o}=uS({onDrop:t,accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/webp":[".webp"]},disabled:e}),l=`
    flex flex-col items-center justify-center w-full h-64 
    border-2 border-dashed border-gray-600 rounded-lg 
    cursor-pointer transition-colors duration-300
    ${o?"bg-[#2c3544]":"bg-gray-800/50"}
    ${e?"opacity-50 cursor-not-allowed":"hover:bg-gray-700/50"}
  `;return V.jsxs("div",{...n(),className:l,children:[V.jsx("input",{...s()}),V.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-gray-400",children:[V.jsx(aL,{className:"w-10 h-10 mb-3"}),V.jsx("p",{className:"mb-2 text-sm",children:"Dateien hier ablegen oder zum Auswhlen klicken"}),V.jsx("p",{className:"text-xs",children:"Untersttzt PDF, JPG, PNG & WEBP"})]})]})},gL=({status:a})=>{switch(a){case"analyzing":return V.jsx(fL,{className:"h-5 w-5 text-blue-400"});case"renamed":return V.jsx(AA,{className:"h-5 w-5 text-[#4ADE80]"});case"saved":case"downloaded":return V.jsx(AA,{className:"h-5 w-5 text-[#6B7280]"});case"error":return V.jsx(cL,{className:"h-5 w-5 text-red-400"});case"cancelled":return V.jsx(uL,{className:"h-5 w-5 text-[#F87171]"});default:return V.jsx("div",{className:"h-5 w-5"})}},vL=({status:a,errorMessage:e})=>{switch(a){case"analyzing":return V.jsx("p",{className:"text-sm text-blue-400",children:"Wird analysiert..."});case"renamed":return V.jsx("p",{className:"text-sm text-[#4ADE80]",children:"Erfolgreich umbenannt"});case"saved":return V.jsx("p",{className:"text-sm text-[#6B7280]",children:"Erfolgreich gespeichert"});case"downloaded":return V.jsx("p",{className:"text-sm text-[#6B7280]",children:"Download erfolgreich"});case"error":return V.jsxs("p",{className:"text-sm text-red-400",children:["Fehler: ",e]});case"cancelled":return V.jsx("p",{className:"text-sm text-[#F87171]",children:"Vorgang vom Benutzer abgebrochen"});default:return null}},yL=({file:a,status:e,newName:t,errorMessage:n,onDelete:s,onDownload:o,onSend:l,isProcessing:d})=>{const h=e==="renamed"||e==="saved"||e==="cancelled"||e==="downloaded",f="p-[10px] rounded-full text-gray-400 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed";return V.jsxs("div",{className:"bg-[#2c3544] p-4 rounded-lg flex items-center justify-between transition-all duration-300",children:[V.jsxs("div",{className:"flex items-center gap-4 w-full min-w-0",children:[V.jsx("div",{className:"flex-shrink-0",children:V.jsx(gL,{status:e})}),V.jsxs("div",{className:"flex-1 min-w-0",children:[V.jsx("p",{className:"text-base font-medium text-gray-200 truncate",children:t||a.name}),V.jsx(vL,{status:e,errorMessage:n})]})]}),V.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0 ml-4",children:[h&&V.jsxs(V.Fragment,{children:[V.jsx("button",{onClick:l,className:`${f} hover:bg-[#60A5FA] hover:text-gray-900`,"aria-label":"Send",children:V.jsx(pL,{className:"h-5 w-5"})}),V.jsx("button",{onClick:o,className:`${f} hover:bg-[#4ADE80] hover:text-gray-900`,"aria-label":"Download",children:V.jsx(dL,{className:"h-5 w-5"})})]}),V.jsx("button",{onClick:s,disabled:d&&e==="analyzing",className:`${f} hover:bg-[#F87171] hover:text-gray-900`,"aria-label":"Delete",children:V.jsx(hL,{className:"h-5 w-5"})})]})]})},wL=({directoryName:a,directoryHistory:e,onSelectDirectory:t,onSelectFromHistory:n,isProcessing:s})=>{const[o,l]=Ie.useState(!1),d=Ie.useRef(null);Ie.useEffect(()=>{const f=m=>{d.current&&!d.current.contains(m.target)&&l(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const h=f=>{n(f),l(!1)};return V.jsxs("div",{className:"relative flex-grow min-w-0",ref:d,children:[V.jsx("button",{onClick:()=>l(!o),className:"w-full bg-[#2c3544] text-gray-300 px-4 py-2 rounded-md hover:bg-[#333f54] transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-left truncate",disabled:s,title:a?`Ablageort: ${a}`:"Ablageort auswhlen",children:a?`Ablageort: ${a}`:"Ablageort:"}),o&&V.jsxs("div",{className:"absolute z-10 top-full mt-2 w-full bg-[#2c3544] border border-gray-700 rounded-md shadow-lg",children:[V.jsx("button",{onClick:t,className:"w-full text-left px-4 py-2 hover:bg-[#333f54]",children:"Neuen Ordner whlen..."}),e.map((f,m)=>V.jsx("button",{onClick:()=>h(f),className:"w-full text-left px-4 py-2 hover:bg-[#333f54] truncate",title:f,children:f},m))]})]})},bL=({files:a,onDelete:e,onDownload:t,onSend:n,onClearAll:s,onDownloadAll:o,onSaveAll:l,isProcessing:d,directoryName:h,onSelectDirectory:f,directoryHistory:m,onSelectFromHistory:w})=>{if(a.length===0)return null;const y=a.some(x=>x.newName),_=a.some(x=>x.status==="renamed");return V.jsxs("div",{className:"space-y-4",children:[V.jsxs("div",{className:"flex items-center gap-4",children:[V.jsx(wL,{directoryName:h,directoryHistory:m,onSelectDirectory:f,onSelectFromHistory:w,isProcessing:d}),V.jsx("button",{onClick:l,className:"bg-[#2c3544] text-gray-300 px-4 py-2 rounded-md hover:bg-[#60A5FA] hover:text-gray-900 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",disabled:d||!_,children:"Alle speichern"}),V.jsx("button",{onClick:o,className:"bg-[#2c3544] text-gray-300 px-4 py-2 rounded-md hover:bg-[#4ADE80] hover:text-gray-900 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",disabled:d||!y,children:"Alle downloaden"}),V.jsx("button",{onClick:s,className:"bg-[#2c3544] text-gray-300 px-4 py-2 rounded-md hover:bg-[#F87171] hover:text-gray-900 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",disabled:d,children:"Alles leeren"})]}),V.jsx("div",{className:"space-y-4",children:a.map((x,C)=>V.jsx(yL,{file:x.file,status:x.status,newName:x.newName,errorMessage:x.errorMessage,onDelete:()=>e(C),onDownload:()=>t(C),onSend:()=>n(C),isProcessing:d},C))})]})},_L=`Du bist ein hochprziser Assistent zur automatischen Dateibenennung. Deine einzige Aufgabe ist es, aus dem BILD des Dokuments einen Dateinamen nach einem strengen Muster zu generieren. Analysiere das Bild sorgfltig.
Gib als Antwort *nur* den finalen Dateinamen zurck und absolut keinen anderen Text.
---
### REGEL 0: Bekannte Kreditkarten-Anbieter (HCHSTE PRIORITT)
Die folgenden Anbieter werden IMMER per Kreditkarte bezahlt. Wenn der Absender einer der folgenden ist, MUSS die Rechnung als 'CC' (Credit Card) markiert werden, auch wenn kein expliziter Hinweis auf eine Kreditkartenzahlung im Dokument zu sehen ist. Diese Regel berschreibt alle anderen Regeln. Ersetze 'OFFEN' durch 'CC'.
**Liste: {{ANBIETER_LISTE}}**
---
### SONDERFALL: Alpenblick GmbH Ausgangsrechnungen
Wenn der Absender klar "Alpenblick GmbH" ist, **ignoriere alle anderen Regeln** und befolge exakt dieses Format:
**[RNr] - [Projektnummer] [Rechnungstitel] Rechnung [Rechnungsdatum]**
*   **[RNr]**: Extrahiere die 'Rechnungs-Nr.' (z.B. '25-864').
*   **[Projektnummer]**: Extrahiere die 'Projektnummer' (z.B. '23647').
*   **[Rechnungstitel]**: Extrahiere eine kurze Beschreibung der Leistung (z.B. 'BR24 Redesign Farboptimierung Part BR24').
*   **[Rechnungsdatum]**: Extrahiere das 'Rechnungsdatum' und formatiere es **zwingend als YYMMDD** (z.B. aus '25.08.2025' wird '250825').
*   **Beispiel**: '25-864 - 23647 BR24 Redesign Farboptimierung Part BR24 Rechnung 250825'
---
### FR ALLE ANDEREN DOKUMENTE, befolge diese Regeln:
---
### 1. Dokumenttyp analysieren
* **'rechnung'**: Wenn eine klare Rechnungsnummer (z.B. "Rechnung","Rechnungsnummer", "Rechnung Nr.","Rechnungsnr.", "Rechnungs-Nr.", "Rechnungs-ID", "Invoice","RNr", "Re.Nr.", "INV-", "RE-", "TSE-Transaktion") vorhanden ist.
* **'bestellung'**: Wenn Begriffe wie "Bestellnummer", "Abrufbestellung", "Order", "Purchase Order", "Auftragsbesttigung" vorkommen.
* **'lieferschein'**: Wenn Begriffe wie "Lieferschein", "Einlieferungsschein", "Einlieferungsbeleg", "Zustellnachweis", "shipping label", "customs declaration", "air waybill" vorkommen.
* **'paypal'**: Wenn Begriffe wie "Transaktionscode:", "PayPal" vorkommen.
* **'vertrag'**: Wenn Begriffe wie "Vertrag", "Vertragsnummer", "Agreement" oder "Police" (auer Versicherung) dominant sind.
* **'versicherung'**: Wenn es sich klar um ein Versicherungsdokument handelt (z.B. "Versicherungsschein", "Policennummer", Name einer Versicherung).
* **'quittung'**: Wenn es ein Kassenbon, Beleg oder eine Quittung ohne Rechnungsnummer ist. Wenn Begriffe wie "Beleg-Nr.", "Beleg","Beleg-Nr", "Ausgabebeleg","Bonnr.", "Bon-Nr", "Kasse", "Zahlungsbeleg" vorkommen.
* **'dok'**: (Fallback) Wenn keiner der obigen Typen klar zutrifft.
---
### 2. Kerninformationen extrahieren
* **[Datum]**: Das primre Dokumentdatum (YYYYMMDD). Achte auf ungewhnliche Formate wie '19|2|2021' und wandle sie korrekt um.
* **[Unternehmen]**: Der prgnante Name des **Absenders/Auftraggebers**. **Achte darauf, den Absender (der das Dokument erstellt hat, oft im Briefkopf oder der Fuzeile) vom Empfnger (oft in einem Adressfeld mit der berschrift 'Unternehmen' oder 'An') klar zu unterscheiden.**
* **[Bezeichnung]**: Eine sehr kurze Beschreibung des Inhalts (max. 3-4 Worte). **Suche nach einer Zeile, die mit 'Thema' oder 'Betreff' beginnt.** Gib handschriftlichen Notizen wie "Aufwandentschdigung" Vorrang vor gedruckten Titeln.
* **[Nummer]**: Die relevante Identifikationsnummer (Rechnungsnr, Bestellnr, Vertragsnr, Policennr, TSE-Transaktion, Lieferscheinr, Transaktionscode).
---
### 3. Dateinamen zusammenbauen (OHNE Dateiendung wie .pdf oder .jpg)
* **'rechnung'**: [Datum] RNr [Nummer] [Unternehmen] [Bezeichnung] OFFEN
* **'bestellung'**: [Datum] BESTELL [Nummer] [Unternehmen] [Bezeichnung]
* **'lieferschein'**: [Datum] LS [Nummer] [Unternehmen] [Bezeichnung]
* **'paypal'**: [Datum] TC [Nummer] [Unternehmen] [Bezeichnung]
* **'vertrag'**: [Datum] VTRG [Nummer] [Unternehmen] [Bezeichnung]
* **'versicherung'**: [Datum] VERS [Nummer] [Unternehmen] [Bezeichnung]
* **'quittung'**: [Datum] QUITT [Unternehmen] [Bezeichnung]
* **'dok'**: [Datum] DOK [Unternehmen] [Bezeichnung]
---
### 4. WICHTIGSTE REGEL: KREDITKARTE
* **Dies ist die wichtigste Regel und berschreibt andere Status-Angaben.**
* Wenn das Dokument eine Zahlung per Kreditkarte (z.B. Mastercard, Visa, AMEX), einen Zahlungsdienstleister wie **Stripe** erwhnt, oder Formulierungen wie **"Betrag wurde beglichen mit Credit Card"** enthlt, ist die Rechnung bereits bezahlt.
* **Fr Rechnungen**: Ersetze das Wort \`OFFEN\` durch das Krzel \`CC\` Der Dateiname MUSS auf \`... CC\` enden, nicht auf \`... OFFEN CC\`.
 * **KORREKTES BEISPIEL**: \`20250703 RNr AF70883817 Apple Retail Germany CC\`
* **Fr andere Dokumente (z.B. Quittungen, Zahlungsbelege)**: Fge das Krzel \` CC\` am Ende hinzu.
 * **BEISPIEL**: \`20250705 QUITT The Apartment Suite CC\`
---
Analysiere jetzt das folgende Dokumentenbild und gib NUR den Dateinamen zurck.`;var EA;(function(a){a.STRING="string",a.NUMBER="number",a.INTEGER="integer",a.BOOLEAN="boolean",a.ARRAY="array",a.OBJECT="object"})(EA||(EA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SA;(function(a){a.LANGUAGE_UNSPECIFIED="language_unspecified",a.PYTHON="python"})(SA||(SA={}));var CA;(function(a){a.OUTCOME_UNSPECIFIED="outcome_unspecified",a.OUTCOME_OK="outcome_ok",a.OUTCOME_FAILED="outcome_failed",a.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(CA||(CA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=["user","model","function","system"];var TA;(function(a){a.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",a.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",a.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",a.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",a.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",a.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(TA||(TA={}));var IA;(function(a){a.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",a.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",a.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",a.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",a.BLOCK_NONE="BLOCK_NONE"})(IA||(IA={}));var RA;(function(a){a.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",a.NEGLIGIBLE="NEGLIGIBLE",a.LOW="LOW",a.MEDIUM="MEDIUM",a.HIGH="HIGH"})(RA||(RA={}));var PA;(function(a){a.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",a.SAFETY="SAFETY",a.OTHER="OTHER"})(PA||(PA={}));var zd;(function(a){a.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",a.STOP="STOP",a.MAX_TOKENS="MAX_TOKENS",a.SAFETY="SAFETY",a.RECITATION="RECITATION",a.LANGUAGE="LANGUAGE",a.BLOCKLIST="BLOCKLIST",a.PROHIBITED_CONTENT="PROHIBITED_CONTENT",a.SPII="SPII",a.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",a.OTHER="OTHER"})(zd||(zd={}));var DA;(function(a){a.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",a.RETRIEVAL_QUERY="RETRIEVAL_QUERY",a.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",a.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",a.CLASSIFICATION="CLASSIFICATION",a.CLUSTERING="CLUSTERING"})(DA||(DA={}));var LA;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.AUTO="AUTO",a.ANY="ANY",a.NONE="NONE"})(LA||(LA={}));var MA;(function(a){a.MODE_UNSPECIFIED="MODE_UNSPECIFIED",a.MODE_DYNAMIC="MODE_DYNAMIC"})(MA||(MA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class tc extends mn{constructor(e,t){super(e),this.response=t}}class dS extends mn{constructor(e,t,n,s){super(e),this.status=t,this.statusText=n,this.errorDetails=s}}class Ma extends mn{}class hS extends mn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL="https://generativelanguage.googleapis.com",AL="v1beta",EL="0.24.1",SL="genai-js";var _l;(function(a){a.GENERATE_CONTENT="generateContent",a.STREAM_GENERATE_CONTENT="streamGenerateContent",a.COUNT_TOKENS="countTokens",a.EMBED_CONTENT="embedContent",a.BATCH_EMBED_CONTENTS="batchEmbedContents"})(_l||(_l={}));class CL{constructor(e,t,n,s,o){this.model=e,this.task=t,this.apiKey=n,this.stream=s,this.requestOptions=o}toString(){var e,t;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||AL;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||xL}/${n}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function kL(a){const e=[];return a!=null&&a.apiClient&&e.push(a.apiClient),e.push(`${SL}/${EL}`),e.join(" ")}async function TL(a){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",kL(a.requestOptions)),t.append("x-goog-api-key",a.apiKey);let n=(e=a.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new Ma(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,o]of n.entries()){if(s==="x-goog-api-key")throw new Ma(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new Ma(`Header name ${s} can only be set using the apiClient field`);t.append(s,o)}}return t}async function IL(a,e,t,n,s,o){const l=new CL(a,e,t,n,o);return{url:l.toString(),fetchOptions:Object.assign(Object.assign({},LL(o)),{method:"POST",headers:await TL(l),body:s})}}async function Tp(a,e,t,n,s,o={},l=fetch){const{url:d,fetchOptions:h}=await IL(a,e,t,n,s,o);return RL(d,h,l)}async function RL(a,e,t=fetch){let n;try{n=await t(a,e)}catch(s){PL(s,a)}return n.ok||await DL(n,a),n}function PL(a,e){let t=a;throw t.name==="AbortError"?(t=new hS(`Request aborted when fetching ${e.toString()}: ${a.message}`),t.stack=a.stack):a instanceof dS||a instanceof Ma||(t=new mn(`Error fetching from ${e.toString()}: ${a.message}`),t.stack=a.stack),t}async function DL(a,e){let t="",n;try{const s=await a.json();t=s.error.message,s.error.details&&(t+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new dS(`Error fetching from ${e.toString()}: [${a.status} ${a.statusText}] ${t}`,a.status,a.statusText,n)}function LL(a){const e={};if((a==null?void 0:a.signal)!==void 0||(a==null?void 0:a.timeout)>=0){const t=new AbortController;(a==null?void 0:a.timeout)>=0&&setTimeout(()=>t.abort(),a.timeout),a!=null&&a.signal&&a.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(a){return a.text=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),em(a.candidates[0]))throw new tc(`${Qr(a)}`,a);return ML(a)}else if(a.promptFeedback)throw new tc(`Text not available. ${Qr(a)}`,a);return""},a.functionCall=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),em(a.candidates[0]))throw new tc(`${Qr(a)}`,a);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),NA(a)[0]}else if(a.promptFeedback)throw new tc(`Function call not available. ${Qr(a)}`,a)},a.functionCalls=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),em(a.candidates[0]))throw new tc(`${Qr(a)}`,a);return NA(a)}else if(a.promptFeedback)throw new tc(`Function call not available. ${Qr(a)}`,a)},a}function ML(a){var e,t,n,s;const o=[];if(!((t=(e=a.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(s=(n=a.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)l.text&&o.push(l.text),l.executableCode&&o.push("\n```"+l.executableCode.language+`
`+l.executableCode.code+"\n```\n"),l.codeExecutionResult&&o.push("\n```\n"+l.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function NA(a){var e,t,n,s;const o=[];if(!((t=(e=a.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const l of(s=(n=a.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)l.functionCall&&o.push(l.functionCall);if(o.length>0)return o}const NL=[zd.RECITATION,zd.SAFETY,zd.LANGUAGE];function em(a){return!!a.finishReason&&NL.includes(a.finishReason)}function Qr(a){var e,t,n;let s="";if((!a.candidates||a.candidates.length===0)&&a.promptFeedback)s+="Response was blocked",!((e=a.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${a.promptFeedback.blockReason}`),!((t=a.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(s+=`: ${a.promptFeedback.blockReasonMessage}`);else if(!((n=a.candidates)===null||n===void 0)&&n[0]){const o=a.candidates[0];em(o)&&(s+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(s+=`: ${o.finishMessage}`))}return s}function Gd(a){return this instanceof Gd?(this.v=a,this):new Gd(a)}function OL(a,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(a,e||[]),s,o=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(y){n[y]&&(s[y]=function(_){return new Promise(function(x,C){o.push([y,_,x,C])>1||d(y,_)})})}function d(y,_){try{h(n[y](_))}catch(x){w(o[0][3],x)}}function h(y){y.value instanceof Gd?Promise.resolve(y.value.v).then(f,m):w(o[0][2],y)}function f(y){d("next",y)}function m(y){d("throw",y)}function w(y,_){y(_),o.shift(),o.length&&d(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function FL(a){const e=a.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=BL(e),[n,s]=t.tee();return{stream:zL(n),response:jL(s)}}async function jL(a){const e=[],t=a.getReader();for(;;){const{done:n,value:s}=await t.read();if(n)return E0(UL(e));e.push(s)}}function zL(a){return OL(this,arguments,function*(){const t=a.getReader();for(;;){const{value:n,done:s}=yield Gd(t.read());if(s)break;yield yield Gd(E0(n))}})}function BL(a){const e=a.getReader();return new ReadableStream({start(n){let s="";return o();function o(){return e.read().then(({value:l,done:d})=>{if(d){if(s.trim()){n.error(new mn("Failed to parse stream"));return}n.close();return}s+=l;let h=s.match(OA),f;for(;h;){try{f=JSON.parse(h[1])}catch{n.error(new mn(`Error parsing JSON response: "${h[1]}"`));return}n.enqueue(f),s=s.substring(h[0].length),h=s.match(OA)}return o()}).catch(l=>{let d=l;throw d.stack=l.stack,d.name==="AbortError"?d=new hS("Request aborted when reading from the stream"):d=new mn("Error reading from the stream"),d})}}})}function UL(a){const e=a[a.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of a){if(n.candidates){let s=0;for(const o of n.candidates)if(t.candidates||(t.candidates=[]),t.candidates[s]||(t.candidates[s]={index:s}),t.candidates[s].citationMetadata=o.citationMetadata,t.candidates[s].groundingMetadata=o.groundingMetadata,t.candidates[s].finishReason=o.finishReason,t.candidates[s].finishMessage=o.finishMessage,t.candidates[s].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[s].content||(t.candidates[s].content={role:o.content.role||"user",parts:[]});const l={};for(const d of o.content.parts)d.text&&(l.text=d.text),d.functionCall&&(l.functionCall=d.functionCall),d.executableCode&&(l.executableCode=d.executableCode),d.codeExecutionResult&&(l.codeExecutionResult=d.codeExecutionResult),Object.keys(l).length===0&&(l.text=""),t.candidates[s].content.parts.push(l)}s++}n.usageMetadata&&(t.usageMetadata=n.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(a,e,t,n){const s=await Tp(e,_l.STREAM_GENERATE_CONTENT,a,!0,JSON.stringify(t),n);return FL(s)}async function fS(a,e,t,n){const o=await(await Tp(e,_l.GENERATE_CONTENT,a,!1,JSON.stringify(t),n)).json();return{response:E0(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(a){if(a!=null){if(typeof a=="string")return{role:"system",parts:[{text:a}]};if(a.text)return{role:"system",parts:[a]};if(a.parts)return a.role?a:{role:"system",parts:a.parts}}}function qd(a){let e=[];if(typeof a=="string")e=[{text:a}];else for(const t of a)typeof t=="string"?e.push({text:t}):e.push(t);return HL(e)}function HL(a){const e={role:"user",parts:[]},t={role:"function",parts:[]};let n=!1,s=!1;for(const o of a)"functionResponse"in o?(t.parts.push(o),s=!0):(e.parts.push(o),n=!0);if(n&&s)throw new mn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new mn("No content is provided for sending chat message.");return n?e:t}function $L(a,e){var t;let n={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const s=a.generateContentRequest!=null;if(a.contents){if(s)throw new Ma("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=a.contents}else if(s)n=Object.assign(Object.assign({},n),a.generateContentRequest);else{const o=qd(a);n.contents=[o]}return{generateContentRequest:n}}function FA(a){let e;return a.contents?e=a:e={contents:[qd(a)]},a.systemInstruction&&(e.systemInstruction=mS(a.systemInstruction)),e}function VL(a){return typeof a=="string"||Array.isArray(a)?{content:qd(a)}:a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],WL={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function GL(a){let e=!1;for(const t of a){const{role:n,parts:s}=t;if(!e&&n!=="user")throw new mn(`First content should be with role 'user', got ${n}`);if(!kA.includes(n))throw new mn(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(kA)}`);if(!Array.isArray(s))throw new mn("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new mn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of s)for(const h of jA)h in d&&(o[h]+=1);const l=WL[n];for(const d of jA)if(!l.includes(d)&&o[d]>0)throw new mn(`Content with role '${n}' can't contain '${d}' part`);e=!0}}function zA(a){var e;if(a.candidates===void 0||a.candidates.length===0)return!1;const t=(e=a.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const n of t.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="SILENT_ERROR";class qL{constructor(e,t,n,s={}){this.model=t,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(GL(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var n,s,o,l,d,h;await this._sendPromise;const f=qd(e),m={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},w=Object.assign(Object.assign({},this._requestOptions),t);let y;return this._sendPromise=this._sendPromise.then(()=>fS(this._apiKey,this.model,m,w)).then(_=>{var x;if(zA(_.response)){this._history.push(f);const C=Object.assign({parts:[],role:"model"},(x=_.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(C)}else{const C=Qr(_.response);C&&console.warn(`sendMessage() was unsuccessful. ${C}. Inspect response object for details.`)}y=_}).catch(_=>{throw this._sendPromise=Promise.resolve(),_}),await this._sendPromise,y}async sendMessageStream(e,t={}){var n,s,o,l,d,h;await this._sendPromise;const f=qd(e),m={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(l=this.params)===null||l===void 0?void 0:l.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},w=Object.assign(Object.assign({},this._requestOptions),t),y=pS(this._apiKey,this.model,m,w);return this._sendPromise=this._sendPromise.then(()=>y).catch(_=>{throw new Error(BA)}).then(_=>_.response).then(_=>{if(zA(_)){this._history.push(f);const x=Object.assign({},_.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=Qr(_);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(_=>{_.message!==BA&&console.error(_)}),y}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KL(a,e,t,n){return(await Tp(e,_l.COUNT_TOKENS,a,!1,JSON.stringify(t),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(a,e,t,n){return(await Tp(e,_l.EMBED_CONTENT,a,!1,JSON.stringify(t),n)).json()}async function YL(a,e,t,n){const s=t.requests.map(l=>Object.assign(Object.assign({},l),{model:e}));return(await Tp(e,_l.BATCH_EMBED_CONTENTS,a,!1,JSON.stringify({requests:s}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t,n={}){this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=mS(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var n;const s=FA(e),o=Object.assign(Object.assign({},this._requestOptions),t);return fS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}async generateContentStream(e,t={}){var n;const s=FA(e),o=Object.assign(Object.assign({},this._requestOptions),t);return pS(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),o)}startChat(e){var t;return new qL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const n=$L(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),t);return KL(this.apiKey,this.model,n,s)}async embedContent(e,t={}){const n=VL(e),s=Object.assign(Object.assign({},this._requestOptions),t);return XL(this.apiKey,this.model,n,s)}async batchEmbedContents(e,t={}){const n=Object.assign(Object.assign({},this._requestOptions),t);return YL(this.apiKey,this.model,e,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new mn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new UA(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new Ma("Cached content must contain a `name` field.");if(!e.model)throw new Ma("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const l of s)if(t!=null&&t[l]&&e[l]&&(t==null?void 0:t[l])!==e[l]){if(l==="model"){const d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,h=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===h)continue}throw new Ma(`Different value for "${l}" specified in modelParams (${t[l]}) and cachedContent (${e[l]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new UA(this.apiKey,o,n)}}var Bd={};Bd.d=(a,e)=>{for(var t in e)Bd.o(e,t)&&!Bd.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})};Bd.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e);var Re=globalThis.pdfjsLib={};Bd.d(Re,{AbortException:()=>Oa,AnnotationEditorLayer:()=>s0,AnnotationEditorParamsType:()=>Ue,AnnotationEditorType:()=>Me,AnnotationEditorUIManager:()=>Al,AnnotationLayer:()=>GN,AnnotationMode:()=>ta,ColorPicker:()=>qm,DOMSVGFactory:()=>L0,DrawLayer:()=>o0,FeatureTest:()=>Sn,GlobalWorkerOptions:()=>yr,ImageKind:()=>tm,InvalidPDFException:()=>Qy,MissingPDFException:()=>Kd,OPS:()=>Mi,OutputScale:()=>Zy,PDFDataRangeTransport:()=>v1,PDFDateString:()=>I0,PDFWorker:()=>gc,PasswordResponses:()=>tM,PermissionFlag:()=>eM,PixelsPerInch:()=>Fa,RenderingCancelledException:()=>k0,TextLayer:()=>Xd,TouchManager:()=>Wm,UnexpectedResponseException:()=>Hm,Util:()=>ve,VerbosityLevel:()=>bg,XfaLayer:()=>w1,build:()=>CN,createValidAbsoluteUrl:()=>rM,fetchData:()=>Eg,getDocument:()=>vN,getFilenameFromUrl:()=>fM,getPdfFilenameFromUrl:()=>mM,getXfaPageViewport:()=>gM,isDataScheme:()=>Sg,isPdfFile:()=>T0,noContextMenu:()=>Yi,normalizeUnicode:()=>dM,setLayerDimensions:()=>xl,shadow:()=>Be,stopEvent:()=>ai,version:()=>SN});const gn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),gS=[1,0,0,1,0,0],Yy=[.001,0,0,.001,0,0],JL=1e7,Ry=1.35,si={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ta={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ZL="pdfjs_internal_editor_",Me={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},eM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},on={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},tm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Lt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},gd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bg={ERRORS:0,WARNINGS:1,INFOS:5},Mi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},tM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _g=bg.WARNINGS;function nM(a){Number.isInteger(a)&&(_g=a)}function iM(){return _g}function xg(a){_g>=bg.INFOS&&console.log(`Info: ${a}`)}function Ne(a){_g>=bg.WARNINGS&&console.log(`Warning: ${a}`)}function tt(a){throw new Error(a)}function It(a,e){a||tt(e)}function sM(a){switch(a==null?void 0:a.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function rM(a,e=null,t=null){if(!a)return null;try{if(t&&typeof a=="string"){if(t.addDefaultProtocol&&a.startsWith("www.")){const s=a.match(/\./g);(s==null?void 0:s.length)>=2&&(a=`http://${a}`)}if(t.tryConvertEncoding)try{a=uM(a)}catch{}}const n=e?new URL(a,e):new URL(a);if(sM(n))return n}catch{}return null}function Be(a,e,t,n=!1){return Object.defineProperty(a,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Ua=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class HA extends Ua{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Py extends Ua{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Qy extends Ua{constructor(e){super(e,"InvalidPDFException")}}class Kd extends Ua{constructor(e){super(e,"MissingPDFException")}}class Hm extends Ua{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class aM extends Ua{constructor(e){super(e,"FormatError")}}class Oa extends Ua{constructor(e){super(e,"AbortException")}}function vS(a){(typeof a!="object"||(a==null?void 0:a.length)===void 0)&&tt("Invalid argument for bytesToString");const e=a.length,t=8192;if(e<t)return String.fromCharCode.apply(null,a);const n=[];for(let s=0;s<e;s+=t){const o=Math.min(s+t,e),l=a.subarray(s,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Ag(a){typeof a!="string"&&tt("Invalid argument for stringToBytes");const e=a.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=a.charCodeAt(n)&255;return t}function oM(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function S0(a){const e=Object.create(null);for(const[t,n]of a)e[t]=n;return e}function lM(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function cM(){try{return new Function(""),!0}catch{return!1}}class Sn{static get isLittleEndian(){return Be(this,"isLittleEndian",lM())}static get isEvalSupported(){return Be(this,"isEvalSupported",cM())}static get isOffscreenCanvasSupported(){return Be(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Be(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Be(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Be(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Be(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Dy=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));var _r,nm,Jy;class ve{static makeHexColor(e,t,n){return`#${Dy[e]}${Dy[t]}${Dy[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[n,s]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[s,o]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),l=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],s[0],o[0],l[0]),Math.min(n[1],s[1],o[1],l[1]),Math.max(n[0],s[0],o[0],l[0]),Math.max(n[1],s[1],o[1],l[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],l=e[2]*t[1]+e[3]*t[3],d=(n+l)/2,h=Math.sqrt((n+l)**2-4*(n*l-o*s))/2,f=d+h||1,m=d-h||1;return[Math.sqrt(f),Math.sqrt(m)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[n,o,s,l]}static bezierBoundingBox(e,t,n,s,o,l,d,h,f){return f?(f[0]=Math.min(f[0],e,d),f[1]=Math.min(f[1],t,h),f[2]=Math.max(f[2],e,d),f[3]=Math.max(f[3],t,h)):f=[Math.min(e,d),Math.min(t,h),Math.max(e,d),Math.max(t,h)],S(this,_r,Jy).call(this,e,n,o,d,t,s,l,h,3*(-e+3*(n-o)+d),6*(e-2*n+o),3*(n-e),f),S(this,_r,Jy).call(this,e,n,o,d,t,s,l,h,3*(-t+3*(s-l)+h),6*(t-2*s+l),3*(s-t),f),f}}_r=new WeakSet,nm=function(e,t,n,s,o,l,d,h,f,m){if(f<=0||f>=1)return;const w=1-f,y=f*f,_=y*f,x=w*(w*(w*e+3*f*t)+3*y*n)+_*s,C=w*(w*(w*o+3*f*l)+3*y*d)+_*h;m[0]=Math.min(m[0],x),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],x),m[3]=Math.max(m[3],C)},Jy=function(e,t,n,s,o,l,d,h,f,m,w,y){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&S(this,_r,nm).call(this,e,t,n,s,o,l,d,h,-w/m,y);return}const _=m**2-4*w*f;if(_<0)return;const x=Math.sqrt(_),C=2*f;S(this,_r,nm).call(this,e,t,n,s,o,l,d,h,(-m+x)/C,y),S(this,_r,nm).call(this,e,t,n,s,o,l,d,h,(-m-x)/C,y)},E(ve,_r);function uM(a){return decodeURIComponent(escape(a))}let Ly=null,$A=null;function dM(a){return Ly||(Ly=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$A=new Map([["","t"]])),a.replaceAll(Ly,(e,t,n)=>t?t.normalize("NFKC"):$A.get(n))}function hM(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),vS(a)}const C0="pdfjs_internal_id_";function pM(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(vS(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...e){return new Promise(t=>{t(a(...e))})});const Us="http://www.w3.org/2000/svg",ho=class ho{};Se(ho,"CSS",96),Se(ho,"PDF",72),Se(ho,"PDF_TO_CSS_UNITS",ho.CSS/ho.PDF);let Fa=ho;async function Eg(a,e="text"){if(_d(a,document.baseURI)){const t=await fetch(a);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",a,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Ip{constructor({viewBox:e,userUnit:t,scale:n,rotation:s,offsetX:o=0,offsetY:l=0,dontFlip:d=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=s,this.offsetX=o,this.offsetY=l,n*=t;const h=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let m,w,y,_;switch(s%=360,s<0&&(s+=360),s){case 180:m=-1,w=0,y=0,_=1;break;case 90:m=0,w=1,y=1,_=0;break;case 270:m=0,w=-1,y=-1,_=0;break;case 0:m=1,w=0,y=0,_=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(y=-y,_=-_);let x,C,k,T;m===0?(x=Math.abs(f-e[1])*n+o,C=Math.abs(h-e[0])*n+l,k=(e[3]-e[1])*n,T=(e[2]-e[0])*n):(x=Math.abs(h-e[0])*n+o,C=Math.abs(f-e[1])*n+l,k=(e[2]-e[0])*n,T=(e[3]-e[1])*n),this.transform=[m*n,w*n,y*n,_*n,x-m*n*h-y*n*f,C-w*n*h-_*n*f],this.width=k,this.height=T}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(s=>s*e);return Be(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:o=!1}={}){return new Ip({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:o})}convertToViewportPoint(e,t){return ve.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ve.applyTransform([e[0],e[1]],this.transform),n=ve.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return ve.applyInverseTransform([e,t],this.transform)}}class k0 extends Ua{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Sg(a){const e=a.length;let t=0;for(;t<e&&a[t].trim()==="";)t++;return a.substring(t,t+5).toLowerCase()==="data:"}function T0(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function fM(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function mM(a,e="document.pdf"){if(typeof a!="string")return e;if(Sg(a))return Ne('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(a);let o=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e}class VA{constructor(){Se(this,"started",Object.create(null));Se(this,"times",[])}time(e){e in this.started&&Ne(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ne(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-s}ms
`);return e.join("")}}function _d(a,e){try{const{protocol:t}=e?new URL(a,e):new URL(a);return t==="http:"||t==="https:"}catch{return!1}}function Yi(a){a.preventDefault()}function ai(a){a.preventDefault(),a.stopPropagation()}var Qd;class I0{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,Qd)||b(this,Qd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,Qd).exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let d=parseInt(t[5],10);d=d>=0&&d<=59?d:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const f=t[7]||"Z";let m=parseInt(t[8],10);m=m>=0&&m<=23?m:0;let w=parseInt(t[9],10)||0;return w=w>=0&&w<=59?w:0,f==="-"?(l+=m,d+=w):f==="+"&&(l-=m,d-=w),new Date(Date.UTC(n,s,o,l,d,h))}}Qd=new WeakMap,E(I0,Qd);function gM(a,{scale:e=1,rotation:t=0}){const{width:n,height:s}=a.attributes.style,o=[0,0,parseInt(n),parseInt(s)];return new Ip({viewBox:o,userUnit:1,scale:e,rotation:t})}function R0(a){if(a.startsWith("#")){const e=parseInt(a.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(e=>parseInt(e)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ne(`Not a valid color format: "${a}"`),[0,0,0])}function vM(a){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of a.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;a.set(t,R0(n))}e.remove()}function ct(a){const{a:e,b:t,c:n,d:s,e:o,f:l}=a.getTransform();return[e,t,n,s,o,l]}function as(a){const{a:e,b:t,c:n,d:s,e:o,f:l}=a.getTransform().invertSelf();return[e,t,n,s,o,l]}function xl(a,e,t=!1,n=!0){if(e instanceof Ip){const{pageWidth:s,pageHeight:o}=e.rawDims,{style:l}=a,d=Sn.isCSSRoundSupported,h=`var(--scale-factor) * ${s}px`,f=`var(--scale-factor) * ${o}px`,m=d?`round(down, ${h}, var(--scale-round-x, 1px))`:`calc(${h})`,w=d?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!t||e.rotation%180===0?(l.width=m,l.height=w):(l.width=w,l.height=m)}n&&a.setAttribute("data-main-rotation",e.rotation)}class Zy{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var na,mo,Ni,go,Jd,Zd,Ym,yS,Cn,wS,bS,im,_S,tw;const Vs=class Vs{constructor(e){E(this,Cn);E(this,na,null);E(this,mo,null);E(this,Ni);E(this,go,null);E(this,Jd,null);b(this,Ni,e),c(Vs,Zd)||b(Vs,Zd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=b(this,na,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Ni)._uiManager._signal;e.addEventListener("contextmenu",Yi,{signal:t}),e.addEventListener("pointerdown",S(Vs,Ym,yS),{signal:t});const n=b(this,go,document.createElement("div"));n.className="buttons",e.append(n);const s=c(this,Ni).toolbarPosition;if(s){const{style:o}=e,l=c(this,Ni)._uiManager.direction==="ltr"?1-s[0]:s[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return S(this,Cn,_S).call(this),e}get div(){return c(this,na)}hide(){var e;c(this,na).classList.add("hidden"),(e=c(this,mo))==null||e.hideDropdown()}show(){var e;c(this,na).classList.remove("hidden"),(e=c(this,Jd))==null||e.shown()}async addAltText(e){const t=await e.render();S(this,Cn,im).call(this,t),c(this,go).prepend(t,c(this,Cn,tw)),b(this,Jd,e)}addColorPicker(e){b(this,mo,e);const t=e.renderButton();S(this,Cn,im).call(this,t),c(this,go).prepend(t,c(this,Cn,tw))}remove(){var e;c(this,na).remove(),(e=c(this,mo))==null||e.destroy(),b(this,mo,null)}};na=new WeakMap,mo=new WeakMap,Ni=new WeakMap,go=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,Ym=new WeakSet,yS=function(e){e.stopPropagation()},Cn=new WeakSet,wS=function(e){c(this,Ni)._focusEventsAllowed=!1,ai(e)},bS=function(e){c(this,Ni)._focusEventsAllowed=!0,ai(e)},im=function(e){const t=c(this,Ni)._uiManager._signal;e.addEventListener("focusin",S(this,Cn,wS).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",S(this,Cn,bS).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Yi,{signal:t})},_S=function(){const{editorType:e,_uiManager:t}=c(this,Ni),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",c(Vs,Zd)[e]),S(this,Cn,im).call(this,n),n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),c(this,go).append(n)},tw=function(){const e=document.createElement("div");return e.className="divider",e},E(Vs,Ym),E(Vs,Zd,null);let ew=Vs;var eh,vo,yo,ja,xS,AS,ES;class yM{constructor(e){E(this,ja);E(this,eh,null);E(this,vo,null);E(this,yo);b(this,yo,e)}show(e,t,n){const[s,o]=S(this,ja,AS).call(this,t,n),{style:l}=c(this,vo)||b(this,vo,S(this,ja,xS).call(this));e.append(c(this,vo)),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,vo).remove()}}eh=new WeakMap,vo=new WeakMap,yo=new WeakMap,ja=new WeakSet,xS=function(){const e=b(this,vo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Yi,{signal:c(this,yo)._signal});const t=b(this,eh,document.createElement("div"));return t.className="buttons",e.append(t),S(this,ja,ES).call(this),e},AS=function(e,t){let n=0,s=0;for(const o of e){const l=o.y+o.height;if(l<n)continue;const d=o.x+(t?o.width:0);if(l>n){s=d,n=l;continue}t?d>s&&(s=d):d<s&&(s=d)}return[t?1-s:s,n]},ES=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(this,yo)._signal;e.addEventListener("contextmenu",Yi,{signal:n}),e.addEventListener("click",()=>{c(this,yo).highlightSelection("floating_button")},{signal:n}),c(this,eh).append(e)};function $m(a,e,t){for(const n of t)e.addEventListener(n,a[n].bind(a))}var Qm;class wM{constructor(){E(this,Qm,0)}get id(){return`${ZL}${wn(this,Qm)._++}`}}Qm=new WeakMap;var vc,th,un,yc,sm;const N0=class N0{constructor(){E(this,yc);E(this,vc,hM());E(this,th,0);E(this,un,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const o=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Be(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:o}=e;return S(this,yc,sm).call(this,`${t}_${n}_${s}_${o}`,e)}async getFromUrl(e){return S(this,yc,sm).call(this,e,e)}async getFromBlob(e,t){const n=await t;return S(this,yc,sm).call(this,e,n)}async getFromId(e){c(this,un)||b(this,un,new Map);const t=c(this,un).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,un)||b(this,un,new Map);let n=c(this,un).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${c(this,vc)}_${wn(this,th)._++}`,refCounter:1,isSvg:!1},c(this,un).set(e,n),c(this,un).set(n.id,n),n}getSvgUrl(e){const t=c(this,un).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;c(this,un)||b(this,un,new Map);const t=c(this,un).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=o.convertToBlob()}(s=n.close)==null||s.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,vc)}_`)}};vc=new WeakMap,th=new WeakMap,un=new WeakMap,yc=new WeakSet,sm=async function(e,t){c(this,un)||b(this,un,new Map);let n=c(this,un).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,vc)}_${wn(this,th)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await Eg(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const o=N0._isSVGFittingCanvas,l=new FileReader,d=new Image,h=new Promise((f,m)=>{d.onload=()=>{n.bitmap=d,n.isSvg=!0,f()},l.onload=async()=>{const w=n.svgUrl=l.result;d.src=await o?`${w}#svgView(preserveAspectRatio(none))`:w},d.onerror=l.onerror=m});l.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Ne(s),n=null}return c(this,un).set(e,n),n&&c(this,un).set(n.id,n),n};let nw=N0;var At,ia,nh,ft;class bM{constructor(e=128){E(this,At,[]);E(this,ia,!1);E(this,nh);E(this,ft,-1);b(this,nh,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:d=!1}){if(s&&e(),c(this,ia))return;const h={cmd:e,undo:t,post:n,type:o};if(c(this,ft)===-1){c(this,At).length>0&&(c(this,At).length=0),b(this,ft,0),c(this,At).push(h);return}if(l&&c(this,At)[c(this,ft)].type===o){d&&(h.undo=c(this,At)[c(this,ft)].undo),c(this,At)[c(this,ft)]=h;return}const f=c(this,ft)+1;f===c(this,nh)?c(this,At).splice(0,1):(b(this,ft,f),f<c(this,At).length&&c(this,At).splice(f)),c(this,At).push(h)}undo(){if(c(this,ft)===-1)return;b(this,ia,!0);const{undo:e,post:t}=c(this,At)[c(this,ft)];e(),t==null||t(),b(this,ia,!1),b(this,ft,c(this,ft)-1)}redo(){if(c(this,ft)<c(this,At).length-1){b(this,ft,c(this,ft)+1),b(this,ia,!0);const{cmd:e,post:t}=c(this,At)[c(this,ft)];e(),t==null||t(),b(this,ia,!1)}}hasSomethingToUndo(){return c(this,ft)!==-1}hasSomethingToRedo(){return c(this,ft)<c(this,At).length-1}cleanType(e){if(c(this,ft)!==-1){for(let t=c(this,ft);t>=0;t--)if(c(this,At)[t].type!==e){c(this,At).splice(t+1,c(this,ft)-t),b(this,ft,t);return}c(this,At).length=0,b(this,ft,-1)}}destroy(){b(this,At,null)}}At=new WeakMap,ia=new WeakMap,nh=new WeakMap,ft=new WeakMap;var Jm,SS;class Rp{constructor(e){E(this,Jm);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Sn.platform;for(const[n,s,o={}]of e)for(const l of n){const d=l.startsWith("mac+");t&&d?(this.callbacks.set(l.slice(4),{callback:s,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!d&&(this.callbacks.set(l,{callback:s,options:o}),this.allKeys.add(l.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(S(this,Jm,SS).call(this,t));if(!n)return;const{callback:s,options:{bubbles:o=!1,args:l=[],checker:d=null}}=n;d&&!d(e,t)||(s.bind(e,...l,t)(),o||ai(t))}}Jm=new WeakSet,SS=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Zm=class Zm{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return vM(e),Be(this,"_colors",e)}convert(e){const t=R0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((o,l)=>o===t[l]))return Zm._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?ve.makeHexColor(...t):e}};Se(Zm,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let iw=Zm;var wc,Gn,Nt,Yt,bc,Gs,_c,gi,sa,wo,xc,bo,cs,Oi,_o,ih,sh,Ac,rh,us,ra,Ec,aa,ds,eg,oa,ah,la,xo,oh,lh,Ht,Xe,qs,Ao,ch,uh,ca,hs,Ks,dh,vi,te,rm,sw,CS,kS,am,TS,IS,RS,rw,PS,aw,ow,DS,bn,Hs,LS,MS,lw,NS,xd,cw;const cc=class cc{constructor(e,t,n,s,o,l,d,h,f,m,w,y,_){E(this,te);E(this,wc,new AbortController);E(this,Gn,null);E(this,Nt,new Map);E(this,Yt,new Map);E(this,bc,null);E(this,Gs,null);E(this,_c,null);E(this,gi,new bM);E(this,sa,null);E(this,wo,null);E(this,xc,0);E(this,bo,new Set);E(this,cs,null);E(this,Oi,null);E(this,_o,new Set);Se(this,"_editorUndoBar",null);E(this,ih,!1);E(this,sh,!1);E(this,Ac,!1);E(this,rh,null);E(this,us,null);E(this,ra,null);E(this,Ec,null);E(this,aa,!1);E(this,ds,null);E(this,eg,new wM);E(this,oa,!1);E(this,ah,!1);E(this,la,null);E(this,xo,null);E(this,oh,null);E(this,lh,null);E(this,Ht,Me.NONE);E(this,Xe,new Set);E(this,qs,null);E(this,Ao,null);E(this,ch,null);E(this,uh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,ca,[0,0]);E(this,hs,null);E(this,Ks,null);E(this,dh,null);E(this,vi,null);const x=this._signal=c(this,wc).signal;b(this,Ks,e),b(this,dh,t),b(this,bc,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:x}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),s._on("setpreference",this.onSetPreference.bind(this),{signal:x}),s._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:x}),S(this,te,TS).call(this),S(this,te,DS).call(this),S(this,te,rw).call(this),b(this,Gs,o.annotationStorage),b(this,rh,o.filterFactory),b(this,Ao,l),b(this,Ec,d||null),b(this,ih,h),b(this,sh,f),b(this,Ac,m),b(this,lh,w||null),this.viewParameters={realScale:Fa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=_!==!1}static get _keyboardManager(){const e=cc.prototype,t=l=>c(l,Ks).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:d})=>{if(d instanceof HTMLInputElement){const{type:h}=d;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Be(this,"_keyboardManager",new Rp([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:d})=>!(d instanceof HTMLButtonElement)&&c(l,Ks).contains(d)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:d})=>!(d instanceof HTMLButtonElement)&&c(l,Ks).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,n,s,o;(e=c(this,vi))==null||e.resolve(),b(this,vi,null),(t=c(this,wc))==null||t.abort(),b(this,wc,null),this._signal=null;for(const l of c(this,Yt).values())l.destroy();c(this,Yt).clear(),c(this,Nt).clear(),c(this,_o).clear(),b(this,Gn,null),c(this,Xe).clear(),c(this,gi).destroy(),(n=c(this,bc))==null||n.destroy(),(s=c(this,ds))==null||s.hide(),b(this,ds,null),c(this,us)&&(clearTimeout(c(this,us)),b(this,us,null)),c(this,hs)&&(clearTimeout(c(this,hs)),b(this,hs,null)),(o=this._editorUndoBar)==null||o.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,lh)}get useNewAltTextFlow(){return c(this,sh)}get useNewAltTextWhenAddingImage(){return c(this,Ac)}get hcmFilter(){return Be(this,"hcmFilter",c(this,Ao)?c(this,rh).addHCMFilter(c(this,Ao).foreground,c(this,Ao).background):"none")}get direction(){return Be(this,"direction",getComputedStyle(c(this,Ks)).direction)}get highlightColors(){return Be(this,"highlightColors",c(this,Ec)?new Map(c(this,Ec).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Be(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,wo,e)}setMainHighlightColorPicker(e){b(this,oh,e)}editAltText(e,t=!1){var n;(n=c(this,bc))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,Ac,t);break}}onPageChanging({pageNumber:e}){b(this,xc,e-1)}focusMainContainer(){c(this,Ks).focus()}findParent(e,t){for(const n of c(this,Yt).values()){const{x:s,y:o,width:l,height:d}=n.div.getBoundingClientRect();if(e>=s&&e<=s+l&&t>=o&&t<=o+d)return n}return null}disableUserSelect(e=!1){c(this,dh).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,_o).add(e)}removeShouldRescale(e){c(this,_o).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Fa.PDF_TO_CSS_UNITS;for(const n of c(this,_o))n.onScaleChanging();(t=c(this,wo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:o,focusOffset:l}=t,d=t.toString(),f=S(this,te,rm).call(this,t).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;t.empty();const w=S(this,te,sw).call(this,f),y=c(this,Ht)===Me.NONE,_=()=>{w==null||w.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:n,anchorOffset:s,focusNode:o,focusOffset:l,text:d}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(Me.HIGHLIGHT,_);return}_()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,Gs)&&!c(this,Gs).has(e.id)&&c(this,Gs).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,aa)&&(b(this,aa,!1),S(this,te,am).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Xe))if(t.div.contains(e)){b(this,xo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,xo))return;const[e,t]=c(this,xo);b(this,xo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){S(this,te,rw).call(this),S(this,te,aw).call(this)}removeEditListeners(){S(this,te,PS).call(this),S(this,te,ow).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of c(this,Oi))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of c(this,Oi))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=c(this,Gn))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of c(this,Xe)){const o=s.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of c(this,Oi))if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ne(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const o=[];for(const h of n){const f=await s.deserialize(h);if(!f)return;o.push(f)}const l=()=>{for(const h of o)S(this,te,lw).call(this,h);S(this,te,cw).call(this,o)},d=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:d,mustExec:!0})}catch(o){Ne(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,Ht)!==Me.NONE&&!this.isEditorHandlingKeyboard&&cc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,aa)&&(b(this,aa,!1),S(this,te,am).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(S(this,te,IS).call(this),S(this,te,aw).call(this),S(this,te,bn).call(this,{isEditing:c(this,Ht)!==Me.NONE,isEmpty:S(this,te,xd).call(this),hasSomethingToUndo:c(this,gi).hasSomethingToUndo(),hasSomethingToRedo:c(this,gi).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,te,RS).call(this),S(this,te,ow).call(this),S(this,te,bn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,Oi)){b(this,Oi,e);for(const t of c(this,Oi))S(this,te,Hs).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,eg).id}get currentLayer(){return c(this,Yt).get(c(this,xc))}getLayer(e){return c(this,Yt).get(e)}get currentPageIndex(){return c(this,xc)}addLayer(e){c(this,Yt).set(e.pageIndex,e),c(this,oa)?e.enable():e.disable()}removeLayer(e){c(this,Yt).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var s;if(c(this,Ht)!==e&&!(c(this,vi)&&(await c(this,vi).promise,!c(this,vi)))){if(b(this,vi,Promise.withResolvers()),b(this,Ht,e),e===Me.NONE){this.setEditingState(!1),S(this,te,MS).call(this),(s=this._editorUndoBar)==null||s.hide(),c(this,vi).resolve();return}this.setEditingState(!0),await S(this,te,LS).call(this),this.unselectAll();for(const o of c(this,Yt).values())o.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),c(this,vi).resolve();return}for(const o of c(this,Nt).values())o.annotationElementId===t?(this.setSelected(o),o.enterInEditMode()):o.unselect();c(this,vi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,Ht)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(c(this,Oi)){switch(e){case Ue.CREATE:this.currentLayer.addNewEditor();return;case Ue.HIGHLIGHT_DEFAULT_COLOR:(n=c(this,oh))==null||n.updateColor(t);break;case Ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,ch)||b(this,ch,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of c(this,Xe))s.updateParams(e,t);for(const s of c(this,Oi))s.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var o;for(const l of c(this,Nt).values())l.editorType===e&&l.show(t);(((o=c(this,ch))==null?void 0:o.get(Ue.HIGHLIGHT_SHOW_ALL))??!0)!==t&&S(this,te,Hs).call(this,[[Ue.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,ah)!==e){b(this,ah,e);for(const t of c(this,Yt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of c(this,Nt).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return c(this,Nt).get(e)}addEditor(e){c(this,Nt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,us)&&clearTimeout(c(this,us)),b(this,us,setTimeout(()=>{this.focusMainContainer(),b(this,us,null)},0))),c(this,Nt).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,bo).has(e.annotationElementId))&&((t=c(this,Gs))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,bo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,bo).has(e)}removeDeletedAnnotationElement(e){c(this,bo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Gn)!==e&&(b(this,Gn,e),e&&S(this,te,Hs).call(this,e.propertiesToUpdate))}updateUI(e){c(this,te,NS)===e&&S(this,te,Hs).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){S(this,te,Hs).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,Xe).has(e)){c(this,Xe).delete(e),e.unselect(),S(this,te,bn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Xe).add(e),e.select(),S(this,te,Hs).call(this,e.propertiesToUpdate),S(this,te,bn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=c(this,wo))==null||t.commitOrRemove();for(const n of c(this,Xe))n!==e&&n.unselect();c(this,Xe).clear(),c(this,Xe).add(e),e.select(),S(this,te,Hs).call(this,e.propertiesToUpdate),S(this,te,bn).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Xe).has(e)}get firstSelectedEditor(){return c(this,Xe).values().next().value}unselect(e){e.unselect(),c(this,Xe).delete(e),S(this,te,bn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Xe).size!==0}get isEnterHandled(){return c(this,Xe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,gi).undo(),S(this,te,bn).call(this,{hasSomethingToUndo:c(this,gi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,te,xd).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,gi).redo(),S(this,te,bn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,gi).hasSomethingToRedo(),isEmpty:S(this,te,xd).call(this)})}addCommands(e){c(this,gi).add(e),S(this,te,bn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,te,xd).call(this)})}cleanUndoStack(e){c(this,gi).cleanType(e)}delete(){var o;this.commitOrRemove();const e=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,Xe)],n=()=>{var l;(l=this._editorUndoBar)==null||l.show(s,t.length===1?t[0].editorType:t.length);for(const d of t)d.remove()},s=()=>{for(const l of t)S(this,te,lw).call(this,l)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Gn))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Gn)||this.hasSelection}selectAll(){for(const e of c(this,Xe))e.commit();S(this,te,cw).call(this,c(this,Nt).values())}unselectAll(){var e;if(!(c(this,Gn)&&(c(this,Gn).commitOrRemove(),c(this,Ht)!==Me.NONE))&&!((e=c(this,wo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,Xe))t.unselect();c(this,Xe).clear(),S(this,te,bn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,ca)[0]+=e,c(this,ca)[1]+=t;const[s,o]=c(this,ca),l=[...c(this,Xe)],d=1e3;c(this,hs)&&clearTimeout(c(this,hs)),b(this,hs,setTimeout(()=>{b(this,hs,null),c(this,ca)[0]=c(this,ca)[1]=0,this.addCommands({cmd:()=>{for(const h of l)c(this,Nt).has(h.id)&&h.translateInPage(s,o)},undo:()=>{for(const h of l)c(this,Nt).has(h.id)&&h.translateInPage(-s,-o)},mustExec:!1})},d));for(const h of l)h.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,cs,new Map);for(const e of c(this,Xe))c(this,cs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,cs))return!1;this.disableUserSelect(!1);const e=c(this,cs);b(this,cs,null);let t=!1;for(const[{x:s,y:o,pageIndex:l},d]of e)d.newX=s,d.newY=o,d.newPageIndex=l,t||(t=s!==d.savedX||o!==d.savedY||l!==d.savedPageIndex);if(!t)return!1;const n=(s,o,l,d)=>{if(c(this,Nt).has(s.id)){const h=c(this,Yt).get(d);h?s._setParentAndPosition(h,o,l):(s.pageIndex=d,s.x=o,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:l,newPageIndex:d}]of e)n(s,o,l,d)},undo:()=>{for(const[s,{savedX:o,savedY:l,savedPageIndex:d}]of e)n(s,o,l,d)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,cs))for(const n of c(this,cs).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Xe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Gn)===e}getActive(){return c(this,Gn)}getMode(){return c(this,Ht)}get imageManager(){return Be(this,"imageManager",new nw)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,m=t.rangeCount;f<m;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:o,height:l}=e.getBoundingClientRect();let d;switch(e.getAttribute("data-main-rotation")){case"90":d=(f,m,w,y)=>({x:(m-s)/l,y:1-(f+w-n)/o,width:y/l,height:w/o});break;case"180":d=(f,m,w,y)=>({x:1-(f+w-n)/o,y:1-(m+y-s)/l,width:w/o,height:y/l});break;case"270":d=(f,m,w,y)=>({x:1-(m+y-s)/l,y:(f-n)/o,width:y/l,height:w/o});break;default:d=(f,m,w,y)=>({x:(f-n)/o,y:(m-s)/l,width:w/o,height:y/l});break}const h=[];for(let f=0,m=t.rangeCount;f<m;f++){const w=t.getRangeAt(f);if(!w.collapsed)for(const{x:y,y:_,width:x,height:C}of w.getClientRects())x===0||C===0||h.push(d(y,_,x,C))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,_c)||b(this,_c,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,_c))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=c(this,_c))==null?void 0:s.get(e.data.id);if(!t)return;const n=c(this,Gs).getRawValue(t);n&&(c(this,Ht)===Me.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};wc=new WeakMap,Gn=new WeakMap,Nt=new WeakMap,Yt=new WeakMap,bc=new WeakMap,Gs=new WeakMap,_c=new WeakMap,gi=new WeakMap,sa=new WeakMap,wo=new WeakMap,xc=new WeakMap,bo=new WeakMap,cs=new WeakMap,Oi=new WeakMap,_o=new WeakMap,ih=new WeakMap,sh=new WeakMap,Ac=new WeakMap,rh=new WeakMap,us=new WeakMap,ra=new WeakMap,Ec=new WeakMap,aa=new WeakMap,ds=new WeakMap,eg=new WeakMap,oa=new WeakMap,ah=new WeakMap,la=new WeakMap,xo=new WeakMap,oh=new WeakMap,lh=new WeakMap,Ht=new WeakMap,Xe=new WeakMap,qs=new WeakMap,Ao=new WeakMap,ch=new WeakMap,uh=new WeakMap,ca=new WeakMap,hs=new WeakMap,Ks=new WeakMap,dh=new WeakMap,vi=new WeakMap,te=new WeakSet,rm=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},sw=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of c(this,Yt).values())if(n.hasTextLayer(e))return n;return null},CS=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=S(this,te,rm).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(c(this,ds)||b(this,ds,new yM(this)),c(this,ds).show(n,s,this.direction==="ltr"))},kS=function(){var o,l,d;const e=document.getSelection();if(!e||e.isCollapsed){c(this,qs)&&((o=c(this,ds))==null||o.hide(),b(this,qs,null),S(this,te,bn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,qs))return;const s=S(this,te,rm).call(this,e).closest(".textLayer");if(!s){c(this,qs)&&((l=c(this,ds))==null||l.hide(),b(this,qs,null),S(this,te,bn).call(this,{hasSelectedText:!1}));return}if((d=c(this,ds))==null||d.hide(),b(this,qs,t),S(this,te,bn).call(this,{hasSelectedText:!0}),!(c(this,Ht)!==Me.HIGHLIGHT&&c(this,Ht)!==Me.NONE)&&(c(this,Ht)===Me.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,aa,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=c(this,Ht)===Me.HIGHLIGHT?S(this,te,sw).call(this,s):null;h==null||h.toggleDrawing();const f=new AbortController,m=this.combinedSignal(f),w=y=>{y.type==="pointerup"&&y.button!==0||(f.abort(),h==null||h.toggleDrawing(!0),y.type==="pointerup"&&S(this,te,am).call(this,"main_toolbar"))};window.addEventListener("pointerup",w,{signal:m}),window.addEventListener("blur",w,{signal:m})}},am=function(e=""){c(this,Ht)===Me.HIGHLIGHT?this.highlightSelection(e):c(this,ih)&&S(this,te,CS).call(this)},TS=function(){document.addEventListener("selectionchange",S(this,te,kS).bind(this),{signal:this._signal})},IS=function(){if(c(this,ra))return;b(this,ra,new AbortController);const e=this.combinedSignal(c(this,ra));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},RS=function(){var e;(e=c(this,ra))==null||e.abort(),b(this,ra,null)},rw=function(){if(c(this,la))return;b(this,la,new AbortController);const e=this.combinedSignal(c(this,la));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},PS=function(){var e;(e=c(this,la))==null||e.abort(),b(this,la,null)},aw=function(){if(c(this,sa))return;b(this,sa,new AbortController);const e=this.combinedSignal(c(this,sa));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},ow=function(){var e;(e=c(this,sa))==null||e.abort(),b(this,sa,null)},DS=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},bn=function(e){Object.entries(e).some(([n,s])=>c(this,uh)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,uh),e)}),c(this,Ht)===Me.HIGHLIGHT&&e.hasSelectedEditor===!1&&S(this,te,Hs).call(this,[[Ue.HIGHLIGHT_FREE,!0]]))},Hs=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},LS=async function(){if(!c(this,oa)){b(this,oa,!0);const e=[];for(const t of c(this,Yt).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,Nt).values())t.enable()}},MS=function(){if(this.unselectAll(),c(this,oa)){b(this,oa,!1);for(const e of c(this,Yt).values())e.disable();for(const e of c(this,Nt).values())e.disable()}},lw=function(e){const t=c(this,Yt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},NS=function(){let e=null;for(e of c(this,Xe));return e},xd=function(){if(c(this,Nt).size===0)return!0;if(c(this,Nt).size===1)for(const e of c(this,Nt).values())return e.isEmpty();return!1},cw=function(e){for(const t of c(this,Xe))t.unselect();c(this,Xe).clear();for(const t of e)t.isEmpty()||(c(this,Xe).add(t),t.select());S(this,te,bn).call(this,{hasSelectedEditor:this.hasSelection})},Se(cc,"TRANSLATE_SMALL",1),Se(cc,"TRANSLATE_BIG",10);let Al=cc;var $t,ps,Fi,Sc,fs,qn,Cc,ms,jn,Xs,Eo,gs,ua,Ki,Ad,om;const _n=class _n{constructor(e){E(this,Ki);E(this,$t,null);E(this,ps,!1);E(this,Fi,null);E(this,Sc,null);E(this,fs,null);E(this,qn,null);E(this,Cc,!1);E(this,ms,null);E(this,jn,null);E(this,Xs,null);E(this,Eo,null);E(this,gs,!1);b(this,jn,e),b(this,gs,e._uiManager.useNewAltTextFlow),c(_n,ua)||b(_n,ua,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){_n._l10n??(_n._l10n=e)}async render(){const e=b(this,Fi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,Sc,document.createElement("span"));e.append(t),c(this,gs)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(_n,ua).missing),t.setAttribute("data-l10n-id",c(_n,ua)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,jn)._uiManager._signal;e.addEventListener("contextmenu",Yi,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const s=o=>{o.preventDefault(),c(this,jn)._uiManager.editAltText(c(this,jn)),c(this,gs)&&c(this,jn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Ki,Ad)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(b(this,Cc,!0),s(o))},{signal:n}),await S(this,Ki,om).call(this),e}finish(){c(this,Fi)&&(c(this,Fi).focus({focusVisible:c(this,Cc)}),b(this,Cc,!1))}isEmpty(){return c(this,gs)?c(this,$t)===null:!c(this,$t)&&!c(this,ps)}hasData(){return c(this,gs)?c(this,$t)!==null||!!c(this,Xs):this.isEmpty()}get guessedText(){return c(this,Xs)}async setGuessedText(e){c(this,$t)===null&&(b(this,Xs,e),b(this,Eo,await _n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),S(this,Ki,om).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,gs)||c(this,$t)){(t=c(this,ms))==null||t.remove(),b(this,ms,null);return}if(!c(this,ms)){const n=b(this,ms,document.createElement("div"));n.className="noAltTextBadge",c(this,jn).div.append(n)}c(this,ms).classList.toggle("hidden",!e)}serialize(e){let t=c(this,$t);return!e&&c(this,Xs)===t&&(t=c(this,Eo)),{altText:t,decorative:c(this,ps),guessedText:c(this,Xs),textWithDisclaimer:c(this,Eo)}}get data(){return{altText:c(this,$t),decorative:c(this,ps)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:o=!1}){n&&(b(this,Xs,n),b(this,Eo,s)),!(c(this,$t)===e&&c(this,ps)===t)&&(o||(b(this,$t,e),b(this,ps,t)),S(this,Ki,om).call(this))}toggle(e=!1){c(this,Fi)&&(!e&&c(this,qn)&&(clearTimeout(c(this,qn)),b(this,qn,null)),c(this,Fi).disabled=!e)}shown(){c(this,jn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Ki,Ad)}})}destroy(){var e,t;(e=c(this,Fi))==null||e.remove(),b(this,Fi,null),b(this,Sc,null),b(this,fs,null),(t=c(this,ms))==null||t.remove(),b(this,ms,null)}};$t=new WeakMap,ps=new WeakMap,Fi=new WeakMap,Sc=new WeakMap,fs=new WeakMap,qn=new WeakMap,Cc=new WeakMap,ms=new WeakMap,jn=new WeakMap,Xs=new WeakMap,Eo=new WeakMap,gs=new WeakMap,ua=new WeakMap,Ki=new WeakSet,Ad=function(){return c(this,$t)&&"added"||c(this,$t)===null&&this.guessedText&&"review"||"missing"},om=async function(){var s,o,l;const e=c(this,Fi);if(!e)return;if(c(this,gs)){if(e.classList.toggle("done",!!c(this,$t)),e.setAttribute("data-l10n-id",c(_n,ua)[c(this,Ki,Ad)]),(s=c(this,Sc))==null||s.setAttribute("data-l10n-id",c(_n,ua)[`${c(this,Ki,Ad)}-label`]),!c(this,$t)){(o=c(this,fs))==null||o.remove();return}}else{if(!c(this,$t)&&!c(this,ps)){e.classList.remove("done"),(l=c(this,fs))==null||l.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,fs);if(!t){b(this,fs,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,jn).id}`;const d=100,h=c(this,jn)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(c(this,qn)),b(this,qn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,qn,setTimeout(()=>{b(this,qn,null),c(this,fs).classList.add("show"),c(this,jn)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:h}),e.addEventListener("mouseleave",()=>{var f;c(this,qn)&&(clearTimeout(c(this,qn)),b(this,qn,null)),(f=c(this,fs))==null||f.classList.remove("show")},{signal:h})}c(this,ps)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,$t)),t.parentNode||e.append(t);const n=c(this,jn).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},E(_n,ua,null),Se(_n,"_l10n",null);let Vm=_n;var hh,So,ph,fh,mh,gh,vh,kc,Ys,Co,da,Sr,OS,FS,uw;const O0=class O0{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:o=null,onPinchEnd:l=null,signal:d}){E(this,Sr);E(this,hh);E(this,So,!1);E(this,ph,null);E(this,fh);E(this,mh);E(this,gh);E(this,vh);E(this,kc);E(this,Ys,null);E(this,Co);E(this,da,null);b(this,hh,e),b(this,ph,n),b(this,fh,t),b(this,mh,s),b(this,gh,o),b(this,vh,l),b(this,Co,new AbortController),b(this,kc,AbortSignal.any([d,c(this,Co).signal])),e.addEventListener("touchstart",S(this,Sr,OS).bind(this),{passive:!1,signal:c(this,kc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Be(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=c(this,Co))==null||e.abort(),b(this,Co,null)}};hh=new WeakMap,So=new WeakMap,ph=new WeakMap,fh=new WeakMap,mh=new WeakMap,gh=new WeakMap,vh=new WeakMap,kc=new WeakMap,Ys=new WeakMap,Co=new WeakMap,da=new WeakMap,Sr=new WeakSet,OS=function(e){var s,o,l;if((s=c(this,fh))!=null&&s.call(this)||e.touches.length<2)return;if(!c(this,da)){b(this,da,new AbortController);const d=AbortSignal.any([c(this,kc),c(this,da).signal]),h=c(this,hh),f={signal:d,passive:!1};h.addEventListener("touchmove",S(this,Sr,FS).bind(this),f),h.addEventListener("touchend",S(this,Sr,uw).bind(this),f),h.addEventListener("touchcancel",S(this,Sr,uw).bind(this),f),(o=c(this,mh))==null||o.call(this)}if(ai(e),e.touches.length!==2||(l=c(this,ph))!=null&&l.call(this)){b(this,Ys,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),b(this,Ys,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},FS=function(e){var N;if(!c(this,Ys)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:s,screenY:o}=t,{screenX:l,screenY:d}=n,h=c(this,Ys),{touch0X:f,touch0Y:m,touch1X:w,touch1Y:y}=h,_=w-f,x=y-m,C=l-s,k=d-o,T=Math.hypot(C,k)||1,P=Math.hypot(_,x)||1;if(!c(this,So)&&Math.abs(P-T)<=O0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=o,h.touch1X=l,h.touch1Y=d,e.preventDefault(),!c(this,So)){b(this,So,!0);return}const O=[(s+l)/2,(o+d)/2];(N=c(this,gh))==null||N.call(this,O,P,T)},uw=function(e){var t;c(this,da).abort(),b(this,da,null),(t=c(this,vh))==null||t.call(this),c(this,Ys)&&(e.preventDefault(),b(this,Ys,null),b(this,So,!1))};let Wm=O0;var ko,ji,at,Tc,ha,yh,To,Qt,Io,Qs,pa,wh,Ro,Kn,bh,Po,Js,vs,Ic,Rc,yi,Do,_h,tg,Ce,dw,xh,hw,lm,jS,zS,pw,cm,fw,BS,US,HS,mw,$S,gw,VS,WS,GS,vw,Ed;const Oe=class Oe{constructor(e){E(this,Ce);E(this,ko,null);E(this,ji,null);E(this,at,null);E(this,Tc,!1);E(this,ha,null);E(this,yh,"");E(this,To,!1);E(this,Qt,null);E(this,Io,null);E(this,Qs,null);E(this,pa,null);E(this,wh,"");E(this,Ro,!1);E(this,Kn,null);E(this,bh,!1);E(this,Po,!1);E(this,Js,!1);E(this,vs,null);E(this,Ic,0);E(this,Rc,0);E(this,yi,null);E(this,Do,null);Se(this,"_editToolbar",null);Se(this,"_initialOptions",Object.create(null));Se(this,"_initialData",null);Se(this,"_isVisible",!0);Se(this,"_uiManager",null);Se(this,"_focusEventsAllowed",!0);E(this,_h,!1);E(this,tg,Oe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[o,l];const[d,h]=this.parentDimensions;this.x=e.x/d,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Oe.prototype._resizeWithKeyboard,t=Al.TRANSLATE_SMALL,n=Al.TRANSLATE_BIG;return Be(this,"_resizerKeyboardManager",new Rp([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Oe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Be(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new _M({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Oe._l10n??(Oe._l10n=e),Oe._l10nResizer||(Oe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Oe._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Oe._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){tt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,_h)}set _isDraggable(e){var t;b(this,_h,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,tg)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):S(this,Ce,Ed).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Ro)?b(this,Ro,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[o,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/o,this.y=(t+s)/l,this.fixAndSetPosition()}translate(e,t){S(this,Ce,dw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Kn)||b(this,Kn,[this.x,this.y,this.width,this.height]),S(this,Ce,dw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,Kn)||b(this,Kn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,o]}=this;if(this.x+=e/s,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:w,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,w,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:d}=this;const[h,f]=this.getBaseTranslation();l+=h,d+=f;const{style:m}=n;m.left=`${(100*l).toFixed(2)}%`,m.top=`${(100*d).toFixed(2)}%`,this._onTranslating(l,d),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,Kn)&&(c(this,Kn)[0]!==this.x||c(this,Kn)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Kn)&&(c(this,Kn)[2]!==this.width||c(this,Kn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Oe,s=n/e,o=n/t;switch(this.rotation){case 90:return[-s,o];case 180:return[s,o];case 270:return[s,-o];default:return[-s,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,s]}=this;let{x:o,y:l,width:d,height:h}=this;if(d*=n,h*=s,o*=n,l*=s,this._mustFixPosition)switch(e){case 0:o=Math.max(0,Math.min(n-d,o)),l=Math.max(0,Math.min(s-h,l));break;case 90:o=Math.max(0,Math.min(n-h,o)),l=Math.min(s,Math.max(d,l));break;case 180:o=Math.min(n,Math.max(d,o)),l=Math.min(s,Math.max(h,l));break;case 270:o=Math.min(n,Math.max(h,o)),l=Math.max(0,Math.min(s-d,l));break}this.x=o/=n,this.y=l/=s;const[f,m]=this.getBaseTranslation();o+=f,l+=m,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return S(n=Oe,xh,hw).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return S(n=Oe,xh,hw).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,s]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*e/n).toFixed(2)}%`,c(this,To)||(o.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),o=!c(this,To)&&t.endsWith("%");if(s&&o)return;const[l,d]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!c(this,To)&&!o&&(e.height=`${(100*parseFloat(t)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,at))==null||e.finish()}async addEditToolbar(){return this._editToolbar||c(this,Po)?this._editToolbar:(this._editToolbar=new ew(this),this.div.append(this._editToolbar.render()),c(this,at)&&await this._editToolbar.addAltText(c(this,at)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,at))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,at)||(Vm.initialize(Oe._l10n),b(this,at,new Vm(this)),c(this,ko)&&(c(this,at).data=c(this,ko),b(this,ko,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,at))==null?void 0:e.data}set altTextData(e){c(this,at)&&(c(this,at).data=e)}get guessedAltText(){var e;return(e=c(this,at))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,at))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,at))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,at)&&!c(this,at).isEmpty()}hasAltTextData(){var e;return((e=c(this,at))==null?void 0:e.hasData())??!1}render(){var o;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,Tc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),S(this,Ce,gw).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),$m(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Do)||b(this,Do,new Wm({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,Ce,BS).bind(this),onPinching:S(this,Ce,US).bind(this),onPinchEnd:S(this,Ce,HS).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),this.div}pointerdown(e){const{isMac:t}=Sn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,Ro,!0),this._isDraggable){S(this,Ce,$S).call(this,e);return}S(this,Ce,mw).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,vs)&&clearTimeout(c(this,vs)),b(this,vs,setTimeout(()=>{var e;b(this,vs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const s=this.parentScale,[o,l]=this.pageDimensions,[d,h]=this.pageTranslation,f=e/s,m=t/s,w=this.x*o,y=this.y*l,_=this.width*o,x=this.height*l;switch(n){case 0:return[w+f+d,l-y-m-x+h,w+f+_+d,l-y-m+h];case 90:return[w+m+d,l-y+f+h,w+m+x+d,l-y+f+_+h];case 180:return[w-f-_+d,l-y+m+h,w-f+d,l-y+m+x+h];case 270:return[w-m-x+d,l-y-f-_+h,w-m+d,l-y-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,o,l]=e,d=o-n,h=l-s;switch(this.rotation){case 0:return[n,t-l,d,h];case 90:return[n,t-s,h,d];case 180:return[o,t-s,d,h];case 270:return[o,t-l,h,d];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){b(this,Po,!0)}disableEditMode(){b(this,Po,!1)}isInEditMode(){return c(this,Po)}shouldGetKeyboardEvents(){return c(this,Js)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return t<l&&s>0&&e<o&&n>0}rebuild(){S(this,Ce,gw).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){tt("An editor must be serializable")}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation,b(s,ko,e.accessibilityData);const[o,l]=s.pageDimensions,[d,h,f,m]=s.getRectInCurrentCoords(e.rect,l);return s.x=d/o,s.y=h/l,s.width=f/o,s.height=m/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,pa))==null||e.abort(),b(this,pa,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,vs)&&(clearTimeout(c(this,vs)),b(this,vs,null)),S(this,Ce,Ed).call(this),this.removeEditToolbar(),c(this,yi)){for(const n of c(this,yi).values())clearTimeout(n);b(this,yi,null)}this.parent=null,(t=c(this,Do))==null||t.destroy(),b(this,Do,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,Ce,jS).call(this),c(this,Qt).classList.remove("hidden"),$m(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,Qs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Qt).children;if(!c(this,ji)){b(this,ji,Array.from(t));const l=S(this,Ce,VS).bind(this),d=S(this,Ce,WS).bind(this),h=this._uiManager._signal;for(const f of c(this,ji)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",d,{signal:h}),f.addEventListener("focus",S(this,Ce,GS).bind(this,m),{signal:h}),f.setAttribute("data-l10n-id",Oe._l10nResizer[m])}}const n=c(this,ji)[0];let s=0;for(const l of t){if(l===n)break;s++}const o=(360-this.rotation+this.parentRotation)%360/90*(c(this,ji).length/4);if(o!==s){if(o<s)for(let d=0;d<s-o;d++)c(this,Qt).append(c(this,Qt).firstChild);else if(o>s)for(let d=0;d<o-s;d++)c(this,Qt).firstChild.before(c(this,Qt).lastChild);let l=0;for(const d of t){const f=c(this,ji)[l++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",Oe._l10nResizer[f])}}S(this,Ce,vw).call(this,0),b(this,Js,!0),c(this,Qt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Js)&&S(this,Ce,fw).call(this,c(this,wh),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,Ce,Ed).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,o;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(t=this._editToolbar)==null||t.show(),(n=c(this,at))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,s,o;(e=c(this,Qt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(o=c(this,at))==null||o.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,bh)}set isEditing(e){b(this,bh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){b(this,To,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,yi)||b(this,yi,new Map);const{action:n}=e;let s=c(this,yi).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),c(this,yi).delete(n),c(this,yi).size===0&&b(this,yi,null)},Oe._telemetryTimeout),c(this,yi).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,Tc,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Tc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ko=new WeakMap,ji=new WeakMap,at=new WeakMap,Tc=new WeakMap,ha=new WeakMap,yh=new WeakMap,To=new WeakMap,Qt=new WeakMap,Io=new WeakMap,Qs=new WeakMap,pa=new WeakMap,wh=new WeakMap,Ro=new WeakMap,Kn=new WeakMap,bh=new WeakMap,Po=new WeakMap,Js=new WeakMap,vs=new WeakMap,Ic=new WeakMap,Rc=new WeakMap,yi=new WeakMap,Do=new WeakMap,_h=new WeakMap,tg=new WeakMap,Ce=new WeakSet,dw=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},xh=new WeakSet,hw=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},lm=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},jS=function(){if(c(this,Qt))return;b(this,Qt,document.createElement("div")),c(this,Qt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");c(this,Qt).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",S(this,Ce,zS).bind(this,n),{signal:t}),s.addEventListener("contextmenu",Yi,{signal:t}),s.tabIndex=-1}this.div.prepend(c(this,Qt))},zS=function(e,t){var m;t.preventDefault();const{isMac:n}=Sn.platform;if(t.button!==0||t.ctrlKey&&n)return;(m=c(this,at))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,b(this,Io,[t.screenX,t.screenY]);const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,Ce,fw).bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ai,{passive:!1,signal:l}),window.addEventListener("contextmenu",Yi,{signal:l}),b(this,Qs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const d=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var w;o.abort(),this.parent.togglePointerEvents(!0),(w=c(this,at))==null||w.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=h,S(this,Ce,cm).call(this)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},pw=function(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t;const[o,l]=this.parentDimensions;this.setDims(o*n,l*s),this.fixAndSetPosition(),this._onResized()},cm=function(){if(!c(this,Qs))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=c(this,Qs);b(this,Qs,null);const o=this.x,l=this.y,d=this.width,h=this.height;o===e&&l===t&&d===n&&h===s||this.addCommands({cmd:S(this,Ce,pw).bind(this,o,l,d,h),undo:S(this,Ce,pw).bind(this,e,t,n,s),mustExec:!0})},fw=function(e,t){const[n,s]=this.parentDimensions,o=this.x,l=this.y,d=this.width,h=this.height,f=Oe.MIN_SIZE/n,m=Oe.MIN_SIZE/s,w=S(this,Ce,lm).call(this,this.rotation),y=(J,ne)=>[w[0]*J+w[2]*ne,w[1]*J+w[3]*ne],_=S(this,Ce,lm).call(this,360-this.rotation),x=(J,ne)=>[_[0]*J+_[2]*ne,_[1]*J+_[3]*ne];let C,k,T=!1,P=!1;switch(e){case"topLeft":T=!0,C=(J,ne)=>[0,0],k=(J,ne)=>[J,ne];break;case"topMiddle":C=(J,ne)=>[J/2,0],k=(J,ne)=>[J/2,ne];break;case"topRight":T=!0,C=(J,ne)=>[J,0],k=(J,ne)=>[0,ne];break;case"middleRight":P=!0,C=(J,ne)=>[J,ne/2],k=(J,ne)=>[0,ne/2];break;case"bottomRight":T=!0,C=(J,ne)=>[J,ne],k=(J,ne)=>[0,0];break;case"bottomMiddle":C=(J,ne)=>[J/2,ne],k=(J,ne)=>[J/2,0];break;case"bottomLeft":T=!0,C=(J,ne)=>[0,ne],k=(J,ne)=>[J,0];break;case"middleLeft":P=!0,C=(J,ne)=>[0,ne/2],k=(J,ne)=>[J,ne/2];break}const O=C(d,h),N=k(d,h);let U=y(...N);const F=Oe._round(o+U[0]),j=Oe._round(l+U[1]);let H=1,G=1,X,Z;if(t.fromKeyboard)({deltaX:X,deltaY:Z}=t);else{const{screenX:J,screenY:ne}=t,[Y,ie]=c(this,Io);[X,Z]=this.screenToPageTranslation(J-Y,ne-ie),c(this,Io)[0]=J,c(this,Io)[1]=ne}if([X,Z]=x(X/n,Z/s),T){const J=Math.hypot(d,h);H=G=Math.max(Math.min(Math.hypot(N[0]-O[0]-X,N[1]-O[1]-Z)/J,1/d,1/h),f/d,m/h)}else P?H=Math.max(f,Math.min(1,Math.abs(N[0]-O[0]-X)))/d:G=Math.max(m,Math.min(1,Math.abs(N[1]-O[1]-Z)))/h;const ce=Oe._round(d*H),be=Oe._round(h*G);U=y(...k(ce,be));const de=F-U[0],Pe=j-U[1];c(this,Kn)||b(this,Kn,[this.x,this.y,this.width,this.height]),this.width=ce,this.height=be,this.x=de,this.y=Pe,this.setDims(n*ce,s*be),this.fixAndSetPosition(),this._onResizing()},BS=function(){var e;b(this,Qs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,at))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},US=function(e,t,n){let o=.7*(n/t)+1-.7;if(o===1)return;const l=S(this,Ce,lm).call(this,this.rotation),d=(F,j)=>[l[0]*F+l[2]*j,l[1]*F+l[3]*j],[h,f]=this.parentDimensions,m=this.x,w=this.y,y=this.width,_=this.height,x=Oe.MIN_SIZE/h,C=Oe.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/_),x/y,C/_);const k=Oe._round(y*o),T=Oe._round(_*o);if(k===y&&T===_)return;c(this,Kn)||b(this,Kn,[m,w,y,_]);const P=d(y/2,_/2),O=Oe._round(m+P[0]),N=Oe._round(w+P[1]),U=d(k/2,T/2);this.x=O-U[0],this.y=N-U[1],this.width=k,this.height=T,this.setDims(h*k,f*T),this.fixAndSetPosition(),this._onResizing()},HS=function(){var e;(e=c(this,at))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),S(this,Ce,cm).call(this)},mw=function(e){const{isMac:t}=Sn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},$S=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:o},d=f=>{s.abort(),b(this,ha,null),b(this,Ro,!1),this._uiManager.endDragSession()||S(this,Ce,mw).call(this,f),n&&this._onStopDragging()};t&&(b(this,Ic,e.clientX),b(this,Rc,e.clientY),b(this,ha,e.pointerId),b(this,yh,e.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:m,clientY:w,pointerId:y}=f;if(y!==c(this,ha)){ai(f);return}const[_,x]=this.screenToPageTranslation(m-c(this,Ic),w-c(this,Rc));b(this,Ic,m),b(this,Rc,w),this._uiManager.dragSelectedEditors(_,x)},l),window.addEventListener("touchmove",ai,l),window.addEventListener("pointerdown",f=>{f.pointerType===c(this,yh)&&(c(this,Do)||f.isPrimary)&&d(f),ai(f)},l));const h=f=>{if(!c(this,ha)||c(this,ha)===f.pointerId){d(f);return}ai(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},gw=function(){if(c(this,pa)||!this.div)return;b(this,pa,new AbortController);const e=this._uiManager.combinedSignal(c(this,pa));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},VS=function(e){Oe._resizerKeyboardManager.exec(this,e)},WS=function(e){var t;c(this,Js)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Qt)&&S(this,Ce,Ed).call(this)},GS=function(e){b(this,wh,c(this,Js)?e:"")},vw=function(e){if(c(this,ji))for(const t of c(this,ji))t.tabIndex=e},Ed=function(){b(this,Js,!1),S(this,Ce,vw).call(this,-1),S(this,Ce,cm).call(this)},E(Oe,xh),Se(Oe,"_l10n",null),Se(Oe,"_l10nResizer",null),Se(Oe,"_borderLineWidth",-1),Se(Oe,"_colorManager",new iw),Se(Oe,"_zIndex",1),Se(Oe,"_telemetryTimeout",1e3);let vt=Oe;class _M extends vt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const WA=3285377520,mi=4294901760,os=65535;class qS{constructor(e){this.h1=e?e&4294967295:WA,this.h2=e?e&4294967295:WA}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let C=0,k=e.length;C<k;C++){const T=e.charCodeAt(C);T<=255?t[n++]=T:(t[n++]=T>>>8,t[n++]=T&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,o=n-s*4,l=new Uint32Array(t.buffer,0,s);let d=0,h=0,f=this.h1,m=this.h2;const w=3432918353,y=461845907,_=w&os,x=y&os;for(let C=0;C<s;C++)C&1?(d=l[C],d=d*w&mi|d*_&os,d=d<<15|d>>>17,d=d*y&mi|d*x&os,f^=d,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[C],h=h*w&mi|h*_&os,h=h<<15|h>>>17,h=h*y&mi|h*x&os,m^=h,m=m<<13|m>>>19,m=m*5+3864292196);switch(d=0,o){case 3:d^=t[s*4+2]<<16;case 2:d^=t[s*4+1]<<8;case 1:d^=t[s*4],d=d*w&mi|d*_&os,d=d<<15|d>>>17,d=d*y&mi|d*x&os,s&1?f^=d:m^=d}this.h1=f,this.h2=m}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&mi|e*36045&os,t=t*4283543511&mi|((t<<16|e>>>16)*2950163797&mi)>>>16,e^=t>>>1,e=e*444984403&mi|e*60499&os,t=t*3301882366&mi|((t<<16|e>>>16)*3120437893&mi)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const yw=Object.freeze({map:null,hash:"",transfer:void 0});var Lo,Mo,Vt,ng,KS;class P0{constructor(){E(this,ng);E(this,Lo,!1);E(this,Mo,null);E(this,Vt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=c(this,Vt).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return c(this,Vt).get(e)}remove(e){if(c(this,Vt).delete(e),c(this,Vt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,Vt).values())if(t instanceof vt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=c(this,Vt).get(e);let s=!1;if(n!==void 0)for(const[o,l]of Object.entries(t))n[o]!==l&&(s=!0,n[o]=l);else s=!0,c(this,Vt).set(e,t);s&&S(this,ng,KS).call(this),t instanceof vt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,Vt).has(e)}getAll(){return c(this,Vt).size>0?S0(c(this,Vt)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return c(this,Vt).size}resetModified(){c(this,Lo)&&(b(this,Lo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new XS(this)}get serializable(){if(c(this,Vt).size===0)return yw;const e=new Map,t=new qS,n=[],s=Object.create(null);let o=!1;for(const[l,d]of c(this,Vt)){const h=d instanceof vt?d.serialize(!1,s):d;h&&(e.set(l,h),t.update(`${l}:${JSON.stringify(h)}`),o||(o=!!h.bitmap))}if(o)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:yw}get editorStats(){let e=null;const t=new Map;for(const n of c(this,Vt).values()){if(!(n instanceof vt))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:o}=s;t.has(o)||t.set(o,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[d,h]of Object.entries(s)){if(d==="type")continue;let f=l.get(d);f||(f=new Map,l.set(d,f));const m=f.get(h)??0;f.set(h,m+1)}}for(const[n,s]of t)e[n]=s.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){b(this,Mo,null)}get modifiedIds(){if(c(this,Mo))return c(this,Mo);const e=[];for(const t of c(this,Vt).values())!(t instanceof vt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return b(this,Mo,{ids:new Set(e),hash:e.join(",")})}}Lo=new WeakMap,Mo=new WeakMap,Vt=new WeakMap,ng=new WeakSet,KS=function(){c(this,Lo)||(b(this,Lo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ah;class XS extends P0{constructor(t){super();E(this,Ah);const{map:n,hash:s,transfer:o}=t.serializable,l=structuredClone(n,o?{transfer:o}:null);b(this,Ah,{map:l,hash:s,transfer:o})}get print(){tt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Ah)}get modifiedIds(){return Be(this,"modifiedIds",{ids:new Set,hash:""})}}Ah=new WeakMap;var Pc;class xM{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,Pc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Pc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,Pc).has(e.loadedName))){if(It(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:o}=e,l=new FontFace(n,s,o);this.addNativeFontFace(l);try{await l.load(),c(this,Pc).add(n),t==null||t(e)}catch{Ne(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}tt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Ne(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Be(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(gn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Be(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(It(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Be(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(N,U){return N.charCodeAt(U)<<24|N.charCodeAt(U+1)<<16|N.charCodeAt(U+2)<<8|N.charCodeAt(U+3)&255}function s(N,U,F,j){const H=N.substring(0,U),G=N.substring(U+F);return H+j+G}let o,l;const d=this._document.createElement("canvas");d.width=1,d.height=1;const h=d.getContext("2d");let f=0;function m(N,U){if(++f>30){Ne("Load test font never loaded."),U();return}if(h.font="30px "+N,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){U();return}setTimeout(m.bind(null,N,U))}const w=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=s(y,976,w.length,w);const x=16,C=1482184792;let k=n(y,x);for(o=0,l=w.length-3;o<l;o+=4)k=k-C+n(w,o)|0;o<w.length&&(k=k-C+n(w+"XXX",o)|0),y=s(y,x,4,oM(k));const T=`url(data:font/opentype;base64,${btoa(y)});`,P=`@font-face {font-family:"${w}";src:${T}}`;this.insertRule(P);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const N of[e.loadedName,w]){const U=this._document.createElement("span");U.textContent="Hi",U.style.fontFamily=N,O.append(U)}this._document.body.append(O),m(w,()=>{O.remove(),t.complete()})}}Pc=new WeakMap;class AM{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const o in e)this[o]=e[o];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${pM(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(l){Ne(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(s||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=o}}const Wf={DATA:1,ERROR:2},Tt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function GA(){}function On(a){if(a instanceof Oa||a instanceof Qy||a instanceof Kd||a instanceof HA||a instanceof Hm||a instanceof Py)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||tt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new Oa(a.message);case"InvalidPDFException":return new Qy(a.message);case"MissingPDFException":return new Kd(a.message);case"PasswordException":return new HA(a.message,a.code);case"UnexpectedResponseException":return new Hm(a.message,a.status);case"UnknownErrorException":return new Py(a.message,a.details)}return new Py(a.message,a.toString())}var Dc,Si,YS,QS,JS,um;class Sd{constructor(e,t,n){E(this,Si);E(this,Dc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",S(this,Si,YS).bind(this),{signal:c(this,Dc).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[s]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,n,s){const o=this.streamId++,l=this.sourceName,d=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:d,action:e,streamId:o,data:t,desiredSize:f.desiredSize},s),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,h.postMessage({sourceName:l,targetName:d,stream:Tt.PULL,streamId:o,desiredSize:f.desiredSize}),m.promise},cancel:f=>{It(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:d,stream:Tt.CANCEL,streamId:o,reason:On(f)}),m.promise}},n)}destroy(){var e;(e=c(this,Dc))==null||e.abort(),b(this,Dc,null)}}Dc=new WeakMap,Si=new WeakSet,YS=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){S(this,Si,JS).call(this,e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Wf.DATA)s.resolve(e.data);else if(e.callback===Wf.ERROR)s.reject(On(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(l){o.postMessage({sourceName:n,targetName:s,callback:Wf.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:s,callback:Wf.ERROR,callbackId:e.callbackId,reason:On(l)})});return}if(e.streamId){S(this,Si,QS).call(this,e);return}t(e.data)},QS=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,o=this.comObj,l=this,d=this.actionHandler[e.action],h={enqueue(f,m=1,w){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=m,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:s,stream:Tt.ENQUEUE,streamId:t,chunk:f},w)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:s,stream:Tt.CLOSE,streamId:t}),delete l.streamSinks[t])},error(f){It(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:s,stream:Tt.ERROR,streamId:t,reason:On(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(d,e.data,h).then(function(){o.postMessage({sourceName:n,targetName:s,stream:Tt.START_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:Tt.START_COMPLETE,streamId:t,reason:On(f)})})},JS=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,o=this.comObj,l=this.streamControllers[t],d=this.streamSinks[t];switch(e.stream){case Tt.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(On(e.reason));break;case Tt.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(On(e.reason));break;case Tt.PULL:if(!d){o.postMessage({sourceName:n,targetName:s,stream:Tt.PULL_COMPLETE,streamId:t,success:!0});break}d.desiredSize<=0&&e.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=e.desiredSize,Promise.try(d.onPull||GA).then(function(){o.postMessage({sourceName:n,targetName:s,stream:Tt.PULL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:Tt.PULL_COMPLETE,streamId:t,reason:On(f)})});break;case Tt.ENQUEUE:if(It(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case Tt.CLOSE:if(It(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),S(this,Si,um).call(this,l,t);break;case Tt.ERROR:It(l,"error should have stream controller"),l.controller.error(On(e.reason)),S(this,Si,um).call(this,l,t);break;case Tt.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(On(e.reason)),S(this,Si,um).call(this,l,t);break;case Tt.CANCEL:if(!d)break;const h=On(e.reason);Promise.try(d.onCancel||GA,h).then(function(){o.postMessage({sourceName:n,targetName:s,stream:Tt.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:Tt.CANCEL_COMPLETE,streamId:t,reason:On(f)})}),d.sinkCapability.reject(h),d.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},um=async function(e,t){var n,s,o;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var Eh;class ZS{constructor({enableHWA:e=!1}){E(this,Eh,!1);b(this,Eh,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,Eh)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){tt("Abstract method `_createCanvas` called.")}}Eh=new WeakMap;class EM extends ZS{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class e1{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class t1 extends e1{async _fetch(e){const t=await Eg(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Ag(t)}}class n1{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,o){return"none"}destroy(e=!1){}}var No,Lc,Zs,er,dn,Oo,Fo,ae,ln,Cd,nc,dm,ic,i1,ww,sc,kd,Td,bw,Id;class SM extends n1{constructor({docId:t,ownerDocument:n=globalThis.document}){super();E(this,ae);E(this,No);E(this,Lc);E(this,Zs);E(this,er);E(this,dn);E(this,Oo);E(this,Fo,0);b(this,er,t),b(this,dn,n)}addFilter(t){if(!t)return"none";let n=c(this,ae,ln).get(t);if(n)return n;const[s,o,l]=S(this,ae,dm).call(this,t),d=t.length===1?s:`${s}${o}${l}`;if(n=c(this,ae,ln).get(d),n)return c(this,ae,ln).set(t,n),n;const h=`g_${c(this,er)}_transfer_map_${wn(this,Fo)._++}`,f=S(this,ae,ic).call(this,h);c(this,ae,ln).set(t,f),c(this,ae,ln).set(d,f);const m=S(this,ae,sc).call(this,h);return S(this,ae,Td).call(this,s,o,l,m),f}addHCMFilter(t,n){var x;const s=`${t}-${n}`,o="base";let l=c(this,ae,Cd).get(o);if((l==null?void 0:l.key)===s||(l?((x=l.filter)==null||x.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},c(this,ae,Cd).set(o,l)),!t||!n))return l.url;const d=S(this,ae,Id).call(this,t);t=ve.makeHexColor(...d);const h=S(this,ae,Id).call(this,n);if(n=ve.makeHexColor(...h),c(this,ae,nc).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return l.url;const f=new Array(256);for(let C=0;C<=255;C++){const k=C/255;f[C]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const m=f.join(","),w=`g_${c(this,er)}_hcm_filter`,y=l.filter=S(this,ae,sc).call(this,w);S(this,ae,Td).call(this,m,m,m,y),S(this,ae,ww).call(this,y);const _=(C,k)=>{const T=d[C]/255,P=h[C]/255,O=new Array(k+1);for(let N=0;N<=k;N++)O[N]=T+N/k*(P-T);return O.join(",")};return S(this,ae,Td).call(this,_(0,5),_(1,5),_(2,5),y),l.url=S(this,ae,ic).call(this,w),l.url}addAlphaFilter(t){let n=c(this,ae,ln).get(t);if(n)return n;const[s]=S(this,ae,dm).call(this,[t]),o=`alpha_${s}`;if(n=c(this,ae,ln).get(o),n)return c(this,ae,ln).set(t,n),n;const l=`g_${c(this,er)}_alpha_map_${wn(this,Fo)._++}`,d=S(this,ae,ic).call(this,l);c(this,ae,ln).set(t,d),c(this,ae,ln).set(o,d);const h=S(this,ae,sc).call(this,l);return S(this,ae,bw).call(this,s,h),d}addLuminosityFilter(t){let n=c(this,ae,ln).get(t||"luminosity");if(n)return n;let s,o;if(t?([s]=S(this,ae,dm).call(this,[t]),o=`luminosity_${s}`):o="luminosity",n=c(this,ae,ln).get(o),n)return c(this,ae,ln).set(t,n),n;const l=`g_${c(this,er)}_luminosity_map_${wn(this,Fo)._++}`,d=S(this,ae,ic).call(this,l);c(this,ae,ln).set(t,d),c(this,ae,ln).set(o,d);const h=S(this,ae,sc).call(this,l);return S(this,ae,i1).call(this,h),t&&S(this,ae,bw).call(this,s,h),d}addHighlightHCMFilter(t,n,s,o,l){var P;const d=`${n}-${s}-${o}-${l}`;let h=c(this,ae,Cd).get(t);if((h==null?void 0:h.key)===d||(h?((P=h.filter)==null||P.remove(),h.key=d,h.url="none",h.filter=null):(h={key:d,url:"none",filter:null},c(this,ae,Cd).set(t,h)),!n||!s))return h.url;const[f,m]=[n,s].map(S(this,ae,Id).bind(this));let w=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),y=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[_,x]=[o,l].map(S(this,ae,Id).bind(this));y<w&&([w,y,_,x]=[y,w,x,_]),c(this,ae,nc).style.color="";const C=(O,N,U)=>{const F=new Array(256),j=(y-w)/U,H=O/255,G=(N-O)/(255*U);let X=0;for(let Z=0;Z<=U;Z++){const ce=Math.round(w+Z*j),be=H+Z*G;for(let de=X;de<=ce;de++)F[de]=be;X=ce+1}for(let Z=X;Z<256;Z++)F[Z]=F[X-1];return F.join(",")},k=`g_${c(this,er)}_hcm_${t}_filter`,T=h.filter=S(this,ae,sc).call(this,k);return S(this,ae,ww).call(this,T),S(this,ae,Td).call(this,C(_[0],x[0],5),C(_[1],x[1],5),C(_[2],x[2],5),T),h.url=S(this,ae,ic).call(this,k),h.url}destroy(t=!1){var n,s,o,l;t&&((n=c(this,Oo))!=null&&n.size)||((s=c(this,Zs))==null||s.parentNode.parentNode.remove(),b(this,Zs,null),(o=c(this,Lc))==null||o.clear(),b(this,Lc,null),(l=c(this,Oo))==null||l.clear(),b(this,Oo,null),b(this,Fo,0))}}No=new WeakMap,Lc=new WeakMap,Zs=new WeakMap,er=new WeakMap,dn=new WeakMap,Oo=new WeakMap,Fo=new WeakMap,ae=new WeakSet,ln=function(){return c(this,Lc)||b(this,Lc,new Map)},Cd=function(){return c(this,Oo)||b(this,Oo,new Map)},nc=function(){if(!c(this,Zs)){const t=c(this,dn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=c(this,dn).createElementNS(Us,"svg");s.setAttribute("width",0),s.setAttribute("height",0),b(this,Zs,c(this,dn).createElementNS(Us,"defs")),t.append(s),s.append(c(this,Zs)),c(this,dn).body.append(t)}return c(this,Zs)},dm=function(t){if(t.length===1){const f=t[0],m=new Array(256);for(let y=0;y<256;y++)m[y]=f[y]/255;const w=m.join(",");return[w,w,w]}const[n,s,o]=t,l=new Array(256),d=new Array(256),h=new Array(256);for(let f=0;f<256;f++)l[f]=n[f]/255,d[f]=s[f]/255,h[f]=o[f]/255;return[l.join(","),d.join(","),h.join(",")]},ic=function(t){if(c(this,No)===void 0){b(this,No,"");const n=c(this,dn).URL;n!==c(this,dn).baseURI&&(Sg(n)?Ne('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,No,n.split("#",1)[0]))}return`url(${c(this,No)}#${t})`},i1=function(t){const n=c(this,dn).createElementNS(Us,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},ww=function(t){const n=c(this,dn).createElementNS(Us,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},sc=function(t){const n=c(this,dn).createElementNS(Us,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),c(this,ae,nc).append(n),n},kd=function(t,n,s){const o=c(this,dn).createElementNS(Us,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",s),t.append(o)},Td=function(t,n,s,o){const l=c(this,dn).createElementNS(Us,"feComponentTransfer");o.append(l),S(this,ae,kd).call(this,l,"feFuncR",t),S(this,ae,kd).call(this,l,"feFuncG",n),S(this,ae,kd).call(this,l,"feFuncB",s)},bw=function(t,n){const s=c(this,dn).createElementNS(Us,"feComponentTransfer");n.append(s),S(this,ae,kd).call(this,s,"feFuncA",t)},Id=function(t){return c(this,ae,nc).style.color=t,R0(getComputedStyle(c(this,ae,nc)).getPropertyValue("color"))};class s1{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class r1 extends s1{async _fetch(e){const t=await Eg(e,"arraybuffer");return new Uint8Array(t)}}gn&&Ne("Please use the `legacy` build in Node.js environments.");async function a1(a){const t=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(t)}class CM extends n1{}class kM extends ZS{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class TM extends e1{async _fetch(e){return a1(e)}}class IM extends s1{async _fetch(e){return a1(e)}}const fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function _w(a,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),a.clip(s)}class D0{getPattern(){tt("Abstract method `getPattern` called.")}}class RM extends D0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let o;if(s===fn.STROKE||s===fn.FILL){const l=t.current.getClippedPathBoundingBox(s,ct(e))||[0,0,0,0],d=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=t.cachedCanvases.getCanvas("pattern",d,h),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-l[0],-l[1]),n=ve.transform(n,[1,0,0,1,l[0],l[1]]),m.transform(...t.baseTransform),this.matrix&&m.transform(...this.matrix),_w(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=e.createPattern(f.canvas,"no-repeat");const w=new DOMMatrix(n);o.setTransform(w)}else _w(e,this._bbox),o=this._createGradient(e);return o}}function My(a,e,t,n,s,o,l,d){const h=e.coords,f=e.colors,m=a.data,w=a.width*4;let y;h[t+1]>h[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y),h[n+1]>h[s+1]&&(y=n,n=s,s=y,y=l,l=d,d=y),h[t+1]>h[n+1]&&(y=t,t=n,n=y,y=o,o=l,l=y);const _=(h[t]+e.offsetX)*e.scaleX,x=(h[t+1]+e.offsetY)*e.scaleY,C=(h[n]+e.offsetX)*e.scaleX,k=(h[n+1]+e.offsetY)*e.scaleY,T=(h[s]+e.offsetX)*e.scaleX,P=(h[s+1]+e.offsetY)*e.scaleY;if(x>=P)return;const O=f[o],N=f[o+1],U=f[o+2],F=f[l],j=f[l+1],H=f[l+2],G=f[d],X=f[d+1],Z=f[d+2],ce=Math.round(x),be=Math.round(P);let de,Pe,J,ne,Y,ie,ee,L;for(let $=ce;$<=be;$++){if($<k){const we=$<x?0:(x-$)/(x-k);de=_-(_-C)*we,Pe=O-(O-F)*we,J=N-(N-j)*we,ne=U-(U-H)*we}else{let we;$>P?we=1:k===P?we=0:we=(k-$)/(k-P),de=C-(C-T)*we,Pe=F-(F-G)*we,J=j-(j-X)*we,ne=H-(H-Z)*we}let pe;$<x?pe=0:$>P?pe=1:pe=(x-$)/(x-P),Y=_-(_-T)*pe,ie=O-(O-G)*pe,ee=N-(N-X)*pe,L=U-(U-Z)*pe;const Ae=Math.round(Math.min(de,Y)),Le=Math.round(Math.max(de,Y));let ye=w*$+Ae*4;for(let we=Ae;we<=Le;we++)pe=(de-we)/(de-Y),pe<0?pe=0:pe>1&&(pe=1),m[ye++]=Pe-(Pe-ie)*pe|0,m[ye++]=J-(J-ee)*pe|0,m[ye++]=ne-(ne-L)*pe|0,m[ye++]=255}}function PM(a,e,t){const n=e.coords,s=e.colors;let o,l;switch(e.type){case"lattice":const d=e.verticesPerRow,h=Math.floor(n.length/d)-1,f=d-1;for(o=0;o<h;o++){let m=o*d;for(let w=0;w<f;w++,m++)My(a,t,n[m],n[m+1],n[m+d],s[m],s[m+1],s[m+d]),My(a,t,n[m+d+1],n[m+1],n[m+d],s[m+d+1],s[m+1],s[m+d])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)My(a,t,n[o],n[o+1],n[o+2],s[o],s[o+1],s[o+2]);break;default:throw new Error("illegal figure")}}class DM extends D0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const d=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-d,m=Math.ceil(this._bounds[3])-h,w=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),_=f/w,x=m/y,C={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-h,scaleX:1/_,scaleY:1/x},k=w+4,T=y+4,P=n.getCanvas("mesh",k,T),O=P.context,N=O.createImageData(w,y);if(t){const F=N.data;for(let j=0,H=F.length;j<H;j+=4)F[j]=t[0],F[j+1]=t[1],F[j+2]=t[2],F[j+3]=255}for(const F of this._figures)PM(N,F,C);return O.putImageData(N,2,2),{canvas:P.canvas,offsetX:d-2*_,offsetY:h-2*x,scaleX:_,scaleY:x}}getPattern(e,t,n,s){_w(e,this._bbox);let o;if(s===fn.SHADING)o=ve.singularValueDecompose2dScale(ct(e));else if(o=ve.singularValueDecompose2dScale(t.baseTransform),this.matrix){const d=ve.singularValueDecompose2dScale(this.matrix);o=[o[0]*d[0],o[1]*d[1]]}const l=this._createMeshCanvas(o,s===fn.SHADING?null:this._background,t.cachedCanvases);return s!==fn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class LM extends D0{getPattern(){return"hotpink"}}function MM(a){switch(a[0]){case"RadialAxial":return new RM(a);case"Mesh":return new DM(a);case"Dummy":return new LM}throw new Error(`Unknown IR type: ${a[0]}`)}const qA={COLORED:1,UNCOLORED:2},ig=class ig{constructor(e,t,n,s,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:s,tilingType:o,color:l,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),xg("TilingType: "+o);const m=t[0],w=t[1],y=t[2],_=t[3],x=y-m,C=_-w,k=ve.singularValueDecompose2dScale(this.matrix),T=ve.singularValueDecompose2dScale(this.baseTransform),P=k[0]*T[0],O=k[1]*T[1];let N=x,U=C,F=!1,j=!1;const H=Math.ceil(h*P),G=Math.ceil(f*O),X=Math.ceil(x*P),Z=Math.ceil(C*O);H>=X?N=h:F=!0,G>=Z?U=f:j=!0;const ce=this.getSizeAndScale(N,this.ctx.canvas.width,P),be=this.getSizeAndScale(U,this.ctx.canvas.height,O),de=e.cachedCanvases.getCanvas("pattern",ce.size,be.size),Pe=de.context,J=d.createCanvasGraphics(Pe);if(J.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(J,s,l),Pe.translate(-ce.scale*m,-be.scale*w),J.transform(ce.scale,0,0,be.scale,0,0),Pe.save(),this.clipBbox(J,m,w,y,_),J.baseTransform=ct(J.ctx),J.executeOperatorList(n),J.endDrawing(),Pe.restore(),F||j){const ne=de.canvas;F&&(N=h),j&&(U=f);const Y=this.getSizeAndScale(N,this.ctx.canvas.width,P),ie=this.getSizeAndScale(U,this.ctx.canvas.height,O),ee=Y.size,L=ie.size,$=e.cachedCanvases.getCanvas("pattern-workaround",ee,L),pe=$.context,Ae=F?Math.floor(x/h):0,Le=j?Math.floor(C/f):0;for(let ye=0;ye<=Ae;ye++)for(let we=0;we<=Le;we++)pe.drawImage(ne,ee*ye,L*we,ee,L,0,0,ee,L);return{canvas:$.canvas,scaleX:Y.scale,scaleY:ie.scale,offsetX:m,offsetY:w}}return{canvas:de.canvas,scaleX:ce.scale,scaleY:be.scale,offsetX:m,offsetY:w}}getSizeAndScale(e,t,n){const s=Math.max(ig.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=s?o=s:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,s,o){const l=s-t,d=o-n;e.ctx.rect(t,n,l,d),e.current.updateRectMinMax(ct(e.ctx),[t,n,s,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,o=e.current;switch(t){case qA.COLORED:const l=this.ctx;s.fillStyle=l.fillStyle,s.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case qA.UNCOLORED:const d=ve.makeHexColor(n[0],n[1],n[2]);s.fillStyle=d,s.strokeStyle=d,o.fillColor=d,o.strokeColor=d;break;default:throw new aM(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,s){let o=n;s!==fn.SHADING&&(o=ve.transform(o,t.baseTransform),this.matrix&&(o=ve.transform(o,this.matrix)));const l=this.createPatternCanvas(t);let d=new DOMMatrix(o);d=d.translate(l.offsetX,l.offsetY),d=d.scale(1/l.scaleX,1/l.scaleY);const h=e.createPattern(l.canvas,"repeat");return h.setTransform(d),h}};Se(ig,"MAX_PATTERN_SIZE",3e3);let xw=ig;function NM({src:a,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const d=Sn.isLittleEndian?4278190080:255,[h,f]=l?[o,d]:[d,o],m=n>>3,w=n&7,y=a.length;t=new Uint32Array(t.buffer);let _=0;for(let x=0;x<s;x++){for(const k=e+m;e<k;e++){const T=e<y?a[e]:255;t[_++]=T&128?f:h,t[_++]=T&64?f:h,t[_++]=T&32?f:h,t[_++]=T&16?f:h,t[_++]=T&8?f:h,t[_++]=T&4?f:h,t[_++]=T&2?f:h,t[_++]=T&1?f:h}if(w===0)continue;const C=e<y?a[e++]:255;for(let k=0;k<w;k++)t[_++]=C&1<<7-k?f:h}return{srcPos:e,destPos:_}}const KA=16,XA=100,OM=15,YA=10,QA=1e3,Un=16;function FM(a,e){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){e.save(),this.__originalSave()},a.restore=function(){e.restore(),this.__originalRestore()},a.translate=function(n,s){e.translate(n,s),this.__originalTranslate(n,s)},a.scale=function(n,s){e.scale(n,s),this.__originalScale(n,s)},a.transform=function(n,s,o,l,d,h){e.transform(n,s,o,l,d,h),this.__originalTransform(n,s,o,l,d,h)},a.setTransform=function(n,s,o,l,d,h){e.setTransform(n,s,o,l,d,h),this.__originalSetTransform(n,s,o,l,d,h)},a.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},a.rotate=function(n){e.rotate(n),this.__originalRotate(n)},a.clip=function(n){e.clip(n),this.__originalClip(n)},a.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},a.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},a.bezierCurveTo=function(t,n,s,o,l,d){e.bezierCurveTo(t,n,s,o,l,d),this.__originalBezierCurveTo(t,n,s,o,l,d)},a.rect=function(t,n,s,o){e.rect(t,n,s,o),this.__originalRect(t,n,s,o)},a.closePath=function(){e.closePath(),this.__originalClosePath()},a.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class jM{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Gf(a,e,t,n,s,o,l,d,h,f){const[m,w,y,_,x,C]=ct(a);if(w===0&&y===0){const P=l*m+x,O=Math.round(P),N=d*_+C,U=Math.round(N),F=(l+h)*m+x,j=Math.abs(Math.round(F)-O)||1,H=(d+f)*_+C,G=Math.abs(Math.round(H)-U)||1;return a.setTransform(Math.sign(m),0,0,Math.sign(_),O,U),a.drawImage(e,t,n,s,o,0,0,j,G),a.setTransform(m,w,y,_,x,C),[j,G]}if(m===0&&_===0){const P=d*y+x,O=Math.round(P),N=l*w+C,U=Math.round(N),F=(d+f)*y+x,j=Math.abs(Math.round(F)-O)||1,H=(l+h)*w+C,G=Math.abs(Math.round(H)-U)||1;return a.setTransform(0,Math.sign(w),Math.sign(y),0,O,U),a.drawImage(e,t,n,s,o,0,0,G,j),a.setTransform(m,w,y,_,x,C),[G,j]}a.drawImage(e,t,n,s,o,l,d,h,f);const k=Math.hypot(m,w),T=Math.hypot(y,_);return[k*h,T*f]}function zM(a){const{width:e,height:t}=a;if(e>QA||t>QA)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let l=new Uint8Array(o*(t+1)),d,h,f;const m=e+7&-8;let w=new Uint8Array(m*t),y=0;for(const T of a.data){let P=128;for(;P>0;)w[y++]=T&P?0:255,P>>=1}let _=0;for(y=0,w[y]!==0&&(l[0]=1,++_),h=1;h<e;h++)w[y]!==w[y+1]&&(l[h]=w[y]?2:1,++_),y++;for(w[y]!==0&&(l[h]=2,++_),d=1;d<t;d++){y=d*m,f=d*o,w[y-m]!==w[y]&&(l[f]=w[y]?1:8,++_);let T=(w[y]?4:0)+(w[y-m]?8:0);for(h=1;h<e;h++)T=(T>>2)+(w[y+1]?4:0)+(w[y-m+1]?8:0),s[T]&&(l[f+h]=s[T],++_),y++;if(w[y-m]!==w[y]&&(l[f+h]=w[y]?2:4,++_),_>n)return null}for(y=m*(t-1),f=d*o,w[y]!==0&&(l[f]=8,++_),h=1;h<e;h++)w[y]!==w[y+1]&&(l[f+h]=w[y]?4:8,++_),y++;if(w[y]!==0&&(l[f+h]=4,++_),_>n)return null;const x=new Int32Array([0,o,-1,0,-o,0,0,0,1]),C=new Path2D;for(d=0;_&&d<=t;d++){let T=d*o;const P=T+e;for(;T<P&&!l[T];)T++;if(T===P)continue;C.moveTo(T%o,d);const O=T;let N=l[T];do{const U=x[N];do T+=U;while(!l[T]);const F=l[T];F!==5&&F!==10?(N=F,l[T]=0):(N=F&51*N>>4,l[T]&=N>>2|N<<2),C.lineTo(T%o,T/o|0),l[T]||--_}while(O!==T);--d}return w=null,l=null,function(T){T.save(),T.scale(1/e,-1/t),T.translate(0,-t),T.fill(C),T.beginPath(),T.restore()}}class JA{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=gS,this.textMatrixScale=1,this.fontMatrix=Yy,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=on.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=ve.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=ve.applyTransform(t,e),s=ve.applyTransform(t.slice(2),e),o=ve.applyTransform([t[0],t[3]],e),l=ve.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],s[0],o[0],l[0]),this.minY=Math.min(this.minY,n[1],s[1],o[1],l[1]),this.maxX=Math.max(this.maxX,n[0],s[0],o[0],l[0]),this.maxY=Math.max(this.maxY,n[1],s[1],o[1],l[1])}updateScalingPathMinMax(e,t){ve.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,s,o,l,d,h,f,m){const w=ve.bezierBoundingBox(t,n,s,o,l,d,h,f,m);m||this.updateRectMinMax(e,w)}getPathBoundingBox(e=fn.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===fn.STROKE){t||tt("Stroke bounding box must include transform.");const s=ve.singularValueDecompose2dScale(t),o=s[0]*this.lineWidth/2,l=s[1]*this.lineWidth/2;n[0]-=o,n[1]-=l,n[2]+=o,n[3]+=l}return n}updateClipFromPath(){const e=ve.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=fn.FILL,t=null){return ve.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ZA(a,e){if(e instanceof ImageData){a.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%Un,o=(t-s)/Un,l=s===0?o:o+1,d=a.createImageData(n,Un);let h=0,f;const m=e.data,w=d.data;let y,_,x,C;if(e.kind===tm.GRAYSCALE_1BPP){const k=m.byteLength,T=new Uint32Array(w.buffer,0,w.byteLength>>2),P=T.length,O=n+7>>3,N=4294967295,U=Sn.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(x=y<o?Un:s,f=0,_=0;_<x;_++){const F=k-h;let j=0;const H=F>O?n:F*8-7,G=H&-8;let X=0,Z=0;for(;j<G;j+=8)Z=m[h++],T[f++]=Z&128?N:U,T[f++]=Z&64?N:U,T[f++]=Z&32?N:U,T[f++]=Z&16?N:U,T[f++]=Z&8?N:U,T[f++]=Z&4?N:U,T[f++]=Z&2?N:U,T[f++]=Z&1?N:U;for(;j<H;j++)X===0&&(Z=m[h++],X=128),T[f++]=Z&X?N:U,X>>=1}for(;f<P;)T[f++]=0;a.putImageData(d,0,y*Un)}}else if(e.kind===tm.RGBA_32BPP){for(_=0,C=n*Un*4,y=0;y<o;y++)w.set(m.subarray(h,h+C)),h+=C,a.putImageData(d,0,_),_+=Un;y<l&&(C=n*s*4,w.set(m.subarray(h,h+C)),a.putImageData(d,0,_))}else if(e.kind===tm.RGB_24BPP)for(x=Un,C=n*x,y=0;y<l;y++){for(y>=o&&(x=s,C=n*x),f=0,_=C;_--;)w[f++]=m[h++],w[f++]=m[h++],w[f++]=m[h++],w[f++]=255;a.putImageData(d,0,y*Un)}else throw new Error(`bad image kind: ${e.kind}`)}function eE(a,e){if(e.bitmap){a.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%Un,o=(t-s)/Un,l=s===0?o:o+1,d=a.createImageData(n,Un);let h=0;const f=e.data,m=d.data;for(let w=0;w<l;w++){const y=w<o?Un:s;({srcPos:h}=NM({src:f,srcPos:h,dest:m,width:n,height:y,nonBlackColor:0})),a.putImageData(d,0,w*Un)}}function vd(a,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)a[n]!==void 0&&(e[n]=a[n]);a.setLineDash!==void 0&&(e.setLineDash(a.getLineDash()),e.lineDashOffset=a.lineDashOffset)}function qf(a){if(a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0),!gn){const{filter:e}=a;e!=="none"&&e!==""&&(a.filter="none")}}function tE(a,e){if(e)return!0;const t=ve.singularValueDecompose2dScale(a);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Fa.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const BM=["butt","round","square"],UM=["miter","round","bevel"],HM={},nE={};var Qi,Aw,Ew,Sw;const F0=class F0{constructor(e,t,n,s,o,{optionalContentConfig:l,markedContentStack:d=null},h,f){E(this,Qi);this.ctx=e,this.current=new JA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=l,this.cachedCanvases=new jM(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=d,n){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...ct(this.compositeCtx))}this.ctx.save(),qf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ct(this.ctx)}executeOperatorList(e,t,n,s){const o=e.argsArray,l=e.fnArray;let d=t||0;const h=o.length;if(h===d)return d;const f=h-d>YA&&typeof n=="function",m=f?Date.now()+OM:0;let w=0;const y=this.commonObjs,_=this.objs;let x;for(;;){if(s!==void 0&&d===s.nextBreakPoint)return s.breakIt(d,n),d;if(x=l[d],x!==Mi.dependency)this[x].apply(this,o[d]);else for(const C of o[d]){const k=C.startsWith("g_")?y:_;if(!k.has(C))return k.get(C,n),d}if(d++,d===h)return d;if(f&&++w>YA){if(Date.now()>m)return n(),d;w=0}}}endDrawing(){S(this,Qi,Aw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),S(this,Qi,Ew).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),d=n,h=s,f="prescale1",m,w;for(;o>2&&d>1||l>2&&h>1;){let y=d,_=h;o>2&&d>1&&(y=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),o/=d/y),l>2&&h>1&&(_=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/_),m=this.cachedCanvases.getCanvas(f,y,_),w=m.context,w.clearRect(0,0,y,_),w.drawImage(e,0,0,d,h,0,0,y,_),e=m.canvas,d=y,h=_,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:h}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,o=this.current.fillColor,l=this.current.patternFill,d=ct(t);let h,f,m,w;if((e.bitmap||e.data)&&e.count>1){const H=e.bitmap||e.data.buffer;f=JSON.stringify(l?d:[d.slice(0,4),o]),h=this._cachedBitmapsMap.get(H),h||(h=new Map,this._cachedBitmapsMap.set(H,h));const G=h.get(f);if(G&&!l){const X=Math.round(Math.min(d[0],d[2])+d[4]),Z=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:G,offsetX:X,offsetY:Z}}m=G}m||(w=this.cachedCanvases.getCanvas("maskCanvas",n,s),eE(w.context,e));let y=ve.transform(d,[1/n,0,0,-1/s,0,0]);y=ve.transform(y,[1,0,0,1,0,-s]);const[_,x,C,k]=ve.getAxialAlignedBoundingBox([0,0,n,s],y),T=Math.round(C-_)||1,P=Math.round(k-x)||1,O=this.cachedCanvases.getCanvas("fillCanvas",T,P),N=O.context,U=_,F=x;N.translate(-U,-F),N.transform(...y),m||(m=this._scaleImage(w.canvas,as(N)),m=m.img,h&&l&&h.set(f,m)),N.imageSmoothingEnabled=tE(ct(N),e.interpolate),Gf(N,m,0,0,m.width,m.height,0,0,n,s),N.globalCompositeOperation="source-in";const j=ve.transform(as(N),[1,0,0,1,-U,-F]);return N.fillStyle=l?o.getPattern(t,this,j,fn.FILL):o,N.fillRect(0,0,n,s),h&&!l&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,O.canvas)),{canvas:O.canvas,offsetX:Math.round(U),offsetY:Math.round(F)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=BM[e]}setLineJoin(e){this.ctx.lineJoin=UM[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const o=this.ctx;o.setTransform(...ct(this.suspendedCtx)),vd(this.suspendedCtx,o),FM(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),vd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const o=s[0],l=s[1],d=s[2]-o,h=s[3]-l;d===0||h===0||(this.genericComposeSMask(t.context,n,d,h,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,o,l,d,h,f,m,w){let y=e.canvas,_=h-m,x=f-w;if(l){const k=ve.makeHexColor(...l);if(_<0||x<0||_+n>y.width||x+s>y.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,s),P=T.context;P.drawImage(y,-_,-x),P.globalCompositeOperation="destination-atop",P.fillStyle=k,P.fillRect(0,0,n,s),P.globalCompositeOperation="source-over",y=T.canvas,_=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(_,x,n,s),e.clip(T),e.globalCompositeOperation="destination-atop",e.fillStyle=k,e.fillRect(_,x,n,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&d?t.filter=this.filterFactory.addAlphaFilter(d):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(d));const C=new Path2D;C.rect(h,f,n,s),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(y,_,x,n,s,h,f,n,s),t.restore()}save(){this.inSMaskMode?(vd(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),vd(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,s,o,l){this.ctx.transform(e,t,n,s,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const s=this.ctx,o=this.current;let l=o.x,d=o.y,h,f;const m=ct(s),w=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,y=w?n.slice(0):null;for(let _=0,x=0,C=e.length;_<C;_++)switch(e[_]|0){case Mi.rectangle:l=t[x++],d=t[x++];const k=t[x++],T=t[x++],P=l+k,O=d+T;s.moveTo(l,d),k===0||T===0?s.lineTo(P,O):(s.lineTo(P,d),s.lineTo(P,O),s.lineTo(l,O)),w||o.updateRectMinMax(m,[l,d,P,O]),s.closePath();break;case Mi.moveTo:l=t[x++],d=t[x++],s.moveTo(l,d),w||o.updatePathMinMax(m,l,d);break;case Mi.lineTo:l=t[x++],d=t[x++],s.lineTo(l,d),w||o.updatePathMinMax(m,l,d);break;case Mi.curveTo:h=l,f=d,l=t[x+4],d=t[x+5],s.bezierCurveTo(t[x],t[x+1],t[x+2],t[x+3],l,d),o.updateCurvePathMinMax(m,h,f,t[x],t[x+1],t[x+2],t[x+3],l,d,y),x+=6;break;case Mi.curveTo2:h=l,f=d,s.bezierCurveTo(l,d,t[x],t[x+1],t[x+2],t[x+3]),o.updateCurvePathMinMax(m,h,f,l,d,t[x],t[x+1],t[x+2],t[x+3],y),l=t[x+2],d=t[x+3],x+=4;break;case Mi.curveTo3:h=l,f=d,l=t[x+2],d=t[x+3],s.bezierCurveTo(t[x],t[x+1],l,d,l,d),o.updateCurvePathMinMax(m,h,f,t[x],t[x+1],l,d,l,d,y),x+=4;break;case Mi.closePath:s.closePath();break}w&&o.updateScalingPathMinMax(m,y),o.setCurrentPoint(l,d)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,as(t),fn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let o=!1;s&&(t.save(),t.fillStyle=n.getPattern(t,this,as(t),fn.FILL),o=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=HM}eoClip(){this.pendingClip=nE}beginText(){this.current.textMatrix=gS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,s=t.getTransform().invertSelf();for(const{transform:o,x:l,y:d,fontSize:h,path:f}of e)n.addPath(f,new DOMMatrix(o).preMultiplySelf(s).translate(l,d).scale(h,-h));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var m;const n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||Yy,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ne("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const o=n.loadedName||"sans-serif",l=((m=n.systemFontInfo)==null?void 0:m.css)||`"${o}", ${n.fallbackName}`;let d="normal";n.black?d="900":n.bold&&(d="bold");const h=n.italic?"italic":"normal";let f=t;t<KA?f=KA:t>XA&&(f=XA),this.current.fontSizeScale=t/f,this.ctx.font=`${h} ${d} ${f}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,s,o,l){this.current.textMatrix=[e,t,n,s,o,l],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s,o){const l=this.ctx,d=this.current,h=d.font,f=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,w=f&on.FILL_STROKE_MASK,y=!!(f&on.ADD_TO_PATH_FLAG),_=d.patternFill&&!h.missingFile,x=d.patternStroke&&!h.missingFile;let C;if((h.disableFontFace||y||_||x)&&(C=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||_||x){if(l.save(),l.translate(t,n),l.scale(m,-m),w===on.FILL||w===on.FILL_STROKE)if(s){const k=l.getTransform();l.setTransform(...s),l.fill(S(this,Qi,Sw).call(this,C,k,s))}else l.fill(C);if(w===on.STROKE||w===on.FILL_STROKE)if(o){const k=l.getTransform();l.setTransform(...o),l.stroke(S(this,Qi,Sw).call(this,C,k,o))}else l.lineWidth/=m,l.stroke(C);l.restore()}else(w===on.FILL||w===on.FILL_STROKE)&&l.fillText(e,t,n),(w===on.STROKE||w===on.FILL_STROKE)&&l.strokeText(e,t,n);y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ct(l),x:t,y:n,fontSize:m,path:C})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return Be(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const o=this.ctx,l=t.fontSizeScale,d=t.charSpacing,h=t.wordSpacing,f=t.fontDirection,m=t.textHScale*f,w=e.length,y=n.vertical,_=y?1:-1,x=n.defaultVMetrics,C=s*t.fontMatrix[0],k=t.textRenderingMode===on.FILL&&!n.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),f>0?o.scale(m,-1):o.scale(m,1);let T,P;if(t.patternFill){o.save();const j=t.fillColor.getPattern(o,this,as(o),fn.FILL);T=ct(o),o.restore(),o.fillStyle=j}if(t.patternStroke){o.save();const j=t.strokeColor.getPattern(o,this,as(o),fn.STROKE);P=ct(o),o.restore(),o.strokeStyle=j}let O=t.lineWidth;const N=t.textMatrixScale;if(N===0||O===0){const j=t.textRenderingMode&on.FILL_STROKE_MASK;(j===on.STROKE||j===on.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=N;if(l!==1&&(o.scale(l,l),O/=l),o.lineWidth=O,n.isInvalidPDFjsFont){const j=[];let H=0;for(const G of e)j.push(G.unicode),H+=G.width;o.fillText(j.join(""),0,0),t.x+=H*C*m,o.restore(),this.compose();return}let U=0,F;for(F=0;F<w;++F){const j=e[F];if(typeof j=="number"){U+=_*j*s/1e3;continue}let H=!1;const G=(j.isSpace?h:0)+d,X=j.fontChar,Z=j.accent;let ce,be,de=j.width;if(y){const J=j.vmetric||x,ne=-(j.vmetric?J[1]:de*.5)*C,Y=J[2]*C;de=J?-J[0]:de,ce=ne/l,be=(U+Y)/l}else ce=U/l,be=0;if(n.remeasure&&de>0){const J=o.measureText(X).width*1e3/s*l;if(de<J&&this.isFontSubpixelAAEnabled){const ne=de/J;H=!0,o.save(),o.scale(ne,1),ce/=ne}else de!==J&&(ce+=(de-J)/2e3*s/l)}if(this.contentVisible&&(j.isInFont||n.missingFile)){if(k&&!Z)o.fillText(X,ce,be);else if(this.paintChar(X,ce,be,T,P),Z){const J=ce+s*Z.offset.x/l,ne=be-s*Z.offset.y/l;this.paintChar(Z.fontChar,J,ne,T,P)}}const Pe=y?de*C-G*f:de*C+G*f;U+=Pe,H&&o.restore()}y?t.y-=U:t.x+=U*m,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,o=n.fontSize,l=n.fontDirection,d=s.vertical?1:-1,h=n.charSpacing,f=n.wordSpacing,m=n.textHScale*l,w=n.fontMatrix||Yy,y=e.length,_=n.textRenderingMode===on.INVISIBLE;let x,C,k,T;if(!(_||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(m,l),x=0;x<y;++x){if(C=e[x],typeof C=="number"){T=d*C*o/1e3,this.ctx.translate(T,0),n.x+=T*m;continue}const P=(C.isSpace?f:0)+h,O=s.charProcOperatorList[C.operatorListId];if(!O){Ne(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),t.scale(o,o),t.transform(...w),this.executeOperatorList(O),this.restore()),k=ve.applyTransform([C.width,0],w)[0]*o+P,t.translate(k,0),n.x+=k*m}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,o,l){this.ctx.rect(n,s,o-n,l-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],s=this.baseTransform||ct(this.ctx),o={createCanvasGraphics:l=>new F0(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new xw(e,n,this.ctx,o,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=ve.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=ve.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=MM(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,as(t),fn.SHADING);const s=as(t);if(s){const{width:o,height:l}=t.canvas,[d,h,f,m]=ve.getAxialAlignedBoundingBox([0,0,o,l],s);this.ctx.fillRect(d,h,f-d,m-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){tt("Should not call beginInlineImage")}beginImageData(){tt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ct(this.ctx),t)){const n=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],n,s),this.current.updateRectMinMax(ct(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||xg("TODO: Support non-isolated groups."),e.knockout&&Ne("Knockout groups not supported.");const n=ct(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=ve.getAxialAlignedBoundingBox(e.bbox,ct(t));const o=[0,0,t.canvas.width,t.canvas.height];s=ve.intersect(s,o)||[0,0,0,0];const l=Math.floor(s[0]),d=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-l,1),f=Math.max(Math.ceil(s[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,f]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const w=this.cachedCanvases.getCanvas(m,h,f),y=w.context;y.translate(-l,-d),y.transform(...n),e.smask?this.smaskStack.push({canvas:w.canvas,context:y,offsetX:l,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,d),t.save()),vd(t,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=ct(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const o=ve.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,s,o){if(S(this,Qi,Aw).call(this),qf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const l=t[2]-t[0],d=t[3]-t[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=l,t[3]=d;const[h,f]=ve.singularValueDecompose2dScale(ct(this.ctx)),{viewportScale:m}=this,w=Math.ceil(l*this.outputScaleX*m),y=Math.ceil(d*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(w,y);const{canvas:_,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(h,0,0,-f,0,d*f),qf(this.ctx)}else qf(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],l,d),this.ctx.clip(),this.ctx.beginPath()}this.current=new JA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),S(this,Qi,Ew).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=zM(e)),s.compiled)){s.compiled(n);return}const o=this._createMaskCanvas(e),l=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,s=0,o,l){if(!this.contentVisible)return;e=this.getObject(e.data,e);const d=this.ctx;d.save();const h=ct(d);d.transform(t,n,s,o,0,0);const f=this._createMaskCanvas(e);d.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]);for(let m=0,w=l.length;m<w;m+=2){const y=ve.transform(h,[t,n,s,o,l[m],l[m+1]]),[_,x]=ve.applyTransform([0,0],y);d.drawImage(f.canvas,_,x)}d.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const o of e){const{data:l,width:d,height:h,transform:f}=o,m=this.cachedCanvases.getCanvas("maskCanvas",d,h),w=m.context;w.save();const y=this.getObject(l,o);eE(w,y),w.globalCompositeOperation="source-in",w.fillStyle=s?n.getPattern(w,this,as(t),fn.FILL):n,w.fillRect(0,0,d,h),w.restore(),t.save(),t.transform(...f),t.scale(1,-1),Gf(t,m.canvas,0,0,d,h,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ne("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){Ne("Dependent image isn't ready yet");return}const l=o.width,d=o.height,h=[];for(let f=0,m=s.length;f<m;f+=2)h.push({transform:[t,0,0,n,s[f],s[f+1]],x:0,y:0,w:l,h:d});this.paintInlineImageXObjectGroup(o,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,s),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;if(this.save(),!gn){const{filter:d}=s;d!=="none"&&d!==""&&(s.filter="none")}s.scale(1/t,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const h=this.cachedCanvases.getCanvas("inlineImage",t,n).context;ZA(h,e),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,as(s));s.imageSmoothingEnabled=tE(ct(s),e.interpolate),Gf(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const o=e.width,l=e.height,h=this.cachedCanvases.getCanvas("inlineImage",o,l).context;ZA(h,e),s=this.applyTransferMapsToCanvas(h)}for(const o of t)n.save(),n.transform(...o.transform),n.scale(1,-1),Gf(n,s,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===nE?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ct(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:o}=this.ctx.getTransform();let l,d;if(n===0&&s===0){const h=Math.abs(t),f=Math.abs(o);if(h===f)if(e===0)l=d=1/h;else{const m=h*e;l=d=m<1?1/m:1}else if(e===0)l=1/h,d=1/f;else{const m=h*e,w=f*e;l=m<1?1/m:1,d=w<1?1/w:1}}else{const h=Math.abs(t*o-n*s),f=Math.hypot(t,n),m=Math.hypot(s,o);if(e===0)l=m/h,d=f/h;else{const w=e*h;l=m>w?m/w:1,d=f>w?f/w:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[s,o]=this.getScaleForStroking();if(t.lineWidth=n||1,s===1&&o===1){t.stroke();return}const l=t.getLineDash();if(e&&t.save(),t.scale(s,o),l.length>0){const d=Math.max(s,o);t.setLineDash(l.map(h=>h/d)),t.lineDashOffset/=d}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Qi=new WeakSet,Aw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ew=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Sw=function(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s};let mc=F0;for(const a in Mi)mc.prototype[a]!==void 0&&(mc.prototype[Mi[a]]=mc.prototype[a]);var Sh,Ch;class yr{static get workerPort(){return c(this,Sh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,Sh,e)}static get workerSrc(){return c(this,Ch)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,Ch,e)}}Sh=new WeakMap,Ch=new WeakMap,E(yr,Sh,null),E(yr,Ch,"");var jo,kh;class $M{constructor({parsedData:e,rawData:t}){E(this,jo);E(this,kh);b(this,jo,e),b(this,kh,t)}getRaw(){return c(this,kh)}get(e){return c(this,jo).get(e)??null}getAll(){return S0(c(this,jo))}has(e){return c(this,jo).has(e)}}jo=new WeakMap,kh=new WeakMap;const rc=Symbol("INTERNAL");var Th,Ih,Rh,Mc;class VM{constructor(e,{name:t,intent:n,usage:s,rbGroups:o}){E(this,Th,!1);E(this,Ih,!1);E(this,Rh,!1);E(this,Mc,!0);b(this,Th,!!(e&si.DISPLAY)),b(this,Ih,!!(e&si.PRINT)),this.name=t,this.intent=n,this.usage=s,this.rbGroups=o}get visible(){if(c(this,Rh))return c(this,Mc);if(!c(this,Mc))return!1;const{print:e,view:t}=this.usage;return c(this,Th)?(t==null?void 0:t.viewState)!=="OFF":c(this,Ih)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==rc&&tt("Internal method `_setVisible` called."),b(this,Rh,n),b(this,Mc,t)}}Th=new WeakMap,Ih=new WeakMap,Rh=new WeakMap,Mc=new WeakMap;var fa,Ye,Nc,Oc,Ph,Cw;class WM{constructor(e,t=si.DISPLAY){E(this,Ph);E(this,fa,null);E(this,Ye,new Map);E(this,Nc,null);E(this,Oc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,Oc,e.order);for(const n of e.groups)c(this,Ye).set(n.id,new VM(t,n));if(e.baseState==="OFF")for(const n of c(this,Ye).values())n._setVisible(rc,!1);for(const n of e.on)c(this,Ye).get(n)._setVisible(rc,!0);for(const n of e.off)c(this,Ye).get(n)._setVisible(rc,!1);b(this,Nc,this.getHash())}}isVisible(e){if(c(this,Ye).size===0)return!0;if(!e)return xg("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Ye).has(e.id)?c(this,Ye).get(e.id).visible:(Ne(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return S(this,Ph,Cw).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Ye).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(c(this,Ye).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Ye).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!c(this,Ye).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Ye).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!c(this,Ye).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Ye).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(c(this,Ye).get(t).visible)return!1}return!0}return Ne(`Unknown optional content policy ${e.policy}.`),!0}return Ne(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var o;const s=c(this,Ye).get(e);if(!s){Ne(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const l of s.rbGroups)for(const d of l)d!==e&&((o=c(this,Ye).get(d))==null||o._setVisible(rc,!1,!0));s._setVisible(rc,!!t,!0),b(this,fa,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const o=c(this,Ye).get(s);if(o)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!o.visible,t);break}}b(this,fa,null)}get hasInitialVisibility(){return c(this,Nc)===null||this.getHash()===c(this,Nc)}getOrder(){return c(this,Ye).size?c(this,Oc)?c(this,Oc).slice():[...c(this,Ye).keys()]:null}getGroups(){return c(this,Ye).size>0?S0(c(this,Ye)):null}getGroup(e){return c(this,Ye).get(e)||null}getHash(){if(c(this,fa)!==null)return c(this,fa);const e=new qS;for(const[t,n]of c(this,Ye))e.update(`${t}:${n.visible}`);return b(this,fa,e.hexdigest())}}fa=new WeakMap,Ye=new WeakMap,Nc=new WeakMap,Oc=new WeakMap,Ph=new WeakSet,Cw=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const o=e[s];let l;if(Array.isArray(o))l=S(this,Ph,Cw).call(this,o);else if(c(this,Ye).has(o))l=c(this,Ye).get(o).visible;else return Ne(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class GM{constructor(e,{disableRange:t=!1,disableStream:n=!1}){It(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:o,progressiveDone:l,contentDispositionFilename:d}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=d,(o==null?void 0:o.length)>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),e.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});It(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,o;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(o=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||o.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){It(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new qM(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new KM(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class qM{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=T0(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class KM{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function XM(a){let e=!0,t=n("filename\\*","i").exec(a);if(t){t=t[1];let m=d(t);return m=unescape(m),m=h(m),m=f(m),o(m)}if(t=l(a),t){const m=f(t);return o(m)}if(t=n("filename","i").exec(a),t){t=t[1];let m=d(t);return m=f(m),o(m)}function n(m,w){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',w)}function s(m,w){if(m){if(!/^[\x00-\xFF]+$/.test(w))return w;try{const y=new TextDecoder(m,{fatal:!0}),_=Ag(w);w=y.decode(_),e=!1}catch{}}return w}function o(m){return e&&/[\x80-\xff]/.test(m)&&(m=s("utf-8",m),e&&(m=s("iso-8859-1",m))),m}function l(m){const w=[];let y;const _=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=_.exec(m))!==null;){let[,C,k,T]=y;if(C=parseInt(C,10),C in w){if(C===0)break;continue}w[C]=[k,T]}const x=[];for(let C=0;C<w.length&&C in w;++C){let[k,T]=w[C];T=d(T),k&&(T=unescape(T),C===0&&(T=h(T))),x.push(T)}return x.join("")}function d(m){if(m.startsWith('"')){const w=m.slice(1).split('\\"');for(let y=0;y<w.length;++y){const _=w[y].indexOf('"');_!==-1&&(w[y]=w[y].slice(0,_),w.length=y+1),w[y]=w[y].replaceAll(/\\(.)/g,"$1")}m=w.join('"')}return m}function h(m){const w=m.indexOf("'");if(w===-1)return m;const y=m.slice(0,w),x=m.slice(w+1).replace(/^[^']*'/,"");return s(y,x)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(w,y,_,x){if(_==="q"||_==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,k){return String.fromCharCode(parseInt(k,16))}),s(y,x);try{x=atob(x)}catch{}return s(y,x)})}return""}function o1(a,e){const t=new Headers;if(!a||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function Cg(a){try{return new URL(a).origin}catch{}return null}function l1({responseHeaders:a,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(s.suggestedLength=o,o<=2*t)||n||!e||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function c1(a){const e=a.get("Content-Disposition");if(e){let t=XM(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(T0(t))return t}return null}function kg(a,e){return a===404||a===0&&e.startsWith("file:")?new Kd('Missing PDF "'+e+'".'):new Hm(`Unexpected server response (${a}) while retrieving PDF "${e}".`,a)}function u1(a){return a===200||a===206}function d1(a,e,t){return{method:"GET",headers:a,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function h1(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(Ne(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class iE{constructor(e){Se(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=o1(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return It(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new YM(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new QM(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class YM{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,d1(n,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=Cg(o.url),!u1(o.status))throw kg(o.status,s);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:d,suggestedLength:h}=l1({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=h||this._contentLength,this._filename=c1(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Oa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class QM{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const l=s.url;fetch(l,d1(o,this._withCredentials,this._abortController)).then(d=>{const h=Cg(d.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!u1(d.status))throw kg(d.status,l);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:h1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Ny=200,Oy=206;function JM(a){const e=a.response;return typeof e!="string"?e:Ag(e).buffer}class ZM{constructor({url:e,httpHeaders:t,withCredentials:n}){Se(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=o1(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Oy):s.expectedStatus=Ny,t.responseType="arraybuffer",It(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){n.onError(s.status);return}const o=s.status||Ny;if(!(o===Ny&&n.expectedStatus===Oy)&&o!==n.expectedStatus){n.onError(s.status);return}const d=JM(s);if(o===Oy){const h=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?n.onDone({begin:parseInt(f[1],10),chunk:d}):(Ne('Missing or invalid "Content-Range" header.'),n.onError(0))}else d?n.onDone({begin:0,chunk:d}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class eN{constructor(e){this._source=e,this._manager=new ZM(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return It(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new tN(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new nN(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class tN{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Cg(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[h,...f]=d.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=l1({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=c1(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=kg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class nN{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Cg((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=kg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const iN=/^[a-z][a-z0-9\-+.]+:/i;function sN(a){if(iN.test(a))return new URL(a);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(a))}class rN{constructor(e){this.source=e,this.url=sN(e.url),It(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return It(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new aN(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new oN(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class aN{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new Kd(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Oa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class oN{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const lN=1e5,Nn=30,cN=.8;var lE,ma,zn,Dh,Lh,zo,tr,Mh,Nh,Bo,Fc,jc,ga,zc,Oh,Bc,Uo,Fh,jh,Ho,$o,zh,va,Uc,Cr,p1,f1,kw,oi,hm,Tw,m1,g1;const Mt=class Mt{constructor({textContentSource:e,container:t,viewport:n}){E(this,Cr);E(this,ma,Promise.withResolvers());E(this,zn,null);E(this,Dh,!1);E(this,Lh,!!((lE=globalThis.FontInspector)!=null&&lE.enabled));E(this,zo,null);E(this,tr,null);E(this,Mh,0);E(this,Nh,0);E(this,Bo,null);E(this,Fc,null);E(this,jc,0);E(this,ga,0);E(this,zc,Object.create(null));E(this,Oh,[]);E(this,Bc,null);E(this,Uo,[]);E(this,Fh,new WeakMap);E(this,jh,null);var h;if(e instanceof ReadableStream)b(this,Bc,e);else if(typeof e=="object")b(this,Bc,new ReadableStream({start(f){f.enqueue(e),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,zn,b(this,Fc,t)),b(this,ga,n.scale*(globalThis.devicePixelRatio||1)),b(this,jc,n.rotation),b(this,tr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:o,pageX:l,pageY:d}=n.rawDims;b(this,jh,[1,0,0,-1,-l,d+o]),b(this,Nh,s),b(this,Mh,o),S(h=Mt,oi,m1).call(h),xl(t,n),c(this,ma).promise.finally(()=>{c(Mt,Uc).delete(this),b(this,tr,null),b(this,zc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Sn.platform;return Be(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Bo).read().then(({value:t,done:n})=>{if(n){c(this,ma).resolve();return}c(this,zo)??b(this,zo,t.lang),Object.assign(c(this,zc),t.styles),S(this,Cr,p1).call(this,t.items),e()},c(this,ma).reject)};return b(this,Bo,c(this,Bc).getReader()),c(Mt,Uc).add(this),e(),c(this,ma).promise}update({viewport:e,onBefore:t=null}){var o;const n=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==c(this,jc)&&(t==null||t(),b(this,jc,s),xl(c(this,Fc),{rotation:s})),n!==c(this,ga)){t==null||t(),b(this,ga,n);const l={div:null,properties:null,ctx:S(o=Mt,oi,hm).call(o,c(this,zo))};for(const d of c(this,Uo))l.properties=c(this,Fh).get(d),l.div=d,S(this,Cr,kw).call(this,l)}}cancel(){var t;const e=new Oa("TextLayer task cancelled.");(t=c(this,Bo))==null||t.cancel(e).catch(()=>{}),b(this,Bo,null),c(this,ma).reject(e)}get textDivs(){return c(this,Uo)}get textContentItemsStr(){return c(this,Oh)}static cleanup(){if(!(c(this,Uc).size>0)){c(this,Ho).clear();for(const{canvas:e}of c(this,$o).values())e.remove();c(this,$o).clear()}}};ma=new WeakMap,zn=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,zo=new WeakMap,tr=new WeakMap,Mh=new WeakMap,Nh=new WeakMap,Bo=new WeakMap,Fc=new WeakMap,jc=new WeakMap,ga=new WeakMap,zc=new WeakMap,Oh=new WeakMap,Bc=new WeakMap,Uo=new WeakMap,Fh=new WeakMap,jh=new WeakMap,Ho=new WeakMap,$o=new WeakMap,zh=new WeakMap,va=new WeakMap,Uc=new WeakMap,Cr=new WeakSet,p1=function(e){var s,o;if(c(this,Dh))return;(o=c(this,tr)).ctx??(o.ctx=S(s=Mt,oi,hm).call(s,c(this,zo)));const t=c(this,Uo),n=c(this,Oh);for(const l of e){if(t.length>lN){Ne("Ignoring additional textDivs for performance reasons."),b(this,Dh,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const d=c(this,zn);b(this,zn,document.createElement("span")),c(this,zn).classList.add("markedContent"),l.id!==null&&c(this,zn).setAttribute("id",`${l.id}`),d.append(c(this,zn))}else l.type==="endMarkedContent"&&b(this,zn,c(this,zn).parentNode);continue}n.push(l.str),S(this,Cr,f1).call(this,l)}},f1=function(e){var C;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,Uo).push(t);const s=ve.transform(c(this,jh),e.transform);let o=Math.atan2(s[1],s[0]);const l=c(this,zc)[e.fontName];l.vertical&&(o+=Math.PI/2);let d=c(this,Lh)&&l.fontSubstitution||l.fontFamily;d=Mt.fontFamilyMap.get(d)||d;const h=Math.hypot(s[2],s[3]),f=h*S(C=Mt,oi,g1).call(C,d,c(this,zo));let m,w;o===0?(m=s[4],w=s[5]-f):(m=s[4]+f*Math.sin(o),w=s[5]-f*Math.cos(o));const y="calc(var(--scale-factor)*",_=t.style;c(this,zn)===c(this,Fc)?(_.left=`${(100*m/c(this,Nh)).toFixed(2)}%`,_.top=`${(100*w/c(this,Mh)).toFixed(2)}%`):(_.left=`${y}${m.toFixed(2)}px)`,_.top=`${y}${w.toFixed(2)}px)`),_.fontSize=`${y}${(c(Mt,va)*h).toFixed(2)}px)`,_.fontFamily=d,n.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,Lh)&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const k=Math.abs(e.transform[0]),T=Math.abs(e.transform[3]);k!==T&&Math.max(k,T)/Math.min(k,T)>1.5&&(x=!0)}if(x&&(n.canvasWidth=l.vertical?e.height:e.width),c(this,Fh).set(t,n),c(this,tr).div=t,c(this,tr).properties=n,S(this,Cr,kw).call(this,c(this,tr)),n.hasText&&c(this,zn).append(t),n.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),c(this,zn).append(k)}},kw=function(e){var d;const{div:t,properties:n,ctx:s}=e,{style:o}=t;let l="";if(c(Mt,va)>1&&(l=`scale(${1/c(Mt,va)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=o,{canvasWidth:f,fontSize:m}=n;S(d=Mt,oi,Tw).call(d,s,m*c(this,ga),h);const{width:w}=s.measureText(t.textContent);w>0&&(l=`scaleX(${f*c(this,ga)/w}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)},oi=new WeakSet,hm=function(e=null){let t=c(this,$o).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,$o).set(e,t),c(this,zh).set(t,{size:0,family:""})}return t},Tw=function(e,t,n){const s=c(this,zh).get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)},m1=function(){if(c(this,va)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,va,e.getBoundingClientRect().height),e.remove()},g1=function(e,t){const n=c(this,Ho).get(e);if(n)return n;const s=S(this,oi,hm).call(this,t);s.canvas.width=s.canvas.height=Nn,S(this,oi,Tw).call(this,s,Nn,e);const o=s.measureText("");let l=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);if(l){const m=l/(l+d);return c(this,Ho).set(e,m),s.canvas.width=s.canvas.height=0,m}s.strokeStyle="red",s.clearRect(0,0,Nn,Nn),s.strokeText("g",0,0);let h=s.getImageData(0,0,Nn,Nn).data;d=0;for(let m=h.length-1-3;m>=0;m-=4)if(h[m]>0){d=Math.ceil(m/4/Nn);break}s.clearRect(0,0,Nn,Nn),s.strokeText("A",0,Nn),h=s.getImageData(0,0,Nn,Nn).data,l=0;for(let m=0,w=h.length;m<w;m+=4)if(h[m]>0){l=Nn-Math.floor(m/4/Nn);break}s.canvas.width=s.canvas.height=0;const f=l?l/(l+d):cN;return c(this,Ho).set(e,f),f},E(Mt,oi),E(Mt,Ho,new Map),E(Mt,$o,new Map),E(Mt,zh,new WeakMap),E(Mt,va,null),E(Mt,Uc,new Set);let Xd=Mt;class Yd{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(o){var h;if(!o)return;let l=null;const d=o.name;if(d==="#text")l=o.value;else if(Yd.shouldBuildText(d))(h=o==null?void 0:o.attributes)!=null&&h.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const f of o.children)s(f)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const uN=65536,dN=100,hN=5e3,pN=gn?kM:EM,fN=gn?TM:t1,mN=gn?CM:SM,gN=gn?IM:r1;function vN(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const e=new Iw,{docId:t}=e,n=a.url?yN(a.url):null,s=a.data?wN(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,d=a.password??null,h=a.range instanceof v1?a.range:null,f=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:uN;let m=a.worker instanceof gc?a.worker:null;const w=a.verbosity,y=typeof a.docBaseUrl=="string"&&!Sg(a.docBaseUrl)?a.docBaseUrl:null,_=typeof a.cMapUrl=="string"?a.cMapUrl:null,x=a.cMapPacked!==!1,C=a.CMapReaderFactory||fN,k=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,T=a.StandardFontDataFactory||gN,P=a.stopAtErrors!==!0,O=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,N=a.isEvalSupported!==!1,U=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!gn,F=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!gn&&(Sn.platform.isFirefox||!globalThis.chrome),j=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,H=typeof a.disableFontFace=="boolean"?a.disableFontFace:gn,G=a.fontExtraProperties===!0,X=a.enableXfa===!0,Z=a.ownerDocument||globalThis.document,ce=a.disableRange===!0,be=a.disableStream===!0,de=a.disableAutoFetch===!0,Pe=a.pdfBug===!0,J=a.CanvasFactory||pN,ne=a.FilterFactory||mN,Y=a.enableHWA===!0,ie=h?h.length:a.length??NaN,ee=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!gn&&!H,L=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:C===t1&&T===r1&&_&&k&&_d(_,document.baseURI)&&_d(k,document.baseURI),$=null;nM(w);const pe={canvasFactory:new J({ownerDocument:Z,enableHWA:Y}),filterFactory:new ne({docId:t,ownerDocument:Z}),cMapReaderFactory:L?null:new C({baseUrl:_,isCompressed:x}),standardFontDataFactory:L?null:new T({baseUrl:k})};if(!m){const ye={verbosity:w,port:yr.workerPort};m=ye.port?gc.fromPort(ye):new gc(ye),e._worker=m}const Ae={docId:t,apiVersion:"4.10.38",data:s,password:d,disableAutoFetch:de,rangeChunkSize:f,length:ie,docBaseUrl:y,enableXfa:X,evaluatorOptions:{maxImageSize:O,disableFontFace:H,ignoreErrors:P,isEvalSupported:N,isOffscreenCanvasSupported:U,isImageDecoderSupported:F,canvasMaxAreaInBytes:j,fontExtraProperties:G,useSystemFonts:ee,cMapUrl:L?_:null,standardFontDataUrl:L?k:null}},Le={disableFontFace:H,fontExtraProperties:G,ownerDocument:Z,pdfBug:Pe,styleElement:$,loadingParams:{disableAutoFetch:de,enableXfa:X}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ye=m.messageHandler.sendWithPromise("GetDocRequest",Ae,s?[s.buffer]:null);let we;if(h)we=new GM(h,{disableRange:ce,disableStream:be});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Fe;if(gn)if(_d(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Fe=iE}else Fe=rN;else Fe=_d(n)?iE:eN;we=new Fe({url:n,length:ie,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:ce,disableStream:be})}return ye.then(Fe=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const qe=new Sd(t,Fe,m.port),Ct=new AN(qe,e,we,Le,pe);e._transport=Ct,qe.send("Ready",null)})}).catch(e._capability.reject),e}function yN(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(gn&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function wN(a){if(gn&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return Ag(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a==null?void 0:a.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function sE(a){return typeof a=="object"&&Number.isInteger(a==null?void 0:a.num)&&a.num>=0&&Number.isInteger(a==null?void 0:a.gen)&&a.gen>=0}var sg;const rg=class rg{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${wn(rg,sg)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}};sg=new WeakMap,E(rg,sg,0);let Iw=rg;class v1{constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){tt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class bN{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Be(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ya,nr,Ai,ac,pm;class _N{constructor(e,t,n,s=!1){E(this,Ai);E(this,ya,null);E(this,nr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new VA:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new y1,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:o=!1}={}){return new Ip({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Be(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:s=ta.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:w=!1}){var N,U;(N=this._stats)==null||N.time("Overall");const y=this._transport.getRenderingIntent(n,s,m,w),{renderingIntent:_,cacheKey:x}=y;b(this,nr,!1),S(this,Ai,pm).call(this),d||(d=this._transport.getOptionalContentConfig(_));let C=this._intentStates.get(x);C||(C=Object.create(null),this._intentStates.set(x,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const k=!!(_&si.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(U=this._stats)==null||U.time("Page Request"),this._pumpOperatorList(y));const T=F=>{var j;C.renderTasks.delete(P),(this._maybeCleanupAfterRender||k)&&b(this,nr,!0),S(this,Ai,ac).call(this,!k),F?(P.capability.reject(F),this._abortOperatorList({intentState:C,reason:F instanceof Error?F:new Error(F)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new Pw({callback:T,params:{canvasContext:e,viewport:t,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:f});(C.renderTasks||(C.renderTasks=new Set)).add(P);const O=P.task;return Promise.all([C.displayReadyCapability.promise,d]).then(([F,j])=>{var H;if(this.destroyed){T();return}if((H=this._stats)==null||H.time("Rendering"),!(j.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:F,optionalContentConfig:j}),P.operatorListChanged()}).catch(T),O}getOperatorList({intent:e="display",annotationMode:t=ta.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var f;function o(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(e,t,n,s,!0);let d=this._intentStates.get(l.cacheKey);d||(d=Object.create(null),this._intentStates.set(l.cacheKey,d));let h;return d.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(h),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(l)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Yd.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function o(){l.read().then(function({value:h,done:f}){if(f){n(d);return}d.lang??(d.lang=h.lang),Object.assign(d.styles,h.styles),d.items.push(...h.items),o()},s)}const l=t.getReader(),d={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),b(this,nr,!1),S(this,Ai,pm).call(this),Promise.all(e)}cleanup(e=!1){b(this,nr,!0);const t=S(this,Ai,ac).call(this,!1);return e&&t&&this._stats&&(this._stats=new VA),t}_startRenderPage(e,t){var s,o;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&S(this,Ai,ac).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:o,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:s},l).getReader(),f=this._intentStates.get(t);f.streamReader=h;const m=()=>{h.read().then(({value:w,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(w,f),m())},w=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();S(this,Ai,ac).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(w);else if(f.opListReadCapability)f.opListReadCapability.reject(w);else throw w}})};m()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof k0){let s=dN;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Oa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}ya=new WeakMap,nr=new WeakMap,Ai=new WeakSet,ac=function(e=!1){if(S(this,Ai,pm).call(this),!c(this,nr)||this.destroyed)return!1;if(e)return b(this,ya,setTimeout(()=>{b(this,ya,null),S(this,Ai,ac).call(this,!1)},hN)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,nr,!1),!0},pm=function(){c(this,ya)&&(clearTimeout(c(this,ya)),b(this,ya,null))};var ir,ag;class xN{constructor(){E(this,ir,new Map);E(this,ag,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};c(this,ag).then(()=>{for(const[s]of c(this,ir))s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ne("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);s=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}c(this,ir).set(t,s)}removeEventListener(e,t){const n=c(this,ir).get(t);n==null||n(),c(this,ir).delete(t)}terminate(){for(const[,e]of c(this,ir))e==null||e();c(this,ir).clear()}}ir=new WeakMap,ag=new WeakMap;var og,Vo,Wo,Hc,fm,$c,mm;const lt=class lt{constructor({name:e=null,port:t=null,verbosity:n=iM()}={}){E(this,Hc);var s;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=c(lt,Wo))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(lt,Wo)||b(lt,Wo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Sd("main","worker",e),this._messageHandler.on("ready",function(){}),S(this,Hc,fm).call(this)}_initialize(){if(c(lt,Vo)||c(lt,$c,mm)){this._setupFakeWorker();return}let{workerSrc:e}=lt;try{lt._isSameOrigin(window.location.href,e)||(e=lt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Sd("main","worker",t),s=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:o.signal}),n.on("test",d=>{if(o.abort(),this.destroyed||!d){s();return}this._messageHandler=n,this._port=t,this._webWorker=t,S(this,Hc,fm).call(this)}),n.on("ready",d=>{if(o.abort(),this.destroyed){s();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};l();return}catch{xg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(lt,Vo)||(Ne("Setting up fake worker."),b(lt,Vo,!0)),lt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new xN;this._port=t;const n=`fake${wn(lt,og)._++}`,s=new Sd(n+"_worker",n,t);e.setup(s,t),this._messageHandler=new Sd(n,n+"_worker",t),S(this,Hc,fm).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=c(lt,Wo))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=c(this,Wo))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new lt(e)}static get workerSrc(){if(yr.workerSrc)return yr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Be(this,"_setupFakeWorkerGlobal",(async()=>c(this,$c,mm)?c(this,$c,mm):(await import(this.workerSrc)).WorkerMessageHandler)())}};og=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,Hc=new WeakSet,fm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},$c=new WeakSet,mm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(lt,$c),E(lt,og,0),E(lt,Vo,!1),E(lt,Wo),gn&&(b(lt,Vo,!0),yr.workerSrc||(yr.workerSrc="./pdf.worker.mjs")),lt._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(t,n);return n.origin===s.origin},lt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let gc=lt;var sr,ys,Vc,Wc,rr,Go,Rd;class AN{constructor(e,t,n,s,o){E(this,Go);E(this,sr,new Map);E(this,ys,new Map);E(this,Vc,new Map);E(this,Wc,new Map);E(this,rr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new y1,this.fontLoader=new xM({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Be(this,"annotationStorage",new P0)}getRenderingIntent(e,t=ta.ENABLE,n=null,s=!1,o=!1){let l=si.DISPLAY,d=yw;switch(e){case"any":l=si.ANY;break;case"display":break;case"print":l=si.PRINT;break;default:Ne(`getRenderingIntent - invalid intent: ${e}`)}const h=l&si.PRINT&&n instanceof XS?n:this.annotationStorage;switch(t){case ta.DISABLE:l+=si.ANNOTATIONS_DISABLE;break;case ta.ENABLE:break;case ta.ENABLE_FORMS:l+=si.ANNOTATIONS_FORMS;break;case ta.ENABLE_STORAGE:l+=si.ANNOTATIONS_STORAGE,d=h.serializable;break;default:Ne(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(l+=si.IS_EDITING),o&&(l+=si.OPLIST);const{ids:f,hash:m}=h.modifiedIds,w=[l,d.hash,m];return{renderingIntent:l,cacheKey:w.join("_"),annotationStorageSerializable:d,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,rr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of c(this,ys).values())e.push(s._destroy());c(this,ys).clear(),c(this,Vc).clear(),c(this,Wc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,o;this.commonObjs.clear(),this.fontLoader.clear(),c(this,sr).clear(),this.filterFactory.destroy(),Xd.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Oa("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{It(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){s.close();return}It(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{var d;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:o,contentLength:l}=this._fullReader;return(!s||!o)&&(this._lastProgress&&((d=t.onProgress)==null||d.call(t,this._lastProgress)),this._fullReader.onProgress=h=>{var f;(f=t.onProgress)==null||f.call(t,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:s,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(n,s)=>{It(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){s.close();return}s.onPull=()=>{o.read().then(function({value:l,done:d}){if(d){s.close();return}It(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{o.cancel(l),s.ready.catch(d=>{if(!this.destroyed)throw d})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new bN(n,this))}),e.on("DocException",n=>{t._capability.reject(On(n))}),e.on("PasswordRequest",n=>{b(this,rr,Promise.withResolvers());try{if(!t.onPassword)throw On(n);const s=o=>{o instanceof Error?c(this,rr).reject(o):c(this,rr).resolve({password:o})};t.onPassword(s,n.code)}catch(s){c(this,rr).reject(s)}return c(this,rr).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,ys).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,o])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:d,fontExtraProperties:h,pdfBug:f}=this._params;if("error"in o){const _=o.error;Ne(`Error during font loading: ${_}`),this.commonObjs.resolve(n,_);break}const m=f&&((l=globalThis.FontInspector)!=null&&l.enabled)?(_,x)=>globalThis.FontInspector.fontAdded(_,x):null,w=new AM(o,{disableFontFace:d,fontExtraProperties:h,inspectFont:m});this.fontLoader.bind(w).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h&&w.data&&(w.data=null),this.commonObjs.resolve(n,w)});break;case"CopyLocalImage":const{imageRef:y}=o;It(y,"The imageRef must be defined.");for(const _ of c(this,ys).values())for(const[,x]of _.objs)if((x==null?void 0:x.ref)===y)return x.dataLen?(this.commonObjs.resolve(n,structuredClone(x)),x.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,o,l])=>{var h;if(this.destroyed)return;const d=c(this,ys).get(s);if(!d.objs.has(n)){if(d._intentStates.size===0){(h=l==null?void 0:l.bitmap)==null||h.close();return}switch(o){case"Image":d.objs.resolve(n,l),(l==null?void 0:l.dataLen)>JL&&(d._maybeCleanupAfterRender=!0);break;case"Pattern":d.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ne("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=c(this,Vc).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&c(this,Wc).set(o.refStr,e);const l=new _N(t,o,this,this._params.pdfBug);return c(this,ys).set(t,l),l});return c(this,Vc).set(t,s),s}getPageIndex(e){return sE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return S(this,Go,Rd).call(this,"GetFieldObjects")}hasJSActions(){return S(this,Go,Rd).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return S(this,Go,Rd).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return S(this,Go,Rd).call(this,"GetOptionalContentConfig").then(t=>new WM(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,sr).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var o,l;return{info:s[0],metadata:s[1]?new $M(s[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return c(this,sr).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,ys).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,sr).clear(),this.filterFactory.destroy(!0),Xd.cleanup()}}cachedPageNumber(e){if(!sE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,Wc).get(t)??null}}sr=new WeakMap,ys=new WeakMap,Vc=new WeakMap,Wc=new WeakMap,rr=new WeakMap,Go=new WeakSet,Rd=function(e,t=null){const n=c(this,sr).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return c(this,sr).set(e,s),s};const yd=Symbol("INITIAL_DATA");var Xn,Bh,Rw;class y1{constructor(){E(this,Bh);E(this,Xn,Object.create(null))}get(e,t=null){if(t){const s=S(this,Bh,Rw).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=c(this,Xn)[e];if(!n||n.data===yd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=c(this,Xn)[e];return!!t&&t.data!==yd}delete(e){const t=c(this,Xn)[e];return!t||t.data===yd?!1:(delete c(this,Xn)[e],!0)}resolve(e,t=null){const n=S(this,Bh,Rw).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in c(this,Xn)){const{data:n}=c(this,Xn)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}b(this,Xn,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,Xn)){const{data:t}=c(this,Xn)[e];t!==yd&&(yield[e,t])}}}Xn=new WeakMap,Bh=new WeakSet,Rw=function(e){var t;return(t=c(this,Xn))[e]||(t[e]={...Promise.withResolvers(),data:yd})};var wa;class EN{constructor(e){E(this,wa,null);b(this,wa,e),this.onContinue=null}get promise(){return c(this,wa).capability.promise}cancel(e=0){c(this,wa).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,wa).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,wa);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}wa=new WeakMap;var ba,qo;const po=class po{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:o,operatorList:l,pageIndex:d,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:w=!1,pageColors:y=null}){E(this,ba,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=d,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=w,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new EN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var d,h;if(this.cancelled)return;if(this._canvas){if(c(po,qo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(po,qo).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:o,background:l}=this.params;this.gfx=new mc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,ba)&&(window.cancelAnimationFrame(c(this,ba)),b(this,ba,null)),c(po,qo).delete(this._canvas),this.callback(e||new k0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,ba,window.requestAnimationFrame(()=>{b(this,ba,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(po,qo).delete(this._canvas),this.callback())))}};ba=new WeakMap,qo=new WeakMap,E(po,qo,new WeakSet);let Pw=po;const SN="4.10.38",CN="f9bea397f";function rE(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function wd(a){return Math.max(0,Math.min(255,255*a))}class aE{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=wd(e),[e,e,e]}static G_HTML([e]){const t=rE(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(wd)}static RGB_HTML(e){return`#${e.map(rE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[wd(1-Math.min(1,e+s)),wd(1-Math.min(1,n+s)),wd(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,o=1-t,l=1-n,d=Math.min(s,o,l);return["CMYK",s,o,l,d]}}class kN{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){tt("Abstract method `_createSVG` called.")}}class L0 extends kN{_createSVG(e){return document.createElementNS(Us,e)}}class w1{static setupStorage(e,t,n,s,o){const l=s.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",d=>{s.setValue(t,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",d=>{s.setValue(t,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",d=>{s.setValue(t,{value:d.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const d of n.children)d.attributes.value===l.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}e.addEventListener("input",d=>{const h=d.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:o}){const{attributes:l}=t,d=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&e.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!d||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,f)}d&&o.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){var w,y;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,o=e.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:o,linkService:n});const d=o!=="richText",h=e.div;if(h.append(l),e.viewport){const _=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=_}d&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const _=document.createTextNode(s.value);l.append(_),d&&Yd.shouldBuildText(s.name)&&f.push(_)}return{textDivs:f}}const m=[[s,-1,l]];for(;m.length>0;){const[_,x,C]=m.at(-1);if(x+1===_.children.length){m.pop();continue}const k=_.children[++m.at(-1)[1]];if(k===null)continue;const{name:T}=k;if(T==="#text"){const O=document.createTextNode(k.value);f.push(O),C.append(O);continue}const P=(w=k==null?void 0:k.attributes)!=null&&w.xmlns?document.createElementNS(k.attributes.xmlns,T):document.createElement(T);if(C.append(P),k.attributes&&this.setAttributes({html:P,element:k,storage:t,intent:o,linkService:n}),((y=k.children)==null?void 0:y.length)>0)m.push([k,-1,P]);else if(k.value){const O=document.createTextNode(k.value);d&&Yd.shouldBuildText(T)&&f.push(O),P.append(O)}}for(const _ of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Pp=1e3,TN=9,El=new WeakSet;function Na(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class IN{static create(e){switch(e.data.annotationType){case Lt.LINK:return new b1(e);case Lt.TEXT:return new RN(e);case Lt.WIDGET:switch(e.data.fieldType){case"Tx":return new PN(e);case"Btn":return e.data.radioButton?new A1(e):e.data.checkBox?new LN(e):new MN(e);case"Ch":return new NN(e);case"Sig":return new DN(e)}return new kl(e);case Lt.POPUP:return new Lw(e);case Lt.FREETEXT:return new T1(e);case Lt.LINE:return new FN(e);case Lt.SQUARE:return new jN(e);case Lt.CIRCLE:return new zN(e);case Lt.POLYLINE:return new I1(e);case Lt.CARET:return new UN(e);case Lt.INK:return new M0(e);case Lt.POLYGON:return new BN(e);case Lt.HIGHLIGHT:return new R1(e);case Lt.UNDERLINE:return new HN(e);case Lt.SQUIGGLY:return new $N(e);case Lt.STRIKEOUT:return new VN(e);case Lt.STAMP:return new P1(e);case Lt.FILEATTACHMENT:return new WN(e);default:return new St(e)}}}var Ko,Gc,qc,Uh,Dw;const j0=class j0{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){E(this,Uh);E(this,Ko,null);E(this,Gc,!1);E(this,qc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return j0._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;c(this,Ko)||b(this,Ko,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&S(this,Uh,Dw).call(this,t),(n=c(this,qc))==null||n.popup.updateEdited(e)}resetEdited(){var e;c(this,Ko)&&(S(this,Uh,Dw).call(this,c(this,Ko).rect),(e=c(this,qc))==null||e.popup.resetEdited(),b(this,Ko,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof kl||(o.tabIndex=Pp);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof Lw){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,o),o}const{width:d,height:h}=Na(t.rect);if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,k=t.borderStyle.verticalCornerRadius;if(C>0||k>0){const P=`calc(${C}px * var(--scale-factor)) / calc(${k}px * var(--scale-factor))`;l.borderRadius=P}else if(this instanceof A1){const P=`calc(${d}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`;l.borderRadius=P}switch(t.borderStyle.style){case gd.SOLID:l.borderStyle="solid";break;case gd.DASHED:l.borderStyle="dashed";break;case gd.BEVELED:Ne("Unimplemented border style: beveled");break;case gd.INSET:Ne("Unimplemented border style: inset");break;case gd.UNDERLINE:l.borderBottomStyle="solid";break}const T=t.borderColor||null;T?(b(this,Gc,!0),l.borderColor=ve.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):l.borderWidth=0}const f=ve.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:w,pageX:y,pageY:_}=s.rawDims;l.left=`${100*(f[0]-y)/m}%`,l.top=`${100*(f[1]-_)/w}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(l.width=`${100*d/m}%`,l.height=`${100*h/w}%`):this.setRotation(x,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:o,height:l}=Na(this.data.rect);let d,h;e%180===0?(d=100*o/n,h=100*l/s):(d=100*l/n,h=100*o/s),t.style.width=`${d}%`,t.style.height=`${h}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const o=s.detail[t],l=o[0],d=o.slice(1);s.target.style[n]=aE[`${l}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:aE[`${l}_rgb`](d)})};return Be(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const o=e[s]||n[s];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,o]of Object.entries(t)){const l=n[s];if(l){const d={detail:{[s]:o},target:e};l(d),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,o]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,k,T,P]=e.subarray(2,6);if(s===C&&o===k&&t===T&&n===P)return}const{style:l}=this.container;let d;if(c(this,Gc)){const{borderColor:C,borderWidth:k}=l;l.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const h=s-t,f=o-n,{svgFactory:m}=this,w=m.createElement("svg");w.classList.add("quadrilateralsContainer"),w.setAttribute("width",0),w.setAttribute("height",0);const y=m.createElement("defs");w.append(y);const _=m.createElement("clipPath"),x=`clippath_${this.data.id}`;_.setAttribute("id",x),_.setAttribute("clipPathUnits","objectBoundingBox"),y.append(_);for(let C=2,k=e.length;C<k;C+=8){const T=e[C],P=e[C+1],O=e[C+2],N=e[C+3],U=m.createElement("rect"),F=(O-t)/h,j=(o-P)/f,H=(T-O)/h,G=(P-N)/f;U.setAttribute("x",F),U.setAttribute("y",j),U.setAttribute("width",H),U.setAttribute("height",G),_.append(U),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${j}" width="${H}" height="${G}"/>`)}c(this,Gc)&&(d.push("</g></svg>')"),l.backgroundImage=d.join("")),this.container.append(w),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:e}=this,t=b(this,qc,new Lw({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){tt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:o,id:l,exportValues:d}of s){if(o===-1||l===t)continue;const h=typeof d=="string"?d:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!El.has(f)){Ne(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const s of document.getElementsByName(e)){const{exportValue:o}=s,l=s.getAttribute("data-element-id");l!==t&&El.has(s)&&n.push({id:l,exportValue:o,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ko=new WeakMap,Gc=new WeakMap,qc=new WeakMap,Uh=new WeakSet,Dw=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:d,pageY:h}}}}=this;n==null||n.splice(0,4,...e);const{width:f,height:m}=Na(e);t.left=`${100*(e[0]-d)/o}%`,t.top=`${100*(l-e[3]+h)/l}%`,s===0?(t.width=`${100*f/o}%`,t.height=`${100*m/l}%`):this.setRotation(s)};let St=j0;var ri,oo,_1,x1;class b1 extends St{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});E(this,ri);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let o=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(s,t.action),o=!0):t.attachment?(S(this,ri,_1).call(this,s,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(S(this,ri,x1).call(this,s,t.setOCGState),o=!0):t.dest?(this._bindLink(s,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),o=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(s,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(s),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&S(this,ri,oo).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),S(this,ri,oo).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const l=s.get(o);l&&(t[l]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),S(this,ri,oo).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),S(this,ri,oo).call(this),!this._fieldObjects){Ne('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var w;s==null||s();const{fields:o,refs:l,include:d}=n,h=[];if(o.length!==0||l.length!==0){const y=new Set(l);for(const _ of o){const x=this._fieldObjects[_]||[];for(const{id:C}of x)y.add(C)}for(const _ of Object.values(this._fieldObjects))for(const x of _)y.has(x.id)===d&&h.push(x)}else for(const y of Object.values(this._fieldObjects))h.push(...y);const f=this.annotationStorage,m=[];for(const y of h){const{id:_}=y;switch(m.push(_),y.type){case"text":{const C=y.defaultValue||"";f.setValue(_,{value:C});break}case"checkbox":case"radiobutton":{const C=y.defaultValue===y.exportValues;f.setValue(_,{value:C});break}case"combobox":case"listbox":{const C=y.defaultValue||"";f.setValue(_,{value:C});break}default:continue}const x=document.querySelector(`[data-element-id="${_}"]`);if(x){if(!El.has(x)){Ne(`_bindResetFormAction - element not allowed: ${_}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}ri=new WeakSet,oo=function(){this.container.setAttribute("data-internal-link","")},_1=function(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,s),!1},S(this,ri,oo).call(this)},x1=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),S(this,ri,oo).call(this)};class RN extends St{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class kl extends St{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Sn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,o){n.includes("mouse")?e.addEventListener(n,l=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{var d;if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(l)}}))})}_setEventListeners(e,t,n,s){var o,l,d;for(const[h,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,h,f,s),f==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(e,t,"blur","Blur",null):f==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ve.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||TN,o=e.style;let l;const d=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-d),m=Math.round(f/(Ry*s))||1,w=f/m;l=Math.min(s,h(w/Ry))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-d);l=Math.min(s,h(f/Ry))}o.fontSize=`calc(${l}px * var(--scale-factor))`,o.color=ve.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class PN extends kl{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),o.setValue(l.id,{[s]:n})}render(){var s,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=e.getValue(t,{value:this.data.fieldValue});let d=l.value||"";const h=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;h&&d.length>h&&(d=d.slice(0,h));let f=l.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:d,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??d,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",f??d),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),El.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Pp,this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(n,"value",y.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",y=>{const _=this.data.defaultFieldValue??"";n.value=m.userValue=_,m.formattedValue=null});let w=y=>{const{formattedValue:_}=m;_!=null&&(y.target.value=_),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{var C;if(m.focused)return;const{target:x}=_;m.userValue&&(x.value=m.userValue),m.lastCommittedValue=x.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const x={value(C){m.userValue=C.detail.value??"",e.setValue(t,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:k}=C.detail;m.formattedValue=k,k!=null&&C.target!==document.activeElement&&(C.target.value=k),e.setValue(t,{formattedValue:k})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var O;const{charLimit:k}=C.detail,{target:T}=C;if(k===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",k);let P=m.userValue;!P||P.length<=k||(P=P.slice(0,k),T.value=m.userValue=P,e.setValue(t,{value:P}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,_)}),n.addEventListener("keydown",_=>{var k;m.commitKey=1;let x=-1;if(_.key==="Escape"?x=0:_.key==="Enter"&&!this.data.multiLine?x=2:_.key==="Tab"&&(m.commitKey=3),x===-1)return;const{value:C}=_.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:x,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const y=w;w=null,n.addEventListener("blur",_=>{var C,k;if(!m.focused||!_.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:x}=_.target;m.userValue=x,m.lastCommittedValue!==x&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:m.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),y(_)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",_=>{var U;m.lastCommittedValue=null;const{data:x,target:C}=_,{value:k,selectionStart:T,selectionEnd:P}=C;let O=T,N=P;switch(_.inputType){case"deleteWordBackward":{const F=k.substring(0,T).match(/\w*[^\w]*$/);F&&(O-=F[0].length);break}case"deleteWordForward":{const F=k.substring(T).match(/^[^\w]*\w*/);F&&(N+=F[0].length);break}case"deleteContentBackward":T===P&&(O-=1);break;case"deleteContentForward":T===P&&(N+=1);break}_.preventDefault(),(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,change:x||"",willCommit:!1,selStart:O,selEnd:N}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(w&&n.addEventListener("blur",w),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class DN extends kl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class LN extends kl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return El.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,s&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=Pp,o.addEventListener("change",l=>{const{name:d,checked:h}=l.target;for(const f of this._getElementsByName(d,n)){const m=h&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}e.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const d=t.defaultFieldValue||"Off";l.target.checked=d===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const d={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class A1 extends kl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(El.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,s&&o.setAttribute("checked",!0),o.tabIndex=Pp,o.addEventListener("change",l=>{const{name:d,checked:h}=l.target;for(const f of this._getElementsByName(d,n))e.setValue(f.id,{value:!1});e.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const d=t.defaultFieldValue;l.target.checked=d!=null&&d===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",d=>{const h={value:f=>{const m=l===f.detail.value;for(const w of this._getElementsByName(f.target.name)){const y=m&&w.id===n;w.domElement&&(w.domElement.checked=y),e.setValue(w.id,{value:y})}}};this._dispatchEventFromSandbox(h,d)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class MN extends b1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class NN extends kl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");El.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Pp;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",m=>{const w=this.data.defaultFieldValue;for(const y of s.options)y.selected=y.value===w});for(const m of this.data.options){const w=document.createElement("option");w.textContent=m.displayValue,w.value=m.exportValue,n.value.includes(m.exportValue)&&(w.setAttribute("selected",!0),o=!1),s.append(w)}let l=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),s.prepend(m),l=()=>{m.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const d=m=>{const w=m?"value":"textContent",{options:y,multiple:_}=s;return _?Array.prototype.filter.call(y,x=>x.selected).map(x=>x[w]):y.selectedIndex===-1?null:y[y.selectedIndex][w]};let h=d(!1);const f=m=>{const w=m.target.options;return Array.prototype.map.call(w,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",m=>{const w={value(y){l==null||l();const _=y.detail.value,x=new Set(Array.isArray(_)?_:[_]);for(const C of s.options)C.selected=x.has(C.value);e.setValue(t,{value:d(!0)}),h=d(!1)},multipleSelection(y){s.multiple=!0},remove(y){const _=s.options,x=y.detail.remove;_[x].selected=!1,s.remove(x),_.length>0&&Array.prototype.findIndex.call(_,k=>k.selected)===-1&&(_[0].selected=!0),e.setValue(t,{value:d(!0),items:f(y)}),h=d(!1)},clear(y){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),h=d(!1)},insert(y){const{index:_,displayValue:x,exportValue:C}=y.detail.insert,k=s.children[_],T=document.createElement("option");T.textContent=x,T.value=C,k?k.before(T):s.append(T),e.setValue(t,{value:d(!0),items:f(y)}),h=d(!1)},items(y){const{items:_}=y.detail;for(;s.length!==0;)s.remove(0);for(const x of _){const{displayValue:C,exportValue:k}=x,T=document.createElement("option");T.textContent=C,T.value=k,s.append(T)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:d(!0),items:f(y)}),h=d(!1)},indices(y){const _=new Set(y.detail.indices);for(const x of y.target.options)x.selected=_.has(x.index);e.setValue(t,{value:d(!0)}),h=d(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(w,m)}),s.addEventListener("input",m=>{var _;const w=d(!0),y=d(!1);e.setValue(t,{value:w}),m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:y,changeEx:w,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):s.addEventListener("input",function(m){e.setValue(t,{value:d(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Lw extends St{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:St._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new ON({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${C0}${n}`).join(",")),this.container}}var Kc,lg,cg,Xc,Xo,bt,ar,Yc,Hh,$h,Qc,or,zi,lr,Vh,cr,Wh,Yo,Qo,Je,gm,Mw,E1,S1,C1,k1,vm,ym,Nw;class ON{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:o,contentsObj:l,richText:d,parent:h,rect:f,parentRect:m,open:w}){E(this,Je);E(this,Kc,S(this,Je,C1).bind(this));E(this,lg,S(this,Je,Nw).bind(this));E(this,cg,S(this,Je,ym).bind(this));E(this,Xc,S(this,Je,vm).bind(this));E(this,Xo,null);E(this,bt,null);E(this,ar,null);E(this,Yc,null);E(this,Hh,null);E(this,$h,null);E(this,Qc,null);E(this,or,!1);E(this,zi,null);E(this,lr,null);E(this,Vh,null);E(this,cr,null);E(this,Wh,null);E(this,Yo,null);E(this,Qo,!1);var y;b(this,bt,e),b(this,Wh,s),b(this,ar,l),b(this,cr,d),b(this,$h,h),b(this,Xo,t),b(this,Vh,f),b(this,Qc,m),b(this,Hh,n),b(this,Yc,I0.toDateObject(o)),this.trigger=n.flatMap(_=>_.getElementsToTriggerPopup());for(const _ of this.trigger)_.addEventListener("click",c(this,Xc)),_.addEventListener("mouseenter",c(this,cg)),_.addEventListener("mouseleave",c(this,lg)),_.classList.add("popupTriggerArea");for(const _ of n)(y=_.container)==null||y.addEventListener("keydown",c(this,Kc));c(this,bt).hidden=!0,w&&S(this,Je,vm).call(this)}render(){if(c(this,zi))return;const e=b(this,zi,document.createElement("div"));if(e.className="popup",c(this,Xo)){const o=e.style.outlineColor=ve.makeHexColor(...c(this,Xo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=ve.makeHexColor(...c(this,Xo).map(d=>Math.floor(.7*(255-d)+d)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=c(this,Wh),e.append(t),c(this,Yc)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Yc).valueOf()})),t.append(o)}const s=c(this,Je,gm);if(s)w1.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(c(this,ar));e.append(o)}c(this,bt).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let o=0,l=s.length;o<l;++o){const d=s[o];n.append(document.createTextNode(d)),o<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;c(this,Yo)||b(this,Yo,{contentsObj:c(this,ar),richText:c(this,cr)}),e&&b(this,lr,null),t&&(b(this,cr,S(this,Je,S1).call(this,t)),b(this,ar,null)),(n=c(this,zi))==null||n.remove(),b(this,zi,null)}resetEdited(){var e;c(this,Yo)&&({contentsObj:wn(this,ar)._,richText:wn(this,cr)._}=c(this,Yo),b(this,Yo,null),(e=c(this,zi))==null||e.remove(),b(this,zi,null),b(this,lr,null))}forceHide(){b(this,Qo,this.isVisible),c(this,Qo)&&(c(this,bt).hidden=!0)}maybeShow(){c(this,Qo)&&(c(this,zi)||S(this,Je,ym).call(this),b(this,Qo,!1),c(this,bt).hidden=!1)}get isVisible(){return c(this,bt).hidden===!1}}Kc=new WeakMap,lg=new WeakMap,cg=new WeakMap,Xc=new WeakMap,Xo=new WeakMap,bt=new WeakMap,ar=new WeakMap,Yc=new WeakMap,Hh=new WeakMap,$h=new WeakMap,Qc=new WeakMap,or=new WeakMap,zi=new WeakMap,lr=new WeakMap,Vh=new WeakMap,cr=new WeakMap,Wh=new WeakMap,Yo=new WeakMap,Qo=new WeakMap,Je=new WeakSet,gm=function(){const e=c(this,cr),t=c(this,ar);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,cr).html||null},Mw=function(){var e,t,n;return((n=(t=(e=c(this,Je,gm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},E1=function(){var e,t,n;return((n=(t=(e=c(this,Je,gm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},S1=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:c(this,Je,E1),fontSize:c(this,Je,Mw)?`calc(${c(this,Je,Mw)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:s});return n},C1=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,or))&&S(this,Je,vm).call(this)},k1=function(){if(c(this,lr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:o}}}=c(this,$h);let l=!!c(this,Qc),d=l?c(this,Qc):c(this,Vh);for(const x of c(this,Hh))if(!d||ve.intersect(x.data.rect,d)!==null){d=x.data.rect,l=!0;break}const h=ve.normalizeRect([d[0],e[3]-d[1]+e[1],d[2],e[3]-d[3]+e[1]]),m=l?d[2]-d[0]+5:0,w=h[0]+m,y=h[1];b(this,lr,[100*(w-s)/t,100*(y-o)/n]);const{style:_}=c(this,bt);_.left=`${c(this,lr)[0]}%`,_.top=`${c(this,lr)[1]}%`},vm=function(){b(this,or,!c(this,or)),c(this,or)?(S(this,Je,ym).call(this),c(this,bt).addEventListener("click",c(this,Xc)),c(this,bt).addEventListener("keydown",c(this,Kc))):(S(this,Je,Nw).call(this),c(this,bt).removeEventListener("click",c(this,Xc)),c(this,bt).removeEventListener("keydown",c(this,Kc)))},ym=function(){c(this,zi)||this.render(),this.isVisible?c(this,or)&&c(this,bt).classList.add("focused"):(S(this,Je,k1).call(this),c(this,bt).hidden=!1,c(this,bt).style.zIndex=parseInt(c(this,bt).style.zIndex)+1e3)},Nw=function(){c(this,bt).classList.remove("focused"),!(c(this,or)||!this.isVisible)&&(c(this,bt).hidden=!0,c(this,bt).style.zIndex=parseInt(c(this,bt).style.zIndex)-1e3)};class T1 extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Me.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Gh;class FN extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Gh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:s}=Na(t.rect),o=this.svgFactory.create(n,s,!0),l=b(this,Gh,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Gh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gh=new WeakMap;var qh;class jN extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,qh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:s}=Na(t.rect),o=this.svgFactory.create(n,s,!0),l=t.borderStyle.width,d=b(this,qh,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",l/2),d.setAttribute("y",l/2),d.setAttribute("width",n-l),d.setAttribute("height",s-l),d.setAttribute("stroke-width",l||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,qh)}addHighlightArea(){this.container.classList.add("highlightArea")}}qh=new WeakMap;var Kh;class zN extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Kh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:s}=Na(t.rect),o=this.svgFactory.create(n,s,!0),l=t.borderStyle.width,d=b(this,Kh,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",n/2),d.setAttribute("cy",s/2),d.setAttribute("rx",n/2-l/2),d.setAttribute("ry",s/2-l/2),d.setAttribute("stroke-width",l||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),o.append(d),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Kh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kh=new WeakMap;var Xh;class I1 extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Xh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:o}}=this;if(!n)return this.container;const{width:l,height:d}=Na(t),h=this.svgFactory.create(l,d,!0);let f=[];for(let w=0,y=n.length;w<y;w+=2){const _=n[w]-t[0],x=t[3]-n[w+1];f.push(`${_},${x}`)}f=f.join(" ");const m=b(this,Xh,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),h.append(m),this.container.append(h),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Xh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xh=new WeakMap;class BN extends I1{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class UN extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Yh,Jo,Qh,Ow;class M0 extends St{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Qh);E(this,Yh,null);E(this,Jo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Me.HIGHLIGHT:Me.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:o,popupRef:l}}=this,{transform:d,width:h,height:f}=S(this,Qh,Ow).call(this,n,t),m=this.svgFactory.create(h,f,!0),w=b(this,Yh,this.svgFactory.createElement("svg:g"));m.append(w),w.setAttribute("stroke-width",o.width||1),w.setAttribute("stroke-linecap","round"),w.setAttribute("stroke-linejoin","round"),w.setAttribute("stroke-miterlimit",10),w.setAttribute("stroke","transparent"),w.setAttribute("fill","transparent"),w.setAttribute("transform",d);for(let y=0,_=s.length;y<_;y++){const x=this.svgFactory.createElement(this.svgElementName);c(this,Jo).push(x),x.setAttribute("points",s[y].join(",")),w.append(x)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:o}=t,l=c(this,Yh);if(n>=0&&l.setAttribute("stroke-width",n||1),s)for(let d=0,h=c(this,Jo).length;d<h;d++)c(this,Jo)[d].setAttribute("points",s[d].join(","));if(o){const{transform:d,width:h,height:f}=S(this,Qh,Ow).call(this,this.data.rotation,o);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),l.setAttribute("transform",d)}}getElementsToTriggerPopup(){return c(this,Jo)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yh=new WeakMap,Jo=new WeakMap,Qh=new WeakSet,Ow=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class R1 extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Me.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class HN extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class $N extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class VN extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class P1 extends St{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Me.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Jh,Zh,Fw;class WN extends St{constructor(t){var s;super(t,{isRenderable:!0});E(this,Zh);E(this,Jh,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",S(this,Zh,Fw).bind(this)),b(this,Jh,s);const{isMac:o}=Sn.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&S(this,Zh,Fw).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return c(this,Jh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jh=new WeakMap,Zh=new WeakSet,Fw=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var ep,Zo,el,tp,Sl,D1,jw;class GN{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:o,viewport:l,structTreeLayer:d}){E(this,Sl);E(this,ep,null);E(this,Zo,null);E(this,el,new Map);E(this,tp,null);this.div=e,b(this,ep,t),b(this,Zo,n),b(this,tp,d||null),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return c(this,el).size>0}async render(e){var l;const{annotations:t}=e,n=this.div;xl(n,this.viewport);const s=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new L0,annotationStorage:e.annotationStorage||new P0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const h=d.annotationType===Lt.POPUP;if(h){const w=s.get(d.id);if(!w)continue;o.elements=w}else{const{width:w,height:y}=Na(d.rect);if(w<=0||y<=0)continue}o.data=d;const f=IN.create(o);if(!f.isRenderable)continue;if(!h&&d.popupRef){const w=s.get(d.popupRef);w?w.push(f):s.set(d.popupRef,[f])}const m=f.render();d.hidden&&(m.style.visibility="hidden"),await S(this,Sl,D1).call(this,m,d.id),f._isEditable&&(c(this,el).set(f.data.id,f),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(f))}S(this,Sl,jw).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,xl(t,{rotation:e.rotation}),S(this,Sl,jw).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,el).values())}getEditableAnnotation(e){return c(this,el).get(e)}}ep=new WeakMap,Zo=new WeakMap,el=new WeakMap,tp=new WeakMap,Sl=new WeakSet,D1=async function(e,t){var l,d;const n=e.firstChild||e,s=n.id=`${C0}${t}`,o=await((l=c(this,tp))==null?void 0:l.getAriaAttributes(s));if(o)for(const[h,f]of o)n.setAttribute(h,f);this.div.append(e),(d=c(this,ep))==null||d.moveElementInDOM(this.div,e,n,!1)},jw=function(){if(!c(this,Zo))return;const e=this.div;for(const[t,n]of c(this,Zo)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):s.append(n)}c(this,Zo).clear()};const Kf=/\r\n?|\n/g;var Bi,Yn,np,tl,Qn,Rt,L1,M1,N1,wm,xr,bm,_m,O1,Bw,F1;const it=class it extends vt{constructor(t){super({...t,name:"freeTextEditor"});E(this,Rt);E(this,Bi);E(this,Yn,"");E(this,np,`${this.id}-editor`);E(this,tl,null);E(this,Qn);b(this,Bi,t.color||it._defaultColor||vt._defaultLineColor),b(this,Qn,t.fontSize||it._defaultFontSize)}static get _keyboardManager(){const t=it.prototype,n=l=>l.isEmpty(),s=Al.TRANSLATE_SMALL,o=Al.TRANSLATE_BIG;return Be(this,"_keyboardManager",new Rp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(t,n){vt.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Ue.FREETEXT_SIZE:it._defaultFontSize=n;break;case Ue.FREETEXT_COLOR:it._defaultColor=n;break}}updateParams(t,n){switch(t){case Ue.FREETEXT_SIZE:S(this,Rt,L1).call(this,n);break;case Ue.FREETEXT_COLOR:S(this,Rt,M1).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ue.FREETEXT_SIZE,it._defaultFontSize],[Ue.FREETEXT_COLOR,it._defaultColor||vt._defaultLineColor]]}get propertiesToUpdate(){return[[Ue.FREETEXT_SIZE,c(this,Qn)],[Ue.FREETEXT_COLOR,c(this,Bi)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-it._internalPadding*t,-(it._internalPadding+c(this,Qn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Me.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,tl,new AbortController);const t=this._uiManager.combinedSignal(c(this,tl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,np)),this._isDraggable=!0,(t=c(this,tl))==null||t.abort(),b(this,tl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Yn),n=b(this,Yn,S(this,Rt,N1).call(this).trimEnd());if(t===n)return;const s=o=>{if(b(this,Yn,o),!o){this.remove();return}S(this,Rt,_m).call(this),this._uiManager.rebuild(this),S(this,Rt,wm).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),S(this,Rt,wm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){it._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,np)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${c(this,Qn)}px * var(--scale-factor))`,s.color=c(this,Bi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),$m(this,this.div,["dblclick","keydown"]),this.width){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[m,w]=this.pageDimensions,[y,_]=this.pageTranslation;let x,C;switch(this.rotation){case 0:x=t+(d[0]-y)/m,C=n+this.height-(d[1]-_)/w;break;case 90:x=t+(d[0]-y)/m,C=n-(d[1]-_)/w,[h,f]=[f,-h];break;case 180:x=t-this.width+(d[0]-y)/m,C=n-(d[1]-_)/w,[h,f]=[-h,-f];break;case 270:x=t+(d[0]-y-this.height*w)/m,C=n+(d[1]-_-this.width*m)/w,[h,f]=[-f,h];break}this.setAt(x*o,C*l,h,f)}else this.setAt(t*o,n*l,this.width*o,this.height*l);S(this,Rt,_m).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var x,C,k;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const o=S(x=it,xr,Bw).call(x,n.getData("text")||"").replaceAll(Kf,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const d=l.getRangeAt(0);if(!o.includes(`
`)){d.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:f}=d,m=[],w=[];if(h.nodeType===Node.TEXT_NODE){const T=h.parentElement;if(w.push(h.nodeValue.slice(f).replaceAll(Kf,"")),T!==this.editorDiv){let P=m;for(const O of this.editorDiv.childNodes){if(O===T){P=w;continue}P.push(S(C=it,xr,bm).call(C,O))}}m.push(h.nodeValue.slice(0,f).replaceAll(Kf,""))}else if(h===this.editorDiv){let T=m,P=0;for(const O of this.editorDiv.childNodes)P++===f&&(T=w),T.push(S(k=it,xr,bm).call(k,O))}b(this,Yn,`${m.join(`
`)}${o}${w.join(`
`)}`),S(this,Rt,_m).call(this);const y=new Range;let _=m.reduce((T,P)=>T+P.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const P=T.nodeValue.length;if(_<=P){y.setStart(T,_),y.setEnd(T,_);break}_-=P}l.removeAllRanges(),l.addRange(y)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,s){var d;let o=null;if(t instanceof T1){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:m,rotation:w,id:y,popupRef:_},textContent:x,textPosition:C,parent:{page:{pageNumber:k}}}=t;if(!x||x.length===0)return null;o=t={annotationType:Me.FREETEXT,color:Array.from(f),fontSize:h,value:x.join(`
`),position:C,pageIndex:k-1,rect:m.slice(0),rotation:w,id:y,deleted:!1,popupRef:_}}const l=await super.deserialize(t,n,s);return b(l,Qn,t.fontSize),b(l,Bi,ve.makeHexColor(...t.color)),b(l,Yn,S(d=it,xr,Bw).call(d,t.value)),l.annotationElementId=t.id||null,l._initialData=o,l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=it._internalPadding*this.parentScale,s=this.getRect(n,n),o=vt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Bi)),l={annotationType:Me.FREETEXT,color:o,fontSize:c(this,Qn),value:S(this,Rt,O1).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!S(this,Rt,F1).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${c(this,Qn)}px * var(--scale-factor))`,s.color=c(this,Bi),n.replaceChildren();for(const l of c(this,Yn).split(`
`)){const d=document.createElement("div");d.append(l?document.createTextNode(l):document.createElement("br")),n.append(d)}const o=it._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:c(this,Yn)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Bi=new WeakMap,Yn=new WeakMap,np=new WeakMap,tl=new WeakMap,Qn=new WeakMap,Rt=new WeakSet,L1=function(t){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-c(this,Qn))*this.parentScale),b(this,Qn,o),S(this,Rt,wm).call(this)},s=c(this,Qn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},M1=function(t){const n=o=>{b(this,Bi,this.editorDiv.style.color=o)},s=c(this,Bi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},N1=function(){var s;const t=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(S(s=it,xr,bm).call(s,o)),n=o);return t.join(`
`)},wm=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,d=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=d,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},xr=new WeakSet,bm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Kf,"")},_m=function(){if(this.editorDiv.replaceChildren(),!!c(this,Yn))for(const t of c(this,Yn).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},O1=function(){return c(this,Yn).replaceAll(""," ")},Bw=function(t){return t.replaceAll(" ","")},F1=function(t){const{value:n,fontSize:s,color:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((d,h)=>d!==o[h])||t.pageIndex!==l},E(it,xr),Se(it,"_freeTextDefaultContent",""),Se(it,"_internalPadding",0),Se(it,"_defaultColor",null),Se(it,"_defaultFontSize",10),Se(it,"_type","freetext"),Se(it,"_editorType",Me.FREETEXT);let zw=it;class le{toSVGPath(){tt("Abstract method `toSVGPath` must be implemented.")}get box(){tt("Abstract getter `box` must be implemented.")}serialize(e,t){tt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,o,l){l||(l=new Float32Array(e.length));for(let d=0,h=e.length;d<h;d+=2)l[d]=t+e[d]*s,l[d+1]=n+e[d+1]*o;return l}static _rescaleAndSwap(e,t,n,s,o,l){l||(l=new Float32Array(e.length));for(let d=0,h=e.length;d<h;d+=2)l[d]=t+e[d+1]*s,l[d+1]=n+e[d]*o;return l}static _translate(e,t,n,s){s||(s=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)s[o]=t+e[o],s[o+1]=n+e[o+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,s,o){switch(o){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,o,l){return[(e+5*n)/6,(t+5*s)/6,(5*n+o)/6,(5*s+l)/6,(n+o)/2,(s+l)/2]}}Se(le,"PRECISION",1e-4);var Jn,Ui,Jc,Zc,ws,ze,nl,il,ip,sp,eu,tu,_a,rp,ug,dg,Ft,Pd,j1,z1,B1,U1,H1,$1;const Ws=class Ws{constructor({x:e,y:t},n,s,o,l,d=0){E(this,Ft);E(this,Jn);E(this,Ui,[]);E(this,Jc);E(this,Zc);E(this,ws,[]);E(this,ze,new Float32Array(18));E(this,nl);E(this,il);E(this,ip);E(this,sp);E(this,eu);E(this,tu);E(this,_a,[]);b(this,Jn,n),b(this,tu,o*s),b(this,Zc,l),c(this,ze).set([NaN,NaN,NaN,NaN,e,t],6),b(this,Jc,d),b(this,sp,c(Ws,rp)*s),b(this,ip,c(Ws,dg)*s),b(this,eu,s),c(this,_a).push(e,t)}isEmpty(){return isNaN(c(this,ze)[8])}add({x:e,y:t}){var G;b(this,nl,e),b(this,il,t);const[n,s,o,l]=c(this,Jn);let[d,h,f,m]=c(this,ze).subarray(8,12);const w=e-f,y=t-m,_=Math.hypot(w,y);if(_<c(this,ip))return!1;const x=_-c(this,sp),C=x/_,k=C*w,T=C*y;let P=d,O=h;d=f,h=m,f+=k,m+=T,(G=c(this,_a))==null||G.push(e,t);const N=-T/x,U=k/x,F=N*c(this,tu),j=U*c(this,tu);return c(this,ze).set(c(this,ze).subarray(2,8),0),c(this,ze).set([f+F,m+j],4),c(this,ze).set(c(this,ze).subarray(14,18),12),c(this,ze).set([f-F,m-j],16),isNaN(c(this,ze)[6])?(c(this,ws).length===0&&(c(this,ze).set([d+F,h+j],2),c(this,ws).push(NaN,NaN,NaN,NaN,(d+F-n)/o,(h+j-s)/l),c(this,ze).set([d-F,h-j],14),c(this,Ui).push(NaN,NaN,NaN,NaN,(d-F-n)/o,(h-j-s)/l)),c(this,ze).set([P,O,d,h,f,m],6),!this.isEmpty()):(c(this,ze).set([P,O,d,h,f,m],6),Math.abs(Math.atan2(O-h,P-d)-Math.atan2(T,k))<Math.PI/2?([d,h,f,m]=c(this,ze).subarray(2,6),c(this,ws).push(NaN,NaN,NaN,NaN,((d+f)/2-n)/o,((h+m)/2-s)/l),[d,h,P,O]=c(this,ze).subarray(14,18),c(this,Ui).push(NaN,NaN,NaN,NaN,((P+d)/2-n)/o,((O+h)/2-s)/l),!0):([P,O,d,h,f,m]=c(this,ze).subarray(0,6),c(this,ws).push(((P+5*d)/6-n)/o,((O+5*h)/6-s)/l,((5*d+f)/6-n)/o,((5*h+m)/6-s)/l,((d+f)/2-n)/o,((h+m)/2-s)/l),[f,m,d,h,P,O]=c(this,ze).subarray(12,18),c(this,Ui).push(((P+5*d)/6-n)/o,((O+5*h)/6-s)/l,((5*d+f)/6-n)/o,((5*h+m)/6-s)/l,((d+f)/2-n)/o,((h+m)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,ws),t=c(this,Ui);if(isNaN(c(this,ze)[6])&&!this.isEmpty())return S(this,Ft,j1).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);S(this,Ft,B1).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return S(this,Ft,z1).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,o,l){return new V1(e,t,n,s,o,l)}getOutlines(){var w;const e=c(this,ws),t=c(this,Ui),n=c(this,ze),[s,o,l,d]=c(this,Jn),h=new Float32Array((((w=c(this,_a))==null?void 0:w.length)??0)+2);for(let y=0,_=h.length-2;y<_;y+=2)h[y]=(c(this,_a)[y]-s)/l,h[y+1]=(c(this,_a)[y+1]-o)/d;if(h[h.length-2]=(c(this,nl)-s)/l,h[h.length-1]=(c(this,il)-o)/d,isNaN(n[6])&&!this.isEmpty())return S(this,Ft,U1).call(this,h);const f=new Float32Array(c(this,ws).length+24+c(this,Ui).length);let m=e.length;for(let y=0;y<m;y+=2){if(isNaN(e[y])){f[y]=f[y+1]=NaN;continue}f[y]=e[y],f[y+1]=e[y+1]}m=S(this,Ft,$1).call(this,f,m);for(let y=t.length-6;y>=6;y-=6)for(let _=0;_<6;_+=2){if(isNaN(t[y+_])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=t[y+_],f[m+1]=t[y+_+1],m+=2}return S(this,Ft,H1).call(this,f,m),this.newFreeDrawOutline(f,h,c(this,Jn),c(this,eu),c(this,Jc),c(this,Zc))}};Jn=new WeakMap,Ui=new WeakMap,Jc=new WeakMap,Zc=new WeakMap,ws=new WeakMap,ze=new WeakMap,nl=new WeakMap,il=new WeakMap,ip=new WeakMap,sp=new WeakMap,eu=new WeakMap,tu=new WeakMap,_a=new WeakMap,rp=new WeakMap,ug=new WeakMap,dg=new WeakMap,Ft=new WeakSet,Pd=function(){const e=c(this,ze).subarray(4,6),t=c(this,ze).subarray(16,18),[n,s,o,l]=c(this,Jn);return[(c(this,nl)+(e[0]-t[0])/2-n)/o,(c(this,il)+(e[1]-t[1])/2-s)/l,(c(this,nl)+(t[0]-e[0])/2-n)/o,(c(this,il)+(t[1]-e[1])/2-s)/l]},j1=function(){const[e,t,n,s]=c(this,Jn),[o,l,d,h]=S(this,Ft,Pd).call(this);return`M${(c(this,ze)[2]-e)/n} ${(c(this,ze)[3]-t)/s} L${(c(this,ze)[4]-e)/n} ${(c(this,ze)[5]-t)/s} L${o} ${l} L${d} ${h} L${(c(this,ze)[16]-e)/n} ${(c(this,ze)[17]-t)/s} L${(c(this,ze)[14]-e)/n} ${(c(this,ze)[15]-t)/s} Z`},z1=function(e){const t=c(this,Ui);e.push(`L${t[4]} ${t[5]} Z`)},B1=function(e){const[t,n,s,o]=c(this,Jn),l=c(this,ze).subarray(4,6),d=c(this,ze).subarray(16,18),[h,f,m,w]=S(this,Ft,Pd).call(this);e.push(`L${(l[0]-t)/s} ${(l[1]-n)/o} L${h} ${f} L${m} ${w} L${(d[0]-t)/s} ${(d[1]-n)/o}`)},U1=function(e){const t=c(this,ze),[n,s,o,l]=c(this,Jn),[d,h,f,m]=S(this,Ft,Pd).call(this),w=new Float32Array(36);return w.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-s)/l,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-s)/l,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-s)/l,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-s)/l],0),this.newFreeDrawOutline(w,e,c(this,Jn),c(this,eu),c(this,Jc),c(this,Zc))},H1=function(e,t){const n=c(this,Ui);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},$1=function(e,t){const n=c(this,ze).subarray(4,6),s=c(this,ze).subarray(16,18),[o,l,d,h]=c(this,Jn),[f,m,w,y]=S(this,Ft,Pd).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/d,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,w,y,NaN,NaN,NaN,NaN,(s[0]-o)/d,(s[1]-l)/h],t),t+=24},E(Ws,rp,8),E(Ws,ug,2),E(Ws,dg,c(Ws,rp)+c(Ws,ug));let Gm=Ws;var nu,sl,ur,ap,Zn,op,Et,hg,W1;class V1 extends le{constructor(t,n,s,o,l,d){super();E(this,hg);E(this,nu);E(this,sl,new Float32Array(4));E(this,ur);E(this,ap);E(this,Zn);E(this,op);E(this,Et);b(this,Et,t),b(this,Zn,n),b(this,nu,s),b(this,op,o),b(this,ur,l),b(this,ap,d),this.lastPoint=[NaN,NaN],S(this,hg,W1).call(this,d);const[h,f,m,w]=c(this,sl);for(let y=0,_=t.length;y<_;y+=2)t[y]=(t[y]-h)/m,t[y+1]=(t[y+1]-f)/w;for(let y=0,_=n.length;y<_;y+=2)n[y]=(n[y]-h)/m,n[y+1]=(n[y+1]-f)/w}toSVGPath(){const t=[`M${c(this,Et)[4]} ${c(this,Et)[5]}`];for(let n=6,s=c(this,Et).length;n<s;n+=6){if(isNaN(c(this,Et)[n])){t.push(`L${c(this,Et)[n+4]} ${c(this,Et)[n+5]}`);continue}t.push(`C${c(this,Et)[n]} ${c(this,Et)[n+1]} ${c(this,Et)[n+2]} ${c(this,Et)[n+3]} ${c(this,Et)[n+4]} ${c(this,Et)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,o],l){const d=s-t,h=o-n;let f,m;switch(l){case 0:f=le._rescale(c(this,Et),t,o,d,-h),m=le._rescale(c(this,Zn),t,o,d,-h);break;case 90:f=le._rescaleAndSwap(c(this,Et),t,n,d,h),m=le._rescaleAndSwap(c(this,Zn),t,n,d,h);break;case 180:f=le._rescale(c(this,Et),s,n,-d,h),m=le._rescale(c(this,Zn),s,n,-d,h);break;case 270:f=le._rescaleAndSwap(c(this,Et),s,o,-d,-h),m=le._rescaleAndSwap(c(this,Zn),s,o,-d,-h);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return c(this,sl)}newOutliner(t,n,s,o,l,d=0){return new Gm(t,n,s,o,l,d)}getNewOutline(t,n){const[s,o,l,d]=c(this,sl),[h,f,m,w]=c(this,nu),y=l*m,_=d*w,x=s*m+h,C=o*w+f,k=this.newOutliner({x:c(this,Zn)[0]*y+x,y:c(this,Zn)[1]*_+C},c(this,nu),c(this,op),t,c(this,ap),n??c(this,ur));for(let T=2;T<c(this,Zn).length;T+=2)k.add({x:c(this,Zn)[T]*y+x,y:c(this,Zn)[T+1]*_+C});return k.getOutlines()}}nu=new WeakMap,sl=new WeakMap,ur=new WeakMap,ap=new WeakMap,Zn=new WeakMap,op=new WeakMap,Et=new WeakMap,hg=new WeakSet,W1=function(t){const n=c(this,Et);let s=n[4],o=n[5],l=s,d=o,h=s,f=o,m=s,w=o;const y=t?Math.max:Math.min;for(let x=6,C=n.length;x<C;x+=6){if(isNaN(n[x]))l=Math.min(l,n[x+4]),d=Math.min(d,n[x+5]),h=Math.max(h,n[x+4]),f=Math.max(f,n[x+5]),w<n[x+5]?(m=n[x+4],w=n[x+5]):w===n[x+5]&&(m=y(m,n[x+4]));else{const k=ve.bezierBoundingBox(s,o,...n.slice(x,x+6));l=Math.min(l,k[0]),d=Math.min(d,k[1]),h=Math.max(h,k[2]),f=Math.max(f,k[3]),w<k[3]?(m=k[2],w=k[3]):w===k[3]&&(m=y(m,k[2]))}s=n[x+4],o=n[x+5]}const _=c(this,sl);_[0]=l-c(this,ur),_[1]=d-c(this,ur),_[2]=h-l+2*c(this,ur),_[3]=f-d+2*c(this,ur),this.lastPoint=[m,w]};var lp,cp,xa,Hi,kn,G1,xm,q1,K1,Hw;class Uw{constructor(e,t=0,n=0,s=!0){E(this,kn);E(this,lp);E(this,cp);E(this,xa,[]);E(this,Hi,[]);let o=1/0,l=-1/0,d=1/0,h=-1/0;const f=10**-4;for(const{x:k,y:T,width:P,height:O}of e){const N=Math.floor((k-t)/f)*f,U=Math.ceil((k+P+t)/f)*f,F=Math.floor((T-t)/f)*f,j=Math.ceil((T+O+t)/f)*f,H=[N,F,j,!0],G=[U,F,j,!1];c(this,xa).push(H,G),o=Math.min(o,N),l=Math.max(l,U),d=Math.min(d,F),h=Math.max(h,j)}const m=l-o+2*n,w=h-d+2*n,y=o-n,_=d-n,x=c(this,xa).at(s?-1:-2),C=[x[0],x[2]];for(const k of c(this,xa)){const[T,P,O]=k;k[0]=(T-y)/m,k[1]=(P-_)/w,k[2]=(O-_)/w}b(this,lp,new Float32Array([y,_,m,w])),b(this,cp,C)}getOutlines(){c(this,xa).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of c(this,xa))t[3]?(e.push(...S(this,kn,Hw).call(this,t)),S(this,kn,q1).call(this,t)):(S(this,kn,K1).call(this,t),e.push(...S(this,kn,Hw).call(this,t)));return S(this,kn,G1).call(this,e)}}lp=new WeakMap,cp=new WeakMap,xa=new WeakMap,Hi=new WeakMap,kn=new WeakSet,G1=function(e){const t=[],n=new Set;for(const l of e){const[d,h,f]=l;t.push([d,h,l],[d,f,l])}t.sort((l,d)=>l[1]-d[1]||l[0]-d[0]);for(let l=0,d=t.length;l<d;l+=2){const h=t[l][2],f=t[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const s=[];let o;for(;n.size>0;){const l=n.values().next().value;let[d,h,f,m,w]=l;n.delete(l);let y=d,_=h;for(o=[d,f],s.push(o);;){let x;if(n.has(m))x=m;else if(n.has(w))x=w;else break;n.delete(x),[d,h,f,m,w]=x,y!==d&&(o.push(y,_,d,_===h?h:f),y=d),_=_===h?f:h}o.push(y,_)}return new qN(s,c(this,lp),c(this,cp))},xm=function(e){const t=c(this,Hi);let n=0,s=t.length-1;for(;n<=s;){const o=n+s>>1,l=t[o][0];if(l===e)return o;l<e?n=o+1:s=o-1}return s+1},q1=function([,e,t]){const n=S(this,kn,xm).call(this,e);c(this,Hi).splice(n,0,[e,t])},K1=function([,e,t]){const n=S(this,kn,xm).call(this,e);for(let s=n;s<c(this,Hi).length;s++){const[o,l]=c(this,Hi)[s];if(o!==e)break;if(o===e&&l===t){c(this,Hi).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[o,l]=c(this,Hi)[s];if(o!==e)break;if(o===e&&l===t){c(this,Hi).splice(s,1);return}}},Hw=function(e){const[t,n,s]=e,o=[[t,n,s]],l=S(this,kn,xm).call(this,s);for(let d=0;d<l;d++){const[h,f]=c(this,Hi)[d];for(let m=0,w=o.length;m<w;m++){const[,y,_]=o[m];if(!(f<=y||_<=h)){if(y>=h){if(_>f)o[m][1]=f;else{if(w===1)return[];o.splice(m,1),m--,w--}continue}o[m][2]=h,_>f&&o.push([t,f,_])}}}return o};var up,iu;class qN extends le{constructor(t,n,s){super();E(this,up);E(this,iu);b(this,iu,t),b(this,up,n),this.lastPoint=s}toSVGPath(){const t=[];for(const n of c(this,iu)){let[s,o]=n;t.push(`M${s} ${o}`);for(let l=2;l<n.length;l+=2){const d=n[l],h=n[l+1];d===s?(t.push(`V${h}`),o=h):h===o&&(t.push(`H${d}`),s=d)}t.push("Z")}return t.join(" ")}serialize([t,n,s,o],l){const d=[],h=s-t,f=o-n;for(const m of c(this,iu)){const w=new Array(m.length);for(let y=0;y<m.length;y+=2)w[y]=t+m[y]*h,w[y+1]=o-m[y+1]*f;d.push(w)}return d}get box(){return c(this,up)}get classNamesForOutlining(){return["highlightOutline"]}}up=new WeakMap,iu=new WeakMap;class $w extends Gm{newFreeDrawOutline(e,t,n,s,o,l){return new KN(e,t,n,s,o,l)}}class KN extends V1{newOutliner(e,t,n,s,o,l=0){return new $w(e,t,n,s,o,l)}}var $i,rl,su,Ot,dp,ru,hp,pp,Aa,Vi,au,fp,Qe,Vw,Ww,Gw,lo,X1,Yr;const Fn=class Fn{constructor({editor:e=null,uiManager:t=null}){E(this,Qe);E(this,$i,null);E(this,rl,null);E(this,su);E(this,Ot,null);E(this,dp,!1);E(this,ru,!1);E(this,hp,null);E(this,pp);E(this,Aa,null);E(this,Vi,null);E(this,au);var n;e?(b(this,ru,!1),b(this,au,Ue.HIGHLIGHT_COLOR),b(this,hp,e)):(b(this,ru,!0),b(this,au,Ue.HIGHLIGHT_DEFAULT_COLOR)),b(this,Vi,(e==null?void 0:e._uiManager)||t),b(this,pp,c(this,Vi)._eventBus),b(this,su,(e==null?void 0:e.color)||((n=c(this,Vi))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(Fn,fp)||b(Fn,fp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Be(this,"_keyboardManager",new Rp([[["Escape","mac+Escape"],Fn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fn.prototype._moveToPrevious],[["Home","mac+Home"],Fn.prototype._moveToBeginning],[["End","mac+End"],Fn.prototype._moveToEnd]]))}renderButton(){const e=b(this,$i,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(this,Vi)._signal;e.addEventListener("click",S(this,Qe,lo).bind(this),{signal:t}),e.addEventListener("keydown",S(this,Qe,Gw).bind(this),{signal:t});const n=b(this,rl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(this,su),e.append(n),e}renderMainDropdown(){const e=b(this,Ot,S(this,Qe,Vw).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,$i)){S(this,Qe,lo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&S(this,Qe,Ww).call(this,t,e)}_moveToNext(e){var t,n;if(!c(this,Qe,Yr)){S(this,Qe,lo).call(this,e);return}if(e.target===c(this,$i)){(t=c(this,Ot).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=c(this,Ot))==null?void 0:t.firstChild)||e.target===c(this,$i)){c(this,Qe,Yr)&&this._hideDropdownFromKeyboard();return}c(this,Qe,Yr)||S(this,Qe,lo).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!c(this,Qe,Yr)){S(this,Qe,lo).call(this,e);return}(t=c(this,Ot).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Qe,Yr)){S(this,Qe,lo).call(this,e);return}(t=c(this,Ot).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,Ot))==null||e.classList.add("hidden"),(t=c(this,Aa))==null||t.abort(),b(this,Aa,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,ru)){if(!c(this,Qe,Yr)){(e=c(this,hp))==null||e.unselect();return}this.hideDropdown(),c(this,$i).focus({preventScroll:!0,focusVisible:c(this,dp)})}}updateColor(e){if(c(this,rl)&&(c(this,rl).style.backgroundColor=e),!c(this,Ot))return;const t=c(this,Vi).highlightColors.values();for(const n of c(this,Ot).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,$i))==null||e.remove(),b(this,$i,null),b(this,rl,null),(t=c(this,Ot))==null||t.remove(),b(this,Ot,null)}};$i=new WeakMap,rl=new WeakMap,su=new WeakMap,Ot=new WeakMap,dp=new WeakMap,ru=new WeakMap,hp=new WeakMap,pp=new WeakMap,Aa=new WeakMap,Vi=new WeakMap,au=new WeakMap,fp=new WeakMap,Qe=new WeakSet,Vw=function(){const e=document.createElement("div"),t=c(this,Vi)._signal;e.addEventListener("contextmenu",Yi,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of c(this,Vi).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",s),o.title=n,o.setAttribute("data-l10n-id",c(Fn,fp)[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=s,o.setAttribute("aria-selected",s===c(this,su)),o.addEventListener("click",S(this,Qe,Ww).bind(this,s),{signal:t}),e.append(o)}return e.addEventListener("keydown",S(this,Qe,Gw).bind(this),{signal:t}),e},Ww=function(e,t){t.stopPropagation(),c(this,pp).dispatch("switchannotationeditorparams",{source:this,type:c(this,au),value:e})},Gw=function(e){Fn._keyboardManager.exec(this,e)},lo=function(e){if(c(this,Qe,Yr)){this.hideDropdown();return}if(b(this,dp,e.detail===0),c(this,Aa)||(b(this,Aa,new AbortController),window.addEventListener("pointerdown",S(this,Qe,X1).bind(this),{signal:c(this,Vi).combinedSignal(c(this,Aa))})),c(this,Ot)){c(this,Ot).classList.remove("hidden");return}const t=b(this,Ot,S(this,Qe,Vw).call(this));c(this,$i).append(t)},X1=function(e){var t;(t=c(this,Ot))!=null&&t.contains(e.target)||this.hideDropdown()},Yr=function(){return c(this,Ot)&&!c(this,Ot).classList.contains("hidden")},E(Fn,fp,null);let qm=Fn;var ou,mp,dr,al,lu,Bn,gp,vp,ol,wi,ei,Jt,cu,hr,hn,uu,bi,yp,De,qw,Am,Y1,Q1,J1,Kw,co,Ei,oc,Z1,Em,Dd,eC,tC,nC,iC,sC;const Ge=class Ge extends vt{constructor(t){super({...t,name:"highlightEditor"});E(this,De);E(this,ou,null);E(this,mp,0);E(this,dr);E(this,al,null);E(this,lu,null);E(this,Bn,null);E(this,gp,null);E(this,vp,0);E(this,ol,null);E(this,wi,null);E(this,ei,null);E(this,Jt,!1);E(this,cu,null);E(this,hr);E(this,hn,null);E(this,uu,"");E(this,bi);E(this,yp,"");this.color=t.color||Ge._defaultColor,b(this,bi,t.thickness||Ge._defaultThickness),b(this,hr,t.opacity||Ge._defaultOpacity),b(this,dr,t.boxes||null),b(this,yp,t.methodOfCreation||""),b(this,uu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(b(this,Jt,!0),S(this,De,Am).call(this,t),S(this,De,co).call(this)):c(this,dr)&&(b(this,ou,t.anchorNode),b(this,mp,t.anchorOffset),b(this,gp,t.focusNode),b(this,vp,t.focusOffset),S(this,De,qw).call(this),S(this,De,co).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ge.prototype;return Be(this,"_keyboardManager",new Rp([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Jt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,bi),methodOfCreation:c(this,yp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;vt.initialize(t,n),Ge._defaultColor||(Ge._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Ue.HIGHLIGHT_DEFAULT_COLOR:Ge._defaultColor=n;break;case Ue.HIGHLIGHT_THICKNESS:Ge._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return c(this,cu)}updateParams(t,n){switch(t){case Ue.HIGHLIGHT_COLOR:S(this,De,Y1).call(this,n);break;case Ue.HIGHLIGHT_THICKNESS:S(this,De,Q1).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Ue.HIGHLIGHT_DEFAULT_COLOR,Ge._defaultColor],[Ue.HIGHLIGHT_THICKNESS,Ge._defaultThickness]]}get propertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,this.color||Ge._defaultColor],[Ue.HIGHLIGHT_THICKNESS,c(this,bi)||Ge._defaultThickness],[Ue.HIGHLIGHT_FREE,c(this,Jt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(b(this,lu,new qm({editor:this})),t.addColorPicker(c(this,lu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,De,Dd).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,S(this,De,Dd).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){S(this,De,Kw).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,De,co).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?S(this,De,Kw).call(this):t&&(S(this,De,co).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var o,l,d;const{drawLayer:n}=this.parent;let s;c(this,Jt)?(t=(t-this.rotation+360)%360,s=S(o=Ge,Ei,oc).call(o,c(this,wi).box,t)):s=S(l=Ge,Ei,oc).call(l,[this.x,this.y,this.width,this.height],t),n.updateProperties(c(this,ei),{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(c(this,hn),{bbox:S(d=Ge,Ei,oc).call(d,c(this,Bn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,uu)&&(t.setAttribute("aria-label",c(this,uu)),t.setAttribute("role","mark")),c(this,Jt)?t.classList.add("free"):this.div.addEventListener("keydown",S(this,De,Z1).bind(this),{signal:this._uiManager._signal});const n=b(this,ol,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,al);const[s,o]=this.parentDimensions;return this.setDims(this.width*s,this.height*o),$m(this,c(this,ol),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,hn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,hn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:S(this,De,Em).call(this,!0);break;case 1:case 3:S(this,De,Em).call(this,!1);break}}select(){var t;super.select(),c(this,hn)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,hn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,hn)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,hn),{rootClass:{selected:!1}}),c(this,Jt)||S(this,De,Em).call(this,!1))}get _mustFixPosition(){return!c(this,Jt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,ei),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,hn),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:s,x:o,y:l}){const{x:d,y:h,width:f,height:m}=s.getBoundingClientRect(),w=new AbortController,y=t.combinedSignal(w),_=x=>{w.abort(),S(this,Ei,iC).call(this,t,x)};window.addEventListener("blur",_,{signal:y}),window.addEventListener("pointerup",_,{signal:y}),window.addEventListener("pointerdown",ai,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Yi,{signal:y}),s.addEventListener("pointermove",S(this,Ei,nC).bind(this,t),{signal:y}),this._freeHighlight=new $w({x:o,y:l},[d,h,f,m],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,s){var C,k,T,P;let o=null;if(t instanceof R1){const{data:{quadPoints:O,rect:N,rotation:U,id:F,color:j,opacity:H,popupRef:G},parent:{page:{pageNumber:X}}}=t;o=t={annotationType:Me.HIGHLIGHT,color:Array.from(j),opacity:H,quadPoints:O,boxes:null,pageIndex:X-1,rect:N.slice(0),rotation:U,id:F,deleted:!1,popupRef:G}}else if(t instanceof M0){const{data:{inkLists:O,rect:N,rotation:U,id:F,color:j,borderStyle:{rawWidth:H},popupRef:G},parent:{page:{pageNumber:X}}}=t;o=t={annotationType:Me.HIGHLIGHT,color:Array.from(j),thickness:H,inkLists:O,boxes:null,pageIndex:X-1,rect:N.slice(0),rotation:U,id:F,deleted:!1,popupRef:G}}const{color:l,quadPoints:d,inkLists:h,opacity:f}=t,m=await super.deserialize(t,n,s);m.color=ve.makeHexColor(...l),b(m,hr,f||1),h&&b(m,bi,t.thickness),m.annotationElementId=t.id||null,m._initialData=o;const[w,y]=m.pageDimensions,[_,x]=m.pageTranslation;if(d){const O=b(m,dr,[]);for(let N=0;N<d.length;N+=8)O.push({x:(d[N]-_)/w,y:1-(d[N+1]-x)/y,width:(d[N+2]-d[N])/w,height:(d[N+1]-d[N+5])/y});S(C=m,De,qw).call(C),S(k=m,De,co).call(k),m.rotate(m.rotation)}else if(h){b(m,Jt,!0);const O=h[0],N={x:O[0]-_,y:y-(O[1]-x)},U=new $w(N,[0,0,w,y],1,c(m,bi)/2,!0,.001);for(let H=0,G=O.length;H<G;H+=2)N.x=O[H]-_,N.y=y-(O[H+1]-x),U.add(N);const{id:F,clipPathId:j}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:U.toSVGPath()}},!0,!0);S(T=m,De,Am).call(T,{highlightOutlines:U.getOutlines(),highlightId:F,clipPathId:j}),S(P=m,De,co).call(P)}return m}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=vt._colorManager.convert(this.color),o={annotationType:Me.HIGHLIGHT,color:s,opacity:c(this,hr),thickness:c(this,bi),quadPoints:S(this,De,eC).call(this),outlines:S(this,De,tC).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:S(this,De,Dd).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!S(this,De,sC).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ou=new WeakMap,mp=new WeakMap,dr=new WeakMap,al=new WeakMap,lu=new WeakMap,Bn=new WeakMap,gp=new WeakMap,vp=new WeakMap,ol=new WeakMap,wi=new WeakMap,ei=new WeakMap,Jt=new WeakMap,cu=new WeakMap,hr=new WeakMap,hn=new WeakMap,uu=new WeakMap,bi=new WeakMap,yp=new WeakMap,De=new WeakSet,qw=function(){const t=new Uw(c(this,dr),.001);b(this,wi,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,wi).box;const n=new Uw(c(this,dr),.0025,.001,this._uiManager.direction==="ltr");b(this,Bn,n.getOutlines());const{lastPoint:s}=c(this,Bn);b(this,cu,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Am=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var w,y;if(b(this,wi,t),b(this,Bn,t.getNewOutline(c(this,bi)/2+1.5,.0025)),n>=0)b(this,ei,n),b(this,al,s),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),b(this,hn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Bn).box,path:{d:c(this,Bn).toSVGPath()}},!0));else if(this.parent){const _=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,ei),{bbox:S(w=Ge,Ei,oc).call(w,c(this,wi).box,(_-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,hn),{bbox:S(y=Ge,Ei,oc).call(y,c(this,Bn).box,_),path:{d:c(this,Bn).toSVGPath()}})}const[l,d,h,f]=t.box;switch(this.rotation){case 0:this.x=l,this.y=d,this.width=h,this.height=f;break;case 90:{const[_,x]=this.parentDimensions;this.x=d,this.y=1-l,this.width=h*x/_,this.height=f*_/x;break}case 180:this.x=1-l,this.y=1-d,this.width=h,this.height=f;break;case 270:{const[_,x]=this.parentDimensions;this.x=1-d,this.y=l,this.width=h*x/_,this.height=f*_/x;break}}const{lastPoint:m}=c(this,Bn);b(this,cu,[(m[0]-l)/h,(m[1]-d)/f])},Y1=function(t){const n=(l,d)=>{var h,f;this.color=l,b(this,hr,d),(h=this.parent)==null||h.drawLayer.updateProperties(c(this,ei),{root:{fill:l,"fill-opacity":d}}),(f=c(this,lu))==null||f.updateColor(l)},s=this.color,o=c(this,hr);this.addCommands({cmd:n.bind(this,t,Ge._defaultOpacity),undo:n.bind(this,s,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Q1=function(t){const n=c(this,bi),s=o=>{b(this,bi,o),S(this,De,J1).call(this,o)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},J1=function(t){if(!c(this,Jt))return;S(this,De,Am).call(this,{highlightOutlines:c(this,wi).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},Kw=function(){c(this,ei)===null||!this.parent||(this.parent.drawLayer.remove(c(this,ei)),b(this,ei,null),this.parent.drawLayer.remove(c(this,hn)),b(this,hn,null))},co=function(t=this.parent){c(this,ei)===null&&({id:wn(this,ei)._,clipPathId:wn(this,al)._}=t.drawLayer.draw({bbox:c(this,wi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,hr)},rootClass:{highlight:!0,free:c(this,Jt)},path:{d:c(this,wi).toSVGPath()}},!1,!0),b(this,hn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Jt)},bbox:c(this,Bn).box,path:{d:c(this,Bn).toSVGPath()}},c(this,Jt))),c(this,ol)&&(c(this,ol).style.clipPath=c(this,al)))},Ei=new WeakSet,oc=function([t,n,s,o],l){switch(l){case 90:return[1-n-o,t,o,s];case 180:return[1-t-s,1-n-o,s,o];case 270:return[n,1-t-s,o,s]}return[t,n,s,o]},Z1=function(t){Ge._keyboardManager.exec(this,t)},Em=function(t){if(!c(this,ou))return;const n=window.getSelection();t?n.setPosition(c(this,ou),c(this,mp)):n.setPosition(c(this,gp),c(this,vp))},Dd=function(){return c(this,Jt)?this.rotation:0},eC=function(){if(c(this,Jt))return null;const[t,n]=this.pageDimensions,[s,o]=this.pageTranslation,l=c(this,dr),d=new Float32Array(l.length*8);let h=0;for(const{x:f,y:m,width:w,height:y}of l){const _=f*t+s,x=(1-m)*n+o;d[h]=d[h+4]=_,d[h+1]=d[h+3]=x,d[h+2]=d[h+6]=_+w*t,d[h+5]=d[h+7]=x-y*n,h+=8}return d},tC=function(t){return c(this,wi).serialize(t,S(this,De,Dd).call(this))},nC=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},iC=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},sC=function(t){const{color:n}=this._initialData;return t.color.some((s,o)=>s!==n[o])},E(Ge,Ei),Se(Ge,"_defaultColor",null),Se(Ge,"_defaultOpacity",1),Se(Ge,"_defaultThickness",12),Se(Ge,"_type","highlight"),Se(Ge,"_editorType",Me.HIGHLIGHT),Se(Ge,"_freeHighlightId",-1),Se(Ge,"_freeHighlight",null),Se(Ge,"_freeHighlightClipId","");let Km=Ge;var ll;class XN{constructor(){E(this,ll,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){c(this,ll)[e]=t}toSVGProperties(){const e=c(this,ll);return b(this,ll,Object.create(null)),{root:e}}reset(){b(this,ll,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){tt("Not implemented")}}ll=new WeakMap;var ti,du,Wt,cl,ul,Ea,Sa,Ca,dl,$e,Yw,Qw,Jw,Ld,rC,Sm,Md,lc;const ue=class ue extends vt{constructor(t){super(t);E(this,$e);E(this,ti,null);E(this,du);Se(this,"_drawId",null);b(this,du,t.mustBeCommitted||!1),t.drawOutlines&&(S(this,$e,Yw).call(this,t),S(this,$e,Ld).call(this))}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[o,l]of Object.entries(n))s.has(o)?Object.assign(t[o],l):t[o]=l;return t}static getDefaultDrawingOptions(t){tt("Not implemented")}static get typesMap(){tt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(c(ue,Wt).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,o]of this.typesMap)t.push([s,n[o]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,o]of this.constructor.typesMap)t.push([s,n[o]]);return t}_updateProperty(t,n,s){const o=this._drawingOptions,l=o[n],d=h=>{var m;o.updateProperty(n,h);const f=c(this,ti).updateProperty(n,h);f&&S(this,$e,Md).call(this,f),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:d.bind(this,s),undo:d.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(c(this,ti).getPathResizingSVGProperties(S(this,$e,Sm).call(this)),{bbox:S(this,$e,lc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(c(this,ti).getPathResizedSVGProperties(S(this,$e,Sm).call(this)),{bbox:S(this,$e,lc).call(this)}))}_onTranslating(t,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:S(this,$e,lc).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(c(this,ti).getPathTranslatedSVGProperties(S(this,$e,Sm).call(this),this.parentDimensions),{bbox:S(this,$e,lc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,du)&&(b(this,du,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){S(this,$e,Jw).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,$e,Ld).call(this),S(this,$e,Md).call(this,c(this,ti).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),S(this,$e,Jw).call(this)):t&&(this._uiManager.addShouldRescale(this),S(this,$e,Ld).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties({bbox:S(this,$e,lc).call(this)},c(this,ti).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,$e,Md).call(this,c(this,ti).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[s,o]=this.parentDimensions;return this.setDims(this.width*s,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,s,o,l){tt("Not implemented")}static startDrawing(t,n,s,o){var k;const{target:l,offsetX:d,offsetY:h,pointerId:f,pointerType:m}=o;if(c(ue,Sa)&&c(ue,Sa)!==m)return;const{viewport:{rotation:w}}=t,{width:y,height:_}=l.getBoundingClientRect(),x=b(ue,cl,new AbortController),C=t.combinedSignal(x);if(c(ue,Ea)||b(ue,Ea,f),c(ue,Sa)??b(ue,Sa,m),window.addEventListener("pointerup",T=>{var P;c(ue,Ea)===T.pointerId?this._endDraw(T):(P=c(ue,Ca))==null||P.delete(T.pointerId)},{signal:C}),window.addEventListener("pointercancel",T=>{var P;c(ue,Ea)===T.pointerId?this._currentParent.endDrawingSession():(P=c(ue,Ca))==null||P.delete(T.pointerId)},{signal:C}),window.addEventListener("pointerdown",T=>{c(ue,Sa)===T.pointerType&&((c(ue,Ca)||b(ue,Ca,new Set)).add(T.pointerId),c(ue,Wt).isCancellable()&&(c(ue,Wt).removeLastElement(),c(ue,Wt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Yi,{signal:C}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),l.addEventListener("touchmove",T=>{T.timeStamp===c(ue,dl)&&ai(T)},{signal:C}),t.toggleDrawing(),(k=n._editorUndoBar)==null||k.hide(),c(ue,Wt)){t.drawLayer.updateProperties(this._currentDrawId,c(ue,Wt).startNew(d,h,y,_,w));return}n.updateUIForDefaultProperties(this),b(ue,Wt,this.createDrawerInstance(d,h,y,_,w)),b(ue,ul,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(ue,ul).toSVGProperties(),c(ue,Wt).defaultSVGProperties),!0,!1)}static _drawMove(t){var l;if(b(ue,dl,-1),!c(ue,Wt))return;const{offsetX:n,offsetY:s,pointerId:o}=t;if(c(ue,Ea)===o){if(((l=c(ue,Ca))==null?void 0:l.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(ue,Wt).add(n,s)),b(ue,dl,t.timeStamp),ai(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,b(ue,Wt,null),b(ue,ul,null),b(ue,Sa,null),b(ue,dl,NaN)),c(ue,cl)&&(c(ue,cl).abort(),b(ue,cl,null),b(ue,Ea,NaN),b(ue,Ca,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,c(ue,Wt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=c(ue,Wt),o=this._currentDrawId,l=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,s.setLastElement(l))},undo:()=>{n.drawLayer.updateProperties(o,s.removeLastElement())},mustExec:!1,type:Ue.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Ue.DRAW_STEP),!c(ue,Wt).isEmpty()){const{pageDimensions:[s,o],scale:l}=n,d=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(ue,Wt).getOutlines(s*l,o*l,l,this._INNER_MARGIN),drawingOptions:c(ue,ul),mustBeCommitted:!t});return this._cleanup(!0),d}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,o,l,d){tt("Not implemented")}static async deserialize(t,n,s){var w,y;const{rawDims:{pageWidth:o,pageHeight:l,pageX:d,pageY:h}}=n.viewport,f=this.deserializeDraw(d,h,o,l,this._INNER_MARGIN,t),m=await super.deserialize(t,n,s);return m.createDrawingOptions(t),S(w=m,$e,Yw).call(w,{drawOutlines:f}),S(y=m,$e,Ld).call(y),m.onScaleChanging(),m.rotate(),m}serializeDraw(t){const[n,s]=this.pageTranslation,[o,l]=this.pageDimensions;return c(this,ti).serialize([n,s,o,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ti=new WeakMap,du=new WeakMap,Wt=new WeakMap,cl=new WeakMap,ul=new WeakMap,Ea=new WeakMap,Sa=new WeakMap,Ca=new WeakMap,dl=new WeakMap,$e=new WeakSet,Yw=function({drawOutlines:t,drawId:n,drawingOptions:s}){b(this,ti,t),this._drawingOptions||(this._drawingOptions=s),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=S(this,$e,Qw).call(this,t,this.parent),S(this,$e,Md).call(this,t.box)},Qw=function(t,n){const{id:s}=n.drawLayer.draw(ue._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},Jw=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Ld=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,$e,Qw).call(this,c(this,ti),t)}},rC=function([t,n,s,o]){const{parentDimensions:[l,d],rotation:h}=this;switch(h){case 90:return[n,1-t,s*(d/l),o*(l/d)];case 180:return[1-t,1-n,s,o];case 270:return[1-n,t,s*(d/l),o*(l/d)];default:return[t,n,s,o]}},Sm=function(){const{x:t,y:n,width:s,height:o,parentDimensions:[l,d],rotation:h}=this;switch(h){case 90:return[1-n,t,s*(l/d),o*(d/l)];case 180:return[1-t,1-n,s,o];case 270:return[n,1-t,s*(l/d),o*(d/l)];default:return[t,n,s,o]}},Md=function(t){if([this.x,this.y,this.width,this.height]=S(this,$e,rC).call(this,t),this.div){this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}this._onResized()},lc=function(){const{x:t,y:n,width:s,height:o,rotation:l,parentRotation:d,parentDimensions:[h,f]}=this;switch((l*4+d)/90){case 1:return[1-n-o,t,o,s];case 2:return[1-t-s,1-n-o,s,o];case 3:return[n,1-t-s,o,s];case 4:return[t,n-s*(h/f),o*(f/h),s*(h/f)];case 5:return[1-n,t,s*(h/f),o*(f/h)];case 6:return[1-t-o*(f/h),1-n,o*(f/h),s*(h/f)];case 7:return[n-s*(h/f),1-t-o*(f/h),s*(h/f),o*(f/h)];case 8:return[t-s,n-o,s,o];case 9:return[1-n,t-s,o,s];case 10:return[1-t,1-n,s,o];case 11:return[n-o,1-t,o,s];case 12:return[t-o*(f/h),n,o*(f/h),s*(h/f)];case 13:return[1-n-s*(h/f),t-o*(f/h),s*(h/f),o*(f/h)];case 14:return[1-t,1-n-s*(h/f),o*(f/h),s*(h/f)];case 15:return[n,1-t,s*(h/f),o*(f/h)];default:return[t,n,s,o]}},Se(ue,"_currentDrawId",-1),Se(ue,"_currentParent",null),E(ue,Wt,null),E(ue,cl,null),E(ue,ul,null),E(ue,Ea,NaN),E(ue,Sa,null),E(ue,Ca,null),E(ue,dl,NaN),Se(ue,"_INNER_MARGIN",3);let Xw=ue;var bs,Gt,qt,hl,hu,xn,Zt,_i,pl,fl,ml,pu,Cm;class YN{constructor(e,t,n,s,o,l){E(this,pu);E(this,bs,new Float64Array(6));E(this,Gt);E(this,qt);E(this,hl);E(this,hu);E(this,xn);E(this,Zt,"");E(this,_i,0);E(this,pl,new Xm);E(this,fl);E(this,ml);b(this,fl,n),b(this,ml,s),b(this,hl,o),b(this,hu,l),[e,t]=S(this,pu,Cm).call(this,e,t);const d=b(this,Gt,[NaN,NaN,NaN,NaN,e,t]);b(this,xn,[e,t]),b(this,qt,[{line:d,points:c(this,xn)}]),c(this,bs).set(d,0)}updateProperty(e,t){e==="stroke-width"&&b(this,hu,t)}isEmpty(){return!c(this,qt)||c(this,qt).length===0}isCancellable(){return c(this,xn).length<=10}add(e,t){[e,t]=S(this,pu,Cm).call(this,e,t);const[n,s,o,l]=c(this,bs).subarray(2,6),d=e-o,h=t-l;return Math.hypot(c(this,fl)*d,c(this,ml)*h)<=2?null:(c(this,xn).push(e,t),isNaN(n)?(c(this,bs).set([o,l,e,t],2),c(this,Gt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,bs)[0])&&c(this,Gt).splice(6,6),c(this,bs).set([n,s,o,l,e,t],0),c(this,Gt).push(...le.createBezierPoints(n,s,o,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(c(this,xn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,o){b(this,fl,n),b(this,ml,s),b(this,hl,o),[e,t]=S(this,pu,Cm).call(this,e,t);const l=b(this,Gt,[NaN,NaN,NaN,NaN,e,t]);b(this,xn,[e,t]);const d=c(this,qt).at(-1);return d&&(d.line=new Float32Array(d.line),d.points=new Float32Array(d.points)),c(this,qt).push({line:l,points:c(this,xn)}),c(this,bs).set(l,0),b(this,_i,0),this.toSVGPath(),null}getLastElement(){return c(this,qt).at(-1)}setLastElement(e){return c(this,qt)?(c(this,qt).push(e),b(this,Gt,e.line),b(this,xn,e.points),b(this,_i,0),{path:{d:this.toSVGPath()}}):c(this,pl).setLastElement(e)}removeLastElement(){if(!c(this,qt))return c(this,pl).removeLastElement();c(this,qt).pop(),b(this,Zt,"");for(let e=0,t=c(this,qt).length;e<t;e++){const{line:n,points:s}=c(this,qt)[e];b(this,Gt,n),b(this,xn,s),b(this,_i,0),this.toSVGPath()}return{path:{d:c(this,Zt)}}}toSVGPath(){const e=le.svgRound(c(this,Gt)[4]),t=le.svgRound(c(this,Gt)[5]);if(c(this,xn).length===2)return b(this,Zt,`${c(this,Zt)} M ${e} ${t} Z`),c(this,Zt);if(c(this,xn).length<=6){const s=c(this,Zt).lastIndexOf("M");b(this,Zt,`${c(this,Zt).slice(0,s)} M ${e} ${t}`),b(this,_i,6)}if(c(this,xn).length===4){const s=le.svgRound(c(this,Gt)[10]),o=le.svgRound(c(this,Gt)[11]);return b(this,Zt,`${c(this,Zt)} L ${s} ${o}`),b(this,_i,12),c(this,Zt)}const n=[];c(this,_i)===0&&(n.push(`M ${e} ${t}`),b(this,_i,6));for(let s=c(this,_i),o=c(this,Gt).length;s<o;s+=6){const[l,d,h,f,m,w]=c(this,Gt).slice(s,s+6).map(le.svgRound);n.push(`C${l} ${d} ${h} ${f} ${m} ${w}`)}return b(this,Zt,c(this,Zt)+n.join(" ")),b(this,_i,c(this,Gt).length),c(this,Zt)}getOutlines(e,t,n,s){const o=c(this,qt).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),c(this,pl).build(c(this,qt),e,t,n,c(this,hl),c(this,hu),s),b(this,bs,null),b(this,Gt,null),b(this,qt,null),b(this,Zt,null),c(this,pl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}bs=new WeakMap,Gt=new WeakMap,qt=new WeakMap,hl=new WeakMap,hu=new WeakMap,xn=new WeakMap,Zt=new WeakMap,_i=new WeakMap,pl=new WeakMap,fl=new WeakMap,ml=new WeakMap,pu=new WeakSet,Cm=function(e,t){return le._normalizePoint(e,t,c(this,fl),c(this,ml),c(this,hl))};var An,wp,bp,ni,_s,xs,fu,mu,gu,tn,$s,aC,oC,lC;const z0=class z0 extends le{constructor(){super(...arguments);E(this,tn);E(this,An);E(this,wp,0);E(this,bp);E(this,ni);E(this,_s);E(this,xs);E(this,fu);E(this,mu);E(this,gu)}build(t,n,s,o,l,d,h){b(this,_s,n),b(this,xs,s),b(this,fu,o),b(this,mu,l),b(this,gu,d),b(this,bp,h??0),b(this,ni,t),S(this,tn,oC).call(this)}setLastElement(t){return c(this,ni).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,ni).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of c(this,ni)){if(t.push(`M${le.svgRound(n[4])} ${le.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${le.svgRound(n[10])} ${le.svgRound(n[11])}`);continue}for(let s=6,o=n.length;s<o;s+=6){const[l,d,h,f,m,w]=n.subarray(s,s+6).map(le.svgRound);t.push(`C${l} ${d} ${h} ${f} ${m} ${w}`)}}return t.join("")}serialize([t,n,s,o],l){const d=[],h=[],[f,m,w,y]=S(this,tn,aC).call(this);let _,x,C,k,T,P,O,N,U;switch(c(this,mu)){case 0:U=le._rescale,_=t,x=n+o,C=s,k=-o,T=t+f*s,P=n+(1-m-y)*o,O=t+(f+w)*s,N=n+(1-m)*o;break;case 90:U=le._rescaleAndSwap,_=t,x=n,C=s,k=o,T=t+m*s,P=n+f*o,O=t+(m+y)*s,N=n+(f+w)*o;break;case 180:U=le._rescale,_=t+s,x=n,C=-s,k=o,T=t+(1-f-w)*s,P=n+m*o,O=t+(1-f)*s,N=n+(m+y)*o;break;case 270:U=le._rescaleAndSwap,_=t+s,x=n+o,C=-s,k=-o,T=t+(1-m-y)*s,P=n+(1-f-w)*o,O=t+(1-m)*s,N=n+(1-f)*o;break}for(const{line:F,points:j}of c(this,ni))d.push(U(F,_,x,C,k,l?new Array(F.length):null)),h.push(U(j,_,x,C,k,l?new Array(j.length):null));return{lines:d,points:h,rect:[T,P,O,N]}}static deserialize(t,n,s,o,l,{paths:{lines:d,points:h},rotation:f,thickness:m}){const w=[];let y,_,x,C,k;switch(f){case 0:k=le._rescale,y=-t/s,_=n/o+1,x=1/s,C=-1/o;break;case 90:k=le._rescaleAndSwap,y=-n/o,_=-t/s,x=1/o,C=1/s;break;case 180:k=le._rescale,y=t/s+1,_=-n/o,x=-1/s,C=1/o;break;case 270:k=le._rescaleAndSwap,y=n/o+1,_=t/s+1,x=-1/o,C=-1/s;break}if(!d){d=[];for(const P of h){const O=P.length;if(O===2){d.push(new Float32Array([NaN,NaN,NaN,NaN,P[0],P[1]]));continue}if(O===4){d.push(new Float32Array([NaN,NaN,NaN,NaN,P[0],P[1],NaN,NaN,NaN,NaN,P[2],P[3]]));continue}const N=new Float32Array(3*(O-2));d.push(N);let[U,F,j,H]=P.subarray(0,4);N.set([NaN,NaN,NaN,NaN,U,F],0);for(let G=4;G<O;G+=2){const X=P[G],Z=P[G+1];N.set(le.createBezierPoints(U,F,j,H,X,Z),(G-2)*3),[U,F,j,H]=[j,H,X,Z]}}}for(let P=0,O=d.length;P<O;P++)w.push({line:k(d[P].map(N=>N??NaN),y,_,x,C),points:k(h[P].map(N=>N??NaN),y,_,x,C)});const T=new z0;return T.build(w,s,o,1,f,m,l),T}get box(){return c(this,An)}updateProperty(t,n){return t==="stroke-width"?S(this,tn,lC).call(this,n):null}updateParentDimensions([t,n],s){const[o,l]=S(this,tn,$s).call(this);b(this,_s,t),b(this,xs,n),b(this,fu,s);const[d,h]=S(this,tn,$s).call(this),f=d-o,m=h-l,w=c(this,An);return w[0]-=f,w[1]-=m,w[2]+=2*f,w[3]+=2*m,w}updateRotation(t){return b(this,wp,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,An).map(le.svgRound).join(" ")}get defaultProperties(){const[t,n]=c(this,An);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(t)} ${le.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=c(this,An);let s=0,o=0,l=0,d=0,h=0,f=0;switch(c(this,wp)){case 90:o=n/t,l=-t/n,h=t;break;case 180:s=-1,d=-1,h=t,f=n;break;case 270:o=-n/t,l=t/n,f=n;break;default:return""}return`matrix(${s} ${o} ${l} ${d} ${le.svgRound(h)} ${le.svgRound(f)})`}getPathResizingSVGProperties([t,n,s,o]){const[l,d]=S(this,tn,$s).call(this),[h,f,m,w]=c(this,An);if(Math.abs(m-l)<=le.PRECISION||Math.abs(w-d)<=le.PRECISION){const k=t+s/2-(h+m/2),T=n+o/2-(f+w/2);return{path:{"transform-origin":`${le.svgRound(t)} ${le.svgRound(n)}`,transform:`${this.rotationTransform} translate(${k} ${T})`}}}const y=(s-2*l)/(m-2*l),_=(o-2*d)/(w-2*d),x=m/s,C=w/o;return{path:{"transform-origin":`${le.svgRound(h)} ${le.svgRound(f)}`,transform:`${this.rotationTransform} scale(${x} ${C}) translate(${le.svgRound(l)} ${le.svgRound(d)}) scale(${y} ${_}) translate(${le.svgRound(-l)} ${le.svgRound(-d)})`}}}getPathResizedSVGProperties([t,n,s,o]){const[l,d]=S(this,tn,$s).call(this),h=c(this,An),[f,m,w,y]=h;if(h[0]=t,h[1]=n,h[2]=s,h[3]=o,Math.abs(w-l)<=le.PRECISION||Math.abs(y-d)<=le.PRECISION){const T=t+s/2-(f+w/2),P=n+o/2-(m+y/2);for(const{line:O,points:N}of c(this,ni))le._translate(O,T,P,O),le._translate(N,T,P,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(t)} ${le.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const _=(s-2*l)/(w-2*l),x=(o-2*d)/(y-2*d),C=-_*(f+l)+t+l,k=-x*(m+d)+n+d;if(_!==1||x!==1||C!==0||k!==0)for(const{line:T,points:P}of c(this,ni))le._rescale(T,C,k,_,x,T),le._rescale(P,C,k,_,x,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(t)} ${le.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[o,l]=s,d=c(this,An),h=t-d[0],f=n-d[1];if(c(this,_s)===o&&c(this,xs)===l)for(const{line:m,points:w}of c(this,ni))le._translate(m,h,f,m),le._translate(w,h,f,w);else{const m=c(this,_s)/o,w=c(this,xs)/l;b(this,_s,o),b(this,xs,l);for(const{line:y,points:_}of c(this,ni))le._rescale(y,h,f,m,w,y),le._rescale(_,h,f,m,w,_);d[2]*=m,d[3]*=w}return d[0]=t,d[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${le.svgRound(t)} ${le.svgRound(n)}`}}}get defaultSVGProperties(){const t=c(this,An);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${le.svgRound(t[0])} ${le.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};An=new WeakMap,wp=new WeakMap,bp=new WeakMap,ni=new WeakMap,_s=new WeakMap,xs=new WeakMap,fu=new WeakMap,mu=new WeakMap,gu=new WeakMap,tn=new WeakSet,$s=function(t=c(this,gu)){const n=c(this,bp)+t/2*c(this,fu);return c(this,mu)%180===0?[n/c(this,_s),n/c(this,xs)]:[n/c(this,xs),n/c(this,_s)]},aC=function(){const[t,n,s,o]=c(this,An),[l,d]=S(this,tn,$s).call(this,0);return[t+l,n+d,s-2*l,o-2*d]},oC=function(){const t=b(this,An,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of c(this,ni)){if(o.length<=12){for(let h=4,f=o.length;h<f;h+=6){const[m,w]=o.subarray(h,h+2);t[0]=Math.min(t[0],m),t[1]=Math.min(t[1],w),t[2]=Math.max(t[2],m),t[3]=Math.max(t[3],w)}continue}let l=o[4],d=o[5];for(let h=6,f=o.length;h<f;h+=6){const[m,w,y,_,x,C]=o.subarray(h,h+6);ve.bezierBoundingBox(l,d,m,w,y,_,x,C,t),l=x,d=C}}const[n,s]=S(this,tn,$s).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-s)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+s)),t[2]-=t[0],t[3]-=t[1]},lC=function(t){const[n,s]=S(this,tn,$s).call(this);b(this,gu,t);const[o,l]=S(this,tn,$s).call(this),[d,h]=[o-n,l-s],f=c(this,An);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f};let Xm=z0;var vu;const B0=class B0 extends XN{constructor(t){super();E(this,vu);b(this,vu,t),super.updateProperties({fill:"none",stroke:vt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=c(this,vu).realScale),super.updateSVGProperty(t,n)}clone(){const t=new B0(c(this,vu));return t.updateAll(this),t}};vu=new WeakMap;let Zw=B0;var pg,cC;const uc=class uc extends Xw{constructor(t){super({...t,name:"inkEditor"});E(this,pg);this._willKeepAspectRatio=!0}static initialize(t,n){vt.initialize(t,n),this._defaultDrawingOptions=new Zw(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Be(this,"typesMap",new Map([[Ue.INK_THICKNESS,"stroke-width"],[Ue.INK_COLOR,"stroke"],[Ue.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,o,l){return new YN(t,n,s,o,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,o,l,d){return Xm.deserialize(t,n,s,o,l,d)}static async deserialize(t,n,s){let o=null;if(t instanceof M0){const{data:{inkLists:d,rect:h,rotation:f,id:m,color:w,opacity:y,borderStyle:{rawWidth:_},popupRef:x},parent:{page:{pageNumber:C}}}=t;o=t={annotationType:Me.INK,color:Array.from(w),thickness:_,opacity:y,paths:{points:d},boxes:null,pageIndex:C-1,rect:h.slice(0),rotation:f,id:m,deleted:!1,popupRef:x}}const l=await super.deserialize(t,n,s);return l.annotationElementId=t.id||null,l._initialData=o,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=uc.getDefaultDrawingOptions({stroke:ve.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s,rect:o}=this.serializeDraw(t),{_drawingOptions:{stroke:l,"stroke-opacity":d,"stroke-width":h}}=this,f={annotationType:Me.INK,color:vt._colorManager.convert(l),opacity:d,thickness:h,paths:{lines:n,points:s},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?f:this.annotationElementId&&!S(this,pg,cC).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(t){const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n}),null}};pg=new WeakSet,cC=function(t){const{color:n,thickness:s,opacity:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((d,h)=>d!==n[h])||t.thickness!==s||t.opacity!==o||t.pageIndex!==l},Se(uc,"_type","ink"),Se(uc,"_editorType",Me.INK),Se(uc,"_defaultDrawingOptions",null);let e0=uc;var mt,en,ka,pr,Ta,yu,As,Es,ii,wu,We,Nd,Od,km,n0,Tm,i0,Im,uC;const Ud=class Ud extends vt{constructor(t){super({...t,name:"stampEditor"});E(this,We);E(this,mt,null);E(this,en,null);E(this,ka,null);E(this,pr,null);E(this,Ta,null);E(this,yu,"");E(this,As,null);E(this,Es,null);E(this,ii,!1);E(this,wu,!1);b(this,pr,t.bitmapUrl),b(this,Ta,t.bitmapFile)}static initialize(t,n){vt.initialize(t,n)}static get supportedTypes(){return Be(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Be(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(Me.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:d}=t||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:o,width:l,height:d,channels:o.length/(l*d)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var t;c(this,en)&&(b(this,mt,null),this._uiManager.imageManager.deleteId(c(this,en)),(t=c(this,As))==null||t.remove(),b(this,As,null),c(this,Es)&&(clearTimeout(c(this,Es)),b(this,Es,null))),super.remove()}rebuild(){if(!this.parent){c(this,en)&&S(this,We,km).call(this);return}super.rebuild(),this.div!==null&&(c(this,en)&&c(this,As)===null&&S(this,We,km).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,ka)||c(this,mt)||c(this,pr)||c(this,Ta)||c(this,en))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,mt)?S(this,We,n0).call(this):S(this,We,km).call(this),this.width&&!this.annotationElementId){const[s,o]=this.parentDimensions;this.setAt(t*s,n*o,this.width*s,this.height*o)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Es)!==null&&clearTimeout(c(this,Es)),b(this,Es,setTimeout(()=>{b(this,Es,null),S(this,We,i0).call(this)},200))}copyCanvas(t,n,s=!1){var _;t||(t=224);const{width:o,height:l}=c(this,mt),d=new Zy;let h=c(this,mt),f=o,m=l,w=null;if(n){if(o>n||l>n){const H=Math.min(n/o,n/l);f=Math.floor(o*H),m=Math.floor(l*H)}w=document.createElement("canvas");const x=w.width=Math.ceil(f*d.sx),C=w.height=Math.ceil(m*d.sy);c(this,ii)||(h=S(this,We,Tm).call(this,x,C));const k=w.getContext("2d");k.filter=this._uiManager.hcmFilter;let T="white",P="#cfcfd8";this._uiManager.hcmFilter!=="none"?P="black":(_=window.matchMedia)!=null&&_.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",P="#42414d");const O=15,N=O*d.sx,U=O*d.sy,F=new OffscreenCanvas(N*2,U*2),j=F.getContext("2d");j.fillStyle=T,j.fillRect(0,0,N*2,U*2),j.fillStyle=P,j.fillRect(0,0,N,U),j.fillRect(N,U,N,U),k.fillStyle=k.createPattern(F,"repeat"),k.fillRect(0,0,x,C),k.drawImage(h,0,0,h.width,h.height,0,0,x,C)}let y=null;if(s){let x,C;if(d.symmetric&&h.width<t&&h.height<t)x=h.width,C=h.height;else if(h=c(this,mt),o>t||l>t){const P=Math.min(t/o,t/l);x=Math.floor(o*P),C=Math.floor(l*P),c(this,ii)||(h=S(this,We,Tm).call(this,x,C))}const T=new OffscreenCanvas(x,C).getContext("2d",{willReadFrequently:!0});T.drawImage(h,0,0,h.width,h.height,0,0,x,C),y={width:x,height:C,data:T.getImageData(0,0,x,C).data}}return{canvas:w,width:f,height:m,imageData:y}}getImageForAltText(){return c(this,As)}static async deserialize(t,n,s){var C;let o=null;if(t instanceof P1){const{data:{rect:k,rotation:T,id:P,structParent:O,popupRef:N},container:U,parent:{page:{pageNumber:F}}}=t,j=U.querySelector("canvas"),H=s.imageManager.getFromCanvas(U.id,j);j.remove();const G=((C=await n._structTree.getAriaAttributes(`${C0}${P}`))==null?void 0:C.get("aria-label"))||"";o=t={annotationType:Me.STAMP,bitmapId:H.id,bitmap:H.bitmap,pageIndex:F-1,rect:k.slice(0),rotation:T,id:P,deleted:!1,accessibilityData:{decorative:!1,altText:G},isSvg:!1,structParent:O,popupRef:N}}const l=await super.deserialize(t,n,s),{rect:d,bitmap:h,bitmapUrl:f,bitmapId:m,isSvg:w,accessibilityData:y}=t;m&&s.imageManager.isValidId(m)?(b(l,en,m),h&&b(l,mt,h)):b(l,pr,f),b(l,ii,w);const[_,x]=l.pageDimensions;return l.width=(d[2]-d[0])/_,l.height=(d[3]-d[1])/x,l.annotationElementId=t.id||null,y&&(l.altTextData=y),l._initialData=o,b(l,wu,!!o),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Me.STAMP,bitmapId:c(this,en),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,ii),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=S(this,We,Im).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=S(this,We,uC).call(this,s);if(h.isSame)return null;h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const d=c(this,ii)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(c(this,en)))n.stamps.set(c(this,en),{area:d,serialized:s}),s.bitmap=S(this,We,Im).call(this,!1);else if(c(this,ii)){const h=n.stamps.get(c(this,en));d>h.area&&(h.area=d,h.serialized.bitmap.close(),h.serialized.bitmap=S(this,We,Im).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};mt=new WeakMap,en=new WeakMap,ka=new WeakMap,pr=new WeakMap,Ta=new WeakMap,yu=new WeakMap,As=new WeakMap,Es=new WeakMap,ii=new WeakMap,wu=new WeakMap,We=new WeakSet,Nd=function(t,n=!1){if(!t){this.remove();return}b(this,mt,t.bitmap),n||(b(this,en,t.id),b(this,ii,t.isSvg)),t.file&&b(this,yu,t.file.name),S(this,We,n0).call(this)},Od=function(){if(b(this,ka,null),this._uiManager.enableWaiting(!1),!!c(this,As)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,mt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,mt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},km=function(){if(c(this,en)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,en)).then(s=>S(this,We,Nd).call(this,s,!0)).finally(()=>S(this,We,Od).call(this));return}if(c(this,pr)){const s=c(this,pr);b(this,pr,null),this._uiManager.enableWaiting(!0),b(this,ka,this._uiManager.imageManager.getFromUrl(s).then(o=>S(this,We,Nd).call(this,o)).finally(()=>S(this,We,Od).call(this)));return}if(c(this,Ta)){const s=c(this,Ta);b(this,Ta,null),this._uiManager.enableWaiting(!0),b(this,ka,this._uiManager.imageManager.getFromFile(s).then(o=>S(this,We,Nd).call(this,o)).finally(()=>S(this,We,Od).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Ud.supportedTypesStr;const n=this._uiManager._signal;b(this,ka,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,We,Nd).call(this,o)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>S(this,We,Od).call(this))),t.click()},n0=function(){var w;const{div:t}=this;let{width:n,height:s}=c(this,mt);const[o,l]=this.pageDimensions,d=.75;if(this.width)n=this.width*o,s=this.height*l;else if(n>d*o||s>d*l){const y=Math.min(d*o/n,d*l/s);n*=y,s*=y}const[h,f]=this.parentDimensions;this.setDims(n*h/o,s*f/l),this._uiManager.enableWaiting(!1);const m=b(this,As,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=n/o,this.height=s/l,(w=this._initialOptions)!=null&&w.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),S(this,We,i0).call(this),c(this,wu)||(this.parent.addUndoableEditor(this),b(this,wu,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,yu)&&m.setAttribute("aria-label",c(this,yu))},Tm=function(t,n){const{width:s,height:o}=c(this,mt);let l=s,d=o,h=c(this,mt);for(;l>2*t||d>2*n;){const f=l,m=d;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const w=new OffscreenCanvas(l,d);w.getContext("2d").drawImage(h,0,0,f,m,0,0,l,d),h=w.transferToImageBitmap()}return h},i0=function(){const[t,n]=this.parentDimensions,{width:s,height:o}=this,l=new Zy,d=Math.ceil(s*t*l.sx),h=Math.ceil(o*n*l.sy),f=c(this,As);if(!f||f.width===d&&f.height===h)return;f.width=d,f.height=h;const m=c(this,ii)?c(this,mt):S(this,We,Tm).call(this,d,h),w=f.getContext("2d");w.filter=this._uiManager.hcmFilter,w.drawImage(m,0,0,m.width,m.height,0,0,d,h)},Im=function(t){if(t){if(c(this,ii)){const o=this._uiManager.imageManager.getSvgUrl(c(this,en));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,mt),n.getContext("2d").drawImage(c(this,mt),0,0),n.toDataURL()}if(c(this,ii)){const[n,s]=this.pageDimensions,o=Math.round(this.width*n*Fa.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*Fa.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(o,l);return d.getContext("2d").drawImage(c(this,mt),0,0,c(this,mt).width,c(this,mt).height,0,0,o,l),d.transferToImageBitmap()}return structuredClone(c(this,mt))},uC=function(t){var d;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,o=t.pageIndex===n,l=(((d=t.accessibilityData)==null?void 0:d.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&l,isSameAltText:l}},Se(Ud,"_type","stamp"),Se(Ud,"_editorType",Me.STAMP);let t0=Ud;var gl,bu,Ss,Ia,fr,xi,Ra,_u,vl,Wi,mr,pn,gr,ge,Pa,ut,dC,ls,r0,a0,Rm;const Li=class Li{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:o,annotationLayer:l,drawLayer:d,textLayer:h,viewport:f,l10n:m}){E(this,ut);E(this,gl);E(this,bu,!1);E(this,Ss,null);E(this,Ia,null);E(this,fr,null);E(this,xi,new Map);E(this,Ra,!1);E(this,_u,!1);E(this,vl,!1);E(this,Wi,null);E(this,mr,null);E(this,pn,null);E(this,gr,null);E(this,ge);const w=[...c(Li,Pa).values()];if(!Li._initialized){Li._initialized=!0;for(const y of w)y.initialize(m,e)}e.registerEditorTypes(w),b(this,ge,e),this.pageIndex=t,this.div=n,b(this,gl,o),b(this,Ss,l),this.viewport=f,b(this,pn,h),this.drawLayer=d,this._structTree=s,c(this,ge).addLayer(this)}get isEmpty(){return c(this,xi).size===0}get isInvisible(){return this.isEmpty&&c(this,ge).getMode()===Me.NONE}updateToolbar(e){c(this,ge).updateToolbar(e)}updateMode(e=c(this,ge).getMode()){switch(S(this,ut,Rm).call(this),e){case Me.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Me.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Me.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of c(Li,Pa).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,pn))==null?void 0:t.div)}setEditingState(e){c(this,ge).setEditingState(e)}addCommands(e){c(this,ge).addCommands(e)}cleanUndoStack(e){c(this,ge).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,Ss))==null||t.div.classList.toggle("disabled",!e)}async enable(){b(this,vl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of c(this,xi).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,ge).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!c(this,Ss)){b(this,vl,!1);return}const t=c(this,Ss).getEditableAnnotations();for(const n of t){if(n.hide(),c(this,ge).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}b(this,vl,!1)}disable(){var s;b(this,_u,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of c(this,xi).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(s=this.getEditableAnnotation(o.annotationElementId))==null||s.show(),o.remove()}if(c(this,Ss)){const o=c(this,Ss).getEditableAnnotations();for(const l of o){const{id:d}=l.data;if(c(this,ge).isDeletedAnnotationElement(d))continue;let h=t.get(d);if(h){h.resetAnnotationElement(l),h.show(!1),l.show();continue}h=e.get(d),h&&(c(this,ge).addChangedExistingAnnotation(h),h.renderAnnotationElement(l)&&h.show(!1)),l.show()}}S(this,ut,Rm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of c(Li,Pa).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,_u,!1)}getEditableAnnotation(e){var t;return((t=c(this,Ss))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,ge).getActive()!==e&&c(this,ge).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,pn))!=null&&e.div&&!c(this,gr)){b(this,gr,new AbortController);const t=c(this,ge).combinedSignal(c(this,gr));c(this,pn).div.addEventListener("pointerdown",S(this,ut,dC).bind(this),{signal:t}),c(this,pn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,pn))!=null&&e.div&&c(this,gr)&&(c(this,gr).abort(),b(this,gr,null),c(this,pn).div.classList.remove("highlighting"))}enableClick(){if(c(this,Ia))return;b(this,Ia,new AbortController);const e=c(this,ge).combinedSignal(c(this,Ia));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,Ia))==null||e.abort(),b(this,Ia,null)}attach(e){c(this,xi).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,ge).isDeletedAnnotationElement(t)&&c(this,ge).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,xi).delete(e.id),(t=c(this,gl))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,_u)&&e.annotationElementId&&c(this,ge).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,ge).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,ge).addDeletedAnnotationElement(e.annotationElementId),vt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,ge).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,vl)),c(this,ge).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,fr)&&(e._focusEventsAllowed=!1,b(this,fr,setTimeout(()=>{b(this,fr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,ge)._signal}),t.focus())},0))),e._structTreeParentId=(n=c(this,gl))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return c(this,ge).getId()}combinedSignal(e){return c(this,ge).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,ut,ls))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,ge).updateToolbar(e),c(this,ge).updateMode(e);const{offsetX:n,offsetY:s}=S(this,ut,a0).call(this),o=this.getNextId(),l=S(this,ut,r0).call(this,{parent:this,id:o,x:n,y:s,uiManager:c(this,ge),isCentered:!0,...t});l&&this.add(l)}async deserialize(e){var t;return await((t=c(Li,Pa).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,ge)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),o=S(this,ut,r0).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:c(this,ge),isCentered:t,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(S(this,ut,a0).call(this),!0)}setSelected(e){c(this,ge).setSelected(e)}toggleSelected(e){c(this,ge).toggleSelected(e)}unselect(e){c(this,ge).unselect(e)}pointerup(e){var n;const{isMac:t}=Sn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,Ra)&&(b(this,Ra,!1),!((n=c(this,ut,ls))!=null&&n.isDrawer&&c(this,ut,ls).supportMultipleDrawings))){if(!c(this,bu)){b(this,bu,!0);return}if(c(this,ge).getMode()===Me.STAMP){c(this,ge).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var s;if(c(this,ge).getMode()===Me.HIGHLIGHT&&this.enableTextSelection(),c(this,Ra)){b(this,Ra,!1);return}const{isMac:t}=Sn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(b(this,Ra,!0),(s=c(this,ut,ls))!=null&&s.isDrawer){this.startDrawingSession(e);return}const n=c(this,ge).getActive();b(this,bu,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),c(this,Wi)){c(this,ut,ls).startDrawing(this,c(this,ge),!1,e);return}c(this,ge).setCurrentDrawingSession(this),b(this,Wi,new AbortController);const t=c(this,ge).combinedSignal(c(this,Wi));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(b(this,mr,null),this.commitOrRemove())},{signal:t}),c(this,ut,ls).startDrawing(this,c(this,ge),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&b(this,mr,t);return}c(this,mr)&&setTimeout(()=>{var t;(t=c(this,mr))==null||t.focus(),b(this,mr,null)},0)}endDrawingSession(e=!1){return c(this,Wi)?(c(this,ge).setCurrentDrawingSession(null),c(this,Wi).abort(),b(this,Wi,null),b(this,mr,null),c(this,ut,ls).endDrawing(e)):null}findNewParent(e,t,n){const s=c(this,ge).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return c(this,Wi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Wi)&&c(this,ut,ls).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,ge).getActive())==null?void 0:e.parent)===this&&(c(this,ge).commitOrRemove(),c(this,ge).setActiveEditor(null)),c(this,fr)&&(clearTimeout(c(this,fr)),b(this,fr,null));for(const n of c(this,xi).values())(t=c(this,gl))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,xi).clear(),c(this,ge).removeLayer(this)}render({viewport:e}){this.viewport=e,xl(this.div,e);for(const t of c(this,ge).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,ge).commitOrRemove(),S(this,ut,Rm).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,xl(this.div,{rotation:n}),t!==n)for(const s of c(this,xi).values())s.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,ge).viewParameters.realScale}};gl=new WeakMap,bu=new WeakMap,Ss=new WeakMap,Ia=new WeakMap,fr=new WeakMap,xi=new WeakMap,Ra=new WeakMap,_u=new WeakMap,vl=new WeakMap,Wi=new WeakMap,mr=new WeakMap,pn=new WeakMap,gr=new WeakMap,ge=new WeakMap,Pa=new WeakMap,ut=new WeakSet,dC=function(e){c(this,ge).unselectAll();const{target:t}=e;if(t===c(this,pn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,pn).div.contains(t)){const{isMac:n}=Sn.platform;if(e.button!==0||e.ctrlKey&&n)return;c(this,ge).showAllEditors("highlight",!0,!0),c(this,pn).div.classList.add("free"),this.toggleDrawing(),Km.startHighlighting(this,c(this,ge).direction==="ltr",{target:c(this,pn).div,x:e.x,y:e.y}),c(this,pn).div.addEventListener("pointerup",()=>{c(this,pn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,ge)._signal}),e.preventDefault()}},ls=function(){return c(Li,Pa).get(c(this,ge).getMode())},r0=function(e){const t=c(this,ut,ls);return t?new t.prototype.constructor(e):null},a0=function(){const{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,e),l=Math.max(0,t),d=Math.min(window.innerWidth,e+n),h=Math.min(window.innerHeight,t+s),f=(o+d)/2-e,m=(l+h)/2-t,[w,y]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:w,offsetY:y}},Rm=function(){for(const e of c(this,xi).values())e.isEmpty()&&e.remove()},Se(Li,"_initialized",!1),E(Li,Pa,new Map([zw,e0,t0,Km].map(e=>[e._editorType,e])));let s0=Li;var Gi,_p,En,yl,fg,hC,Is,l0,pC,c0;const cn=class cn{constructor({pageIndex:e}){E(this,Is);E(this,Gi,null);E(this,_p,0);E(this,En,new Map);E(this,yl,new Map);this.pageIndex=e}setParent(e){if(!c(this,Gi)){b(this,Gi,e);return}if(c(this,Gi)!==e){if(c(this,En).size>0)for(const t of c(this,En).values())t.remove(),e.append(t);b(this,Gi,e)}}static get _svgFactory(){return Be(this,"_svgFactory",new L0)}draw(e,t=!1,n=!1){const s=wn(this,_p)._++,o=S(this,Is,l0).call(this),l=cn._svgFactory.createElement("defs");o.append(l);const d=cn._svgFactory.createElement("path");l.append(d);const h=`path_p${this.pageIndex}_${s}`;d.setAttribute("id",h),d.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,yl).set(s,d);const f=n?S(this,Is,pC).call(this,l,h):null,m=cn._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${h}`),this.updateProperties(o,e),c(this,En).set(s,o),{id:s,clipPathId:`url(#${f})`}}drawOutline(e,t){const n=wn(this,_p)._++,s=S(this,Is,l0).call(this),o=cn._svgFactory.createElement("defs");s.append(o);const l=cn._svgFactory.createElement("path");o.append(l);const d=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",d),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const w=cn._svgFactory.createElement("mask");o.append(w),h=`mask_p${this.pageIndex}_${n}`,w.setAttribute("id",h),w.setAttribute("maskUnits","objectBoundingBox");const y=cn._svgFactory.createElement("rect");w.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const _=cn._svgFactory.createElement("use");w.append(_),_.setAttribute("href",`#${d}`),_.setAttribute("stroke","none"),_.setAttribute("fill","black"),_.setAttribute("fill-rule","nonzero"),_.classList.add("mask")}const f=cn._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${d}`),h&&f.setAttribute("mask",`url(#${h})`);const m=f.cloneNode();return s.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(s,e),c(this,En).set(n,s),n}finalizeDraw(e,t){c(this,yl).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var h;if(!t)return;const{root:n,bbox:s,rootClass:o,path:l}=t,d=typeof e=="number"?c(this,En).get(e):e;if(d){if(n&&S(this,Is,c0).call(this,d,n),s&&S(h=cn,fg,hC).call(h,d,s),o){const{classList:f}=d;for(const[m,w]of Object.entries(o))f.toggle(m,w)}if(l){const m=d.firstChild.firstChild;S(this,Is,c0).call(this,m,l)}}}updateParent(e,t){if(t===this)return;const n=c(this,En).get(e);n&&(c(t,Gi).append(n),c(this,En).delete(e),c(t,En).set(e,n))}remove(e){c(this,yl).delete(e),c(this,Gi)!==null&&(c(this,En).get(e).remove(),c(this,En).delete(e))}destroy(){b(this,Gi,null);for(const e of c(this,En).values())e.remove();c(this,En).clear(),c(this,yl).clear()}};Gi=new WeakMap,_p=new WeakMap,En=new WeakMap,yl=new WeakMap,fg=new WeakSet,hC=function(e,[t,n,s,o]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*s}%`,l.height=`${100*o}%`},Is=new WeakSet,l0=function(){const e=cn._svgFactory.create(1,1,!0);return c(this,Gi).append(e),e.setAttribute("aria-hidden",!0),e},pC=function(e,t){const n=cn._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const o=cn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),s},c0=function(e,t){for(const[n,s]of Object.entries(t))s===null?e.removeAttribute(n):e.setAttribute(n,s)},E(cn,fg);let o0=cn;globalThis.pdfjsTestingUtils={HighlightOutliner:Uw};Re.AbortException;Re.AnnotationEditorLayer;Re.AnnotationEditorParamsType;Re.AnnotationEditorType;Re.AnnotationEditorUIManager;Re.AnnotationLayer;Re.AnnotationMode;Re.ColorPicker;Re.DOMSVGFactory;Re.DrawLayer;Re.FeatureTest;var QN=Re.GlobalWorkerOptions;Re.ImageKind;Re.InvalidPDFException;Re.MissingPDFException;Re.OPS;Re.OutputScale;Re.PDFDataRangeTransport;Re.PDFDateString;Re.PDFWorker;Re.PasswordResponses;Re.PermissionFlag;Re.PixelsPerInch;Re.RenderingCancelledException;Re.TextLayer;Re.TouchManager;Re.UnexpectedResponseException;Re.Util;Re.VerbosityLevel;Re.XfaLayer;Re.build;Re.createValidAbsoluteUrl;Re.fetchData;var JN=Re.getDocument;Re.getFilenameFromUrl;Re.getPdfFilenameFromUrl;Re.getXfaPageViewport;Re.isDataScheme;Re.isPdfFile;Re.noContextMenu;Re.normalizeUnicode;Re.setLayerDimensions;Re.shadow;Re.stopEvent;Re.version;const ZN="/assets/pdf.worker.min-yatZIOMy.mjs";QN.workerSrc=ZN;const eO="AIzaSyCcfyMVBskK7RfIPU53LpUib8obl-fILM0",tO=new QL(eO);async function oE(a,e,t){const n=tO.getGenerativeModel({model:a}),s={inlineData:{data:e.split(",")[1],mimeType:"image/jpeg"}};return(await(await n.generateContent([t,s])).response).text()}async function nO(a,e){try{return await oE("gemini-pro-latest",a,e)}catch(t){if(console.warn("gemini-pro-latest failed, trying gemini-1.5-flash-latest",t),t.toString().includes("503"))return await oE("gemini-1.5-flash-latest",a,e);throw t}}async function iO(a){const e=await a.arrayBuffer(),n=await(await JN(e).promise).getPage(1),s=n.getViewport({scale:1.5}),o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Could not get canvas context");o.height=s.height,o.width=s.width;const d={canvasContext:l,viewport:s};return await n.render(d).promise,o.toDataURL("image/jpeg")}const Pm=a=>V.jsx("img",{alt:"Alpenblick Logo",...a}),bd={logoUrl:"https://alpenblick.net/media/AB_Logo_Kreativeagentur_rn.svg",subtitleText:"PDFs & Bilder intelligent umbenennen.",footerLinkText:"Alpenblick",footerLink:"https://alpenblick.net/",footerTemplate:"Renamer | Mit {{heart}} von {{link}} entwickelt.  2024"},sO="Telekom, Vodafone, O2, Apple, Amazon";function rO(){const[a,e]=Ie.useState([]),[t,n]=Ie.useState(!1),[s,o]=Ie.useState(null),[l,d]=Ie.useState(null),[h,f]=Ie.useState([]);Ie.useEffect(()=>{const F=localStorage.getItem("directoryHistory");if(F){const j=JSON.parse(F);f(j.map(H=>({name:H,handle:{}})))}},[]);const m=(F,j)=>{f(H=>{const G=[{name:F,handle:j},...H.filter(X=>X.name!==F)].slice(0,10);return localStorage.setItem("directoryHistory",JSON.stringify(G.map(X=>X.name))),G})},w=Ie.useCallback(F=>{const j=F.map(H=>({id:`${H.name}-${H.lastModified}`,file:H,status:"pending"}));e(H=>[...H,...j])},[]);Ie.useEffect(()=>{const F=async H=>{n(!0),e(G=>G.map(X=>X.id===H.id?{...X,status:"analyzing"}:X));try{let G;if(H.file.type==="application/pdf")G=await iO(H.file);else if(H.file.type.startsWith("image/"))G=await new Promise((be,de)=>{const Pe=new FileReader;Pe.onload=()=>be(Pe.result),Pe.onerror=J=>de(J),Pe.readAsDataURL(H.file)});else throw new Error(`Unsupported file type: ${H.file.type}`);const X=_L.replace("{{ANBIETER_LISTE}}",sO),Z=await nO(G,X),ce=H.file.name.split(".").pop()||"";e(be=>be.map(de=>de.id===H.id?{...de,status:"renamed",newName:`${Z}.${ce}`}:de))}catch(G){console.error(G);const X=G instanceof Error?G.message:"An unknown error occurred.";e(Z=>Z.map(ce=>ce.id===H.id?{...ce,status:"error",errorMessage:X}:ce))}finally{a.find(X=>X.status==="pending")||n(!1)}},j=a.find(H=>H.status==="pending");j?F(j):n(!1)},[a]);const y=F=>{e(j=>j.filter((H,G)=>G!==F))},_=()=>{e([])},x=F=>{const j=h.find(H=>H.name===F);j&&(d(j.handle),o(j.name),e(H=>H.map(G=>G.status==="saved"?{...G,status:"renamed"}:G)))},C=async()=>{try{const F=await window.showDirectoryPicker();return d(F),o(F.name),m(F.name,F),e(j=>j.map(H=>H.status==="saved"?{...H,status:"renamed"}:H)),F}catch(F){return console.error("Error selecting directory:",F),null}},k=F=>{const j=a[F],H=document.createElement("a");H.href=URL.createObjectURL(j.file),H.download=j.newName||j.file.name,document.body.appendChild(H),H.click(),document.body.removeChild(H),e(G=>G.map((X,Z)=>Z===F?{...X,status:"downloaded"}:X))},T=async F=>{let j=l;if(j||(j=await C()),!j){e(G=>G.map((X,Z)=>Z===F?{...X,status:"cancelled"}:X));return}const H=a[F];if(H.newName)try{const X=await(await j.getFileHandle(H.newName,{create:!0})).createWritable();await X.write(H.file),await X.close(),e(Z=>Z.map((ce,be)=>be===F?{...ce,status:"saved"}:ce))}catch(G){console.error("Error saving file:",G);const X=G instanceof Error?G.message:"An unknown error occurred.";e(Z=>Z.map((ce,be)=>be===F?{...ce,status:"error",errorMessage:X}:ce))}},P=()=>{a.forEach((F,j)=>{F.newName&&k(j)})},O=async()=>{let F=l;if(F||(F=await C()),!F){e(X=>X.map(Z=>Z.status==="renamed"?{...Z,status:"cancelled"}:Z));return}const H=a.filter(X=>X.status==="renamed").map(async X=>{if(!X.newName)return null;try{const ce=await(await F.getFileHandle(X.newName,{create:!0})).createWritable();return await ce.write(X.file),await ce.close(),{id:X.id,status:"saved"}}catch(Z){console.error("Error saving file:",Z);const ce=Z instanceof Error?Z.message:"An unknown error occurred.";return{id:X.id,status:"error",errorMessage:ce}}}),G=await Promise.all(H);e(X=>{const Z=new Map(G.filter(ce=>ce).map(ce=>[ce.id,ce]));return X.map(ce=>{const be=Z.get(ce.id);return be?{...ce,status:be.status,errorMessage:be.errorMessage}:ce})})},N=()=>bd.footerTemplate.split(/(\{\{.*?\}\})/g).map((j,H)=>j==="{{heart}}"?V.jsx(lL,{className:"h-5 w-5 inline-block align-middle text-blue-400 mx-1",style:{position:"relative",top:"-1px"}},H):j==="{{link}}"?V.jsx("a",{href:bd.footerLink,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-400",children:bd.footerLinkText},H):j),U=()=>{HE(Zf).catch(F=>{console.error("Sign Out Error:",F)})};return V.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-200 flex flex-col items-center p-4 sm:p-6 lg:p-8",children:V.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[V.jsxs("header",{className:"text-center mb-12 flex flex-col items-center",children:[V.jsxs("div",{className:"w-full flex justify-center items-center relative",children:[V.jsx(Pm,{className:"w-auto h-20",src:bd.logoUrl}),V.jsx("button",{onClick:U,className:"absolute right-0 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg",children:"Sign Out"})]}),V.jsx("p",{className:"text-lg text-gray-400 mt-6",children:bd.subtitleText})]}),V.jsxs("main",{className:"space-y-6",children:[V.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 sm:p-8 shadow-lg",children:V.jsx(mL,{onFilesAdded:w,isProcessing:t})}),a.length>0&&V.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 sm:p-8 shadow-lg",children:V.jsx(bL,{files:a,onDelete:y,onDownload:k,onSend:T,onClearAll:_,onDownloadAll:P,onSaveAll:O,isProcessing:t,directoryName:s,onSelectDirectory:C,directoryHistory:h.map(F=>F.name),onSelectFromHistory:x})}),V.jsxs("div",{className:"flex items-start text-sm text-gray-500 bg-gray-800/50 p-4 rounded-lg mt-8",children:[V.jsx(oL,{className:"w-5 h-5 mr-3 mt-0.5 flex-shrink-0"}),V.jsx("span",{children:"Ihre Dateien werden lokal im Browser verarbeitet. Fr die Analyse wird die erste Seite des Dokuments als Bild an die Google Gemini API gesendet. Es werden keine vollstndigen Dateien hochgeladen."})]})]}),V.jsx("footer",{className:"text-center mt-12 text-gray-600 text-sm",children:V.jsx("p",{children:N()})})]})})}const aO=()=>{const[a,e]=Ie.useState(null),[t,n]=Ie.useState(!0),[s,o]=Ie.useState(!1);Ie.useEffect(()=>{const h=GR(Zf,f=>{f?(e(f),f.email&&f.email.endsWith("@alpenblick.gmbh")?o(!0):o(!1)):(e(null),o(!1)),n(!1)});return()=>h()},[]);const l=()=>{const h=new vr;hP(Zf,h).catch(f=>{console.error("Authentication Error Code:",f.code),console.error("Authentication Error Message:",f.message),f.code==="auth/unauthorized-domain"?alert(`Fehler: Diese Domain ist nicht fr die Authentifizierung autorisiert.

Bitte fgen Sie die URL Ihrer App (z.B. Ihr-Projekt-Name.web.app) zur Liste der autorisierten Domains in den Firebase Authentication-Einstellungen hinzu.`):f.code!=="auth/popup-closed-by-user"&&alert(`Ein Authentifizierungsfehler ist aufgetreten: ${f.message}`)})},d=()=>{HE(Zf).catch(h=>{console.error("Sign Out Error:",h)})};return t?V.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-200 flex flex-col items-center justify-center p-4",children:[V.jsx(Pm,{className:"w-auto h-20 mb-6",src:"https://alpenblick.net/media/AB_Logo_Kreativeagentur_rn.svg"}),V.jsx("p",{className:"text-lg text-gray-400",children:"Wird geladen..."})]}):a?s?V.jsx(rO,{}):V.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-200 flex flex-col items-center justify-center p-4 text-center",children:[V.jsx(Pm,{className:"w-auto h-20 mb-6",src:"https://alpenblick.net/media/AB_Logo_Kreativeagentur_rn.svg"}),V.jsx("h1",{className:"text-3xl font-bold text-red-500 mb-4",children:"Unbefugter Zugriff"}),V.jsx("p",{className:"text-lg text-gray-400 mb-8",children:"Der Zugriff auf diese Anwendung ist beschrnkt. Bitte melden Sie sich mit einem @alpenblick.gmbh-Konto an."}),V.jsxs("p",{className:"text-md text-gray-500 mb-8",children:["Angemeldet als: ",a.email]}),V.jsx("button",{onClick:d,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg",children:"Abmelden"})]}):V.jsxs("div",{className:"min-h-screen bg-gray-900 text-gray-200 flex flex-col items-center justify-center p-4",children:[V.jsx(Pm,{className:"w-auto h-20 mb-6",src:"https://alpenblick.net/media/AB_Logo_Kreativeagentur_rn.svg"}),V.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Willkommen"}),V.jsx("p",{className:"text-lg text-gray-400 mb-8",children:"Bitte melden Sie sich an, um fortzufahren."}),V.jsxs("button",{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center",children:[V.jsx("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:V.jsx("path",{d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.75 8.36,4.73 12.19,4.73C15.28,4.73 17.04,6.55 17.04,6.55L19.25,4.34C19.25,4.34 16.56,2 12.19,2C6.42,2 2,6.48 2,12C2,17.52 6.42,22 12.19,22C17.6,22 21.54,18.33 21.54,12.81C21.54,11.83 21.45,11.45 21.35,11.1Z"})}),"Mit Google anmelden"]})]})};wT.createRoot(document.getElementById("root")).render(V.jsx(cE.StrictMode,{children:V.jsx(aO,{})}));
