var c1=Object.defineProperty;var $x=u=>{throw TypeError(u)};var u1=(u,t,e)=>t in u?c1(u,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[t]=e;var Et=(u,t,e)=>u1(u,typeof t!="symbol"?t+"":t,e),sv=(u,t,e)=>t.has(u)||$x("Cannot "+e);var o=(u,t,e)=>(sv(u,t,"read from private field"),e?e.call(u):t.get(u)),E=(u,t,e)=>t.has(u)?$x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(u):t.set(u,e),x=(u,t,e,i)=>(sv(u,t,"write to private field"),i?i.call(u,e):t.set(u,e),e),S=(u,t,e)=>(sv(u,t,"access private method"),e);var vn=(u,t,e,i)=>({set _(r){x(u,t,r,e)},get _(){return o(u,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function dm(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var rv={exports:{}},Ou={},av={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx;function d1(){if(Gx)return Ft;Gx=1;var u=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function k(L,U,ht){this.props=L,this.context=U,this.refs=C,this.updater=ht||A}k.prototype.isReactComponent={},k.prototype.setState=function(L,U){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,U,"setState")},k.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function T(){}T.prototype=k.prototype;function M(L,U,ht){this.props=L,this.context=U,this.refs=C,this.updater=ht||A}var z=M.prototype=new T;z.constructor=M,b(z,k.prototype),z.isPureReactComponent=!0;var F=Array.isArray,D=Object.prototype.hasOwnProperty,B={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function $(L,U,ht){var bt,Mt={},vt=null,yt=null;if(U!=null)for(bt in U.ref!==void 0&&(yt=U.ref),U.key!==void 0&&(vt=""+U.key),U)D.call(U,bt)&&!N.hasOwnProperty(bt)&&(Mt[bt]=U[bt]);var Ot=arguments.length-2;if(Ot===1)Mt.children=ht;else if(1<Ot){for(var Wt=Array(Ot),Ee=0;Ee<Ot;Ee++)Wt[Ee]=arguments[Ee+2];Mt.children=Wt}if(L&&L.defaultProps)for(bt in Ot=L.defaultProps,Ot)Mt[bt]===void 0&&(Mt[bt]=Ot[bt]);return{$$typeof:u,type:L,key:vt,ref:yt,props:Mt,_owner:B.current}}function G(L,U){return{$$typeof:u,type:L.type,key:U,ref:L.ref,props:L.props,_owner:L._owner}}function et(L){return typeof L=="object"&&L!==null&&L.$$typeof===u}function Q(L){var U={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ht){return U[ht]})}var At=/\/+/g;function kt(L,U){return typeof L=="object"&&L!==null&&L.key!=null?Q(""+L.key):U.toString(36)}function dt(L,U,ht,bt,Mt){var vt=typeof L;(vt==="undefined"||vt==="boolean")&&(L=null);var yt=!1;if(L===null)yt=!0;else switch(vt){case"string":case"number":yt=!0;break;case"object":switch(L.$$typeof){case u:case t:yt=!0}}if(yt)return yt=L,Mt=Mt(yt),L=bt===""?"."+kt(yt,0):bt,F(Mt)?(ht="",L!=null&&(ht=L.replace(At,"$&/")+"/"),dt(Mt,U,ht,"",function(Ee){return Ee})):Mt!=null&&(et(Mt)&&(Mt=G(Mt,ht+(!Mt.key||yt&&yt.key===Mt.key?"":(""+Mt.key).replace(At,"$&/")+"/")+L)),U.push(Mt)),1;if(yt=0,bt=bt===""?".":bt+":",F(L))for(var Ot=0;Ot<L.length;Ot++){vt=L[Ot];var Wt=bt+kt(vt,Ot);yt+=dt(vt,U,ht,Wt,Mt)}else if(Wt=w(L),typeof Wt=="function")for(L=Wt.call(L),Ot=0;!(vt=L.next()).done;)vt=vt.value,Wt=bt+kt(vt,Ot++),yt+=dt(vt,U,ht,Wt,Mt);else if(vt==="object")throw U=String(L),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return yt}function It(L,U,ht){if(L==null)return L;var bt=[],Mt=0;return dt(L,bt,"","",function(vt){return U.call(ht,vt,Mt++)}),bt}function J(L){if(L._status===-1){var U=L._result;U=U(),U.then(function(ht){(L._status===0||L._status===-1)&&(L._status=1,L._result=ht)},function(ht){(L._status===0||L._status===-1)&&(L._status=2,L._result=ht)}),L._status===-1&&(L._status=0,L._result=U)}if(L._status===1)return L._result.default;throw L._result}var nt={current:null},X={transition:null},it={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:X,ReactCurrentOwner:B};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Ft.Children={map:It,forEach:function(L,U,ht){It(L,function(){U.apply(this,arguments)},ht)},count:function(L){var U=0;return It(L,function(){U++}),U},toArray:function(L){return It(L,function(U){return U})||[]},only:function(L){if(!et(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ft.Component=k,Ft.Fragment=e,Ft.Profiler=r,Ft.PureComponent=M,Ft.StrictMode=i,Ft.Suspense=p,Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=it,Ft.act=Z,Ft.cloneElement=function(L,U,ht){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var bt=b({},L.props),Mt=L.key,vt=L.ref,yt=L._owner;if(U!=null){if(U.ref!==void 0&&(vt=U.ref,yt=B.current),U.key!==void 0&&(Mt=""+U.key),L.type&&L.type.defaultProps)var Ot=L.type.defaultProps;for(Wt in U)D.call(U,Wt)&&!N.hasOwnProperty(Wt)&&(bt[Wt]=U[Wt]===void 0&&Ot!==void 0?Ot[Wt]:U[Wt])}var Wt=arguments.length-2;if(Wt===1)bt.children=ht;else if(1<Wt){Ot=Array(Wt);for(var Ee=0;Ee<Wt;Ee++)Ot[Ee]=arguments[Ee+2];bt.children=Ot}return{$$typeof:u,type:L.type,key:Mt,ref:vt,props:bt,_owner:yt}},Ft.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},Ft.createElement=$,Ft.createFactory=function(L){var U=$.bind(null,L);return U.type=L,U},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(L){return{$$typeof:d,render:L}},Ft.isValidElement=et,Ft.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:J}},Ft.memo=function(L,U){return{$$typeof:f,type:L,compare:U===void 0?null:U}},Ft.startTransition=function(L){var U=X.transition;X.transition={};try{L()}finally{X.transition=U}},Ft.unstable_act=Z,Ft.useCallback=function(L,U){return nt.current.useCallback(L,U)},Ft.useContext=function(L){return nt.current.useContext(L)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(L){return nt.current.useDeferredValue(L)},Ft.useEffect=function(L,U){return nt.current.useEffect(L,U)},Ft.useId=function(){return nt.current.useId()},Ft.useImperativeHandle=function(L,U,ht){return nt.current.useImperativeHandle(L,U,ht)},Ft.useInsertionEffect=function(L,U){return nt.current.useInsertionEffect(L,U)},Ft.useLayoutEffect=function(L,U){return nt.current.useLayoutEffect(L,U)},Ft.useMemo=function(L,U){return nt.current.useMemo(L,U)},Ft.useReducer=function(L,U,ht){return nt.current.useReducer(L,U,ht)},Ft.useRef=function(L){return nt.current.useRef(L)},Ft.useState=function(L){return nt.current.useState(L)},Ft.useSyncExternalStore=function(L,U,ht){return nt.current.useSyncExternalStore(L,U,ht)},Ft.useTransition=function(){return nt.current.useTransition()},Ft.version="18.3.1",Ft}var Vx;function Hy(){return Vx||(Vx=1,av.exports=d1()),av.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function h1(){if(Wx)return Ou;Wx=1;var u=Hy(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,f){var g,y={},w=null,A=null;f!==void 0&&(w=""+f),p.key!==void 0&&(w=""+p.key),p.ref!==void 0&&(A=p.ref);for(g in p)i.call(p,g)&&!a.hasOwnProperty(g)&&(y[g]=p[g]);if(d&&d.defaultProps)for(g in p=d.defaultProps,p)y[g]===void 0&&(y[g]=p[g]);return{$$typeof:t,type:d,key:w,ref:A,props:y,_owner:r.current}}return Ou.Fragment=e,Ou.jsx=c,Ou.jsxs=c,Ou}var qx;function p1(){return qx||(qx=1,rv.exports=h1()),rv.exports}var Y=p1(),Rt=Hy();const tb=dm(Rt);var Kp={},ov={exports:{}},In={},lv={exports:{}},cv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function f1(){return Xx||(Xx=1,(function(u){function t(X,it){var Z=X.length;X.push(it);t:for(;0<Z;){var L=Z-1>>>1,U=X[L];if(0<r(U,it))X[L]=it,X[Z]=U,Z=L;else break t}}function e(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var it=X[0],Z=X.pop();if(Z!==it){X[0]=Z;t:for(var L=0,U=X.length,ht=U>>>1;L<ht;){var bt=2*(L+1)-1,Mt=X[bt],vt=bt+1,yt=X[vt];if(0>r(Mt,Z))vt<U&&0>r(yt,Mt)?(X[L]=yt,X[vt]=Z,L=vt):(X[L]=Mt,X[bt]=Z,L=bt);else if(vt<U&&0>r(yt,Z))X[L]=yt,X[vt]=Z,L=vt;else break t}}return it}function r(X,it){var Z=X.sortIndex-it.sortIndex;return Z!==0?Z:X.id-it.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;u.unstable_now=function(){return a.now()}}else{var c=Date,d=c.now();u.unstable_now=function(){return c.now()-d}}var p=[],f=[],g=1,y=null,w=3,A=!1,b=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(X){for(var it=e(f);it!==null;){if(it.callback===null)i(f);else if(it.startTime<=X)i(f),it.sortIndex=it.expirationTime,t(p,it);else break;it=e(f)}}function F(X){if(C=!1,z(X),!b)if(e(p)!==null)b=!0,J(D);else{var it=e(f);it!==null&&nt(F,it.startTime-X)}}function D(X,it){b=!1,C&&(C=!1,T($),$=-1),A=!0;var Z=w;try{for(z(it),y=e(p);y!==null&&(!(y.expirationTime>it)||X&&!Q());){var L=y.callback;if(typeof L=="function"){y.callback=null,w=y.priorityLevel;var U=L(y.expirationTime<=it);it=u.unstable_now(),typeof U=="function"?y.callback=U:y===e(p)&&i(p),z(it)}else i(p);y=e(p)}if(y!==null)var ht=!0;else{var bt=e(f);bt!==null&&nt(F,bt.startTime-it),ht=!1}return ht}finally{y=null,w=Z,A=!1}}var B=!1,N=null,$=-1,G=5,et=-1;function Q(){return!(u.unstable_now()-et<G)}function At(){if(N!==null){var X=u.unstable_now();et=X;var it=!0;try{it=N(!0,X)}finally{it?kt():(B=!1,N=null)}}else B=!1}var kt;if(typeof M=="function")kt=function(){M(At)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,It=dt.port2;dt.port1.onmessage=At,kt=function(){It.postMessage(null)}}else kt=function(){k(At,0)};function J(X){N=X,B||(B=!0,kt())}function nt(X,it){$=k(function(){X(u.unstable_now())},it)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(X){X.callback=null},u.unstable_continueExecution=function(){b||A||(b=!0,J(D))},u.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<X?Math.floor(1e3/X):5},u.unstable_getCurrentPriorityLevel=function(){return w},u.unstable_getFirstCallbackNode=function(){return e(p)},u.unstable_next=function(X){switch(w){case 1:case 2:case 3:var it=3;break;default:it=w}var Z=w;w=it;try{return X()}finally{w=Z}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(X,it){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Z=w;w=X;try{return it()}finally{w=Z}},u.unstable_scheduleCallback=function(X,it,Z){var L=u.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?L+Z:L):Z=L,X){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Z+U,X={id:g++,callback:it,priorityLevel:X,startTime:Z,expirationTime:U,sortIndex:-1},Z>L?(X.sortIndex=Z,t(f,X),e(p)===null&&X===e(f)&&(C?(T($),$=-1):C=!0,nt(F,Z-L))):(X.sortIndex=U,t(p,X),b||A||(b=!0,J(D))),X},u.unstable_shouldYield=Q,u.unstable_wrapCallback=function(X){var it=w;return function(){var Z=w;w=it;try{return X.apply(this,arguments)}finally{w=Z}}}})(cv)),cv}var Yx;function m1(){return Yx||(Yx=1,lv.exports=f1()),lv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kx;function g1(){if(Kx)return In;Kx=1;var u=Hy(),t=m1();function e(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function a(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function w(n){return p.call(y,n)?!0:p.call(g,n)?!1:f.test(n)?y[n]=!0:(g[n]=!0,!1)}function A(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,s,l,h){if(s===null||typeof s>"u"||A(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(n,s,l,h,m,v,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=v,this.removeEmptyString=_}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];k[s]=new C(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(T,M);k[s]=new C(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(T,M);k[s]=new C(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(T,M);k[s]=new C(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function z(n,s,l,h){var m=k.hasOwnProperty(s)?k[s]:null;(m!==null?m.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,l,m,h)&&(l=null),h||m===null?w(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):m.mustUseProperty?n[m.propertyName]=l===null?m.type===3?!1:"":l:(s=m.attributeName,h=m.attributeNamespace,l===null?n.removeAttribute(s):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var F=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),B=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),et=Symbol.for("react.provider"),Q=Symbol.for("react.context"),At=Symbol.for("react.forward_ref"),kt=Symbol.for("react.suspense"),dt=Symbol.for("react.suspense_list"),It=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),nt=Symbol.for("react.offscreen"),X=Symbol.iterator;function it(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var Z=Object.assign,L;function U(n){if(L===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var ht=!1;function bt(n,s){if(!n||ht)return"";ht=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(H){var h=H}Reflect.construct(n,[],s)}else{try{s.call()}catch(H){h=H}n.call(s.prototype)}else{try{throw Error()}catch(H){h=H}n()}}catch(H){if(H&&h&&typeof H.stack=="string"){for(var m=H.stack.split(`
`),v=h.stack.split(`
`),_=m.length-1,R=v.length-1;1<=_&&0<=R&&m[_]!==v[R];)R--;for(;1<=_&&0<=R;_--,R--)if(m[_]!==v[R]){if(_!==1||R!==1)do if(_--,R--,0>R||m[_]!==v[R]){var P=`
`+m[_].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=_&&0<=R);break}}}finally{ht=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?U(n):""}function Mt(n){switch(n.tag){case 5:return U(n.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return n=bt(n.type,!1),n;case 11:return n=bt(n.type.render,!1),n;case 1:return n=bt(n.type,!0),n;default:return""}}function vt(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case B:return"Portal";case G:return"Profiler";case $:return"StrictMode";case kt:return"Suspense";case dt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Q:return(n.displayName||"Context")+".Consumer";case et:return(n._context.displayName||"Context")+".Provider";case At:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case It:return s=n.displayName||null,s!==null?s:vt(n.type)||"Memo";case J:s=n._payload,n=n._init;try{return vt(n(s))}catch{}}return null}function yt(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vt(s);case 8:return s===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ot(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Wt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ee(n){var s=Wt(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(_){h=""+_,v.call(this,_)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function bs(n){n._valueTracker||(n._valueTracker=Ee(n))}function _s(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=Wt(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function Aa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function il(n,s){var l=s.checked;return Z({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Xc(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Ot(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Yc(n,s){s=s.checked,s!=null&&z(n,"checked",s,!1)}function qi(n,s){Yc(n,s);var l=Ot(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?fr(n,s.type,l):s.hasOwnProperty("defaultValue")&&fr(n,s.type,Ot(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function sl(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function fr(n,s,l){(s!=="number"||Aa(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Xi=Array.isArray;function mr(n,s,l,h){if(n=n.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=s.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&h&&(n[l].defaultSelected=!0)}else{for(l=""+Ot(l),s=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,h&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function Kc(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(e(91));return Z({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Uh(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(e(92));if(Xi(l)){if(1<l.length)throw Error(e(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:Ot(l)}}function st(n,s){var l=Ot(s.value),h=Ot(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function _t(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function ce(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ge(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?ce(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Oe,gr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,m){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,m)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Oe=Oe||document.createElement("div"),Oe.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Oe.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function ri(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qc=["Webkit","ms","Moz","O"];Object.keys(Es).forEach(function(n){Qc.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Es[s]=Es[n]})});function rl(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Es.hasOwnProperty(n)&&Es[n]?(""+s).trim():s+"px"}function ba(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,m=rl(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,m):n[l]=m}}var Jc=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _a(n,s){if(s){if(Jc[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(e(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(e(61))}if(s.style!=null&&typeof s.style!="object")throw Error(e(62))}}function Ea(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sa=null;function Zc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xm=null,al=null,ol=null;function a0(n){if(n=Au(n)){if(typeof xm!="function")throw Error(e(280));var s=n.stateNode;s&&(s=dp(s),xm(n.stateNode,n.type,s))}}function o0(n){al?ol?ol.push(n):ol=[n]:al=n}function l0(){if(al){var n=al,s=ol;if(ol=al=null,a0(n),s)for(n=0;n<s.length;n++)a0(s[n])}}function c0(n,s){return n(s)}function u0(){}var Am=!1;function d0(n,s,l){if(Am)return n(s,l);Am=!0;try{return c0(n,s,l)}finally{Am=!1,(al!==null||ol!==null)&&(u0(),l0())}}function tu(n,s){var l=n.stateNode;if(l===null)return null;var h=dp(l);if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,s,typeof l));return l}var bm=!1;if(d)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){bm=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{bm=!1}function mE(n,s,l,h,m,v,_,R,P){var H=Array.prototype.slice.call(arguments,3);try{s.apply(l,H)}catch(W){this.onError(W)}}var nu=!1,$h=null,Gh=!1,_m=null,gE={onError:function(n){nu=!0,$h=n}};function vE(n,s,l,h,m,v,_,R,P){nu=!1,$h=null,mE.apply(gE,arguments)}function yE(n,s,l,h,m,v,_,R,P){if(vE.apply(this,arguments),nu){if(nu){var H=$h;nu=!1,$h=null}else throw Error(e(198));Gh||(Gh=!0,_m=H)}}function Ca(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function h0(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function p0(n){if(Ca(n)!==n)throw Error(e(188))}function wE(n){var s=n.alternate;if(!s){if(s=Ca(n),s===null)throw Error(e(188));return s!==n?null:n}for(var l=n,h=s;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return p0(m),n;if(v===h)return p0(m),s;v=v.sibling}throw Error(e(188))}if(l.return!==h.return)l=m,h=v;else{for(var _=!1,R=m.child;R;){if(R===l){_=!0,l=m,h=v;break}if(R===h){_=!0,h=m,l=v;break}R=R.sibling}if(!_){for(R=v.child;R;){if(R===l){_=!0,l=v,h=m;break}if(R===h){_=!0,h=v,l=m;break}R=R.sibling}if(!_)throw Error(e(189))}}if(l.alternate!==h)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:s}function f0(n){return n=wE(n),n!==null?m0(n):null}function m0(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=m0(n);if(s!==null)return s;n=n.sibling}return null}var g0=t.unstable_scheduleCallback,v0=t.unstable_cancelCallback,xE=t.unstable_shouldYield,AE=t.unstable_requestPaint,we=t.unstable_now,bE=t.unstable_getCurrentPriorityLevel,Em=t.unstable_ImmediatePriority,y0=t.unstable_UserBlockingPriority,Vh=t.unstable_NormalPriority,_E=t.unstable_LowPriority,w0=t.unstable_IdlePriority,Wh=null,Yi=null;function EE(n){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(Wh,n,void 0,(n.current.flags&128)===128)}catch{}}var _i=Math.clz32?Math.clz32:kE,SE=Math.log,CE=Math.LN2;function kE(n){return n>>>=0,n===0?32:31-(SE(n)/CE|0)|0}var qh=64,Xh=4194304;function iu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Yh(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,m=n.suspendedLanes,v=n.pingedLanes,_=l&268435455;if(_!==0){var R=_&~m;R!==0?h=iu(R):(v&=_,v!==0&&(h=iu(v)))}else _=l&~m,_!==0?h=iu(_):v!==0&&(h=iu(v));if(h===0)return 0;if(s!==0&&s!==h&&(s&m)===0&&(m=h&-h,v=s&-s,m>=v||m===16&&(v&4194240)!==0))return s;if((h&4)!==0&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-_i(s),m=1<<l,h|=n[l],s&=~m;return h}function TE(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RE(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,m=n.expirationTimes,v=n.pendingLanes;0<v;){var _=31-_i(v),R=1<<_,P=m[_];P===-1?((R&l)===0||(R&h)!==0)&&(m[_]=TE(R,s)):P<=s&&(n.expiredLanes|=R),v&=~R}}function Sm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function x0(){var n=qh;return qh<<=1,(qh&4194240)===0&&(qh=64),n}function Cm(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function su(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-_i(s),n[s]=l}function PE(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var m=31-_i(l),v=1<<m;s[m]=0,h[m]=-1,n[m]=-1,l&=~v}}function km(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-_i(l),m=1<<h;m&s|n[h]&s&&(n[h]|=s),l&=~m}}var qt=0;function A0(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var b0,Tm,_0,E0,S0,Rm=!1,Kh=[],vr=null,yr=null,wr=null,ru=new Map,au=new Map,xr=[],IE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C0(n,s){switch(n){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":ru.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(s.pointerId)}}function ou(n,s,l,h,m,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},s!==null&&(s=Au(s),s!==null&&Tm(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function ME(n,s,l,h,m){switch(s){case"focusin":return vr=ou(vr,n,s,l,h,m),!0;case"dragenter":return yr=ou(yr,n,s,l,h,m),!0;case"mouseover":return wr=ou(wr,n,s,l,h,m),!0;case"pointerover":var v=m.pointerId;return ru.set(v,ou(ru.get(v)||null,n,s,l,h,m)),!0;case"gotpointercapture":return v=m.pointerId,au.set(v,ou(au.get(v)||null,n,s,l,h,m)),!0}return!1}function k0(n){var s=ka(n.target);if(s!==null){var l=Ca(s);if(l!==null){if(s=l.tag,s===13){if(s=h0(l),s!==null){n.blockedOn=s,S0(n.priority,function(){_0(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=Im(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Sa=h,l.target.dispatchEvent(h),Sa=null}else return s=Au(l),s!==null&&Tm(s),n.blockedOn=l,!1;s.shift()}return!0}function T0(n,s,l){Qh(n)&&l.delete(s)}function LE(){Rm=!1,vr!==null&&Qh(vr)&&(vr=null),yr!==null&&Qh(yr)&&(yr=null),wr!==null&&Qh(wr)&&(wr=null),ru.forEach(T0),au.forEach(T0)}function lu(n,s){n.blockedOn===s&&(n.blockedOn=null,Rm||(Rm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,LE)))}function cu(n){function s(m){return lu(m,n)}if(0<Kh.length){lu(Kh[0],n);for(var l=1;l<Kh.length;l++){var h=Kh[l];h.blockedOn===n&&(h.blockedOn=null)}}for(vr!==null&&lu(vr,n),yr!==null&&lu(yr,n),wr!==null&&lu(wr,n),ru.forEach(s),au.forEach(s),l=0;l<xr.length;l++)h=xr[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<xr.length&&(l=xr[0],l.blockedOn===null);)k0(l),l.blockedOn===null&&xr.shift()}var ll=F.ReactCurrentBatchConfig,Jh=!0;function DE(n,s,l,h){var m=qt,v=ll.transition;ll.transition=null;try{qt=1,Pm(n,s,l,h)}finally{qt=m,ll.transition=v}}function NE(n,s,l,h){var m=qt,v=ll.transition;ll.transition=null;try{qt=4,Pm(n,s,l,h)}finally{qt=m,ll.transition=v}}function Pm(n,s,l,h){if(Jh){var m=Im(n,s,l,h);if(m===null)Xm(n,s,h,Zh,l),C0(n,h);else if(ME(m,n,s,l,h))h.stopPropagation();else if(C0(n,h),s&4&&-1<IE.indexOf(n)){for(;m!==null;){var v=Au(m);if(v!==null&&b0(v),v=Im(n,s,l,h),v===null&&Xm(n,s,h,Zh,l),v===m)break;m=v}m!==null&&h.stopPropagation()}else Xm(n,s,h,null,l)}}var Zh=null;function Im(n,s,l,h){if(Zh=null,n=Zc(h),n=ka(n),n!==null)if(s=Ca(n),s===null)n=null;else if(l=s.tag,l===13){if(n=h0(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Zh=n,null}function R0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bE()){case Em:return 1;case y0:return 4;case Vh:case _E:return 16;case w0:return 536870912;default:return 16}default:return 16}}var Ar=null,Mm=null,tp=null;function P0(){if(tp)return tp;var n,s=Mm,l=s.length,h,m="value"in Ar?Ar.value:Ar.textContent,v=m.length;for(n=0;n<l&&s[n]===m[n];n++);var _=l-n;for(h=1;h<=_&&s[l-h]===m[v-h];h++);return tp=m.slice(n,1<h?1-h:void 0)}function ep(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function np(){return!0}function I0(){return!1}function zn(n){function s(l,h,m,v,_){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(l=n[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?np:I0,this.isPropagationStopped=I0,this}return Z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=np)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=np)},persist:function(){},isPersistent:np}),s}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lm=zn(cl),uu=Z({},cl,{view:0,detail:0}),OE=zn(uu),Dm,Nm,du,ip=Z({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fm,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==du&&(du&&n.type==="mousemove"?(Dm=n.screenX-du.screenX,Nm=n.screenY-du.screenY):Nm=Dm=0,du=n),Dm)},movementY:function(n){return"movementY"in n?n.movementY:Nm}}),M0=zn(ip),FE=Z({},ip,{dataTransfer:0}),jE=zn(FE),zE=Z({},uu,{relatedTarget:0}),Om=zn(zE),BE=Z({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),HE=zn(BE),UE=Z({},cl,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$E=zn(UE),GE=Z({},cl,{data:0}),L0=zn(GE),VE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XE(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=qE[n])?!!s[n]:!1}function Fm(){return XE}var YE=Z({},uu,{key:function(n){if(n.key){var s=VE[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ep(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?WE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fm,charCode:function(n){return n.type==="keypress"?ep(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ep(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),KE=zn(YE),QE=Z({},ip,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D0=zn(QE),JE=Z({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fm}),ZE=zn(JE),tS=Z({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),eS=zn(tS),nS=Z({},ip,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),iS=zn(nS),sS=[9,13,27,32],jm=d&&"CompositionEvent"in window,hu=null;d&&"documentMode"in document&&(hu=document.documentMode);var rS=d&&"TextEvent"in window&&!hu,N0=d&&(!jm||hu&&8<hu&&11>=hu),O0=" ",F0=!1;function j0(n,s){switch(n){case"keyup":return sS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ul=!1;function aS(n,s){switch(n){case"compositionend":return z0(s);case"keypress":return s.which!==32?null:(F0=!0,O0);case"textInput":return n=s.data,n===O0&&F0?null:n;default:return null}}function oS(n,s){if(ul)return n==="compositionend"||!jm&&j0(n,s)?(n=P0(),tp=Mm=Ar=null,ul=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return N0&&s.locale!=="ko"?null:s.data;default:return null}}var lS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!lS[n.type]:s==="textarea"}function H0(n,s,l,h){o0(h),s=lp(s,"onChange"),0<s.length&&(l=new Lm("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var pu=null,fu=null;function cS(n){rw(n,0)}function sp(n){var s=ml(n);if(_s(s))return n}function uS(n,s){if(n==="change")return s}var U0=!1;if(d){var zm;if(d){var Bm="oninput"in document;if(!Bm){var $0=document.createElement("div");$0.setAttribute("oninput","return;"),Bm=typeof $0.oninput=="function"}zm=Bm}else zm=!1;U0=zm&&(!document.documentMode||9<document.documentMode)}function G0(){pu&&(pu.detachEvent("onpropertychange",V0),fu=pu=null)}function V0(n){if(n.propertyName==="value"&&sp(fu)){var s=[];H0(s,fu,n,Zc(n)),d0(cS,s)}}function dS(n,s,l){n==="focusin"?(G0(),pu=s,fu=l,pu.attachEvent("onpropertychange",V0)):n==="focusout"&&G0()}function hS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sp(fu)}function pS(n,s){if(n==="click")return sp(s)}function fS(n,s){if(n==="input"||n==="change")return sp(s)}function mS(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ei=typeof Object.is=="function"?Object.is:mS;function mu(n,s){if(Ei(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!p.call(s,m)||!Ei(n[m],s[m]))return!1}return!0}function W0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function q0(n,s){var l=W0(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=W0(l)}}function X0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?X0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Y0(){for(var n=window,s=Aa();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=Aa(n.document)}return s}function Hm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function gS(n){var s=Y0(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&X0(l.ownerDocument.documentElement,l)){if(h!==null&&Hm(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var m=l.textContent.length,v=Math.min(h.start,m);h=h.end===void 0?v:Math.min(h.end,m),!n.extend&&v>h&&(m=h,h=v,v=m),m=q0(l,v);var _=q0(l,h);m&&_&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),n.removeAllRanges(),v>h?(n.addRange(s),n.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var vS=d&&"documentMode"in document&&11>=document.documentMode,dl=null,Um=null,gu=null,$m=!1;function K0(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;$m||dl==null||dl!==Aa(h)||(h=dl,"selectionStart"in h&&Hm(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),gu&&mu(gu,h)||(gu=h,h=lp(Um,"onSelect"),0<h.length&&(s=new Lm("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=dl)))}function rp(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var hl={animationend:rp("Animation","AnimationEnd"),animationiteration:rp("Animation","AnimationIteration"),animationstart:rp("Animation","AnimationStart"),transitionend:rp("Transition","TransitionEnd")},Gm={},Q0={};d&&(Q0=document.createElement("div").style,"AnimationEvent"in window||(delete hl.animationend.animation,delete hl.animationiteration.animation,delete hl.animationstart.animation),"TransitionEvent"in window||delete hl.transitionend.transition);function ap(n){if(Gm[n])return Gm[n];if(!hl[n])return n;var s=hl[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Q0)return Gm[n]=s[l];return n}var J0=ap("animationend"),Z0=ap("animationiteration"),tw=ap("animationstart"),ew=ap("transitionend"),nw=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(n,s){nw.set(n,s),a(s,[n])}for(var Vm=0;Vm<iw.length;Vm++){var Wm=iw[Vm],yS=Wm.toLowerCase(),wS=Wm[0].toUpperCase()+Wm.slice(1);br(yS,"on"+wS)}br(J0,"onAnimationEnd"),br(Z0,"onAnimationIteration"),br(tw,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(ew,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xS=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function sw(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,yE(h,s,void 0,n),n.currentTarget=null}function rw(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],m=h.event;h=h.listeners;t:{var v=void 0;if(s)for(var _=h.length-1;0<=_;_--){var R=h[_],P=R.instance,H=R.currentTarget;if(R=R.listener,P!==v&&m.isPropagationStopped())break t;sw(m,R,H),v=P}else for(_=0;_<h.length;_++){if(R=h[_],P=R.instance,H=R.currentTarget,R=R.listener,P!==v&&m.isPropagationStopped())break t;sw(m,R,H),v=P}}}if(Gh)throw n=_m,Gh=!1,_m=null,n}function ne(n,s){var l=s[tg];l===void 0&&(l=s[tg]=new Set);var h=n+"__bubble";l.has(h)||(aw(s,n,2,!1),l.add(h))}function qm(n,s,l){var h=0;s&&(h|=4),aw(l,n,h,s)}var op="_reactListening"+Math.random().toString(36).slice(2);function yu(n){if(!n[op]){n[op]=!0,i.forEach(function(l){l!=="selectionchange"&&(xS.has(l)||qm(l,!1,n),qm(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[op]||(s[op]=!0,qm("selectionchange",!1,s))}}function aw(n,s,l,h){switch(R0(s)){case 1:var m=DE;break;case 4:m=NE;break;default:m=Pm}l=m.bind(null,s,l,n),m=void 0,!bm||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),h?m!==void 0?n.addEventListener(s,l,{capture:!0,passive:m}):n.addEventListener(s,l,!0):m!==void 0?n.addEventListener(s,l,{passive:m}):n.addEventListener(s,l,!1)}function Xm(n,s,l,h,m){var v=h;if((s&1)===0&&(s&2)===0&&h!==null)t:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var R=h.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(_===4)for(_=h.return;_!==null;){var P=_.tag;if((P===3||P===4)&&(P=_.stateNode.containerInfo,P===m||P.nodeType===8&&P.parentNode===m))return;_=_.return}for(;R!==null;){if(_=ka(R),_===null)return;if(P=_.tag,P===5||P===6){h=v=_;continue t}R=R.parentNode}}h=h.return}d0(function(){var H=v,W=Zc(l),q=[];t:{var V=nw.get(n);if(V!==void 0){var rt=Lm,ut=n;switch(n){case"keypress":if(ep(l)===0)break t;case"keydown":case"keyup":rt=KE;break;case"focusin":ut="focus",rt=Om;break;case"focusout":ut="blur",rt=Om;break;case"beforeblur":case"afterblur":rt=Om;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=M0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=jE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=ZE;break;case J0:case Z0:case tw:rt=HE;break;case ew:rt=eS;break;case"scroll":rt=OE;break;case"wheel":rt=iS;break;case"copy":case"cut":case"paste":rt=$E;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=D0}var pt=(s&4)!==0,xe=!pt&&n==="scroll",O=pt?V!==null?V+"Capture":null:V;pt=[];for(var I=H,j;I!==null;){j=I;var K=j.stateNode;if(j.tag===5&&K!==null&&(j=K,O!==null&&(K=tu(I,O),K!=null&&pt.push(wu(I,K,j)))),xe)break;I=I.return}0<pt.length&&(V=new rt(V,ut,null,l,W),q.push({event:V,listeners:pt}))}}if((s&7)===0){t:{if(V=n==="mouseover"||n==="pointerover",rt=n==="mouseout"||n==="pointerout",V&&l!==Sa&&(ut=l.relatedTarget||l.fromElement)&&(ka(ut)||ut[Ss]))break t;if((rt||V)&&(V=W.window===W?W:(V=W.ownerDocument)?V.defaultView||V.parentWindow:window,rt?(ut=l.relatedTarget||l.toElement,rt=H,ut=ut?ka(ut):null,ut!==null&&(xe=Ca(ut),ut!==xe||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(rt=null,ut=H),rt!==ut)){if(pt=M0,K="onMouseLeave",O="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(pt=D0,K="onPointerLeave",O="onPointerEnter",I="pointer"),xe=rt==null?V:ml(rt),j=ut==null?V:ml(ut),V=new pt(K,I+"leave",rt,l,W),V.target=xe,V.relatedTarget=j,K=null,ka(W)===H&&(pt=new pt(O,I+"enter",ut,l,W),pt.target=j,pt.relatedTarget=xe,K=pt),xe=K,rt&&ut)e:{for(pt=rt,O=ut,I=0,j=pt;j;j=pl(j))I++;for(j=0,K=O;K;K=pl(K))j++;for(;0<I-j;)pt=pl(pt),I--;for(;0<j-I;)O=pl(O),j--;for(;I--;){if(pt===O||O!==null&&pt===O.alternate)break e;pt=pl(pt),O=pl(O)}pt=null}else pt=null;rt!==null&&ow(q,V,rt,pt,!1),ut!==null&&xe!==null&&ow(q,xe,ut,pt,!0)}}t:{if(V=H?ml(H):window,rt=V.nodeName&&V.nodeName.toLowerCase(),rt==="select"||rt==="input"&&V.type==="file")var ft=uS;else if(B0(V))if(U0)ft=fS;else{ft=hS;var wt=dS}else(rt=V.nodeName)&&rt.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(ft=pS);if(ft&&(ft=ft(n,H))){H0(q,ft,l,W);break t}wt&&wt(n,V,H),n==="focusout"&&(wt=V._wrapperState)&&wt.controlled&&V.type==="number"&&fr(V,"number",V.value)}switch(wt=H?ml(H):window,n){case"focusin":(B0(wt)||wt.contentEditable==="true")&&(dl=wt,Um=H,gu=null);break;case"focusout":gu=Um=dl=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,K0(q,l,W);break;case"selectionchange":if(vS)break;case"keydown":case"keyup":K0(q,l,W)}var xt;if(jm)t:{switch(n){case"compositionstart":var Ct="onCompositionStart";break t;case"compositionend":Ct="onCompositionEnd";break t;case"compositionupdate":Ct="onCompositionUpdate";break t}Ct=void 0}else ul?j0(n,l)&&(Ct="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Ct="onCompositionStart");Ct&&(N0&&l.locale!=="ko"&&(ul||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&ul&&(xt=P0()):(Ar=W,Mm="value"in Ar?Ar.value:Ar.textContent,ul=!0)),wt=lp(H,Ct),0<wt.length&&(Ct=new L0(Ct,n,null,l,W),q.push({event:Ct,listeners:wt}),xt?Ct.data=xt:(xt=z0(l),xt!==null&&(Ct.data=xt)))),(xt=rS?aS(n,l):oS(n,l))&&(H=lp(H,"onBeforeInput"),0<H.length&&(W=new L0("onBeforeInput","beforeinput",null,l,W),q.push({event:W,listeners:H}),W.data=xt))}rw(q,s)})}function wu(n,s,l){return{instance:n,listener:s,currentTarget:l}}function lp(n,s){for(var l=s+"Capture",h=[];n!==null;){var m=n,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=tu(n,l),v!=null&&h.unshift(wu(n,v,m)),v=tu(n,s),v!=null&&h.push(wu(n,v,m))),n=n.return}return h}function pl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ow(n,s,l,h,m){for(var v=s._reactName,_=[];l!==null&&l!==h;){var R=l,P=R.alternate,H=R.stateNode;if(P!==null&&P===h)break;R.tag===5&&H!==null&&(R=H,m?(P=tu(l,v),P!=null&&_.unshift(wu(l,P,R))):m||(P=tu(l,v),P!=null&&_.push(wu(l,P,R)))),l=l.return}_.length!==0&&n.push({event:s,listeners:_})}var AS=/\r\n?/g,bS=/\u0000|\uFFFD/g;function lw(n){return(typeof n=="string"?n:""+n).replace(AS,`
`).replace(bS,"")}function cp(n,s,l){if(s=lw(s),lw(n)!==s&&l)throw Error(e(425))}function up(){}var Ym=null,Km=null;function Qm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jm=typeof setTimeout=="function"?setTimeout:void 0,_S=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(n){return cw.resolve(null).then(n).catch(SS)}:Jm;function SS(n){setTimeout(function(){throw n})}function Zm(n,s){var l=s,h=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(h===0){n.removeChild(m),cu(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=m}while(l);cu(s)}function _r(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function uw(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var fl=Math.random().toString(36).slice(2),Ki="__reactFiber$"+fl,xu="__reactProps$"+fl,Ss="__reactContainer$"+fl,tg="__reactEvents$"+fl,CS="__reactListeners$"+fl,kS="__reactHandles$"+fl;function ka(n){var s=n[Ki];if(s)return s;for(var l=n.parentNode;l;){if(s=l[Ss]||l[Ki]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=uw(n);n!==null;){if(l=n[Ki])return l;n=uw(n)}return s}n=l,l=n.parentNode}return null}function Au(n){return n=n[Ki]||n[Ss],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ml(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function dp(n){return n[xu]||null}var eg=[],gl=-1;function Er(n){return{current:n}}function ie(n){0>gl||(n.current=eg[gl],eg[gl]=null,gl--)}function te(n,s){gl++,eg[gl]=n.current,n.current=s}var Sr={},tn=Er(Sr),Cn=Er(!1),Ta=Sr;function vl(n,s){var l=n.type.contextTypes;if(!l)return Sr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=s[v];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=m),m}function kn(n){return n=n.childContextTypes,n!=null}function hp(){ie(Cn),ie(tn)}function dw(n,s,l){if(tn.current!==Sr)throw Error(e(168));te(tn,s),te(Cn,l)}function hw(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var m in h)if(!(m in s))throw Error(e(108,yt(n)||"Unknown",m));return Z({},l,h)}function pp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Sr,Ta=tn.current,te(tn,n),te(Cn,Cn.current),!0}function pw(n,s,l){var h=n.stateNode;if(!h)throw Error(e(169));l?(n=hw(n,s,Ta),h.__reactInternalMemoizedMergedChildContext=n,ie(Cn),ie(tn),te(tn,n)):ie(Cn),te(Cn,l)}var Cs=null,fp=!1,ng=!1;function fw(n){Cs===null?Cs=[n]:Cs.push(n)}function TS(n){fp=!0,fw(n)}function Cr(){if(!ng&&Cs!==null){ng=!0;var n=0,s=qt;try{var l=Cs;for(qt=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}Cs=null,fp=!1}catch(m){throw Cs!==null&&(Cs=Cs.slice(n+1)),g0(Em,Cr),m}finally{qt=s,ng=!1}}return null}var yl=[],wl=0,mp=null,gp=0,ai=[],oi=0,Ra=null,ks=1,Ts="";function Pa(n,s){yl[wl++]=gp,yl[wl++]=mp,mp=n,gp=s}function mw(n,s,l){ai[oi++]=ks,ai[oi++]=Ts,ai[oi++]=Ra,Ra=n;var h=ks;n=Ts;var m=32-_i(h)-1;h&=~(1<<m),l+=1;var v=32-_i(s)+m;if(30<v){var _=m-m%5;v=(h&(1<<_)-1).toString(32),h>>=_,m-=_,ks=1<<32-_i(s)+m|l<<m|h,Ts=v+n}else ks=1<<v|l<<m|h,Ts=n}function ig(n){n.return!==null&&(Pa(n,1),mw(n,1,0))}function sg(n){for(;n===mp;)mp=yl[--wl],yl[wl]=null,gp=yl[--wl],yl[wl]=null;for(;n===Ra;)Ra=ai[--oi],ai[oi]=null,Ts=ai[--oi],ai[oi]=null,ks=ai[--oi],ai[oi]=null}var Bn=null,Hn=null,re=!1,Si=null;function gw(n,s){var l=di(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function vw(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Bn=n,Hn=_r(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Bn=n,Hn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=Ra!==null?{id:ks,overflow:Ts}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=di(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,Bn=n,Hn=null,!0):!1;default:return!1}}function rg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ag(n){if(re){var s=Hn;if(s){var l=s;if(!vw(n,s)){if(rg(n))throw Error(e(418));s=_r(l.nextSibling);var h=Bn;s&&vw(n,s)?gw(h,l):(n.flags=n.flags&-4097|2,re=!1,Bn=n)}}else{if(rg(n))throw Error(e(418));n.flags=n.flags&-4097|2,re=!1,Bn=n}}}function yw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Bn=n}function vp(n){if(n!==Bn)return!1;if(!re)return yw(n),re=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Qm(n.type,n.memoizedProps)),s&&(s=Hn)){if(rg(n))throw ww(),Error(e(418));for(;s;)gw(n,s),s=_r(s.nextSibling)}if(yw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){Hn=_r(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}Hn=null}}else Hn=Bn?_r(n.stateNode.nextSibling):null;return!0}function ww(){for(var n=Hn;n;)n=_r(n.nextSibling)}function xl(){Hn=Bn=null,re=!1}function og(n){Si===null?Si=[n]:Si.push(n)}var RS=F.ReactCurrentBatchConfig;function bu(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var h=l.stateNode}if(!h)throw Error(e(147,n));var m=h,v=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(_){var R=m.refs;_===null?delete R[v]:R[v]=_},s._stringRef=v,s)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function yp(n,s){throw n=Object.prototype.toString.call(s),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function xw(n){var s=n._init;return s(n._payload)}function Aw(n){function s(O,I){if(n){var j=O.deletions;j===null?(O.deletions=[I],O.flags|=16):j.push(I)}}function l(O,I){if(!n)return null;for(;I!==null;)s(O,I),I=I.sibling;return null}function h(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function m(O,I){return O=Dr(O,I),O.index=0,O.sibling=null,O}function v(O,I,j){return O.index=j,n?(j=O.alternate,j!==null?(j=j.index,j<I?(O.flags|=2,I):j):(O.flags|=2,I)):(O.flags|=1048576,I)}function _(O){return n&&O.alternate===null&&(O.flags|=2),O}function R(O,I,j,K){return I===null||I.tag!==6?(I=Jg(j,O.mode,K),I.return=O,I):(I=m(I,j),I.return=O,I)}function P(O,I,j,K){var ft=j.type;return ft===N?W(O,I,j.props.children,K,j.key):I!==null&&(I.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===J&&xw(ft)===I.type)?(K=m(I,j.props),K.ref=bu(O,I,j),K.return=O,K):(K=Up(j.type,j.key,j.props,null,O.mode,K),K.ref=bu(O,I,j),K.return=O,K)}function H(O,I,j,K){return I===null||I.tag!==4||I.stateNode.containerInfo!==j.containerInfo||I.stateNode.implementation!==j.implementation?(I=Zg(j,O.mode,K),I.return=O,I):(I=m(I,j.children||[]),I.return=O,I)}function W(O,I,j,K,ft){return I===null||I.tag!==7?(I=ja(j,O.mode,K,ft),I.return=O,I):(I=m(I,j),I.return=O,I)}function q(O,I,j){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Jg(""+I,O.mode,j),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case D:return j=Up(I.type,I.key,I.props,null,O.mode,j),j.ref=bu(O,null,I),j.return=O,j;case B:return I=Zg(I,O.mode,j),I.return=O,I;case J:var K=I._init;return q(O,K(I._payload),j)}if(Xi(I)||it(I))return I=ja(I,O.mode,j,null),I.return=O,I;yp(O,I)}return null}function V(O,I,j,K){var ft=I!==null?I.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return ft!==null?null:R(O,I,""+j,K);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case D:return j.key===ft?P(O,I,j,K):null;case B:return j.key===ft?H(O,I,j,K):null;case J:return ft=j._init,V(O,I,ft(j._payload),K)}if(Xi(j)||it(j))return ft!==null?null:W(O,I,j,K,null);yp(O,j)}return null}function rt(O,I,j,K,ft){if(typeof K=="string"&&K!==""||typeof K=="number")return O=O.get(j)||null,R(I,O,""+K,ft);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case D:return O=O.get(K.key===null?j:K.key)||null,P(I,O,K,ft);case B:return O=O.get(K.key===null?j:K.key)||null,H(I,O,K,ft);case J:var wt=K._init;return rt(O,I,j,wt(K._payload),ft)}if(Xi(K)||it(K))return O=O.get(j)||null,W(I,O,K,ft,null);yp(I,K)}return null}function ut(O,I,j,K){for(var ft=null,wt=null,xt=I,Ct=I=0,ze=null;xt!==null&&Ct<j.length;Ct++){xt.index>Ct?(ze=xt,xt=null):ze=xt.sibling;var $t=V(O,xt,j[Ct],K);if($t===null){xt===null&&(xt=ze);break}n&&xt&&$t.alternate===null&&s(O,xt),I=v($t,I,Ct),wt===null?ft=$t:wt.sibling=$t,wt=$t,xt=ze}if(Ct===j.length)return l(O,xt),re&&Pa(O,Ct),ft;if(xt===null){for(;Ct<j.length;Ct++)xt=q(O,j[Ct],K),xt!==null&&(I=v(xt,I,Ct),wt===null?ft=xt:wt.sibling=xt,wt=xt);return re&&Pa(O,Ct),ft}for(xt=h(O,xt);Ct<j.length;Ct++)ze=rt(xt,O,Ct,j[Ct],K),ze!==null&&(n&&ze.alternate!==null&&xt.delete(ze.key===null?Ct:ze.key),I=v(ze,I,Ct),wt===null?ft=ze:wt.sibling=ze,wt=ze);return n&&xt.forEach(function(Nr){return s(O,Nr)}),re&&Pa(O,Ct),ft}function pt(O,I,j,K){var ft=it(j);if(typeof ft!="function")throw Error(e(150));if(j=ft.call(j),j==null)throw Error(e(151));for(var wt=ft=null,xt=I,Ct=I=0,ze=null,$t=j.next();xt!==null&&!$t.done;Ct++,$t=j.next()){xt.index>Ct?(ze=xt,xt=null):ze=xt.sibling;var Nr=V(O,xt,$t.value,K);if(Nr===null){xt===null&&(xt=ze);break}n&&xt&&Nr.alternate===null&&s(O,xt),I=v(Nr,I,Ct),wt===null?ft=Nr:wt.sibling=Nr,wt=Nr,xt=ze}if($t.done)return l(O,xt),re&&Pa(O,Ct),ft;if(xt===null){for(;!$t.done;Ct++,$t=j.next())$t=q(O,$t.value,K),$t!==null&&(I=v($t,I,Ct),wt===null?ft=$t:wt.sibling=$t,wt=$t);return re&&Pa(O,Ct),ft}for(xt=h(O,xt);!$t.done;Ct++,$t=j.next())$t=rt(xt,O,Ct,$t.value,K),$t!==null&&(n&&$t.alternate!==null&&xt.delete($t.key===null?Ct:$t.key),I=v($t,I,Ct),wt===null?ft=$t:wt.sibling=$t,wt=$t);return n&&xt.forEach(function(l1){return s(O,l1)}),re&&Pa(O,Ct),ft}function xe(O,I,j,K){if(typeof j=="object"&&j!==null&&j.type===N&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case D:t:{for(var ft=j.key,wt=I;wt!==null;){if(wt.key===ft){if(ft=j.type,ft===N){if(wt.tag===7){l(O,wt.sibling),I=m(wt,j.props.children),I.return=O,O=I;break t}}else if(wt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===J&&xw(ft)===wt.type){l(O,wt.sibling),I=m(wt,j.props),I.ref=bu(O,wt,j),I.return=O,O=I;break t}l(O,wt);break}else s(O,wt);wt=wt.sibling}j.type===N?(I=ja(j.props.children,O.mode,K,j.key),I.return=O,O=I):(K=Up(j.type,j.key,j.props,null,O.mode,K),K.ref=bu(O,I,j),K.return=O,O=K)}return _(O);case B:t:{for(wt=j.key;I!==null;){if(I.key===wt)if(I.tag===4&&I.stateNode.containerInfo===j.containerInfo&&I.stateNode.implementation===j.implementation){l(O,I.sibling),I=m(I,j.children||[]),I.return=O,O=I;break t}else{l(O,I);break}else s(O,I);I=I.sibling}I=Zg(j,O.mode,K),I.return=O,O=I}return _(O);case J:return wt=j._init,xe(O,I,wt(j._payload),K)}if(Xi(j))return ut(O,I,j,K);if(it(j))return pt(O,I,j,K);yp(O,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,I!==null&&I.tag===6?(l(O,I.sibling),I=m(I,j),I.return=O,O=I):(l(O,I),I=Jg(j,O.mode,K),I.return=O,O=I),_(O)):l(O,I)}return xe}var Al=Aw(!0),bw=Aw(!1),wp=Er(null),xp=null,bl=null,lg=null;function cg(){lg=bl=xp=null}function ug(n){var s=wp.current;ie(wp),n._currentValue=s}function dg(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function _l(n,s){xp=n,lg=bl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Tn=!0),n.firstContext=null)}function li(n){var s=n._currentValue;if(lg!==n)if(n={context:n,memoizedValue:s,next:null},bl===null){if(xp===null)throw Error(e(308));bl=n,xp.dependencies={lanes:0,firstContext:n}}else bl=bl.next=n;return s}var Ia=null;function hg(n){Ia===null?Ia=[n]:Ia.push(n)}function _w(n,s,l,h){var m=s.interleaved;return m===null?(l.next=l,hg(s)):(l.next=m.next,m.next=l),s.interleaved=l,Rs(n,h)}function Rs(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var kr=!1;function pg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ew(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ps(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function Tr(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Ht&2)!==0){var m=h.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),h.pending=s,Rs(n,l)}return m=h.interleaved,m===null?(s.next=s,hg(h)):(s.next=m.next,m.next=s),h.interleaved=s,Rs(n,l)}function Ap(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,km(n,l)}}function Sw(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var _={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=_:v=v.next=_,l=l.next}while(l!==null);v===null?m=v=s:v=v.next=s}else m=v=s;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function bp(n,s,l,h){var m=n.updateQueue;kr=!1;var v=m.firstBaseUpdate,_=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var P=R,H=P.next;P.next=null,_===null?v=H:_.next=H,_=P;var W=n.alternate;W!==null&&(W=W.updateQueue,R=W.lastBaseUpdate,R!==_&&(R===null?W.firstBaseUpdate=H:R.next=H,W.lastBaseUpdate=P))}if(v!==null){var q=m.baseState;_=0,W=H=P=null,R=v;do{var V=R.lane,rt=R.eventTime;if((h&V)===V){W!==null&&(W=W.next={eventTime:rt,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});t:{var ut=n,pt=R;switch(V=s,rt=l,pt.tag){case 1:if(ut=pt.payload,typeof ut=="function"){q=ut.call(rt,q,V);break t}q=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=pt.payload,V=typeof ut=="function"?ut.call(rt,q,V):ut,V==null)break t;q=Z({},q,V);break t;case 2:kr=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,V=m.effects,V===null?m.effects=[R]:V.push(R))}else rt={eventTime:rt,lane:V,tag:R.tag,payload:R.payload,callback:R.callback,next:null},W===null?(H=W=rt,P=q):W=W.next=rt,_|=V;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;V=R,R=V.next,V.next=null,m.lastBaseUpdate=V,m.shared.pending=null}}while(!0);if(W===null&&(P=q),m.baseState=P,m.firstBaseUpdate=H,m.lastBaseUpdate=W,s=m.shared.interleaved,s!==null){m=s;do _|=m.lane,m=m.next;while(m!==s)}else v===null&&(m.shared.lanes=0);Da|=_,n.lanes=_,n.memoizedState=q}}function Cw(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],m=h.callback;if(m!==null){if(h.callback=null,h=l,typeof m!="function")throw Error(e(191,m));m.call(h)}}}var _u={},Qi=Er(_u),Eu=Er(_u),Su=Er(_u);function Ma(n){if(n===_u)throw Error(e(174));return n}function fg(n,s){switch(te(Su,s),te(Eu,n),te(Qi,_u),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ge(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=ge(s,n)}ie(Qi),te(Qi,s)}function El(){ie(Qi),ie(Eu),ie(Su)}function kw(n){Ma(Su.current);var s=Ma(Qi.current),l=ge(s,n.type);s!==l&&(te(Eu,n),te(Qi,l))}function mg(n){Eu.current===n&&(ie(Qi),ie(Eu))}var ue=Er(0);function _p(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var gg=[];function vg(){for(var n=0;n<gg.length;n++)gg[n]._workInProgressVersionPrimary=null;gg.length=0}var Ep=F.ReactCurrentDispatcher,yg=F.ReactCurrentBatchConfig,La=0,de=null,Re=null,Fe=null,Sp=!1,Cu=!1,ku=0,PS=0;function en(){throw Error(e(321))}function wg(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Ei(n[l],s[l]))return!1;return!0}function xg(n,s,l,h,m,v){if(La=v,de=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ep.current=n===null||n.memoizedState===null?DS:NS,n=l(h,m),Cu){v=0;do{if(Cu=!1,ku=0,25<=v)throw Error(e(301));v+=1,Fe=Re=null,s.updateQueue=null,Ep.current=OS,n=l(h,m)}while(Cu)}if(Ep.current=Tp,s=Re!==null&&Re.next!==null,La=0,Fe=Re=de=null,Sp=!1,s)throw Error(e(300));return n}function Ag(){var n=ku!==0;return ku=0,n}function Ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?de.memoizedState=Fe=n:Fe=Fe.next=n,Fe}function ci(){if(Re===null){var n=de.alternate;n=n!==null?n.memoizedState:null}else n=Re.next;var s=Fe===null?de.memoizedState:Fe.next;if(s!==null)Fe=s,Re=n;else{if(n===null)throw Error(e(310));Re=n,n={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Fe===null?de.memoizedState=Fe=n:Fe=Fe.next=n}return Fe}function Tu(n,s){return typeof s=="function"?s(n):s}function bg(n){var s=ci(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=Re,m=h.baseQueue,v=l.pending;if(v!==null){if(m!==null){var _=m.next;m.next=v.next,v.next=_}h.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,h=h.baseState;var R=_=null,P=null,H=v;do{var W=H.lane;if((La&W)===W)P!==null&&(P=P.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),h=H.hasEagerState?H.eagerState:n(h,H.action);else{var q={lane:W,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};P===null?(R=P=q,_=h):P=P.next=q,de.lanes|=W,Da|=W}H=H.next}while(H!==null&&H!==v);P===null?_=h:P.next=R,Ei(h,s.memoizedState)||(Tn=!0),s.memoizedState=h,s.baseState=_,s.baseQueue=P,l.lastRenderedState=h}if(n=l.interleaved,n!==null){m=n;do v=m.lane,de.lanes|=v,Da|=v,m=m.next;while(m!==n)}else m===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function _g(n){var s=ci(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=l.dispatch,m=l.pending,v=s.memoizedState;if(m!==null){l.pending=null;var _=m=m.next;do v=n(v,_.action),_=_.next;while(_!==m);Ei(v,s.memoizedState)||(Tn=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,h]}function Tw(){}function Rw(n,s){var l=de,h=ci(),m=s(),v=!Ei(h.memoizedState,m);if(v&&(h.memoizedState=m,Tn=!0),h=h.queue,Eg(Mw.bind(null,l,h,n),[n]),h.getSnapshot!==s||v||Fe!==null&&Fe.memoizedState.tag&1){if(l.flags|=2048,Ru(9,Iw.bind(null,l,h,m,s),void 0,null),je===null)throw Error(e(349));(La&30)!==0||Pw(l,s,m)}return m}function Pw(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=de.updateQueue,s===null?(s={lastEffect:null,stores:null},de.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function Iw(n,s,l,h){s.value=l,s.getSnapshot=h,Lw(s)&&Dw(n)}function Mw(n,s,l){return l(function(){Lw(s)&&Dw(n)})}function Lw(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Ei(n,l)}catch{return!0}}function Dw(n){var s=Rs(n,1);s!==null&&Ri(s,n,1,-1)}function Nw(n){var s=Ji();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:n},s.queue=n,n=n.dispatch=LS.bind(null,de,n),[s.memoizedState,n]}function Ru(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=de.updateQueue,s===null?(s={lastEffect:null,stores:null},de.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function Ow(){return ci().memoizedState}function Cp(n,s,l,h){var m=Ji();de.flags|=n,m.memoizedState=Ru(1|s,l,void 0,h===void 0?null:h)}function kp(n,s,l,h){var m=ci();h=h===void 0?null:h;var v=void 0;if(Re!==null){var _=Re.memoizedState;if(v=_.destroy,h!==null&&wg(h,_.deps)){m.memoizedState=Ru(s,l,v,h);return}}de.flags|=n,m.memoizedState=Ru(1|s,l,v,h)}function Fw(n,s){return Cp(8390656,8,n,s)}function Eg(n,s){return kp(2048,8,n,s)}function jw(n,s){return kp(4,2,n,s)}function zw(n,s){return kp(4,4,n,s)}function Bw(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Hw(n,s,l){return l=l!=null?l.concat([n]):null,kp(4,4,Bw.bind(null,s,n),l)}function Sg(){}function Uw(n,s){var l=ci();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&wg(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function $w(n,s){var l=ci();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&wg(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function Gw(n,s,l){return(La&21)===0?(n.baseState&&(n.baseState=!1,Tn=!0),n.memoizedState=l):(Ei(l,s)||(l=x0(),de.lanes|=l,Da|=l,n.baseState=!0),s)}function IS(n,s){var l=qt;qt=l!==0&&4>l?l:4,n(!0);var h=yg.transition;yg.transition={};try{n(!1),s()}finally{qt=l,yg.transition=h}}function Vw(){return ci().memoizedState}function MS(n,s,l){var h=Mr(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Ww(n))qw(s,l);else if(l=_w(n,s,l,h),l!==null){var m=gn();Ri(l,n,h,m),Xw(l,s,h)}}function LS(n,s,l){var h=Mr(n),m={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ww(n))qw(s,m);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var _=s.lastRenderedState,R=v(_,l);if(m.hasEagerState=!0,m.eagerState=R,Ei(R,_)){var P=s.interleaved;P===null?(m.next=m,hg(s)):(m.next=P.next,P.next=m),s.interleaved=m;return}}catch{}finally{}l=_w(n,s,m,h),l!==null&&(m=gn(),Ri(l,n,h,m),Xw(l,s,h))}}function Ww(n){var s=n.alternate;return n===de||s!==null&&s===de}function qw(n,s){Cu=Sp=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Xw(n,s,l){if((l&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,km(n,l)}}var Tp={readContext:li,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},DS={readContext:li,useCallback:function(n,s){return Ji().memoizedState=[n,s===void 0?null:s],n},useContext:li,useEffect:Fw,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Cp(4194308,4,Bw.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Cp(4194308,4,n,s)},useInsertionEffect:function(n,s){return Cp(4,2,n,s)},useMemo:function(n,s){var l=Ji();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=Ji();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=MS.bind(null,de,n),[h.memoizedState,n]},useRef:function(n){var s=Ji();return n={current:n},s.memoizedState=n},useState:Nw,useDebugValue:Sg,useDeferredValue:function(n){return Ji().memoizedState=n},useTransition:function(){var n=Nw(!1),s=n[0];return n=IS.bind(null,n[1]),Ji().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=de,m=Ji();if(re){if(l===void 0)throw Error(e(407));l=l()}else{if(l=s(),je===null)throw Error(e(349));(La&30)!==0||Pw(h,s,l)}m.memoizedState=l;var v={value:l,getSnapshot:s};return m.queue=v,Fw(Mw.bind(null,h,v,n),[n]),h.flags|=2048,Ru(9,Iw.bind(null,h,v,l,s),void 0,null),l},useId:function(){var n=Ji(),s=je.identifierPrefix;if(re){var l=Ts,h=ks;l=(h&~(1<<32-_i(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=ku++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=PS++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},NS={readContext:li,useCallback:Uw,useContext:li,useEffect:Eg,useImperativeHandle:Hw,useInsertionEffect:jw,useLayoutEffect:zw,useMemo:$w,useReducer:bg,useRef:Ow,useState:function(){return bg(Tu)},useDebugValue:Sg,useDeferredValue:function(n){var s=ci();return Gw(s,Re.memoizedState,n)},useTransition:function(){var n=bg(Tu)[0],s=ci().memoizedState;return[n,s]},useMutableSource:Tw,useSyncExternalStore:Rw,useId:Vw,unstable_isNewReconciler:!1},OS={readContext:li,useCallback:Uw,useContext:li,useEffect:Eg,useImperativeHandle:Hw,useInsertionEffect:jw,useLayoutEffect:zw,useMemo:$w,useReducer:_g,useRef:Ow,useState:function(){return _g(Tu)},useDebugValue:Sg,useDeferredValue:function(n){var s=ci();return Re===null?s.memoizedState=n:Gw(s,Re.memoizedState,n)},useTransition:function(){var n=_g(Tu)[0],s=ci().memoizedState;return[n,s]},useMutableSource:Tw,useSyncExternalStore:Rw,useId:Vw,unstable_isNewReconciler:!1};function Ci(n,s){if(n&&n.defaultProps){s=Z({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function Cg(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:Z({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Rp={isMounted:function(n){return(n=n._reactInternals)?Ca(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=gn(),m=Mr(n),v=Ps(h,m);v.payload=s,l!=null&&(v.callback=l),s=Tr(n,v,m),s!==null&&(Ri(s,n,m,h),Ap(s,n,m))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=gn(),m=Mr(n),v=Ps(h,m);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=Tr(n,v,m),s!==null&&(Ri(s,n,m,h),Ap(s,n,m))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=gn(),h=Mr(n),m=Ps(l,h);m.tag=2,s!=null&&(m.callback=s),s=Tr(n,m,h),s!==null&&(Ri(s,n,h,l),Ap(s,n,h))}};function Yw(n,s,l,h,m,v,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,v,_):s.prototype&&s.prototype.isPureReactComponent?!mu(l,h)||!mu(m,v):!0}function Kw(n,s,l){var h=!1,m=Sr,v=s.contextType;return typeof v=="object"&&v!==null?v=li(v):(m=kn(s)?Ta:tn.current,h=s.contextTypes,v=(h=h!=null)?vl(n,m):Sr),s=new s(l,v),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Rp,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=v),s}function Qw(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&Rp.enqueueReplaceState(s,s.state,null)}function kg(n,s,l,h){var m=n.stateNode;m.props=l,m.state=n.memoizedState,m.refs={},pg(n);var v=s.contextType;typeof v=="object"&&v!==null?m.context=li(v):(v=kn(s)?Ta:tn.current,m.context=vl(n,v)),m.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Cg(n,s,v,l),m.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&Rp.enqueueReplaceState(m,m.state,null),bp(n,l,m,h),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function Sl(n,s){try{var l="",h=s;do l+=Mt(h),h=h.return;while(h);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:s,stack:m,digest:null}}function Tg(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function Rg(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var FS=typeof WeakMap=="function"?WeakMap:Map;function Jw(n,s,l){l=Ps(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){Op||(Op=!0,Gg=h),Rg(n,s)},l}function Zw(n,s,l){l=Ps(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var m=s.value;l.payload=function(){return h(m)},l.callback=function(){Rg(n,s)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){Rg(n,s),typeof h!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),l}function tx(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new FS;var m=new Set;h.set(s,m)}else m=h.get(s),m===void 0&&(m=new Set,h.set(s,m));m.has(l)||(m.add(l),n=QS.bind(null,n,s,l),s.then(n,n))}function ex(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function nx(n,s,l,h,m){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Ps(-1,1),s.tag=2,Tr(l,s,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=m,n)}var jS=F.ReactCurrentOwner,Tn=!1;function mn(n,s,l,h){s.child=n===null?bw(s,null,l,h):Al(s,n.child,l,h)}function ix(n,s,l,h,m){l=l.render;var v=s.ref;return _l(s,m),h=xg(n,s,l,h,v,m),l=Ag(),n!==null&&!Tn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,Is(n,s,m)):(re&&l&&ig(s),s.flags|=1,mn(n,s,h,m),s.child)}function sx(n,s,l,h,m){if(n===null){var v=l.type;return typeof v=="function"&&!Qg(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=v,rx(n,s,v,h,m)):(n=Up(l.type,null,h,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,(n.lanes&m)===0){var _=v.memoizedProps;if(l=l.compare,l=l!==null?l:mu,l(_,h)&&n.ref===s.ref)return Is(n,s,m)}return s.flags|=1,n=Dr(v,h),n.ref=s.ref,n.return=s,s.child=n}function rx(n,s,l,h,m){if(n!==null){var v=n.memoizedProps;if(mu(v,h)&&n.ref===s.ref)if(Tn=!1,s.pendingProps=h=v,(n.lanes&m)!==0)(n.flags&131072)!==0&&(Tn=!0);else return s.lanes=n.lanes,Is(n,s,m)}return Pg(n,s,l,h,m)}function ax(n,s,l){var h=s.pendingProps,m=h.children,v=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(kl,Un),Un|=l;else{if((l&1073741824)===0)return n=v!==null?v.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,te(kl,Un),Un|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:l,te(kl,Un),Un|=h}else v!==null?(h=v.baseLanes|l,s.memoizedState=null):h=l,te(kl,Un),Un|=h;return mn(n,s,m,l),s.child}function ox(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Pg(n,s,l,h,m){var v=kn(l)?Ta:tn.current;return v=vl(s,v),_l(s,m),l=xg(n,s,l,h,v,m),h=Ag(),n!==null&&!Tn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,Is(n,s,m)):(re&&h&&ig(s),s.flags|=1,mn(n,s,l,m),s.child)}function lx(n,s,l,h,m){if(kn(l)){var v=!0;pp(s)}else v=!1;if(_l(s,m),s.stateNode===null)Ip(n,s),Kw(s,l,h),kg(s,l,h,m),h=!0;else if(n===null){var _=s.stateNode,R=s.memoizedProps;_.props=R;var P=_.context,H=l.contextType;typeof H=="object"&&H!==null?H=li(H):(H=kn(l)?Ta:tn.current,H=vl(s,H));var W=l.getDerivedStateFromProps,q=typeof W=="function"||typeof _.getSnapshotBeforeUpdate=="function";q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==h||P!==H)&&Qw(s,_,h,H),kr=!1;var V=s.memoizedState;_.state=V,bp(s,h,_,m),P=s.memoizedState,R!==h||V!==P||Cn.current||kr?(typeof W=="function"&&(Cg(s,l,W,h),P=s.memoizedState),(R=kr||Yw(s,l,R,h,V,P,H))?(q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=P),_.props=h,_.state=P,_.context=H,h=R):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{_=s.stateNode,Ew(n,s),R=s.memoizedProps,H=s.type===s.elementType?R:Ci(s.type,R),_.props=H,q=s.pendingProps,V=_.context,P=l.contextType,typeof P=="object"&&P!==null?P=li(P):(P=kn(l)?Ta:tn.current,P=vl(s,P));var rt=l.getDerivedStateFromProps;(W=typeof rt=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==q||V!==P)&&Qw(s,_,h,P),kr=!1,V=s.memoizedState,_.state=V,bp(s,h,_,m);var ut=s.memoizedState;R!==q||V!==ut||Cn.current||kr?(typeof rt=="function"&&(Cg(s,l,rt,h),ut=s.memoizedState),(H=kr||Yw(s,l,H,h,V,ut,P)||!1)?(W||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ut,P),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ut,P)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||R===n.memoizedProps&&V===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&V===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ut),_.props=h,_.state=ut,_.context=P,h=H):(typeof _.componentDidUpdate!="function"||R===n.memoizedProps&&V===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&V===n.memoizedState||(s.flags|=1024),h=!1)}return Ig(n,s,l,h,v,m)}function Ig(n,s,l,h,m,v){ox(n,s);var _=(s.flags&128)!==0;if(!h&&!_)return m&&pw(s,l,!1),Is(n,s,v);h=s.stateNode,jS.current=s;var R=_&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&_?(s.child=Al(s,n.child,null,v),s.child=Al(s,null,R,v)):mn(n,s,R,v),s.memoizedState=h.state,m&&pw(s,l,!0),s.child}function cx(n){var s=n.stateNode;s.pendingContext?dw(n,s.pendingContext,s.pendingContext!==s.context):s.context&&dw(n,s.context,!1),fg(n,s.containerInfo)}function ux(n,s,l,h,m){return xl(),og(m),s.flags|=256,mn(n,s,l,h),s.child}var Mg={dehydrated:null,treeContext:null,retryLane:0};function Lg(n){return{baseLanes:n,cachePool:null,transitions:null}}function dx(n,s,l){var h=s.pendingProps,m=ue.current,v=!1,_=(s.flags&128)!==0,R;if((R=_)||(R=n!==null&&n.memoizedState===null?!1:(m&2)!==0),R?(v=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),te(ue,m&1),n===null)return ag(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(_=h.children,n=h.fallback,v?(h=s.mode,v=s.child,_={mode:"hidden",children:_},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=_):v=$p(_,h,0,null),n=ja(n,h,l,null),v.return=s,n.return=s,v.sibling=n,s.child=v,s.child.memoizedState=Lg(l),s.memoizedState=Mg,n):Dg(s,_));if(m=n.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return zS(n,s,_,h,R,m,l);if(v){v=h.fallback,_=s.mode,m=n.child,R=m.sibling;var P={mode:"hidden",children:h.children};return(_&1)===0&&s.child!==m?(h=s.child,h.childLanes=0,h.pendingProps=P,s.deletions=null):(h=Dr(m,P),h.subtreeFlags=m.subtreeFlags&14680064),R!==null?v=Dr(R,v):(v=ja(v,_,l,null),v.flags|=2),v.return=s,h.return=s,h.sibling=v,s.child=h,h=v,v=s.child,_=n.child.memoizedState,_=_===null?Lg(l):{baseLanes:_.baseLanes|l,cachePool:null,transitions:_.transitions},v.memoizedState=_,v.childLanes=n.childLanes&~l,s.memoizedState=Mg,h}return v=n.child,n=v.sibling,h=Dr(v,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function Dg(n,s){return s=$p({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Pp(n,s,l,h){return h!==null&&og(h),Al(s,n.child,null,l),n=Dg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function zS(n,s,l,h,m,v,_){if(l)return s.flags&256?(s.flags&=-257,h=Tg(Error(e(422))),Pp(n,s,_,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(v=h.fallback,m=s.mode,h=$p({mode:"visible",children:h.children},m,0,null),v=ja(v,m,_,null),v.flags|=2,h.return=s,v.return=s,h.sibling=v,s.child=h,(s.mode&1)!==0&&Al(s,n.child,null,_),s.child.memoizedState=Lg(_),s.memoizedState=Mg,v);if((s.mode&1)===0)return Pp(n,s,_,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var R=h.dgst;return h=R,v=Error(e(419)),h=Tg(v,h,void 0),Pp(n,s,_,h)}if(R=(_&n.childLanes)!==0,Tn||R){if(h=je,h!==null){switch(_&-_){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|_))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,Rs(n,m),Ri(h,n,m,-1))}return Kg(),h=Tg(Error(e(421))),Pp(n,s,_,h)}return m.data==="$?"?(s.flags|=128,s.child=n.child,s=JS.bind(null,n),m._reactRetry=s,null):(n=v.treeContext,Hn=_r(m.nextSibling),Bn=s,re=!0,Si=null,n!==null&&(ai[oi++]=ks,ai[oi++]=Ts,ai[oi++]=Ra,ks=n.id,Ts=n.overflow,Ra=s),s=Dg(s,h.children),s.flags|=4096,s)}function hx(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),dg(n.return,s,l)}function Ng(n,s,l,h,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=m)}function px(n,s,l){var h=s.pendingProps,m=h.revealOrder,v=h.tail;if(mn(n,s,h.children,l),h=ue.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hx(n,l,s);else if(n.tag===19)hx(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(te(ue,h),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(l=s.child,m=null;l!==null;)n=l.alternate,n!==null&&_p(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),Ng(s,!1,m,l,v);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&_p(n)===null){s.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}Ng(s,!0,l,null,v);break;case"together":Ng(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ip(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Is(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),Da|=s.lanes,(l&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(e(153));if(s.child!==null){for(n=s.child,l=Dr(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Dr(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function BS(n,s,l){switch(s.tag){case 3:cx(s),xl();break;case 5:kw(s);break;case 1:kn(s.type)&&pp(s);break;case 4:fg(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,m=s.memoizedProps.value;te(wp,h._currentValue),h._currentValue=m;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(te(ue,ue.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?dx(n,s,l):(te(ue,ue.current&1),n=Is(n,s,l),n!==null?n.sibling:null);te(ue,ue.current&1);break;case 19:if(h=(l&s.childLanes)!==0,(n.flags&128)!==0){if(h)return px(n,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),te(ue,ue.current),h)break;return null;case 22:case 23:return s.lanes=0,ax(n,s,l)}return Is(n,s,l)}var fx,Og,mx,gx;fx=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Og=function(){},mx=function(n,s,l,h){var m=n.memoizedProps;if(m!==h){n=s.stateNode,Ma(Qi.current);var v=null;switch(l){case"input":m=il(n,m),h=il(n,h),v=[];break;case"select":m=Z({},m,{value:void 0}),h=Z({},h,{value:void 0}),v=[];break;case"textarea":m=Kc(n,m),h=Kc(n,h),v=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=up)}_a(l,h);var _;l=null;for(H in m)if(!h.hasOwnProperty(H)&&m.hasOwnProperty(H)&&m[H]!=null)if(H==="style"){var R=m[H];for(_ in R)R.hasOwnProperty(_)&&(l||(l={}),l[_]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(r.hasOwnProperty(H)?v||(v=[]):(v=v||[]).push(H,null));for(H in h){var P=h[H];if(R=m!=null?m[H]:void 0,h.hasOwnProperty(H)&&P!==R&&(P!=null||R!=null))if(H==="style")if(R){for(_ in R)!R.hasOwnProperty(_)||P&&P.hasOwnProperty(_)||(l||(l={}),l[_]="");for(_ in P)P.hasOwnProperty(_)&&R[_]!==P[_]&&(l||(l={}),l[_]=P[_])}else l||(v||(v=[]),v.push(H,l)),l=P;else H==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,R=R?R.__html:void 0,P!=null&&R!==P&&(v=v||[]).push(H,P)):H==="children"?typeof P!="string"&&typeof P!="number"||(v=v||[]).push(H,""+P):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(r.hasOwnProperty(H)?(P!=null&&H==="onScroll"&&ne("scroll",n),v||R===P||(v=[])):(v=v||[]).push(H,P))}l&&(v=v||[]).push("style",l);var H=v;(s.updateQueue=H)&&(s.flags|=4)}},gx=function(n,s,l,h){l!==h&&(s.flags|=4)};function Pu(n,s){if(!re)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function nn(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function HS(n,s,l){var h=s.pendingProps;switch(sg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(s),null;case 1:return kn(s.type)&&hp(),nn(s),null;case 3:return h=s.stateNode,El(),ie(Cn),ie(tn),vg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(vp(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Si!==null&&(qg(Si),Si=null))),Og(n,s),nn(s),null;case 5:mg(s);var m=Ma(Su.current);if(l=s.type,n!==null&&s.stateNode!=null)mx(n,s,l,h,m),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(e(166));return nn(s),null}if(n=Ma(Qi.current),vp(s)){h=s.stateNode,l=s.type;var v=s.memoizedProps;switch(h[Ki]=s,h[xu]=v,n=(s.mode&1)!==0,l){case"dialog":ne("cancel",h),ne("close",h);break;case"iframe":case"object":case"embed":ne("load",h);break;case"video":case"audio":for(m=0;m<vu.length;m++)ne(vu[m],h);break;case"source":ne("error",h);break;case"img":case"image":case"link":ne("error",h),ne("load",h);break;case"details":ne("toggle",h);break;case"input":Xc(h,v),ne("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},ne("invalid",h);break;case"textarea":Uh(h,v),ne("invalid",h)}_a(l,v),m=null;for(var _ in v)if(v.hasOwnProperty(_)){var R=v[_];_==="children"?typeof R=="string"?h.textContent!==R&&(v.suppressHydrationWarning!==!0&&cp(h.textContent,R,n),m=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(v.suppressHydrationWarning!==!0&&cp(h.textContent,R,n),m=["children",""+R]):r.hasOwnProperty(_)&&R!=null&&_==="onScroll"&&ne("scroll",h)}switch(l){case"input":bs(h),sl(h,v,!0);break;case"textarea":bs(h),_t(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=up)}h=m,s.updateQueue=h,h!==null&&(s.flags|=4)}else{_=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ce(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=_.createElement(l,{is:h.is}):(n=_.createElement(l),l==="select"&&(_=n,h.multiple?_.multiple=!0:h.size&&(_.size=h.size))):n=_.createElementNS(n,l),n[Ki]=s,n[xu]=h,fx(n,s,!1,!1),s.stateNode=n;t:{switch(_=Ea(l,h),l){case"dialog":ne("cancel",n),ne("close",n),m=h;break;case"iframe":case"object":case"embed":ne("load",n),m=h;break;case"video":case"audio":for(m=0;m<vu.length;m++)ne(vu[m],n);m=h;break;case"source":ne("error",n),m=h;break;case"img":case"image":case"link":ne("error",n),ne("load",n),m=h;break;case"details":ne("toggle",n),m=h;break;case"input":Xc(n,h),m=il(n,h),ne("invalid",n);break;case"option":m=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},m=Z({},h,{value:void 0}),ne("invalid",n);break;case"textarea":Uh(n,h),m=Kc(n,h),ne("invalid",n);break;default:m=h}_a(l,m),R=m;for(v in R)if(R.hasOwnProperty(v)){var P=R[v];v==="style"?ba(n,P):v==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&gr(n,P)):v==="children"?typeof P=="string"?(l!=="textarea"||P!=="")&&ri(n,P):typeof P=="number"&&ri(n,""+P):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(r.hasOwnProperty(v)?P!=null&&v==="onScroll"&&ne("scroll",n):P!=null&&z(n,v,P,_))}switch(l){case"input":bs(n),sl(n,h,!1);break;case"textarea":bs(n),_t(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Ot(h.value));break;case"select":n.multiple=!!h.multiple,v=h.value,v!=null?mr(n,!!h.multiple,v,!1):h.defaultValue!=null&&mr(n,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=up)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return nn(s),null;case 6:if(n&&s.stateNode!=null)gx(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(e(166));if(l=Ma(Su.current),Ma(Qi.current),vp(s)){if(h=s.stateNode,l=s.memoizedProps,h[Ki]=s,(v=h.nodeValue!==l)&&(n=Bn,n!==null))switch(n.tag){case 3:cp(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&cp(h.nodeValue,l,(n.mode&1)!==0)}v&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Ki]=s,s.stateNode=h}return nn(s),null;case 13:if(ie(ue),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(re&&Hn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)ww(),xl(),s.flags|=98560,v=!1;else if(v=vp(s),h!==null&&h.dehydrated!==null){if(n===null){if(!v)throw Error(e(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(e(317));v[Ki]=s}else xl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;nn(s),v=!1}else Si!==null&&(qg(Si),Si=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ue.current&1)!==0?Pe===0&&(Pe=3):Kg())),s.updateQueue!==null&&(s.flags|=4),nn(s),null);case 4:return El(),Og(n,s),n===null&&yu(s.stateNode.containerInfo),nn(s),null;case 10:return ug(s.type._context),nn(s),null;case 17:return kn(s.type)&&hp(),nn(s),null;case 19:if(ie(ue),v=s.memoizedState,v===null)return nn(s),null;if(h=(s.flags&128)!==0,_=v.rendering,_===null)if(h)Pu(v,!1);else{if(Pe!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(_=_p(n),_!==null){for(s.flags|=128,Pu(v,!1),h=_.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)v=l,n=h,v.flags&=14680066,_=v.alternate,_===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=_.childLanes,v.lanes=_.lanes,v.child=_.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=_.memoizedProps,v.memoizedState=_.memoizedState,v.updateQueue=_.updateQueue,v.type=_.type,n=_.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return te(ue,ue.current&1|2),s.child}n=n.sibling}v.tail!==null&&we()>Tl&&(s.flags|=128,h=!0,Pu(v,!1),s.lanes=4194304)}else{if(!h)if(n=_p(_),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Pu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!re)return nn(s),null}else 2*we()-v.renderingStartTime>Tl&&l!==1073741824&&(s.flags|=128,h=!0,Pu(v,!1),s.lanes=4194304);v.isBackwards?(_.sibling=s.child,s.child=_):(l=v.last,l!==null?l.sibling=_:s.child=_,v.last=_)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=we(),s.sibling=null,l=ue.current,te(ue,h?l&1|2:l&1),s):(nn(s),null);case 22:case 23:return Yg(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Un&1073741824)!==0&&(nn(s),s.subtreeFlags&6&&(s.flags|=8192)):nn(s),null;case 24:return null;case 25:return null}throw Error(e(156,s.tag))}function US(n,s){switch(sg(s),s.tag){case 1:return kn(s.type)&&hp(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return El(),ie(Cn),ie(tn),vg(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return mg(s),null;case 13:if(ie(ue),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(e(340));xl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ie(ue),null;case 4:return El(),null;case 10:return ug(s.type._context),null;case 22:case 23:return Yg(),null;case 24:return null;default:return null}}var Mp=!1,sn=!1,$S=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Cl(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){ve(n,s,h)}else l.current=null}function Fg(n,s,l){try{l()}catch(h){ve(n,s,h)}}var vx=!1;function GS(n,s){if(Ym=Jh,n=Y0(),Hm(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break t}var _=0,R=-1,P=-1,H=0,W=0,q=n,V=null;e:for(;;){for(var rt;q!==l||m!==0&&q.nodeType!==3||(R=_+m),q!==v||h!==0&&q.nodeType!==3||(P=_+h),q.nodeType===3&&(_+=q.nodeValue.length),(rt=q.firstChild)!==null;)V=q,q=rt;for(;;){if(q===n)break e;if(V===l&&++H===m&&(R=_),V===v&&++W===h&&(P=_),(rt=q.nextSibling)!==null)break;q=V,V=q.parentNode}q=rt}l=R===-1||P===-1?null:{start:R,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(Km={focusedElem:n,selectionRange:l},Jh=!1,ot=s;ot!==null;)if(s=ot,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ot=n;else for(;ot!==null;){s=ot;try{var ut=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var pt=ut.memoizedProps,xe=ut.memoizedState,O=s.stateNode,I=O.getSnapshotBeforeUpdate(s.elementType===s.type?pt:Ci(s.type,pt),xe);O.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(K){ve(s,s.return,K)}if(n=s.sibling,n!==null){n.return=s.return,ot=n;break}ot=s.return}return ut=vx,vx=!1,ut}function Iu(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&n)===n){var v=m.destroy;m.destroy=void 0,v!==void 0&&Fg(s,l,v)}m=m.next}while(m!==h)}}function Lp(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function jg(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function yx(n){var s=n.alternate;s!==null&&(n.alternate=null,yx(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Ki],delete s[xu],delete s[tg],delete s[CS],delete s[kS])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function wx(n){return n.tag===5||n.tag===3||n.tag===4}function xx(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||wx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zg(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=up));else if(h!==4&&(n=n.child,n!==null))for(zg(n,s,l),n=n.sibling;n!==null;)zg(n,s,l),n=n.sibling}function Bg(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Bg(n,s,l),n=n.sibling;n!==null;)Bg(n,s,l),n=n.sibling}var We=null,ki=!1;function Rr(n,s,l){for(l=l.child;l!==null;)Ax(n,s,l),l=l.sibling}function Ax(n,s,l){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(Wh,l)}catch{}switch(l.tag){case 5:sn||Cl(l,s);case 6:var h=We,m=ki;We=null,Rr(n,s,l),We=h,ki=m,We!==null&&(ki?(n=We,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):We.removeChild(l.stateNode));break;case 18:We!==null&&(ki?(n=We,l=l.stateNode,n.nodeType===8?Zm(n.parentNode,l):n.nodeType===1&&Zm(n,l),cu(n)):Zm(We,l.stateNode));break;case 4:h=We,m=ki,We=l.stateNode.containerInfo,ki=!0,Rr(n,s,l),We=h,ki=m;break;case 0:case 11:case 14:case 15:if(!sn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var v=m,_=v.destroy;v=v.tag,_!==void 0&&((v&2)!==0||(v&4)!==0)&&Fg(l,s,_),m=m.next}while(m!==h)}Rr(n,s,l);break;case 1:if(!sn&&(Cl(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(R){ve(l,s,R)}Rr(n,s,l);break;case 21:Rr(n,s,l);break;case 22:l.mode&1?(sn=(h=sn)||l.memoizedState!==null,Rr(n,s,l),sn=h):Rr(n,s,l);break;default:Rr(n,s,l)}}function bx(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new $S),s.forEach(function(h){var m=ZS.bind(null,n,h);l.has(h)||(l.add(h),h.then(m,m))})}}function Ti(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];try{var v=n,_=s,R=_;t:for(;R!==null;){switch(R.tag){case 5:We=R.stateNode,ki=!1;break t;case 3:We=R.stateNode.containerInfo,ki=!0;break t;case 4:We=R.stateNode.containerInfo,ki=!0;break t}R=R.return}if(We===null)throw Error(e(160));Ax(v,_,m),We=null,ki=!1;var P=m.alternate;P!==null&&(P.return=null),m.return=null}catch(H){ve(m,s,H)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)_x(s,n),s=s.sibling}function _x(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ti(s,n),Zi(n),h&4){try{Iu(3,n,n.return),Lp(3,n)}catch(pt){ve(n,n.return,pt)}try{Iu(5,n,n.return)}catch(pt){ve(n,n.return,pt)}}break;case 1:Ti(s,n),Zi(n),h&512&&l!==null&&Cl(l,l.return);break;case 5:if(Ti(s,n),Zi(n),h&512&&l!==null&&Cl(l,l.return),n.flags&32){var m=n.stateNode;try{ri(m,"")}catch(pt){ve(n,n.return,pt)}}if(h&4&&(m=n.stateNode,m!=null)){var v=n.memoizedProps,_=l!==null?l.memoizedProps:v,R=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{R==="input"&&v.type==="radio"&&v.name!=null&&Yc(m,v),Ea(R,_);var H=Ea(R,v);for(_=0;_<P.length;_+=2){var W=P[_],q=P[_+1];W==="style"?ba(m,q):W==="dangerouslySetInnerHTML"?gr(m,q):W==="children"?ri(m,q):z(m,W,q,H)}switch(R){case"input":qi(m,v);break;case"textarea":st(m,v);break;case"select":var V=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var rt=v.value;rt!=null?mr(m,!!v.multiple,rt,!1):V!==!!v.multiple&&(v.defaultValue!=null?mr(m,!!v.multiple,v.defaultValue,!0):mr(m,!!v.multiple,v.multiple?[]:"",!1))}m[xu]=v}catch(pt){ve(n,n.return,pt)}}break;case 6:if(Ti(s,n),Zi(n),h&4){if(n.stateNode===null)throw Error(e(162));m=n.stateNode,v=n.memoizedProps;try{m.nodeValue=v}catch(pt){ve(n,n.return,pt)}}break;case 3:if(Ti(s,n),Zi(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{cu(s.containerInfo)}catch(pt){ve(n,n.return,pt)}break;case 4:Ti(s,n),Zi(n);break;case 13:Ti(s,n),Zi(n),m=n.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||($g=we())),h&4&&bx(n);break;case 22:if(W=l!==null&&l.memoizedState!==null,n.mode&1?(sn=(H=sn)||W,Ti(s,n),sn=H):Ti(s,n),Zi(n),h&8192){if(H=n.memoizedState!==null,(n.stateNode.isHidden=H)&&!W&&(n.mode&1)!==0)for(ot=n,W=n.child;W!==null;){for(q=ot=W;ot!==null;){switch(V=ot,rt=V.child,V.tag){case 0:case 11:case 14:case 15:Iu(4,V,V.return);break;case 1:Cl(V,V.return);var ut=V.stateNode;if(typeof ut.componentWillUnmount=="function"){h=V,l=V.return;try{s=h,ut.props=s.memoizedProps,ut.state=s.memoizedState,ut.componentWillUnmount()}catch(pt){ve(h,l,pt)}}break;case 5:Cl(V,V.return);break;case 22:if(V.memoizedState!==null){Cx(q);continue}}rt!==null?(rt.return=V,ot=rt):Cx(q)}W=W.sibling}t:for(W=null,q=n;;){if(q.tag===5){if(W===null){W=q;try{m=q.stateNode,H?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(R=q.stateNode,P=q.memoizedProps.style,_=P!=null&&P.hasOwnProperty("display")?P.display:null,R.style.display=rl("display",_))}catch(pt){ve(n,n.return,pt)}}}else if(q.tag===6){if(W===null)try{q.stateNode.nodeValue=H?"":q.memoizedProps}catch(pt){ve(n,n.return,pt)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===n)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===n)break t;for(;q.sibling===null;){if(q.return===null||q.return===n)break t;W===q&&(W=null),q=q.return}W===q&&(W=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:Ti(s,n),Zi(n),h&4&&bx(n);break;case 21:break;default:Ti(s,n),Zi(n)}}function Zi(n){var s=n.flags;if(s&2){try{t:{for(var l=n.return;l!==null;){if(wx(l)){var h=l;break t}l=l.return}throw Error(e(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(ri(m,""),h.flags&=-33);var v=xx(n);Bg(n,v,m);break;case 3:case 4:var _=h.stateNode.containerInfo,R=xx(n);zg(n,R,_);break;default:throw Error(e(161))}}catch(P){ve(n,n.return,P)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function VS(n,s,l){ot=n,Ex(n)}function Ex(n,s,l){for(var h=(n.mode&1)!==0;ot!==null;){var m=ot,v=m.child;if(m.tag===22&&h){var _=m.memoizedState!==null||Mp;if(!_){var R=m.alternate,P=R!==null&&R.memoizedState!==null||sn;R=Mp;var H=sn;if(Mp=_,(sn=P)&&!H)for(ot=m;ot!==null;)_=ot,P=_.child,_.tag===22&&_.memoizedState!==null?kx(m):P!==null?(P.return=_,ot=P):kx(m);for(;v!==null;)ot=v,Ex(v),v=v.sibling;ot=m,Mp=R,sn=H}Sx(n)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,ot=v):Sx(n)}}function Sx(n){for(;ot!==null;){var s=ot;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:sn||Lp(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!sn)if(l===null)h.componentDidMount();else{var m=s.elementType===s.type?l.memoizedProps:Ci(s.type,l.memoizedProps);h.componentDidUpdate(m,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Cw(s,v,h);break;case 3:var _=s.updateQueue;if(_!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Cw(s,_,l)}break;case 5:var R=s.stateNode;if(l===null&&s.flags&4){l=R;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&l.focus();break;case"img":P.src&&(l.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var H=s.alternate;if(H!==null){var W=H.memoizedState;if(W!==null){var q=W.dehydrated;q!==null&&cu(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}sn||s.flags&512&&jg(s)}catch(V){ve(s,s.return,V)}}if(s===n){ot=null;break}if(l=s.sibling,l!==null){l.return=s.return,ot=l;break}ot=s.return}}function Cx(n){for(;ot!==null;){var s=ot;if(s===n){ot=null;break}var l=s.sibling;if(l!==null){l.return=s.return,ot=l;break}ot=s.return}}function kx(n){for(;ot!==null;){var s=ot;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Lp(4,s)}catch(P){ve(s,l,P)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var m=s.return;try{h.componentDidMount()}catch(P){ve(s,m,P)}}var v=s.return;try{jg(s)}catch(P){ve(s,v,P)}break;case 5:var _=s.return;try{jg(s)}catch(P){ve(s,_,P)}}}catch(P){ve(s,s.return,P)}if(s===n){ot=null;break}var R=s.sibling;if(R!==null){R.return=s.return,ot=R;break}ot=s.return}}var WS=Math.ceil,Dp=F.ReactCurrentDispatcher,Hg=F.ReactCurrentOwner,ui=F.ReactCurrentBatchConfig,Ht=0,je=null,Se=null,qe=0,Un=0,kl=Er(0),Pe=0,Mu=null,Da=0,Np=0,Ug=0,Lu=null,Rn=null,$g=0,Tl=1/0,Ms=null,Op=!1,Gg=null,Pr=null,Fp=!1,Ir=null,jp=0,Du=0,Vg=null,zp=-1,Bp=0;function gn(){return(Ht&6)!==0?we():zp!==-1?zp:zp=we()}function Mr(n){return(n.mode&1)===0?1:(Ht&2)!==0&&qe!==0?qe&-qe:RS.transition!==null?(Bp===0&&(Bp=x0()),Bp):(n=qt,n!==0||(n=window.event,n=n===void 0?16:R0(n.type)),n)}function Ri(n,s,l,h){if(50<Du)throw Du=0,Vg=null,Error(e(185));su(n,l,h),((Ht&2)===0||n!==je)&&(n===je&&((Ht&2)===0&&(Np|=l),Pe===4&&Lr(n,qe)),Pn(n,h),l===1&&Ht===0&&(s.mode&1)===0&&(Tl=we()+500,fp&&Cr()))}function Pn(n,s){var l=n.callbackNode;RE(n,s);var h=Yh(n,n===je?qe:0);if(h===0)l!==null&&v0(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&v0(l),s===1)n.tag===0?TS(Rx.bind(null,n)):fw(Rx.bind(null,n)),ES(function(){(Ht&6)===0&&Cr()}),l=null;else{switch(A0(h)){case 1:l=Em;break;case 4:l=y0;break;case 16:l=Vh;break;case 536870912:l=w0;break;default:l=Vh}l=Fx(l,Tx.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function Tx(n,s){if(zp=-1,Bp=0,(Ht&6)!==0)throw Error(e(327));var l=n.callbackNode;if(Rl()&&n.callbackNode!==l)return null;var h=Yh(n,n===je?qe:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=Hp(n,h);else{s=h;var m=Ht;Ht|=2;var v=Ix();(je!==n||qe!==s)&&(Ms=null,Tl=we()+500,Oa(n,s));do try{YS();break}catch(R){Px(n,R)}while(!0);cg(),Dp.current=v,Ht=m,Se!==null?s=0:(je=null,qe=0,s=Pe)}if(s!==0){if(s===2&&(m=Sm(n),m!==0&&(h=m,s=Wg(n,m))),s===1)throw l=Mu,Oa(n,0),Lr(n,h),Pn(n,we()),l;if(s===6)Lr(n,h);else{if(m=n.current.alternate,(h&30)===0&&!qS(m)&&(s=Hp(n,h),s===2&&(v=Sm(n),v!==0&&(h=v,s=Wg(n,v))),s===1))throw l=Mu,Oa(n,0),Lr(n,h),Pn(n,we()),l;switch(n.finishedWork=m,n.finishedLanes=h,s){case 0:case 1:throw Error(e(345));case 2:Fa(n,Rn,Ms);break;case 3:if(Lr(n,h),(h&130023424)===h&&(s=$g+500-we(),10<s)){if(Yh(n,0)!==0)break;if(m=n.suspendedLanes,(m&h)!==h){gn(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Jm(Fa.bind(null,n,Rn,Ms),s);break}Fa(n,Rn,Ms);break;case 4:if(Lr(n,h),(h&4194240)===h)break;for(s=n.eventTimes,m=-1;0<h;){var _=31-_i(h);v=1<<_,_=s[_],_>m&&(m=_),h&=~v}if(h=m,h=we()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*WS(h/1960))-h,10<h){n.timeoutHandle=Jm(Fa.bind(null,n,Rn,Ms),h);break}Fa(n,Rn,Ms);break;case 5:Fa(n,Rn,Ms);break;default:throw Error(e(329))}}}return Pn(n,we()),n.callbackNode===l?Tx.bind(null,n):null}function Wg(n,s){var l=Lu;return n.current.memoizedState.isDehydrated&&(Oa(n,s).flags|=256),n=Hp(n,s),n!==2&&(s=Rn,Rn=l,s!==null&&qg(s)),n}function qg(n){Rn===null?Rn=n:Rn.push.apply(Rn,n)}function qS(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var m=l[h],v=m.getSnapshot;m=m.value;try{if(!Ei(v(),m))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Lr(n,s){for(s&=~Ug,s&=~Np,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-_i(s),h=1<<l;n[l]=-1,s&=~h}}function Rx(n){if((Ht&6)!==0)throw Error(e(327));Rl();var s=Yh(n,0);if((s&1)===0)return Pn(n,we()),null;var l=Hp(n,s);if(n.tag!==0&&l===2){var h=Sm(n);h!==0&&(s=h,l=Wg(n,h))}if(l===1)throw l=Mu,Oa(n,0),Lr(n,s),Pn(n,we()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Fa(n,Rn,Ms),Pn(n,we()),null}function Xg(n,s){var l=Ht;Ht|=1;try{return n(s)}finally{Ht=l,Ht===0&&(Tl=we()+500,fp&&Cr())}}function Na(n){Ir!==null&&Ir.tag===0&&(Ht&6)===0&&Rl();var s=Ht;Ht|=1;var l=ui.transition,h=qt;try{if(ui.transition=null,qt=1,n)return n()}finally{qt=h,ui.transition=l,Ht=s,(Ht&6)===0&&Cr()}}function Yg(){Un=kl.current,ie(kl)}function Oa(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,_S(l)),Se!==null)for(l=Se.return;l!==null;){var h=l;switch(sg(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&hp();break;case 3:El(),ie(Cn),ie(tn),vg();break;case 5:mg(h);break;case 4:El();break;case 13:ie(ue);break;case 19:ie(ue);break;case 10:ug(h.type._context);break;case 22:case 23:Yg()}l=l.return}if(je=n,Se=n=Dr(n.current,null),qe=Un=s,Pe=0,Mu=null,Ug=Np=Da=0,Rn=Lu=null,Ia!==null){for(s=0;s<Ia.length;s++)if(l=Ia[s],h=l.interleaved,h!==null){l.interleaved=null;var m=h.next,v=l.pending;if(v!==null){var _=v.next;v.next=m,h.next=_}l.pending=h}Ia=null}return n}function Px(n,s){do{var l=Se;try{if(cg(),Ep.current=Tp,Sp){for(var h=de.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Sp=!1}if(La=0,Fe=Re=de=null,Cu=!1,ku=0,Hg.current=null,l===null||l.return===null){Pe=1,Mu=s,Se=null;break}t:{var v=n,_=l.return,R=l,P=s;if(s=qe,R.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var H=P,W=R,q=W.tag;if((W.mode&1)===0&&(q===0||q===11||q===15)){var V=W.alternate;V?(W.updateQueue=V.updateQueue,W.memoizedState=V.memoizedState,W.lanes=V.lanes):(W.updateQueue=null,W.memoizedState=null)}var rt=ex(_);if(rt!==null){rt.flags&=-257,nx(rt,_,R,v,s),rt.mode&1&&tx(v,H,s),s=rt,P=H;var ut=s.updateQueue;if(ut===null){var pt=new Set;pt.add(P),s.updateQueue=pt}else ut.add(P);break t}else{if((s&1)===0){tx(v,H,s),Kg();break t}P=Error(e(426))}}else if(re&&R.mode&1){var xe=ex(_);if(xe!==null){(xe.flags&65536)===0&&(xe.flags|=256),nx(xe,_,R,v,s),og(Sl(P,R));break t}}v=P=Sl(P,R),Pe!==4&&(Pe=2),Lu===null?Lu=[v]:Lu.push(v),v=_;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var O=Jw(v,P,s);Sw(v,O);break t;case 1:R=P;var I=v.type,j=v.stateNode;if((v.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Pr===null||!Pr.has(j)))){v.flags|=65536,s&=-s,v.lanes|=s;var K=Zw(v,R,s);Sw(v,K);break t}}v=v.return}while(v!==null)}Lx(l)}catch(ft){s=ft,Se===l&&l!==null&&(Se=l=l.return);continue}break}while(!0)}function Ix(){var n=Dp.current;return Dp.current=Tp,n===null?Tp:n}function Kg(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),je===null||(Da&268435455)===0&&(Np&268435455)===0||Lr(je,qe)}function Hp(n,s){var l=Ht;Ht|=2;var h=Ix();(je!==n||qe!==s)&&(Ms=null,Oa(n,s));do try{XS();break}catch(m){Px(n,m)}while(!0);if(cg(),Ht=l,Dp.current=h,Se!==null)throw Error(e(261));return je=null,qe=0,Pe}function XS(){for(;Se!==null;)Mx(Se)}function YS(){for(;Se!==null&&!xE();)Mx(Se)}function Mx(n){var s=Ox(n.alternate,n,Un);n.memoizedProps=n.pendingProps,s===null?Lx(n):Se=s,Hg.current=null}function Lx(n){var s=n;do{var l=s.alternate;if(n=s.return,(s.flags&32768)===0){if(l=HS(l,s,Un),l!==null){Se=l;return}}else{if(l=US(l,s),l!==null){l.flags&=32767,Se=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Pe=6,Se=null;return}}if(s=s.sibling,s!==null){Se=s;return}Se=s=n}while(s!==null);Pe===0&&(Pe=5)}function Fa(n,s,l){var h=qt,m=ui.transition;try{ui.transition=null,qt=1,KS(n,s,l,h)}finally{ui.transition=m,qt=h}return null}function KS(n,s,l,h){do Rl();while(Ir!==null);if((Ht&6)!==0)throw Error(e(327));l=n.finishedWork;var m=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var v=l.lanes|l.childLanes;if(PE(n,v),n===je&&(Se=je=null,qe=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Fp||(Fp=!0,Fx(Vh,function(){return Rl(),null})),v=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||v){v=ui.transition,ui.transition=null;var _=qt;qt=1;var R=Ht;Ht|=4,Hg.current=null,GS(n,l),_x(l,n),gS(Km),Jh=!!Ym,Km=Ym=null,n.current=l,VS(l),AE(),Ht=R,qt=_,ui.transition=v}else n.current=l;if(Fp&&(Fp=!1,Ir=n,jp=m),v=n.pendingLanes,v===0&&(Pr=null),EE(l.stateNode),Pn(n,we()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)m=s[l],h(m.value,{componentStack:m.stack,digest:m.digest});if(Op)throw Op=!1,n=Gg,Gg=null,n;return(jp&1)!==0&&n.tag!==0&&Rl(),v=n.pendingLanes,(v&1)!==0?n===Vg?Du++:(Du=0,Vg=n):Du=0,Cr(),null}function Rl(){if(Ir!==null){var n=A0(jp),s=ui.transition,l=qt;try{if(ui.transition=null,qt=16>n?16:n,Ir===null)var h=!1;else{if(n=Ir,Ir=null,jp=0,(Ht&6)!==0)throw Error(e(331));var m=Ht;for(Ht|=4,ot=n.current;ot!==null;){var v=ot,_=v.child;if((ot.flags&16)!==0){var R=v.deletions;if(R!==null){for(var P=0;P<R.length;P++){var H=R[P];for(ot=H;ot!==null;){var W=ot;switch(W.tag){case 0:case 11:case 15:Iu(8,W,v)}var q=W.child;if(q!==null)q.return=W,ot=q;else for(;ot!==null;){W=ot;var V=W.sibling,rt=W.return;if(yx(W),W===H){ot=null;break}if(V!==null){V.return=rt,ot=V;break}ot=rt}}}var ut=v.alternate;if(ut!==null){var pt=ut.child;if(pt!==null){ut.child=null;do{var xe=pt.sibling;pt.sibling=null,pt=xe}while(pt!==null)}}ot=v}}if((v.subtreeFlags&2064)!==0&&_!==null)_.return=v,ot=_;else t:for(;ot!==null;){if(v=ot,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Iu(9,v,v.return)}var O=v.sibling;if(O!==null){O.return=v.return,ot=O;break t}ot=v.return}}var I=n.current;for(ot=I;ot!==null;){_=ot;var j=_.child;if((_.subtreeFlags&2064)!==0&&j!==null)j.return=_,ot=j;else t:for(_=I;ot!==null;){if(R=ot,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Lp(9,R)}}catch(ft){ve(R,R.return,ft)}if(R===_){ot=null;break t}var K=R.sibling;if(K!==null){K.return=R.return,ot=K;break t}ot=R.return}}if(Ht=m,Cr(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(Wh,n)}catch{}h=!0}return h}finally{qt=l,ui.transition=s}}return!1}function Dx(n,s,l){s=Sl(l,s),s=Jw(n,s,1),n=Tr(n,s,1),s=gn(),n!==null&&(su(n,1,s),Pn(n,s))}function ve(n,s,l){if(n.tag===3)Dx(n,n,l);else for(;s!==null;){if(s.tag===3){Dx(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Pr===null||!Pr.has(h))){n=Sl(l,n),n=Zw(s,n,1),s=Tr(s,n,1),n=gn(),s!==null&&(su(s,1,n),Pn(s,n));break}}s=s.return}}function QS(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=gn(),n.pingedLanes|=n.suspendedLanes&l,je===n&&(qe&l)===l&&(Pe===4||Pe===3&&(qe&130023424)===qe&&500>we()-$g?Oa(n,0):Ug|=l),Pn(n,s)}function Nx(n,s){s===0&&((n.mode&1)===0?s=1:(s=Xh,Xh<<=1,(Xh&130023424)===0&&(Xh=4194304)));var l=gn();n=Rs(n,s),n!==null&&(su(n,s,l),Pn(n,l))}function JS(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Nx(n,l)}function ZS(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(s),Nx(n,l)}var Ox;Ox=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||Cn.current)Tn=!0;else{if((n.lanes&l)===0&&(s.flags&128)===0)return Tn=!1,BS(n,s,l);Tn=(n.flags&131072)!==0}else Tn=!1,re&&(s.flags&1048576)!==0&&mw(s,gp,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Ip(n,s),n=s.pendingProps;var m=vl(s,tn.current);_l(s,l),m=xg(null,s,h,n,m,l);var v=Ag();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,kn(h)?(v=!0,pp(s)):v=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,pg(s),m.updater=Rp,s.stateNode=m,m._reactInternals=s,kg(s,h,n,l),s=Ig(null,s,h,!0,v,l)):(s.tag=0,re&&v&&ig(s),mn(null,s,m,l),s=s.child),s;case 16:h=s.elementType;t:{switch(Ip(n,s),n=s.pendingProps,m=h._init,h=m(h._payload),s.type=h,m=s.tag=e1(h),n=Ci(h,n),m){case 0:s=Pg(null,s,h,n,l);break t;case 1:s=lx(null,s,h,n,l);break t;case 11:s=ix(null,s,h,n,l);break t;case 14:s=sx(null,s,h,Ci(h.type,n),l);break t}throw Error(e(306,h,""))}return s;case 0:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:Ci(h,m),Pg(n,s,h,m,l);case 1:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:Ci(h,m),lx(n,s,h,m,l);case 3:t:{if(cx(s),n===null)throw Error(e(387));h=s.pendingProps,v=s.memoizedState,m=v.element,Ew(n,s),bp(s,h,null,l);var _=s.memoizedState;if(h=_.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){m=Sl(Error(e(423)),s),s=ux(n,s,h,l,m);break t}else if(h!==m){m=Sl(Error(e(424)),s),s=ux(n,s,h,l,m);break t}else for(Hn=_r(s.stateNode.containerInfo.firstChild),Bn=s,re=!0,Si=null,l=bw(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(xl(),h===m){s=Is(n,s,l);break t}mn(n,s,h,l)}s=s.child}return s;case 5:return kw(s),n===null&&ag(s),h=s.type,m=s.pendingProps,v=n!==null?n.memoizedProps:null,_=m.children,Qm(h,m)?_=null:v!==null&&Qm(h,v)&&(s.flags|=32),ox(n,s),mn(n,s,_,l),s.child;case 6:return n===null&&ag(s),null;case 13:return dx(n,s,l);case 4:return fg(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Al(s,null,h,l):mn(n,s,h,l),s.child;case 11:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:Ci(h,m),ix(n,s,h,m,l);case 7:return mn(n,s,s.pendingProps,l),s.child;case 8:return mn(n,s,s.pendingProps.children,l),s.child;case 12:return mn(n,s,s.pendingProps.children,l),s.child;case 10:t:{if(h=s.type._context,m=s.pendingProps,v=s.memoizedProps,_=m.value,te(wp,h._currentValue),h._currentValue=_,v!==null)if(Ei(v.value,_)){if(v.children===m.children&&!Cn.current){s=Is(n,s,l);break t}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var R=v.dependencies;if(R!==null){_=v.child;for(var P=R.firstContext;P!==null;){if(P.context===h){if(v.tag===1){P=Ps(-1,l&-l),P.tag=2;var H=v.updateQueue;if(H!==null){H=H.shared;var W=H.pending;W===null?P.next=P:(P.next=W.next,W.next=P),H.pending=P}}v.lanes|=l,P=v.alternate,P!==null&&(P.lanes|=l),dg(v.return,l,s),R.lanes|=l;break}P=P.next}}else if(v.tag===10)_=v.type===s.type?null:v.child;else if(v.tag===18){if(_=v.return,_===null)throw Error(e(341));_.lanes|=l,R=_.alternate,R!==null&&(R.lanes|=l),dg(_,l,s),_=v.sibling}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===s){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}mn(n,s,m.children,l),s=s.child}return s;case 9:return m=s.type,h=s.pendingProps.children,_l(s,l),m=li(m),h=h(m),s.flags|=1,mn(n,s,h,l),s.child;case 14:return h=s.type,m=Ci(h,s.pendingProps),m=Ci(h.type,m),sx(n,s,h,m,l);case 15:return rx(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,m=s.pendingProps,m=s.elementType===h?m:Ci(h,m),Ip(n,s),s.tag=1,kn(h)?(n=!0,pp(s)):n=!1,_l(s,l),Kw(s,h,m),kg(s,h,m,l),Ig(null,s,h,!0,n,l);case 19:return px(n,s,l);case 22:return ax(n,s,l)}throw Error(e(156,s.tag))};function Fx(n,s){return g0(n,s)}function t1(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(n,s,l,h){return new t1(n,s,l,h)}function Qg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function e1(n){if(typeof n=="function")return Qg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===At)return 11;if(n===It)return 14}return 2}function Dr(n,s){var l=n.alternate;return l===null?(l=di(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Up(n,s,l,h,m,v){var _=2;if(h=n,typeof n=="function")Qg(n)&&(_=1);else if(typeof n=="string")_=5;else t:switch(n){case N:return ja(l.children,m,v,s);case $:_=8,m|=8;break;case G:return n=di(12,l,s,m|2),n.elementType=G,n.lanes=v,n;case kt:return n=di(13,l,s,m),n.elementType=kt,n.lanes=v,n;case dt:return n=di(19,l,s,m),n.elementType=dt,n.lanes=v,n;case nt:return $p(l,m,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case et:_=10;break t;case Q:_=9;break t;case At:_=11;break t;case It:_=14;break t;case J:_=16,h=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return s=di(_,l,s,m),s.elementType=n,s.type=h,s.lanes=v,s}function ja(n,s,l,h){return n=di(7,n,h,s),n.lanes=l,n}function $p(n,s,l,h){return n=di(22,n,h,s),n.elementType=nt,n.lanes=l,n.stateNode={isHidden:!1},n}function Jg(n,s,l){return n=di(6,n,null,s),n.lanes=l,n}function Zg(n,s,l){return s=di(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function n1(n,s,l,h,m){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cm(0),this.expirationTimes=Cm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cm(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function tv(n,s,l,h,m,v,_,R,P){return n=new n1(n,s,l,R,P),s===1?(s=1,v===!0&&(s|=8)):s=0,v=di(3,null,null,s),n.current=v,v.stateNode=n,v.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},pg(v),n}function i1(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function jx(n){if(!n)return Sr;n=n._reactInternals;t:{if(Ca(n)!==n||n.tag!==1)throw Error(e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(kn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(kn(l))return hw(n,l,s)}return s}function zx(n,s,l,h,m,v,_,R,P){return n=tv(l,h,!0,n,m,v,_,R,P),n.context=jx(null),l=n.current,h=gn(),m=Mr(l),v=Ps(h,m),v.callback=s??null,Tr(l,v,m),n.current.lanes=m,su(n,m,h),Pn(n,h),n}function Gp(n,s,l,h){var m=s.current,v=gn(),_=Mr(m);return l=jx(l),s.context===null?s.context=l:s.pendingContext=l,s=Ps(v,_),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=Tr(m,s,_),n!==null&&(Ri(n,m,_,v),Ap(n,m,_)),_}function Vp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Bx(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function ev(n,s){Bx(n,s),(n=n.alternate)&&Bx(n,s)}function s1(){return null}var Hx=typeof reportError=="function"?reportError:function(n){console.error(n)};function nv(n){this._internalRoot=n}Wp.prototype.render=nv.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(e(409));Gp(n,s,null,null)},Wp.prototype.unmount=nv.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Na(function(){Gp(null,n,null,null)}),s[Ss]=null}};function Wp(n){this._internalRoot=n}Wp.prototype.unstable_scheduleHydration=function(n){if(n){var s=E0();n={blockedOn:null,target:n,priority:s};for(var l=0;l<xr.length&&s!==0&&s<xr[l].priority;l++);xr.splice(l,0,n),l===0&&k0(n)}};function iv(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function qp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Ux(){}function r1(n,s,l,h,m){if(m){if(typeof h=="function"){var v=h;h=function(){var H=Vp(_);v.call(H)}}var _=zx(s,h,n,0,null,!1,!1,"",Ux);return n._reactRootContainer=_,n[Ss]=_.current,yu(n.nodeType===8?n.parentNode:n),Na(),_}for(;m=n.lastChild;)n.removeChild(m);if(typeof h=="function"){var R=h;h=function(){var H=Vp(P);R.call(H)}}var P=tv(n,0,!1,null,null,!1,!1,"",Ux);return n._reactRootContainer=P,n[Ss]=P.current,yu(n.nodeType===8?n.parentNode:n),Na(function(){Gp(s,P,l,h)}),P}function Xp(n,s,l,h,m){var v=l._reactRootContainer;if(v){var _=v;if(typeof m=="function"){var R=m;m=function(){var P=Vp(_);R.call(P)}}Gp(s,_,n,m)}else _=r1(l,s,n,m,h);return Vp(_)}b0=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=iu(s.pendingLanes);l!==0&&(km(s,l|1),Pn(s,we()),(Ht&6)===0&&(Tl=we()+500,Cr()))}break;case 13:Na(function(){var h=Rs(n,1);if(h!==null){var m=gn();Ri(h,n,1,m)}}),ev(n,1)}},Tm=function(n){if(n.tag===13){var s=Rs(n,134217728);if(s!==null){var l=gn();Ri(s,n,134217728,l)}ev(n,134217728)}},_0=function(n){if(n.tag===13){var s=Mr(n),l=Rs(n,s);if(l!==null){var h=gn();Ri(l,n,s,h)}ev(n,s)}},E0=function(){return qt},S0=function(n,s){var l=qt;try{return qt=n,s()}finally{qt=l}},xm=function(n,s,l){switch(s){case"input":if(qi(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var m=dp(h);if(!m)throw Error(e(90));_s(h),qi(h,m)}}}break;case"textarea":st(n,l);break;case"select":s=l.value,s!=null&&mr(n,!!l.multiple,s,!1)}},c0=Xg,u0=Na;var a1={usingClientEntryPoint:!1,Events:[Au,ml,dp,o0,l0,Xg]},Nu={findFiberByHostInstance:ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o1={bundleType:Nu.bundleType,version:Nu.version,rendererPackageName:Nu.rendererPackageName,rendererConfig:Nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=f0(n),n===null?null:n.stateNode},findFiberByHostInstance:Nu.findFiberByHostInstance||s1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yp.isDisabled&&Yp.supportsFiber)try{Wh=Yp.inject(o1),Yi=Yp}catch{}}return In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a1,In.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iv(s))throw Error(e(200));return i1(n,s,null,l)},In.createRoot=function(n,s){if(!iv(n))throw Error(e(299));var l=!1,h="",m=Hx;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=tv(n,1,!1,null,null,l,!1,h,m),n[Ss]=s.current,yu(n.nodeType===8?n.parentNode:n),new nv(s)},In.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=f0(s),n=n===null?null:n.stateNode,n},In.flushSync=function(n){return Na(n)},In.hydrate=function(n,s,l){if(!qp(s))throw Error(e(200));return Xp(null,n,s,!0,l)},In.hydrateRoot=function(n,s,l){if(!iv(n))throw Error(e(405));var h=l!=null&&l.hydratedSources||null,m=!1,v="",_=Hx;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),s=zx(s,null,n,1,l??null,m,!1,v,_),n[Ss]=s.current,yu(n),h)for(n=0;n<h.length;n++)l=h[n],m=l._getVersion,m=m(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,m]:s.mutableSourceEagerHydrationData.push(l,m);return new Wp(s)},In.render=function(n,s,l){if(!qp(s))throw Error(e(200));return Xp(null,n,s,!1,l)},In.unmountComponentAtNode=function(n){if(!qp(n))throw Error(e(40));return n._reactRootContainer?(Na(function(){Xp(null,null,n,!1,function(){n._reactRootContainer=null,n[Ss]=null})}),!0):!1},In.unstable_batchedUpdates=Xg,In.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!qp(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return Xp(n,s,l,!1,h)},In.version="18.3.1-next-f1338f8080-20240426",In}var Qx;function v1(){if(Qx)return ov.exports;Qx=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),ov.exports=g1(),ov.exports}var Jx;function y1(){if(Jx)return Kp;Jx=1;var u=v1();return Kp.createRoot=u.createRoot,Kp.hydrateRoot=u.hydrateRoot,Kp}var w1=y1();const x1=dm(w1);var uv={exports:{}},dv,Zx;function A1(){if(Zx)return dv;Zx=1;var u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return dv=u,dv}var hv,tA;function b1(){if(tA)return hv;tA=1;var u=A1();function t(){}function e(){}return e.resetWarningCache=t,hv=function(){function i(c,d,p,f,g,y){if(y!==u){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:e,resetWarningCache:t};return a.PropTypes=a,a},hv}var eA;function _1(){return eA||(eA=1,uv.exports=b1()()),uv.exports}var E1=_1();const Jt=dm(E1);function el(u,t,e,i){function r(a){return a instanceof e?a:new e(function(c){c(a)})}return new(e||(e=Promise))(function(a,c){function d(g){try{f(i.next(g))}catch(y){c(y)}}function p(g){try{f(i.throw(g))}catch(y){c(y)}}function f(g){g.done?a(g.value):r(g.value).then(d,p)}f((i=i.apply(u,t||[])).next())})}const S1=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function qc(u,t,e){const i=C1(u),{webkitRelativePath:r}=u,a=typeof t=="string"?t:typeof r=="string"&&r.length>0?r:`./${u.name}`;return typeof i.path!="string"&&nA(i,"path",a),nA(i,"relativePath",a),i}function C1(u){const{name:t}=u;if(t&&t.lastIndexOf(".")!==-1&&!u.type){const i=t.split(".").pop().toLowerCase(),r=S1.get(i);r&&Object.defineProperty(u,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return u}function nA(u,t,e){Object.defineProperty(u,t,{value:e,writable:!1,configurable:!1,enumerable:!0})}const k1=[".DS_Store","Thumbs.db"];function T1(u){return el(this,void 0,void 0,function*(){return Nf(u)&&R1(u.dataTransfer)?L1(u.dataTransfer,u.type):P1(u)?I1(u):Array.isArray(u)&&u.every(t=>"getFile"in t&&typeof t.getFile=="function")?M1(u):[]})}function R1(u){return Nf(u)}function P1(u){return Nf(u)&&Nf(u.target)}function Nf(u){return typeof u=="object"&&u!==null}function I1(u){return bv(u.target.files).map(t=>qc(t))}function M1(u){return el(this,void 0,void 0,function*(){return(yield Promise.all(u.map(e=>e.getFile()))).map(e=>qc(e))})}function L1(u,t){return el(this,void 0,void 0,function*(){if(u.items){const e=bv(u.items).filter(r=>r.kind==="file");if(t!=="drop")return e;const i=yield Promise.all(e.map(D1));return iA(eb(i))}return iA(bv(u.files).map(e=>qc(e)))})}function iA(u){return u.filter(t=>k1.indexOf(t.name)===-1)}function bv(u){if(u===null)return[];const t=[];for(let e=0;e<u.length;e++){const i=u[e];t.push(i)}return t}function D1(u){if(typeof u.webkitGetAsEntry!="function")return sA(u);const t=u.webkitGetAsEntry();return t&&t.isDirectory?nb(t):sA(u,t)}function eb(u){return u.reduce((t,e)=>[...t,...Array.isArray(e)?eb(e):[e]],[])}function sA(u,t){return el(this,void 0,void 0,function*(){var e;if(globalThis.isSecureContext&&typeof u.getAsFileSystemHandle=="function"){const a=yield u.getAsFileSystemHandle();if(a===null)throw new Error(`${u} is not a File`);if(a!==void 0){const c=yield a.getFile();return c.handle=a,qc(c)}}const i=u.getAsFile();if(!i)throw new Error(`${u} is not a File`);return qc(i,(e=t==null?void 0:t.fullPath)!==null&&e!==void 0?e:void 0)})}function N1(u){return el(this,void 0,void 0,function*(){return u.isDirectory?nb(u):O1(u)})}function nb(u){const t=u.createReader();return new Promise((e,i)=>{const r=[];function a(){t.readEntries(c=>el(this,void 0,void 0,function*(){if(c.length){const d=Promise.all(c.map(N1));r.push(d),a()}else try{const d=yield Promise.all(r);e(d)}catch(d){i(d)}}),c=>{i(c)})}a()})}function O1(u){return el(this,void 0,void 0,function*(){return new Promise((t,e)=>{u.file(i=>{const r=qc(i,u.fullPath);t(r)},i=>{e(i)})})})}var Qp={},rA;function F1(){return rA||(rA=1,Qp.__esModule=!0,Qp.default=function(u,t){if(u&&t){var e=Array.isArray(t)?t:t.split(",");if(e.length===0)return!0;var i=u.name||"",r=(u.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return e.some(function(c){var d=c.trim().toLowerCase();return d.charAt(0)==="."?i.toLowerCase().endsWith(d):d.endsWith("/*")?a===d.replace(/\/.*$/,""):r===d})}return!0}),Qp}var j1=F1();const pv=dm(j1);function aA(u){return H1(u)||B1(u)||sb(u)||z1()}function z1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B1(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function H1(u){if(Array.isArray(u))return _v(u)}function oA(u,t){var e=Object.keys(u);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(u);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(u,r).enumerable})),e.push.apply(e,i)}return e}function lA(u){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(e),!0).forEach(function(i){ib(u,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(e)):oA(Object(e)).forEach(function(i){Object.defineProperty(u,i,Object.getOwnPropertyDescriptor(e,i))})}return u}function ib(u,t,e){return t in u?Object.defineProperty(u,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):u[t]=e,u}function od(u,t){return G1(u)||$1(u,t)||sb(u,t)||U1()}function U1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sb(u,t){if(u){if(typeof u=="string")return _v(u,t);var e=Object.prototype.toString.call(u).slice(8,-1);if(e==="Object"&&u.constructor&&(e=u.constructor.name),e==="Map"||e==="Set")return Array.from(u);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _v(u,t)}}function _v(u,t){(t==null||t>u.length)&&(t=u.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=u[e];return i}function $1(u,t){var e=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(e!=null){var i=[],r=!0,a=!1,c,d;try{for(e=e.call(u);!(r=(c=e.next()).done)&&(i.push(c.value),!(t&&i.length===t));r=!0);}catch(p){a=!0,d=p}finally{try{!r&&e.return!=null&&e.return()}finally{if(a)throw d}}return i}}function G1(u){if(Array.isArray(u))return u}var V1=typeof pv=="function"?pv:pv.default,W1="file-invalid-type",q1="file-too-large",X1="file-too-small",Y1="too-many-files",K1=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=t.split(","),i=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:W1,message:"File type must be ".concat(i)}},cA=function(t){return{code:q1,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},uA=function(t){return{code:X1,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Q1={code:Y1,message:"Too many files"};function rb(u,t){var e=u.type==="application/x-moz-file"||V1(u,t);return[e,e?null:K1(t)]}function ab(u,t,e){if(Ua(u.size))if(Ua(t)&&Ua(e)){if(u.size>e)return[!1,cA(e)];if(u.size<t)return[!1,uA(t)]}else{if(Ua(t)&&u.size<t)return[!1,uA(t)];if(Ua(e)&&u.size>e)return[!1,cA(e)]}return[!0,null]}function Ua(u){return u!=null}function J1(u){var t=u.files,e=u.accept,i=u.minSize,r=u.maxSize,a=u.multiple,c=u.maxFiles,d=u.validator;return!a&&t.length>1||a&&c>=1&&t.length>c?!1:t.every(function(p){var f=rb(p,e),g=od(f,1),y=g[0],w=ab(p,i,r),A=od(w,1),b=A[0],C=d?d(p):null;return y&&b&&!C})}function Of(u){return typeof u.isPropagationStopped=="function"?u.isPropagationStopped():typeof u.cancelBubble<"u"?u.cancelBubble:!1}function Jp(u){return u.dataTransfer?Array.prototype.some.call(u.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!u.target&&!!u.target.files}function dA(u){u.preventDefault()}function Z1(u){return u.indexOf("MSIE")!==-1||u.indexOf("Trident/")!==-1}function tC(u){return u.indexOf("Edge/")!==-1}function eC(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Z1(u)||tC(u)}function ts(){for(var u=arguments.length,t=new Array(u),e=0;e<u;e++)t[e]=arguments[e];return function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return t.some(function(d){return!Of(i)&&d&&d.apply(void 0,[i].concat(a)),Of(i)})}}function nC(){return"showOpenFilePicker"in window}function iC(u){if(Ua(u)){var t=Object.entries(u).filter(function(e){var i=od(e,2),r=i[0],a=i[1],c=!0;return ob(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(a)||!a.every(lb))&&(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(e,i){var r=od(i,2),a=r[0],c=r[1];return lA(lA({},e),{},ib({},a,c))},{});return[{description:"Files",accept:t}]}return u}function sC(u){if(Ua(u))return Object.entries(u).reduce(function(t,e){var i=od(e,2),r=i[0],a=i[1];return[].concat(aA(t),[r],aA(a))},[]).filter(function(t){return ob(t)||lb(t)}).join(",")}function rC(u){return u instanceof DOMException&&(u.name==="AbortError"||u.code===u.ABORT_ERR)}function aC(u){return u instanceof DOMException&&(u.name==="SecurityError"||u.code===u.SECURITY_ERR)}function ob(u){return u==="audio/*"||u==="video/*"||u==="image/*"||u==="text/*"||u==="application/*"||/\w+\/[-+.\w]+/g.test(u)}function lb(u){return/^.*\.[\w]+$/.test(u)}var oC=["children"],lC=["open"],cC=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],uC=["refKey","onChange","onClick"];function dC(u){return fC(u)||pC(u)||cb(u)||hC()}function hC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pC(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function fC(u){if(Array.isArray(u))return Ev(u)}function fv(u,t){return vC(u)||gC(u,t)||cb(u,t)||mC()}function mC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cb(u,t){if(u){if(typeof u=="string")return Ev(u,t);var e=Object.prototype.toString.call(u).slice(8,-1);if(e==="Object"&&u.constructor&&(e=u.constructor.name),e==="Map"||e==="Set")return Array.from(u);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ev(u,t)}}function Ev(u,t){(t==null||t>u.length)&&(t=u.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=u[e];return i}function gC(u,t){var e=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(e!=null){var i=[],r=!0,a=!1,c,d;try{for(e=e.call(u);!(r=(c=e.next()).done)&&(i.push(c.value),!(t&&i.length===t));r=!0);}catch(p){a=!0,d=p}finally{try{!r&&e.return!=null&&e.return()}finally{if(a)throw d}}return i}}function vC(u){if(Array.isArray(u))return u}function hA(u,t){var e=Object.keys(u);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(u);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(u,r).enumerable})),e.push.apply(e,i)}return e}function fe(u){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(e),!0).forEach(function(i){Sv(u,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(e)):hA(Object(e)).forEach(function(i){Object.defineProperty(u,i,Object.getOwnPropertyDescriptor(e,i))})}return u}function Sv(u,t,e){return t in u?Object.defineProperty(u,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):u[t]=e,u}function Ff(u,t){if(u==null)return{};var e=yC(u,t),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(u);for(r=0;r<a.length;r++)i=a[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(u,i)&&(e[i]=u[i])}return e}function yC(u,t){if(u==null)return{};var e={},i=Object.keys(u),r,a;for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&(e[r]=u[r]);return e}var Uy=Rt.forwardRef(function(u,t){var e=u.children,i=Ff(u,oC),r=db(i),a=r.open,c=Ff(r,lC);return Rt.useImperativeHandle(t,function(){return{open:a}},[a]),tb.createElement(Rt.Fragment,null,e(fe(fe({},c),{},{open:a})))});Uy.displayName="Dropzone";var ub={disabled:!1,getFilesFromEvent:T1,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Uy.defaultProps=ub;Uy.propTypes={children:Jt.func,accept:Jt.objectOf(Jt.arrayOf(Jt.string)),multiple:Jt.bool,preventDropOnDocument:Jt.bool,noClick:Jt.bool,noKeyboard:Jt.bool,noDrag:Jt.bool,noDragEventsBubbling:Jt.bool,minSize:Jt.number,maxSize:Jt.number,maxFiles:Jt.number,disabled:Jt.bool,getFilesFromEvent:Jt.func,onFileDialogCancel:Jt.func,onFileDialogOpen:Jt.func,useFsAccessApi:Jt.bool,autoFocus:Jt.bool,onDragEnter:Jt.func,onDragLeave:Jt.func,onDragOver:Jt.func,onDrop:Jt.func,onDropAccepted:Jt.func,onDropRejected:Jt.func,onError:Jt.func,validator:Jt.func};var Cv={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function db(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=fe(fe({},ub),u),e=t.accept,i=t.disabled,r=t.getFilesFromEvent,a=t.maxSize,c=t.minSize,d=t.multiple,p=t.maxFiles,f=t.onDragEnter,g=t.onDragLeave,y=t.onDragOver,w=t.onDrop,A=t.onDropAccepted,b=t.onDropRejected,C=t.onFileDialogCancel,k=t.onFileDialogOpen,T=t.useFsAccessApi,M=t.autoFocus,z=t.preventDropOnDocument,F=t.noClick,D=t.noKeyboard,B=t.noDrag,N=t.noDragEventsBubbling,$=t.onError,G=t.validator,et=Rt.useMemo(function(){return sC(e)},[e]),Q=Rt.useMemo(function(){return iC(e)},[e]),At=Rt.useMemo(function(){return typeof k=="function"?k:pA},[k]),kt=Rt.useMemo(function(){return typeof C=="function"?C:pA},[C]),dt=Rt.useRef(null),It=Rt.useRef(null),J=Rt.useReducer(wC,Cv),nt=fv(J,2),X=nt[0],it=nt[1],Z=X.isFocused,L=X.isFileDialogActive,U=Rt.useRef(typeof window<"u"&&window.isSecureContext&&T&&nC()),ht=function(){!U.current&&L&&setTimeout(function(){if(It.current){var _t=It.current.files;_t.length||(it({type:"closeDialog"}),kt())}},300)};Rt.useEffect(function(){return window.addEventListener("focus",ht,!1),function(){window.removeEventListener("focus",ht,!1)}},[It,L,kt,U]);var bt=Rt.useRef([]),Mt=function(_t){dt.current&&dt.current.contains(_t.target)||(_t.preventDefault(),bt.current=[])};Rt.useEffect(function(){return z&&(document.addEventListener("dragover",dA,!1),document.addEventListener("drop",Mt,!1)),function(){z&&(document.removeEventListener("dragover",dA),document.removeEventListener("drop",Mt))}},[dt,z]),Rt.useEffect(function(){return!i&&M&&dt.current&&dt.current.focus(),function(){}},[dt,M,i]);var vt=Rt.useCallback(function(st){$?$(st):console.error(st)},[$]),yt=Rt.useCallback(function(st){st.preventDefault(),st.persist(),Xi(st),bt.current=[].concat(dC(bt.current),[st.target]),Jp(st)&&Promise.resolve(r(st)).then(function(_t){if(!(Of(st)&&!N)){var ce=_t.length,ge=ce>0&&J1({files:_t,accept:et,minSize:c,maxSize:a,multiple:d,maxFiles:p,validator:G}),Oe=ce>0&&!ge;it({isDragAccept:ge,isDragReject:Oe,isDragActive:!0,type:"setDraggedFiles"}),f&&f(st)}}).catch(function(_t){return vt(_t)})},[r,f,vt,N,et,c,a,d,p,G]),Ot=Rt.useCallback(function(st){st.preventDefault(),st.persist(),Xi(st);var _t=Jp(st);if(_t&&st.dataTransfer)try{st.dataTransfer.dropEffect="copy"}catch{}return _t&&y&&y(st),!1},[y,N]),Wt=Rt.useCallback(function(st){st.preventDefault(),st.persist(),Xi(st);var _t=bt.current.filter(function(ge){return dt.current&&dt.current.contains(ge)}),ce=_t.indexOf(st.target);ce!==-1&&_t.splice(ce,1),bt.current=_t,!(_t.length>0)&&(it({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Jp(st)&&g&&g(st))},[dt,g,N]),Ee=Rt.useCallback(function(st,_t){var ce=[],ge=[];st.forEach(function(Oe){var gr=rb(Oe,et),ri=fv(gr,2),Es=ri[0],Qc=ri[1],rl=ab(Oe,c,a),ba=fv(rl,2),Jc=ba[0],_a=ba[1],Ea=G?G(Oe):null;if(Es&&Jc&&!Ea)ce.push(Oe);else{var Sa=[Qc,_a];Ea&&(Sa=Sa.concat(Ea)),ge.push({file:Oe,errors:Sa.filter(function(Zc){return Zc})})}}),(!d&&ce.length>1||d&&p>=1&&ce.length>p)&&(ce.forEach(function(Oe){ge.push({file:Oe,errors:[Q1]})}),ce.splice(0)),it({acceptedFiles:ce,fileRejections:ge,isDragReject:ge.length>0,type:"setFiles"}),w&&w(ce,ge,_t),ge.length>0&&b&&b(ge,_t),ce.length>0&&A&&A(ce,_t)},[it,d,et,c,a,p,w,A,b,G]),bs=Rt.useCallback(function(st){st.preventDefault(),st.persist(),Xi(st),bt.current=[],Jp(st)&&Promise.resolve(r(st)).then(function(_t){Of(st)&&!N||Ee(_t,st)}).catch(function(_t){return vt(_t)}),it({type:"reset"})},[r,Ee,vt,N]),_s=Rt.useCallback(function(){if(U.current){it({type:"openDialog"}),At();var st={multiple:d,types:Q};window.showOpenFilePicker(st).then(function(_t){return r(_t)}).then(function(_t){Ee(_t,null),it({type:"closeDialog"})}).catch(function(_t){rC(_t)?(kt(_t),it({type:"closeDialog"})):aC(_t)?(U.current=!1,It.current?(It.current.value=null,It.current.click()):vt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):vt(_t)});return}It.current&&(it({type:"openDialog"}),At(),It.current.value=null,It.current.click())},[it,At,kt,T,Ee,vt,Q,d]),Aa=Rt.useCallback(function(st){!dt.current||!dt.current.isEqualNode(st.target)||(st.key===" "||st.key==="Enter"||st.keyCode===32||st.keyCode===13)&&(st.preventDefault(),_s())},[dt,_s]),il=Rt.useCallback(function(){it({type:"focus"})},[]),Xc=Rt.useCallback(function(){it({type:"blur"})},[]),Yc=Rt.useCallback(function(){F||(eC()?setTimeout(_s,0):_s())},[F,_s]),qi=function(_t){return i?null:_t},sl=function(_t){return D?null:qi(_t)},fr=function(_t){return B?null:qi(_t)},Xi=function(_t){N&&_t.stopPropagation()},mr=Rt.useMemo(function(){return function(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_t=st.refKey,ce=_t===void 0?"ref":_t,ge=st.role,Oe=st.onKeyDown,gr=st.onFocus,ri=st.onBlur,Es=st.onClick,Qc=st.onDragEnter,rl=st.onDragOver,ba=st.onDragLeave,Jc=st.onDrop,_a=Ff(st,cC);return fe(fe(Sv({onKeyDown:sl(ts(Oe,Aa)),onFocus:sl(ts(gr,il)),onBlur:sl(ts(ri,Xc)),onClick:qi(ts(Es,Yc)),onDragEnter:fr(ts(Qc,yt)),onDragOver:fr(ts(rl,Ot)),onDragLeave:fr(ts(ba,Wt)),onDrop:fr(ts(Jc,bs)),role:typeof ge=="string"&&ge!==""?ge:"presentation"},ce,dt),!i&&!D?{tabIndex:0}:{}),_a)}},[dt,Aa,il,Xc,Yc,yt,Ot,Wt,bs,D,B,i]),Kc=Rt.useCallback(function(st){st.stopPropagation()},[]),Uh=Rt.useMemo(function(){return function(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_t=st.refKey,ce=_t===void 0?"ref":_t,ge=st.onChange,Oe=st.onClick,gr=Ff(st,uC),ri=Sv({accept:et,multiple:d,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:qi(ts(ge,bs)),onClick:qi(ts(Oe,Kc)),tabIndex:-1},ce,It);return fe(fe({},ri),gr)}},[It,e,d,bs,i]);return fe(fe({},X),{},{isFocused:Z&&!i,getRootProps:mr,getInputProps:Uh,rootRef:dt,inputRef:It,open:qi(_s)})}function wC(u,t){switch(t.type){case"focus":return fe(fe({},u),{},{isFocused:!0});case"blur":return fe(fe({},u),{},{isFocused:!1});case"openDialog":return fe(fe({},Cv),{},{isFileDialogActive:!0});case"closeDialog":return fe(fe({},u),{},{isFileDialogActive:!1});case"setDraggedFiles":return fe(fe({},u),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return fe(fe({},u),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return fe({},Cv);default:return u}}function pA(){}const xC=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...u,children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),AC=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...u,children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),bC=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...u,children:Y.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),fA=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...u,children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),_C=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...u,children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),EC=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...u,children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),SC=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...u,children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),CC=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...u,children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09a2.09 2.09 0 00-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),kC=u=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...u,children:Y.jsxs("g",{transform:"translate(-4, 3)",children:[Y.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),Y.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})}),TC=u=>Y.jsxs("svg",{className:`animate-spin ${u.className}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...u,children:[Y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),RC=({onFilesAdded:u,isProcessing:t})=>{const e=Rt.useCallback(d=>{u(d)},[u]),{getRootProps:i,getInputProps:r,isDragActive:a}=db({onDrop:e,accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/webp":[".webp"]},disabled:t}),c=`
    flex flex-col items-center justify-center w-full h-64 
    border-2 border-dashed border-gray-600 rounded-lg 
    cursor-pointer transition-colors duration-300
    ${a?"bg-[#2c3544]":"bg-gray-800/50"}
    ${t?"opacity-50 cursor-not-allowed":"hover:bg-gray-700/50"}
  `;return Y.jsxs("div",{...i(),className:c,children:[Y.jsx("input",{...r()}),Y.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-gray-400",children:[Y.jsx(xC,{className:"w-10 h-10 mb-3"}),Y.jsx("p",{className:"mb-2 text-sm",children:"Dateien hier ablegen oder zum Auswhlen klicken"}),Y.jsx("p",{className:"text-xs",children:"Untersttzt PDF, JPG, PNG & WEBP"})]})]})},PC=({status:u})=>{switch(u){case"analyzing":return Y.jsx(TC,{className:"h-5 w-5 text-blue-400"});case"renamed":return Y.jsx(fA,{className:"h-5 w-5 text-[#4ADE80]"});case"saved":case"downloaded":return Y.jsx(fA,{className:"h-5 w-5 text-[#6B7280]"});case"error":return Y.jsx(_C,{className:"h-5 w-5 text-red-400"});case"cancelled":return Y.jsx(EC,{className:"h-5 w-5 text-[#F87171]"});default:return Y.jsx("div",{className:"h-5 w-5"})}},IC=({status:u,errorMessage:t})=>{switch(u){case"analyzing":return Y.jsx("p",{className:"text-sm text-blue-400",children:"Wird analysiert..."});case"renamed":return Y.jsx("p",{className:"text-sm text-[#4ADE80]",children:"Erfolgreich umbenannt"});case"saved":return Y.jsx("p",{className:"text-sm text-[#6B7280]",children:"Erfolgreich gespeichert"});case"downloaded":return Y.jsx("p",{className:"text-sm text-[#6B7280]",children:"Download erfolgreich"});case"error":return Y.jsxs("p",{className:"text-sm text-red-400",children:["Fehler: ",t]});case"cancelled":return Y.jsx("p",{className:"text-sm text-[#F87171]",children:"Vorgang vom Benutzer abgebrochen"});default:return null}},MC=({file:u,status:t,newName:e,errorMessage:i,onDelete:r,onDownload:a,onSend:c,isProcessing:d})=>{const p=t==="renamed"||t==="saved"||t==="cancelled"||t==="downloaded",f="p-[10px] rounded-full text-gray-400 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed";return Y.jsxs("div",{className:"bg-[#2c3544] p-4 rounded-lg flex items-center justify-between transition-all duration-300",children:[Y.jsxs("div",{className:"flex items-center gap-4 w-full min-w-0",children:[Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx(PC,{status:t})}),Y.jsxs("div",{className:"flex-1 min-w-0",children:[Y.jsx("p",{className:"text-base font-medium text-gray-200 truncate",children:e||u.name}),Y.jsx(IC,{status:t,errorMessage:i})]})]}),Y.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0 ml-4",children:[p&&Y.jsxs(Y.Fragment,{children:[Y.jsx("button",{onClick:c,className:`${f} hover:bg-[#60A5FA] hover:text-gray-900`,"aria-label":"Send",children:Y.jsx(kC,{className:"h-5 w-5"})}),Y.jsx("button",{onClick:a,className:`${f} hover:bg-[#4ADE80] hover:text-gray-900`,"aria-label":"Download",children:Y.jsx(SC,{className:"h-5 w-5"})})]}),Y.jsx("button",{onClick:r,disabled:d&&t==="analyzing",className:`${f} hover:bg-[#F87171] hover:text-gray-900`,"aria-label":"Delete",children:Y.jsx(CC,{className:"h-5 w-5"})})]})]})},LC=({directoryName:u,directoryHistory:t,onSelectDirectory:e,onSelectFromHistory:i,isProcessing:r})=>{const[a,c]=Rt.useState(!1),d=Rt.useRef(null);Rt.useEffect(()=>{const f=g=>{d.current&&!d.current.contains(g.target)&&c(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const p=f=>{i(f),c(!1)};return Y.jsxs("div",{className:"relative flex-grow min-w-0",ref:d,children:[Y.jsx("button",{onClick:()=>c(!a),className:"w-full bg-[#2c3544] text-gray-300 px-4 py-2 rounded-md hover:bg-[#333f54] transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-left truncate",disabled:r,title:u?`Ablageort: ${u}`:"Ablageort auswhlen",children:u?`Ablageort: ${u}`:"Ablageort:"}),a&&Y.jsxs("div",{className:"absolute z-10 top-full mt-2 w-full bg-[#2c3544] border border-gray-700 rounded-md shadow-lg",children:[Y.jsx("button",{onClick:e,className:"w-full text-left px-4 py-2 hover:bg-[#333f54]",children:"Neuen Ordner whlen..."}),t.map((f,g)=>Y.jsx("button",{onClick:()=>p(f),className:"w-full text-left px-4 py-2 hover:bg-[#333f54] truncate",title:f,children:f},g))]})]})},DC=({files:u,onDelete:t,onDownload:e,onSend:i,onClearAll:r,onDownloadAll:a,onSaveAll:c,isProcessing:d,directoryName:p,onSelectDirectory:f,directoryHistory:g,onSelectFromHistory:y})=>{if(u.length===0)return null;const w=u.some(b=>b.newName),A=u.some(b=>b.status==="renamed");return Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsx(LC,{directoryName:p,directoryHistory:g,onSelectDirectory:f,onSelectFromHistory:y,isProcessing:d}),Y.jsx("button",{onClick:c,className:"bg-[#2c3544] text-gray-300 px-4 py-2 rounded-md hover:bg-[#60A5FA] hover:text-gray-900 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",disabled:d||!A,children:"Alle speichern"}),Y.jsx("button",{onClick:a,className:"bg-[#2c3544] text-gray-300 px-4 py-2 rounded-md hover:bg-[#4ADE80] hover:text-gray-900 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",disabled:d||!w,children:"Alle downloaden"}),Y.jsx("button",{onClick:r,className:"bg-[#2c3544] text-gray-300 px-4 py-2 rounded-md hover:bg-[#F87171] hover:text-gray-900 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",disabled:d,children:"Alles leeren"})]}),Y.jsx("div",{className:"space-y-4",children:u.map((b,C)=>Y.jsx(MC,{file:b.file,status:b.status,newName:b.newName,errorMessage:b.errorMessage,onDelete:()=>t(C),onDownload:()=>e(C),onSend:()=>i(C),isProcessing:d},C))})]})},NC=`Du bist ein hochprziser Assistent zur automatischen Dateibenennung. Deine einzige Aufgabe ist es, aus dem BILD des Dokuments einen Dateinamen nach einem strengen Muster zu generieren. Analysiere das Bild sorgfltig.
Gib als Antwort *nur* den finalen Dateinamen zurck und absolut keinen anderen Text.
---
### REGEL 0: Bekannte Kreditkarten-Anbieter (HCHSTE PRIORITT)
Die folgenden Anbieter werden IMMER per Kreditkarte bezahlt. Wenn der Absender einer der folgenden ist, MUSS die Rechnung als 'CC' (Credit Card) markiert werden, auch wenn kein expliziter Hinweis auf eine Kreditkartenzahlung im Dokument zu sehen ist. Diese Regel berschreibt alle anderen Regeln. Ersetze 'OFFEN' durch 'CC'.
**Liste: {{ANBIETER_LISTE}}**
---
### SONDERFALL: Alpenblick GmbH Ausgangsrechnungen
Wenn der Absender klar "Alpenblick GmbH" ist, **ignoriere alle anderen Regeln** und befolge exakt dieses Format:
**[RNr] - [Projektnummer] [Rechnungstitel] Rechnung [Rechnungsdatum]**
*   **[RNr]**: Extrahiere die 'Rechnungs-Nr.' (z.B. '25-864').
*   **[Projektnummer]**: Extrahiere die 'Projektnummer' (z.B. '23647').
*   **[Rechnungstitel]**: Extrahiere eine kurze Beschreibung der Leistung (z.B. 'BR24 Redesign Farboptimierung Part BR24').
*   **[Rechnungsdatum]**: Extrahiere das 'Rechnungsdatum' und formatiere es **zwingend als YYMMDD** (z.B. aus '25.08.2025' wird '250825').
*   **Beispiel**: '25-864 - 23647 BR24 Redesign Farboptimierung Part BR24 Rechnung 250825'
---
### FR ALLE ANDEREN DOKUMENTE, befolge diese Regeln:
---
### 1. Dokumenttyp analysieren
* **'rechnung'**: Wenn eine klare Rechnungsnummer (z.B. "Rechnung","Rechnungsnummer", "Rechnung Nr.","Rechnungsnr.", "Rechnungs-Nr.", "Rechnungs-ID", "Invoice","RNr", "Re.Nr.", "INV-", "RE-", "TSE-Transaktion") vorhanden ist.
* **'bestellung'**: Wenn Begriffe wie "Bestellnummer", "Abrufbestellung", "Order", "Purchase Order", "Auftragsbesttigung" vorkommen.
* **'lieferschein'**: Wenn Begriffe wie "Lieferschein", "Einlieferungsschein", "Einlieferungsbeleg", "Zustellnachweis", "shipping label", "customs declaration", "air waybill" vorkommen.
* **'paypal'**: Wenn Begriffe wie "Transaktionscode:", "PayPal" vorkommen.
* **'vertrag'**: Wenn Begriffe wie "Vertrag", "Vertragsnummer", "Agreement" oder "Police" (auer Versicherung) dominant sind.
* **'versicherung'**: Wenn es sich klar um ein Versicherungsdokument handelt (z.B. "Versicherungsschein", "Policennummer", Name einer Versicherung).
* **'quittung'**: Wenn es ein Kassenbon, Beleg oder eine Quittung ohne Rechnungsnummer ist. Wenn Begriffe wie "Beleg-Nr.", "Beleg","Beleg-Nr", "Ausgabebeleg","Bonnr.", "Bon-Nr", "Kasse", "Zahlungsbeleg" vorkommen.
* **'dok'**: (Fallback) Wenn keiner der obigen Typen klar zutrifft.
---
### 2. Kerninformationen extrahieren
* **[Datum]**: Das primre Dokumentdatum (YYYYMMDD). Achte auf ungewhnliche Formate wie '19|2|2021' und wandle sie korrekt um.
* **[Unternehmen]**: Der prgnante Name des **Absenders/Auftraggebers**. **Achte darauf, den Absender (der das Dokument erstellt hat, oft im Briefkopf oder der Fuzeile) vom Empfnger (oft in einem Adressfeld mit der berschrift 'Unternehmen' oder 'An') klar zu unterscheiden.**
* **[Bezeichnung]**: Eine sehr kurze Beschreibung des Inhalts (max. 3-4 Worte). **Suche nach einer Zeile, die mit 'Thema' oder 'Betreff' beginnt.** Gib handschriftlichen Notizen wie "Aufwandentschdigung" Vorrang vor gedruckten Titeln.
* **[Nummer]**: Die relevante Identifikationsnummer (Rechnungsnr, Bestellnr, Vertragsnr, Policennr, TSE-Transaktion, Lieferscheinr, Transaktionscode).
---
### 3. Dateinamen zusammenbauen (OHNE Dateiendung wie .pdf oder .jpg)
* **'rechnung'**: [Datum] RNr [Nummer] [Unternehmen] [Bezeichnung] OFFEN
* **'bestellung'**: [Datum] BESTELL [Nummer] [Unternehmen] [Bezeichnung]
* **'lieferschein'**: [Datum] LS [Nummer] [Unternehmen] [Bezeichnung]
* **'paypal'**: [Datum] TC [Nummer] [Unternehmen] [Bezeichnung]
* **'vertrag'**: [Datum] VTRG [Nummer] [Unternehmen] [Bezeichnung]
* **'versicherung'**: [Datum] VERS [Nummer] [Unternehmen] [Bezeichnung]
* **'quittung'**: [Datum] QUITT [Unternehmen] [Bezeichnung]
* **'dok'**: [Datum] DOK [Unternehmen] [Bezeichnung]
---
### 4. WICHTIGSTE REGEL: KREDITKARTE
* **Dies ist die wichtigste Regel und berschreibt andere Status-Angaben.**
* Wenn das Dokument eine Zahlung per Kreditkarte (z.B. Mastercard, Visa, AMEX), einen Zahlungsdienstleister wie **Stripe** erwhnt, oder Formulierungen wie **"Betrag wurde beglichen mit Credit Card"** enthlt, ist die Rechnung bereits bezahlt.
* **Fr Rechnungen**: Ersetze das Wort \`OFFEN\` durch das Krzel \`CC\` Der Dateiname MUSS auf \`... CC\` enden, nicht auf \`... OFFEN CC\`.
 * **KORREKTES BEISPIEL**: \`20250703 RNr AF70883817 Apple Retail Germany CC\`
* **Fr andere Dokumente (z.B. Quittungen, Zahlungsbelege)**: Fge das Krzel \` CC\` am Ende hinzu.
 * **BEISPIEL**: \`20250705 QUITT The Apartment Suite CC\`
---
Analysiere jetzt das folgende Dokumentenbild und gib NUR den Dateinamen zurck.`;var mA;(function(u){u.STRING="string",u.NUMBER="number",u.INTEGER="integer",u.BOOLEAN="boolean",u.ARRAY="array",u.OBJECT="object"})(mA||(mA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gA;(function(u){u.LANGUAGE_UNSPECIFIED="language_unspecified",u.PYTHON="python"})(gA||(gA={}));var vA;(function(u){u.OUTCOME_UNSPECIFIED="outcome_unspecified",u.OUTCOME_OK="outcome_ok",u.OUTCOME_FAILED="outcome_failed",u.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(vA||(vA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=["user","model","function","system"];var wA;(function(u){u.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",u.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",u.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",u.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",u.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",u.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(wA||(wA={}));var xA;(function(u){u.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",u.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",u.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",u.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",u.BLOCK_NONE="BLOCK_NONE"})(xA||(xA={}));var AA;(function(u){u.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",u.NEGLIGIBLE="NEGLIGIBLE",u.LOW="LOW",u.MEDIUM="MEDIUM",u.HIGH="HIGH"})(AA||(AA={}));var bA;(function(u){u.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",u.SAFETY="SAFETY",u.OTHER="OTHER"})(bA||(bA={}));var sd;(function(u){u.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",u.STOP="STOP",u.MAX_TOKENS="MAX_TOKENS",u.SAFETY="SAFETY",u.RECITATION="RECITATION",u.LANGUAGE="LANGUAGE",u.BLOCKLIST="BLOCKLIST",u.PROHIBITED_CONTENT="PROHIBITED_CONTENT",u.SPII="SPII",u.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",u.OTHER="OTHER"})(sd||(sd={}));var _A;(function(u){u.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",u.RETRIEVAL_QUERY="RETRIEVAL_QUERY",u.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",u.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",u.CLASSIFICATION="CLASSIFICATION",u.CLUSTERING="CLUSTERING"})(_A||(_A={}));var EA;(function(u){u.MODE_UNSPECIFIED="MODE_UNSPECIFIED",u.AUTO="AUTO",u.ANY="ANY",u.NONE="NONE"})(EA||(EA={}));var SA;(function(u){u.MODE_UNSPECIFIED="MODE_UNSPECIFIED",u.MODE_DYNAMIC="MODE_DYNAMIC"})(SA||(SA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Pl extends pn{constructor(t,e){super(t),this.response=e}}class hb extends pn{constructor(t,e,i,r){super(t),this.status=e,this.statusText=i,this.errorDetails=r}}class ma extends pn{}class pb extends pn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="https://generativelanguage.googleapis.com",FC="v1beta",jC="0.24.1",zC="genai-js";var Ko;(function(u){u.GENERATE_CONTENT="generateContent",u.STREAM_GENERATE_CONTENT="streamGenerateContent",u.COUNT_TOKENS="countTokens",u.EMBED_CONTENT="embedContent",u.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ko||(Ko={}));class BC{constructor(t,e,i,r,a){this.model=t,this.task=e,this.apiKey=i,this.stream=r,this.requestOptions=a}toString(){var t,e;const i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||FC;let a=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||OC}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function HC(u){const t=[];return u!=null&&u.apiClient&&t.push(u.apiClient),t.push(`${zC}/${jC}`),t.join(" ")}async function UC(u){var t;const e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",HC(u.requestOptions)),e.append("x-goog-api-key",u.apiKey);let i=(t=u.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new ma(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,a]of i.entries()){if(r==="x-goog-api-key")throw new ma(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new ma(`Header name ${r} can only be set using the apiClient field`);e.append(r,a)}}return e}async function $C(u,t,e,i,r,a){const c=new BC(u,t,e,i,a);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},qC(a)),{method:"POST",headers:await UC(c),body:r})}}async function jh(u,t,e,i,r,a={},c=fetch){const{url:d,fetchOptions:p}=await $C(u,t,e,i,r,a);return GC(d,p,c)}async function GC(u,t,e=fetch){let i;try{i=await e(u,t)}catch(r){VC(r,u)}return i.ok||await WC(i,u),i}function VC(u,t){let e=u;throw e.name==="AbortError"?(e=new pb(`Request aborted when fetching ${t.toString()}: ${u.message}`),e.stack=u.stack):u instanceof hb||u instanceof ma||(e=new pn(`Error fetching from ${t.toString()}: ${u.message}`),e.stack=u.stack),e}async function WC(u,t){let e="",i;try{const r=await u.json();e=r.error.message,r.error.details&&(e+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new hb(`Error fetching from ${t.toString()}: [${u.status} ${u.statusText}] ${e}`,u.status,u.statusText,i)}function qC(u){const t={};if((u==null?void 0:u.signal)!==void 0||(u==null?void 0:u.timeout)>=0){const e=new AbortController;(u==null?void 0:u.timeout)>=0&&setTimeout(()=>e.abort(),u.timeout),u!=null&&u.signal&&u.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(u){return u.text=()=>{if(u.candidates&&u.candidates.length>0){if(u.candidates.length>1&&console.warn(`This response had ${u.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),sf(u.candidates[0]))throw new Pl(`${Fr(u)}`,u);return XC(u)}else if(u.promptFeedback)throw new Pl(`Text not available. ${Fr(u)}`,u);return""},u.functionCall=()=>{if(u.candidates&&u.candidates.length>0){if(u.candidates.length>1&&console.warn(`This response had ${u.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),sf(u.candidates[0]))throw new Pl(`${Fr(u)}`,u);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),CA(u)[0]}else if(u.promptFeedback)throw new Pl(`Function call not available. ${Fr(u)}`,u)},u.functionCalls=()=>{if(u.candidates&&u.candidates.length>0){if(u.candidates.length>1&&console.warn(`This response had ${u.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),sf(u.candidates[0]))throw new Pl(`${Fr(u)}`,u);return CA(u)}else if(u.promptFeedback)throw new Pl(`Function call not available. ${Fr(u)}`,u)},u}function XC(u){var t,e,i,r;const a=[];if(!((e=(t=u.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const c of(r=(i=u.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)c.text&&a.push(c.text),c.executableCode&&a.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&a.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function CA(u){var t,e,i,r;const a=[];if(!((e=(t=u.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const c of(r=(i=u.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)c.functionCall&&a.push(c.functionCall);if(a.length>0)return a}const YC=[sd.RECITATION,sd.SAFETY,sd.LANGUAGE];function sf(u){return!!u.finishReason&&YC.includes(u.finishReason)}function Fr(u){var t,e,i;let r="";if((!u.candidates||u.candidates.length===0)&&u.promptFeedback)r+="Response was blocked",!((t=u.promptFeedback)===null||t===void 0)&&t.blockReason&&(r+=` due to ${u.promptFeedback.blockReason}`),!((e=u.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(r+=`: ${u.promptFeedback.blockReasonMessage}`);else if(!((i=u.candidates)===null||i===void 0)&&i[0]){const a=u.candidates[0];sf(a)&&(r+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(r+=`: ${a.finishMessage}`))}return r}function ld(u){return this instanceof ld?(this.v=u,this):new ld(u)}function KC(u,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(u,t||[]),r,a=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(w){i[w]&&(r[w]=function(A){return new Promise(function(b,C){a.push([w,A,b,C])>1||d(w,A)})})}function d(w,A){try{p(i[w](A))}catch(b){y(a[0][3],b)}}function p(w){w.value instanceof ld?Promise.resolve(w.value.v).then(f,g):y(a[0][2],w)}function f(w){d("next",w)}function g(w){d("throw",w)}function y(w,A){w(A),a.shift(),a.length&&d(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function QC(u){const t=u.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=tk(t),[i,r]=e.tee();return{stream:ZC(i),response:JC(r)}}async function JC(u){const t=[],e=u.getReader();for(;;){const{done:i,value:r}=await e.read();if(i)return $y(ek(t));t.push(r)}}function ZC(u){return KC(this,arguments,function*(){const e=u.getReader();for(;;){const{value:i,done:r}=yield ld(e.read());if(r)break;yield yield ld($y(i))}})}function tk(u){const t=u.getReader();return new ReadableStream({start(i){let r="";return a();function a(){return t.read().then(({value:c,done:d})=>{if(d){if(r.trim()){i.error(new pn("Failed to parse stream"));return}i.close();return}r+=c;let p=r.match(kA),f;for(;p;){try{f=JSON.parse(p[1])}catch{i.error(new pn(`Error parsing JSON response: "${p[1]}"`));return}i.enqueue(f),r=r.substring(p[0].length),p=r.match(kA)}return a()}).catch(c=>{let d=c;throw d.stack=c.stack,d.name==="AbortError"?d=new pb("Request aborted when reading from the stream"):d=new pn("Error reading from the stream"),d})}}})}function ek(u){const t=u[u.length-1],e={promptFeedback:t==null?void 0:t.promptFeedback};for(const i of u){if(i.candidates){let r=0;for(const a of i.candidates)if(e.candidates||(e.candidates=[]),e.candidates[r]||(e.candidates[r]={index:r}),e.candidates[r].citationMetadata=a.citationMetadata,e.candidates[r].groundingMetadata=a.groundingMetadata,e.candidates[r].finishReason=a.finishReason,e.candidates[r].finishMessage=a.finishMessage,e.candidates[r].safetyRatings=a.safetyRatings,a.content&&a.content.parts){e.candidates[r].content||(e.candidates[r].content={role:a.content.role||"user",parts:[]});const c={};for(const d of a.content.parts)d.text&&(c.text=d.text),d.functionCall&&(c.functionCall=d.functionCall),d.executableCode&&(c.executableCode=d.executableCode),d.codeExecutionResult&&(c.codeExecutionResult=d.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),e.candidates[r].content.parts.push(c)}r++}i.usageMetadata&&(e.usageMetadata=i.usageMetadata)}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(u,t,e,i){const r=await jh(t,Ko.STREAM_GENERATE_CONTENT,u,!0,JSON.stringify(e),i);return QC(r)}async function mb(u,t,e,i){const a=await(await jh(t,Ko.GENERATE_CONTENT,u,!1,JSON.stringify(e),i)).json();return{response:$y(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(u){if(u!=null){if(typeof u=="string")return{role:"system",parts:[{text:u}]};if(u.text)return{role:"system",parts:[u]};if(u.parts)return u.role?u:{role:"system",parts:u.parts}}}function cd(u){let t=[];if(typeof u=="string")t=[{text:u}];else for(const e of u)typeof e=="string"?t.push({text:e}):t.push(e);return nk(t)}function nk(u){const t={role:"user",parts:[]},e={role:"function",parts:[]};let i=!1,r=!1;for(const a of u)"functionResponse"in a?(e.parts.push(a),r=!0):(t.parts.push(a),i=!0);if(i&&r)throw new pn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new pn("No content is provided for sending chat message.");return i?t:e}function ik(u,t){var e;let i={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(e=t==null?void 0:t.cachedContent)===null||e===void 0?void 0:e.name,contents:[]};const r=u.generateContentRequest!=null;if(u.contents){if(r)throw new ma("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=u.contents}else if(r)i=Object.assign(Object.assign({},i),u.generateContentRequest);else{const a=cd(u);i.contents=[a]}return{generateContentRequest:i}}function TA(u){let t;return u.contents?t=u:t={contents:[cd(u)]},u.systemInstruction&&(t.systemInstruction=gb(u.systemInstruction)),t}function sk(u){return typeof u=="string"||Array.isArray(u)?{content:cd(u)}:u}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],rk={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function ak(u){let t=!1;for(const e of u){const{role:i,parts:r}=e;if(!t&&i!=="user")throw new pn(`First content should be with role 'user', got ${i}`);if(!yA.includes(i))throw new pn(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(yA)}`);if(!Array.isArray(r))throw new pn("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new pn("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of r)for(const p of RA)p in d&&(a[p]+=1);const c=rk[i];for(const d of RA)if(!c.includes(d)&&a[d]>0)throw new pn(`Content with role '${i}' can't contain '${d}' part`);t=!0}}function PA(u){var t;if(u.candidates===void 0||u.candidates.length===0)return!1;const e=(t=u.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(const i of e.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="SILENT_ERROR";class ok{constructor(t,e,i,r={}){this.model=e,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i!=null&&i.history&&(ak(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var i,r,a,c,d,p;await this._sendPromise;const f=cd(t),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),e);let w;return this._sendPromise=this._sendPromise.then(()=>mb(this._apiKey,this.model,g,y)).then(A=>{var b;if(PA(A.response)){this._history.push(f);const C=Object.assign({parts:[],role:"model"},(b=A.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(C)}else{const C=Fr(A.response);C&&console.warn(`sendMessage() was unsuccessful. ${C}. Inspect response object for details.`)}w=A}).catch(A=>{throw this._sendPromise=Promise.resolve(),A}),await this._sendPromise,w}async sendMessageStream(t,e={}){var i,r,a,c,d,p;await this._sendPromise;const f=cd(t),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,f]},y=Object.assign(Object.assign({},this._requestOptions),e),w=fb(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>w).catch(A=>{throw new Error(IA)}).then(A=>A.response).then(A=>{if(PA(A)){this._history.push(f);const b=Object.assign({},A.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Fr(A);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(A=>{A.message!==IA&&console.error(A)}),w}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lk(u,t,e,i){return(await jh(t,Ko.COUNT_TOKENS,u,!1,JSON.stringify(e),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(u,t,e,i){return(await jh(t,Ko.EMBED_CONTENT,u,!1,JSON.stringify(e),i)).json()}async function uk(u,t,e,i){const r=e.requests.map(c=>Object.assign(Object.assign({},c),{model:t}));return(await jh(t,Ko.BATCH_EMBED_CONTENTS,u,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t,e,i={}){this.apiKey=t,this._requestOptions=i,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=gb(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var i;const r=TA(t),a=Object.assign(Object.assign({},this._requestOptions),e);return mb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}async generateContentStream(t,e={}){var i;const r=TA(t),a=Object.assign(Object.assign({},this._requestOptions),e);return fb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}startChat(t){var e;return new ok(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){const i=ik(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),e);return lk(this.apiKey,this.model,i,r)}async embedContent(t,e={}){const i=sk(t),r=Object.assign(Object.assign({},this._requestOptions),e);return ck(this.apiKey,this.model,i,r)}async batchEmbedContents(t,e={}){const i=Object.assign(Object.assign({},this._requestOptions),e);return uk(this.apiKey,this.model,t,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new pn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new MA(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,i){if(!t.name)throw new ma("Cached content must contain a `name` field.");if(!t.model)throw new ma("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const c of r)if(e!=null&&e[c]&&t[c]&&(e==null?void 0:e[c])!==t[c]){if(c==="model"){const d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,p=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(d===p)continue}throw new ma(`Different value for "${c}" specified in modelParams (${e[c]}) and cachedContent (${t[c]})`)}const a=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new MA(this.apiKey,a,i)}}var rd={};rd.d=(u,t)=>{for(var e in t)rd.o(t,e)&&!rd.o(u,e)&&Object.defineProperty(u,e,{enumerable:!0,get:t[e]})};rd.o=(u,t)=>Object.prototype.hasOwnProperty.call(u,t);var Tt=globalThis.pdfjsLib={};rd.d(Tt,{AbortException:()=>va,AnnotationEditorLayer:()=>Ny,AnnotationEditorParamsType:()=>Bt,AnnotationEditorType:()=>Lt,AnnotationEditorUIManager:()=>Jo,AnnotationLayer:()=>aR,AnnotationMode:()=>jr,ColorPicker:()=>$f,DOMSVGFactory:()=>Jy,DrawLayer:()=>jy,FeatureTest:()=>_n,GlobalWorkerOptions:()=>cr,ImageKind:()=>rf,InvalidPDFException:()=>Tv,MissingPDFException:()=>ud,OPS:()=>Ii,OutputScale:()=>Pv,PDFDataRangeTransport:()=>y_,PDFDateString:()=>Xy,PDFWorker:()=>Hl,PasswordResponses:()=>mk,PermissionFlag:()=>fk,PixelsPerInch:()=>ya,RenderingCancelledException:()=>Wy,TextLayer:()=>dd,TouchManager:()=>Hf,UnexpectedResponseException:()=>jf,Util:()=>gt,VerbosityLevel:()=>hm,XfaLayer:()=>x_,build:()=>BT,createValidAbsoluteUrl:()=>wk,fetchData:()=>gm,getDocument:()=>IT,getFilenameFromUrl:()=>Tk,getPdfFilenameFromUrl:()=>Rk,getXfaPageViewport:()=>Pk,isDataScheme:()=>vm,isPdfFile:()=>qy,noContextMenu:()=>Vi,normalizeUnicode:()=>Sk,setLayerDimensions:()=>Qo,shadow:()=>zt,stopEvent:()=>ii,version:()=>zT});const fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),vb=[1,0,0,1,0,0],kv=[.001,0,0,.001,0,0],hk=1e7,mv=1.35,ei={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},jr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pk="pdfjs_internal_editor_",Lt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Bt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},fk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},rn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},rf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ie={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Fu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},hm={ERRORS:0,WARNINGS:1,INFOS:5},Ii={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},mk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let pm=hm.WARNINGS;function gk(u){Number.isInteger(u)&&(pm=u)}function vk(){return pm}function fm(u){pm>=hm.INFOS&&console.log(`Info: ${u}`)}function Dt(u){pm>=hm.WARNINGS&&console.log(`Warning: ${u}`)}function Zt(u){throw new Error(u)}function ke(u,t){u||Zt(t)}function yk(u){switch(u==null?void 0:u.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function wk(u,t=null,e=null){if(!u)return null;try{if(e&&typeof u=="string"){if(e.addDefaultProtocol&&u.startsWith("www.")){const r=u.match(/\./g);(r==null?void 0:r.length)>=2&&(u=`http://${u}`)}if(e.tryConvertEncoding)try{u=Ek(u)}catch{}}const i=t?new URL(u,t):new URL(u);if(yk(i))return i}catch{}return null}function zt(u,t,e,i=!1){return Object.defineProperty(u,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const xa=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class LA extends xa{constructor(t,e){super(t,"PasswordException"),this.code=e}}class gv extends xa{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Tv extends xa{constructor(t){super(t,"InvalidPDFException")}}class ud extends xa{constructor(t){super(t,"MissingPDFException")}}class jf extends xa{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class xk extends xa{constructor(t){super(t,"FormatError")}}class va extends xa{constructor(t){super(t,"AbortException")}}function yb(u){(typeof u!="object"||(u==null?void 0:u.length)===void 0)&&Zt("Invalid argument for bytesToString");const t=u.length,e=8192;if(t<e)return String.fromCharCode.apply(null,u);const i=[];for(let r=0;r<t;r+=e){const a=Math.min(r+e,t),c=u.subarray(r,a);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function mm(u){typeof u!="string"&&Zt("Invalid argument for stringToBytes");const t=u.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=u.charCodeAt(i)&255;return e}function Ak(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function Gy(u){const t=Object.create(null);for(const[e,i]of u)t[e]=i;return t}function bk(){const u=new Uint8Array(4);return u[0]=1,new Uint32Array(u.buffer,0,1)[0]===1}function _k(){try{return new Function(""),!0}catch{return!1}}class _n{static get isLittleEndian(){return zt(this,"isLittleEndian",bk())}static get isEvalSupported(){return zt(this,"isEvalSupported",_k())}static get isOffscreenCanvasSupported(){return zt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return zt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?zt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):zt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return zt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const vv=Array.from(Array(256).keys(),u=>u.toString(16).padStart(2,"0"));var ur,af,Rv;class gt{static makeHexColor(t,e,i){return`#${vv[t]}${vv[e]}${vv[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],r=t[0]*e[1]+t[1]*e[3]+e[5];return[i,r]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],r=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[r,a]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),r=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),c=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],a[0],c[0]),Math.min(i[1],r[1],a[1],c[1]),Math.max(i[0],r[0],a[0],c[0]),Math.max(i[1],r[1],a[1],c[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],c=t[2]*e[1]+t[3]*e[3],d=(i+c)/2,p=Math.sqrt((i+c)**2-4*(i*c-a*r))/2,f=d+p||1,g=d-p||1;return[Math.sqrt(f),Math.sqrt(g)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>c?null:[i,a,r,c]}static bezierBoundingBox(t,e,i,r,a,c,d,p,f){return f?(f[0]=Math.min(f[0],t,d),f[1]=Math.min(f[1],e,p),f[2]=Math.max(f[2],t,d),f[3]=Math.max(f[3],e,p)):f=[Math.min(t,d),Math.min(e,p),Math.max(t,d),Math.max(e,p)],S(this,ur,Rv).call(this,t,i,a,d,e,r,c,p,3*(-t+3*(i-a)+d),6*(t-2*i+a),3*(i-t),f),S(this,ur,Rv).call(this,t,i,a,d,e,r,c,p,3*(-e+3*(r-c)+p),6*(e-2*r+c),3*(r-e),f),f}}ur=new WeakSet,af=function(t,e,i,r,a,c,d,p,f,g){if(f<=0||f>=1)return;const y=1-f,w=f*f,A=w*f,b=y*(y*(y*t+3*f*e)+3*w*i)+A*r,C=y*(y*(y*a+3*f*c)+3*w*d)+A*p;g[0]=Math.min(g[0],b),g[1]=Math.min(g[1],C),g[2]=Math.max(g[2],b),g[3]=Math.max(g[3],C)},Rv=function(t,e,i,r,a,c,d,p,f,g,y,w){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&S(this,ur,af).call(this,t,e,i,r,a,c,d,p,-y/g,w);return}const A=g**2-4*y*f;if(A<0)return;const b=Math.sqrt(A),C=2*f;S(this,ur,af).call(this,t,e,i,r,a,c,d,p,(-g+b)/C,w),S(this,ur,af).call(this,t,e,i,r,a,c,d,p,(-g-b)/C,w)},E(gt,ur);function Ek(u){return decodeURIComponent(escape(u))}let yv=null,DA=null;function Sk(u){return yv||(yv=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,DA=new Map([["","t"]])),u.replaceAll(yv,(t,e,i)=>e?e.normalize("NFKC"):DA.get(i))}function Ck(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const u=new Uint8Array(32);return crypto.getRandomValues(u),yb(u)}const Vy="pdfjs_internal_id_";function kk(u){return Uint8Array.prototype.toBase64?u.toBase64():btoa(yb(u))}typeof Promise.try!="function"&&(Promise.try=function(u,...t){return new Promise(e=>{e(u(...t))})});const Ls="http://www.w3.org/2000/svg",$a=class $a{};Et($a,"CSS",96),Et($a,"PDF",72),Et($a,"PDF_TO_CSS_UNITS",$a.CSS/$a.PDF);let ya=$a;async function gm(u,t="text"){if(Uu(u,document.baseURI)){const e=await fetch(u);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",u,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class zh{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:a=0,offsetY:c=0,dontFlip:d=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=a,this.offsetY=c,i*=e;const p=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,w,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,w=0,A=1;break;case 90:g=0,y=1,w=1,A=0;break;case 270:g=0,y=-1,w=-1,A=0;break;case 0:g=1,y=0,w=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(w=-w,A=-A);let b,C,k,T;g===0?(b=Math.abs(f-t[1])*i+a,C=Math.abs(p-t[0])*i+c,k=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(b=Math.abs(p-t[0])*i+a,C=Math.abs(f-t[1])*i+c,k=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[g*i,y*i,w*i,A*i,b-g*i*p-w*i*f,C-y*i*p-A*i*f],this.width=k,this.height=T}get rawDims(){const{userUnit:t,viewBox:e}=this,i=e.map(r=>r*t);return zt(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new zh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(t,e){return gt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=gt.applyTransform([t[0],t[1]],this.transform),i=gt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return gt.applyInverseTransform([t,e],this.transform)}}class Wy extends xa{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function vm(u){const t=u.length;let e=0;for(;e<t&&u[e].trim()==="";)e++;return u.substring(e,e+5).toLowerCase()==="data:"}function qy(u){return typeof u=="string"&&/\.pdf$/i.test(u)}function Tk(u){return[u]=u.split(/[#?]/,1),u.substring(u.lastIndexOf("/")+1)}function Rk(u,t="document.pdf"){if(typeof u!="string")return t;if(vm(u))return Dt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(u);let a=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||t}class NA{constructor(){Et(this,"started",Object.create(null));Et(this,"times",[])}time(t){t in this.started&&Dt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Dt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:a}of this.times)t.push(`${i.padEnd(e)} ${a-r}ms
`);return t.join("")}}function Uu(u,t){try{const{protocol:e}=t?new URL(u,t):new URL(u);return e==="http:"||e==="https:"}catch{return!1}}function Vi(u){u.preventDefault()}function ii(u){u.preventDefault(),u.stopPropagation()}var pd;class Xy{static toDateObject(t){if(!t||typeof t!="string")return null;o(this,pd)||x(this,pd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=o(this,pd).exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let d=parseInt(e[5],10);d=d>=0&&d<=59?d:0;let p=parseInt(e[6],10);p=p>=0&&p<=59?p:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,d+=y):f==="+"&&(c-=g,d-=y),new Date(Date.UTC(i,r,a,c,d,p))}}pd=new WeakMap,E(Xy,pd);function Pk(u,{scale:t=1,rotation:e=0}){const{width:i,height:r}=u.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new zh({viewBox:a,userUnit:1,scale:t,rotation:e})}function Yy(u){if(u.startsWith("#")){const t=parseInt(u.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return u.startsWith("rgb(")?u.slice(4,-1).split(",").map(t=>parseInt(t)):u.startsWith("rgba(")?u.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Dt(`Not a valid color format: "${u}"`),[0,0,0])}function Ik(u){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of u.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;u.set(e,Yy(i))}t.remove()}function oe(u){const{a:t,b:e,c:i,d:r,e:a,f:c}=u.getTransform();return[t,e,i,r,a,c]}function es(u){const{a:t,b:e,c:i,d:r,e:a,f:c}=u.getTransform().invertSelf();return[t,e,i,r,a,c]}function Qo(u,t,e=!1,i=!0){if(t instanceof zh){const{pageWidth:r,pageHeight:a}=t.rawDims,{style:c}=u,d=_n.isCSSRoundSupported,p=`var(--scale-factor) * ${r}px`,f=`var(--scale-factor) * ${a}px`,g=d?`round(down, ${p}, var(--scale-round-x, 1px))`:`calc(${p})`,y=d?`round(down, ${f}, var(--scale-round-y, 1px))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}i&&u.setAttribute("data-main-rotation",t.rotation)}class Pv{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var zr,Va,Mi,Wa,fd,md,Wf,wb,En,xb,Ab,of,bb,Mv;const Os=class Os{constructor(t){E(this,En);E(this,zr,null);E(this,Va,null);E(this,Mi);E(this,Wa,null);E(this,fd,null);x(this,Mi,t),o(Os,md)||x(Os,md,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=x(this,zr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=o(this,Mi)._uiManager._signal;t.addEventListener("contextmenu",Vi,{signal:e}),t.addEventListener("pointerdown",S(Os,Wf,wb),{signal:e});const i=x(this,Wa,document.createElement("div"));i.className="buttons",t.append(i);const r=o(this,Mi).toolbarPosition;if(r){const{style:a}=t,c=o(this,Mi)._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*c}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return S(this,En,bb).call(this),t}get div(){return o(this,zr)}hide(){var t;o(this,zr).classList.add("hidden"),(t=o(this,Va))==null||t.hideDropdown()}show(){var t;o(this,zr).classList.remove("hidden"),(t=o(this,fd))==null||t.shown()}async addAltText(t){const e=await t.render();S(this,En,of).call(this,e),o(this,Wa).prepend(e,o(this,En,Mv)),x(this,fd,t)}addColorPicker(t){x(this,Va,t);const e=t.renderButton();S(this,En,of).call(this,e),o(this,Wa).prepend(e,o(this,En,Mv))}remove(){var t;o(this,zr).remove(),(t=o(this,Va))==null||t.destroy(),x(this,Va,null)}};zr=new WeakMap,Va=new WeakMap,Mi=new WeakMap,Wa=new WeakMap,fd=new WeakMap,md=new WeakMap,Wf=new WeakSet,wb=function(t){t.stopPropagation()},En=new WeakSet,xb=function(t){o(this,Mi)._focusEventsAllowed=!1,ii(t)},Ab=function(t){o(this,Mi)._focusEventsAllowed=!0,ii(t)},of=function(t){const e=o(this,Mi)._uiManager._signal;t.addEventListener("focusin",S(this,En,xb).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",S(this,En,Ab).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Vi,{signal:e})},bb=function(){const{editorType:t,_uiManager:e}=o(this,Mi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",o(Os,md)[t]),S(this,En,of).call(this,i),i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),o(this,Wa).append(i)},Mv=function(){const t=document.createElement("div");return t.className="divider",t},E(Os,Wf),E(Os,md,null);let Iv=Os;var gd,qa,Xa,wa,_b,Eb,Sb;class Mk{constructor(t){E(this,wa);E(this,gd,null);E(this,qa,null);E(this,Xa);x(this,Xa,t)}show(t,e,i){const[r,a]=S(this,wa,Eb).call(this,e,i),{style:c}=o(this,qa)||x(this,qa,S(this,wa,_b).call(this));t.append(o(this,qa)),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,qa).remove()}}gd=new WeakMap,qa=new WeakMap,Xa=new WeakMap,wa=new WeakSet,_b=function(){const t=x(this,qa,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Vi,{signal:o(this,Xa)._signal});const e=x(this,gd,document.createElement("div"));return e.className="buttons",t.append(e),S(this,wa,Sb).call(this),t},Eb=function(t,e){let i=0,r=0;for(const a of t){const c=a.y+a.height;if(c<i)continue;const d=a.x+(e?a.width:0);if(c>i){r=d,i=c;continue}e?d>r&&(r=d):d<r&&(r=d)}return[e?1-r:r,i]},Sb=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=o(this,Xa)._signal;t.addEventListener("contextmenu",Vi,{signal:i}),t.addEventListener("click",()=>{o(this,Xa).highlightSelection("floating_button")},{signal:i}),o(this,gd).append(t)};function zf(u,t,e){for(const i of e)t.addEventListener(i,u[i].bind(u))}var qf;class Lk{constructor(){E(this,qf,0)}get id(){return`${pk}${vn(this,qf)._++}`}}qf=new WeakMap;var Ul,vd,ln,$l,lf;const t0=class t0{constructor(){E(this,$l);E(this,Ul,Ck());E(this,vd,0);E(this,ln,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return zt(this,"_isSVGFittingCanvas",a)}async getFromFile(t){const{lastModified:e,name:i,size:r,type:a}=t;return S(this,$l,lf).call(this,`${e}_${i}_${r}_${a}`,t)}async getFromUrl(t){return S(this,$l,lf).call(this,t,t)}async getFromBlob(t,e){const i=await e;return S(this,$l,lf).call(this,t,i)}async getFromId(t){o(this,ln)||x(this,ln,new Map);const e=o(this,ln).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){o(this,ln)||x(this,ln,new Map);let i=o(this,ln).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${o(this,Ul)}_${vn(this,vd)._++}`,refCounter:1,isSvg:!1},o(this,ln).set(t,i),o(this,ln).set(i.id,i),i}getSvgUrl(t){const e=o(this,ln).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;o(this,ln)||x(this,ln,new Map);const e=o(this,ln).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}(r=i.close)==null||r.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${o(this,Ul)}_`)}};Ul=new WeakMap,vd=new WeakMap,ln=new WeakMap,$l=new WeakSet,lf=async function(t,e){o(this,ln)||x(this,ln,new Map);let i=o(this,ln).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${o(this,Ul)}_${vn(this,vd)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(i.url=e,r=await gm(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const a=t0._isSVGFittingCanvas,c=new FileReader,d=new Image,p=new Promise((f,g)=>{d.onload=()=>{i.bitmap=d,i.isSvg=!0,f()},c.onload=async()=>{const y=i.svgUrl=c.result;d.src=await a?`${y}#svgView(preserveAspectRatio(none))`:y},d.onerror=c.onerror=g});c.readAsDataURL(r),await p}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){Dt(r),i=null}return o(this,ln).set(t,i),i&&o(this,ln).set(i.id,i),i};let Lv=t0;var Ae,Br,yd,he;class Dk{constructor(t=128){E(this,Ae,[]);E(this,Br,!1);E(this,yd);E(this,he,-1);x(this,yd,t)}add({cmd:t,undo:e,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:c=!1,keepUndo:d=!1}){if(r&&t(),o(this,Br))return;const p={cmd:t,undo:e,post:i,type:a};if(o(this,he)===-1){o(this,Ae).length>0&&(o(this,Ae).length=0),x(this,he,0),o(this,Ae).push(p);return}if(c&&o(this,Ae)[o(this,he)].type===a){d&&(p.undo=o(this,Ae)[o(this,he)].undo),o(this,Ae)[o(this,he)]=p;return}const f=o(this,he)+1;f===o(this,yd)?o(this,Ae).splice(0,1):(x(this,he,f),f<o(this,Ae).length&&o(this,Ae).splice(f)),o(this,Ae).push(p)}undo(){if(o(this,he)===-1)return;x(this,Br,!0);const{undo:t,post:e}=o(this,Ae)[o(this,he)];t(),e==null||e(),x(this,Br,!1),x(this,he,o(this,he)-1)}redo(){if(o(this,he)<o(this,Ae).length-1){x(this,he,o(this,he)+1),x(this,Br,!0);const{cmd:t,post:e}=o(this,Ae)[o(this,he)];t(),e==null||e(),x(this,Br,!1)}}hasSomethingToUndo(){return o(this,he)!==-1}hasSomethingToRedo(){return o(this,he)<o(this,Ae).length-1}cleanType(t){if(o(this,he)!==-1){for(let e=o(this,he);e>=0;e--)if(o(this,Ae)[e].type!==t){o(this,Ae).splice(e+1,o(this,he)-e),x(this,he,e);return}o(this,Ae).length=0,x(this,he,-1)}}destroy(){x(this,Ae,null)}}Ae=new WeakMap,Br=new WeakMap,yd=new WeakMap,he=new WeakMap;var Xf,Cb;class Bh{constructor(t){E(this,Xf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=_n.platform;for(const[i,r,a={}]of t)for(const c of i){const d=c.startsWith("mac+");e&&d?(this.callbacks.set(c.slice(4),{callback:r,options:a}),this.allKeys.add(c.split("+").at(-1))):!e&&!d&&(this.callbacks.set(c,{callback:r,options:a}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(S(this,Xf,Cb).call(this,e));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:c=[],checker:d=null}}=i;d&&!d(t,e)||(r.bind(t,...c,e)(),a||ii(e))}}Xf=new WeakSet,Cb=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Yf=class Yf{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Ik(t),zt(this,"_colors",t)}convert(t){const e=Yy(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((a,c)=>a===e[c]))return Yf._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?gt.makeHexColor(...e):t}};Et(Yf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Dv=Yf;var Gl,$n,Le,Xe,Vl,js,Wl,pi,Hr,Ya,ql,Ka,ss,Li,Qa,wd,xd,Xl,Ad,rs,Ur,Yl,$r,as,Kf,Gr,bd,Vr,Ja,_d,Ed,Be,Xt,zs,Za,Sd,Cd,Wr,os,Bs,kd,fi,tt,cf,Nv,kb,Tb,uf,Rb,Pb,Ib,Ov,Mb,Fv,jv,Lb,yn,Ds,Db,Nb,zv,Ob,$u,Bv;const jl=class jl{constructor(t,e,i,r,a,c,d,p,f,g,y,w,A){E(this,tt);E(this,Gl,new AbortController);E(this,$n,null);E(this,Le,new Map);E(this,Xe,new Map);E(this,Vl,null);E(this,js,null);E(this,Wl,null);E(this,pi,new Dk);E(this,Hr,null);E(this,Ya,null);E(this,ql,0);E(this,Ka,new Set);E(this,ss,null);E(this,Li,null);E(this,Qa,new Set);Et(this,"_editorUndoBar",null);E(this,wd,!1);E(this,xd,!1);E(this,Xl,!1);E(this,Ad,null);E(this,rs,null);E(this,Ur,null);E(this,Yl,null);E(this,$r,!1);E(this,as,null);E(this,Kf,new Lk);E(this,Gr,!1);E(this,bd,!1);E(this,Vr,null);E(this,Ja,null);E(this,_d,null);E(this,Ed,null);E(this,Be,Lt.NONE);E(this,Xt,new Set);E(this,zs,null);E(this,Za,null);E(this,Sd,null);E(this,Cd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,Wr,[0,0]);E(this,os,null);E(this,Bs,null);E(this,kd,null);E(this,fi,null);const b=this._signal=o(this,Gl).signal;x(this,Bs,t),x(this,kd,e),x(this,Vl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:b}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),r._on("setpreference",this.onSetPreference.bind(this),{signal:b}),r._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:b}),S(this,tt,Rb).call(this),S(this,tt,Lb).call(this),S(this,tt,Ov).call(this),x(this,js,a.annotationStorage),x(this,Ad,a.filterFactory),x(this,Za,c),x(this,Yl,d||null),x(this,wd,p),x(this,xd,f),x(this,Xl,g),x(this,Ed,y||null),this.viewParameters={realScale:ya.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const t=jl.prototype,e=c=>o(c,Bs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:d})=>{if(d instanceof HTMLInputElement){const{type:p}=d;return p!=="text"&&p!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return zt(this,"_keyboardManager",new Bh([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:d})=>!(d instanceof HTMLButtonElement)&&o(c,Bs).contains(d)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:d})=>!(d instanceof HTMLButtonElement)&&o(c,Bs).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e,i,r,a;(t=o(this,fi))==null||t.resolve(),x(this,fi,null),(e=o(this,Gl))==null||e.abort(),x(this,Gl,null),this._signal=null;for(const c of o(this,Xe).values())c.destroy();o(this,Xe).clear(),o(this,Le).clear(),o(this,Qa).clear(),x(this,$n,null),o(this,Xt).clear(),o(this,pi).destroy(),(i=o(this,Vl))==null||i.destroy(),(r=o(this,as))==null||r.hide(),x(this,as,null),o(this,rs)&&(clearTimeout(o(this,rs)),x(this,rs,null)),o(this,os)&&(clearTimeout(o(this,os)),x(this,os,null)),(a=this._editorUndoBar)==null||a.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return o(this,Ed)}get useNewAltTextFlow(){return o(this,xd)}get useNewAltTextWhenAddingImage(){return o(this,Xl)}get hcmFilter(){return zt(this,"hcmFilter",o(this,Za)?o(this,Ad).addHCMFilter(o(this,Za).foreground,o(this,Za).background):"none")}get direction(){return zt(this,"direction",getComputedStyle(o(this,Bs)).direction)}get highlightColors(){return zt(this,"highlightColors",o(this,Yl)?new Map(o(this,Yl).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return zt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,Ya,t)}setMainHighlightColorPicker(t){x(this,_d,t)}editAltText(t,e=!1){var i;(i=o(this,Vl))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,Xl,e);break}}onPageChanging({pageNumber:t}){x(this,ql,t-1)}focusMainContainer(){o(this,Bs).focus()}findParent(t,e){for(const i of o(this,Xe).values()){const{x:r,y:a,width:c,height:d}=i.div.getBoundingClientRect();if(t>=r&&t<=r+c&&e>=a&&e<=a+d)return i}return null}disableUserSelect(t=!1){o(this,kd).classList.toggle("noUserSelect",t)}addShouldRescale(t){o(this,Qa).add(t)}removeShouldRescale(t){o(this,Qa).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*ya.PDF_TO_CSS_UNITS;for(const i of o(this,Qa))i.onScaleChanging();(e=o(this,Ya))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:c}=e,d=e.toString(),f=S(this,tt,cf).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;e.empty();const y=S(this,tt,Nv).call(this,f),w=o(this,Be)===Lt.NONE,A=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:c,text:d}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Lt.HIGHLIGHT,A);return}A()}addToAnnotationStorage(t){!t.isEmpty()&&o(this,js)&&!o(this,js).has(t.id)&&o(this,js).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,o(this,$r)&&(x(this,$r,!1),S(this,tt,uf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of o(this,Xt))if(e.div.contains(t)){x(this,Ja,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!o(this,Ja))return;const[t,e]=o(this,Ja);x(this,Ja,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){S(this,tt,Ov).call(this),S(this,tt,Fv).call(this)}removeEditListeners(){S(this,tt,Mb).call(this),S(this,tt,jv).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of o(this,Li))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of o(this,Li))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=o(this,$n))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of o(this,Xt)){const a=r.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const c of o(this,Li))if(c.isHandlingMimeForPasting(a.type)){c.paste(a,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){Dt(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const p of i){const f=await r.deserialize(p);if(!f)return;a.push(f)}const c=()=>{for(const p of a)S(this,tt,zv).call(this,p);S(this,tt,Bv).call(this,a)},d=()=>{for(const p of a)p.remove()};this.addCommands({cmd:c,undo:d,mustExec:!0})}catch(a){Dt(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,Be)!==Lt.NONE&&!this.isEditorHandlingKeyboard&&jl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,$r)&&(x(this,$r,!1),S(this,tt,uf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(S(this,tt,Pb).call(this),S(this,tt,Fv).call(this),S(this,tt,yn).call(this,{isEditing:o(this,Be)!==Lt.NONE,isEmpty:S(this,tt,$u).call(this),hasSomethingToUndo:o(this,pi).hasSomethingToUndo(),hasSomethingToRedo:o(this,pi).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,tt,Ib).call(this),S(this,tt,jv).call(this),S(this,tt,yn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!o(this,Li)){x(this,Li,t);for(const e of o(this,Li))S(this,tt,Ds).call(this,e.defaultPropertiesToUpdate)}}getId(){return o(this,Kf).id}get currentLayer(){return o(this,Xe).get(o(this,ql))}getLayer(t){return o(this,Xe).get(t)}get currentPageIndex(){return o(this,ql)}addLayer(t){o(this,Xe).set(t.pageIndex,t),o(this,Gr)?t.enable():t.disable()}removeLayer(t){o(this,Xe).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){var r;if(o(this,Be)!==t&&!(o(this,fi)&&(await o(this,fi).promise,!o(this,fi)))){if(x(this,fi,Promise.withResolvers()),x(this,Be,t),t===Lt.NONE){this.setEditingState(!1),S(this,tt,Nb).call(this),(r=this._editorUndoBar)==null||r.hide(),o(this,fi).resolve();return}this.setEditingState(!0),await S(this,tt,Db).call(this),this.unselectAll();for(const a of o(this,Xe).values())a.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),o(this,fi).resolve();return}for(const a of o(this,Le).values())a.annotationElementId===e?(this.setSelected(a),a.enterInEditMode()):a.unselect();o(this,fi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==o(this,Be)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(o(this,Li)){switch(t){case Bt.CREATE:this.currentLayer.addNewEditor();return;case Bt.HIGHLIGHT_DEFAULT_COLOR:(i=o(this,_d))==null||i.updateColor(e);break;case Bt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,Sd)||x(this,Sd,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const r of o(this,Xt))r.updateParams(t,e);for(const r of o(this,Li))r.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var a;for(const c of o(this,Le).values())c.editorType===t&&c.show(e);(((a=o(this,Sd))==null?void 0:a.get(Bt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&S(this,tt,Ds).call(this,[[Bt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(o(this,bd)!==t){x(this,bd,t);for(const e of o(this,Xe).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of o(this,Le).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return o(this,Le).get(t)}addEditor(t){o(this,Le).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(o(this,rs)&&clearTimeout(o(this,rs)),x(this,rs,setTimeout(()=>{this.focusMainContainer(),x(this,rs,null)},0))),o(this,Le).delete(t.id),this.unselect(t),(!t.annotationElementId||!o(this,Ka).has(t.annotationElementId))&&((e=o(this,js))==null||e.remove(t.id))}addDeletedAnnotationElement(t){o(this,Ka).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return o(this,Ka).has(t)}removeDeletedAnnotationElement(t){o(this,Ka).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){o(this,$n)!==t&&(x(this,$n,t),t&&S(this,tt,Ds).call(this,t.propertiesToUpdate))}updateUI(t){o(this,tt,Ob)===t&&S(this,tt,Ds).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){S(this,tt,Ds).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(o(this,Xt).has(t)){o(this,Xt).delete(t),t.unselect(),S(this,tt,yn).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Xt).add(t),t.select(),S(this,tt,Ds).call(this,t.propertiesToUpdate),S(this,tt,yn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=o(this,Ya))==null||e.commitOrRemove();for(const i of o(this,Xt))i!==t&&i.unselect();o(this,Xt).clear(),o(this,Xt).add(t),t.select(),S(this,tt,Ds).call(this,t.propertiesToUpdate),S(this,tt,yn).call(this,{hasSelectedEditor:!0})}isSelected(t){return o(this,Xt).has(t)}get firstSelectedEditor(){return o(this,Xt).values().next().value}unselect(t){t.unselect(),o(this,Xt).delete(t),S(this,tt,yn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Xt).size!==0}get isEnterHandled(){return o(this,Xt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;o(this,pi).undo(),S(this,tt,yn).call(this,{hasSomethingToUndo:o(this,pi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,tt,$u).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){o(this,pi).redo(),S(this,tt,yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,pi).hasSomethingToRedo(),isEmpty:S(this,tt,$u).call(this)})}addCommands(t){o(this,pi).add(t),S(this,tt,yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,tt,$u).call(this)})}cleanUndoStack(t){o(this,pi).cleanType(t)}delete(){var a;this.commitOrRemove();const t=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...o(this,Xt)],i=()=>{var c;(c=this._editorUndoBar)==null||c.show(r,e.length===1?e[0].editorType:e.length);for(const d of e)d.remove()},r=()=>{for(const c of e)S(this,tt,zv).call(this,c)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=o(this,$n))==null||t.commitOrRemove()}hasSomethingToControl(){return o(this,$n)||this.hasSelection}selectAll(){for(const t of o(this,Xt))t.commit();S(this,tt,Bv).call(this,o(this,Le).values())}unselectAll(){var t;if(!(o(this,$n)&&(o(this,$n).commitOrRemove(),o(this,Be)!==Lt.NONE))&&!((t=o(this,Ya))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of o(this,Xt))e.unselect();o(this,Xt).clear(),S(this,tt,yn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;o(this,Wr)[0]+=t,o(this,Wr)[1]+=e;const[r,a]=o(this,Wr),c=[...o(this,Xt)],d=1e3;o(this,os)&&clearTimeout(o(this,os)),x(this,os,setTimeout(()=>{x(this,os,null),o(this,Wr)[0]=o(this,Wr)[1]=0,this.addCommands({cmd:()=>{for(const p of c)o(this,Le).has(p.id)&&p.translateInPage(r,a)},undo:()=>{for(const p of c)o(this,Le).has(p.id)&&p.translateInPage(-r,-a)},mustExec:!1})},d));for(const p of c)p.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,ss,new Map);for(const t of o(this,Xt))o(this,ss).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,ss))return!1;this.disableUserSelect(!1);const t=o(this,ss);x(this,ss,null);let e=!1;for(const[{x:r,y:a,pageIndex:c},d]of t)d.newX=r,d.newY=a,d.newPageIndex=c,e||(e=r!==d.savedX||a!==d.savedY||c!==d.savedPageIndex);if(!e)return!1;const i=(r,a,c,d)=>{if(o(this,Le).has(r.id)){const p=o(this,Xe).get(d);p?r._setParentAndPosition(p,a,c):(r.pageIndex=d,r.x=a,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:c,newPageIndex:d}]of t)i(r,a,c,d)},undo:()=>{for(const[r,{savedX:a,savedY:c,savedPageIndex:d}]of t)i(r,a,c,d)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(o(this,ss))for(const i of o(this,ss).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||o(this,Xt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return o(this,$n)===t}getActive(){return o(this,$n)}getMode(){return o(this,Be)}get imageManager(){return zt(this,"imageManager",new Lv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:r,width:a,height:c}=t.getBoundingClientRect();let d;switch(t.getAttribute("data-main-rotation")){case"90":d=(f,g,y,w)=>({x:(g-r)/c,y:1-(f+y-i)/a,width:w/c,height:y/a});break;case"180":d=(f,g,y,w)=>({x:1-(f+y-i)/a,y:1-(g+w-r)/c,width:y/a,height:w/c});break;case"270":d=(f,g,y,w)=>({x:1-(g+w-r)/c,y:(f-i)/a,width:w/c,height:y/a});break;default:d=(f,g,y,w)=>({x:(f-i)/a,y:(g-r)/c,width:y/a,height:w/c});break}const p=[];for(let f=0,g=e.rangeCount;f<g;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:w,y:A,width:b,height:C}of y.getClientRects())b===0||C===0||p.push(d(w,A,b,C))}return p.length===0?null:p}addChangedExistingAnnotation({annotationElementId:t,id:e}){(o(this,Wl)||x(this,Wl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=o(this,Wl))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=o(this,Wl))==null?void 0:r.get(t.data.id);if(!e)return;const i=o(this,js).getRawValue(e);i&&(o(this,Be)===Lt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};Gl=new WeakMap,$n=new WeakMap,Le=new WeakMap,Xe=new WeakMap,Vl=new WeakMap,js=new WeakMap,Wl=new WeakMap,pi=new WeakMap,Hr=new WeakMap,Ya=new WeakMap,ql=new WeakMap,Ka=new WeakMap,ss=new WeakMap,Li=new WeakMap,Qa=new WeakMap,wd=new WeakMap,xd=new WeakMap,Xl=new WeakMap,Ad=new WeakMap,rs=new WeakMap,Ur=new WeakMap,Yl=new WeakMap,$r=new WeakMap,as=new WeakMap,Kf=new WeakMap,Gr=new WeakMap,bd=new WeakMap,Vr=new WeakMap,Ja=new WeakMap,_d=new WeakMap,Ed=new WeakMap,Be=new WeakMap,Xt=new WeakMap,zs=new WeakMap,Za=new WeakMap,Sd=new WeakMap,Cd=new WeakMap,Wr=new WeakMap,os=new WeakMap,Bs=new WeakMap,kd=new WeakMap,fi=new WeakMap,tt=new WeakSet,cf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Nv=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of o(this,Xe).values())if(i.hasTextLayer(t))return i;return null},kb=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=S(this,tt,cf).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(o(this,as)||x(this,as,new Mk(this)),o(this,as).show(i,r,this.direction==="ltr"))},Tb=function(){var a,c,d;const t=document.getSelection();if(!t||t.isCollapsed){o(this,zs)&&((a=o(this,as))==null||a.hide(),x(this,zs,null),S(this,tt,yn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===o(this,zs))return;const r=S(this,tt,cf).call(this,t).closest(".textLayer");if(!r){o(this,zs)&&((c=o(this,as))==null||c.hide(),x(this,zs,null),S(this,tt,yn).call(this,{hasSelectedText:!1}));return}if((d=o(this,as))==null||d.hide(),x(this,zs,e),S(this,tt,yn).call(this,{hasSelectedText:!0}),!(o(this,Be)!==Lt.HIGHLIGHT&&o(this,Be)!==Lt.NONE)&&(o(this,Be)===Lt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,$r,this.isShiftKeyDown),!this.isShiftKeyDown)){const p=o(this,Be)===Lt.HIGHLIGHT?S(this,tt,Nv).call(this,r):null;p==null||p.toggleDrawing();const f=new AbortController,g=this.combinedSignal(f),y=w=>{w.type==="pointerup"&&w.button!==0||(f.abort(),p==null||p.toggleDrawing(!0),w.type==="pointerup"&&S(this,tt,uf).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},uf=function(t=""){o(this,Be)===Lt.HIGHLIGHT?this.highlightSelection(t):o(this,wd)&&S(this,tt,kb).call(this)},Rb=function(){document.addEventListener("selectionchange",S(this,tt,Tb).bind(this),{signal:this._signal})},Pb=function(){if(o(this,Ur))return;x(this,Ur,new AbortController);const t=this.combinedSignal(o(this,Ur));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Ib=function(){var t;(t=o(this,Ur))==null||t.abort(),x(this,Ur,null)},Ov=function(){if(o(this,Vr))return;x(this,Vr,new AbortController);const t=this.combinedSignal(o(this,Vr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},Mb=function(){var t;(t=o(this,Vr))==null||t.abort(),x(this,Vr,null)},Fv=function(){if(o(this,Hr))return;x(this,Hr,new AbortController);const t=this.combinedSignal(o(this,Hr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},jv=function(){var t;(t=o(this,Hr))==null||t.abort(),x(this,Hr,null)},Lb=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},yn=function(t){Object.entries(t).some(([i,r])=>o(this,Cd)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Cd),t)}),o(this,Be)===Lt.HIGHLIGHT&&t.hasSelectedEditor===!1&&S(this,tt,Ds).call(this,[[Bt.HIGHLIGHT_FREE,!0]]))},Ds=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Db=async function(){if(!o(this,Gr)){x(this,Gr,!0);const t=[];for(const e of o(this,Xe).values())t.push(e.enable());await Promise.all(t);for(const e of o(this,Le).values())e.enable()}},Nb=function(){if(this.unselectAll(),o(this,Gr)){x(this,Gr,!1);for(const t of o(this,Xe).values())t.disable();for(const t of o(this,Le).values())t.disable()}},zv=function(t){const e=o(this,Xe).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Ob=function(){let t=null;for(t of o(this,Xt));return t},$u=function(){if(o(this,Le).size===0)return!0;if(o(this,Le).size===1)for(const t of o(this,Le).values())return t.isEmpty();return!1},Bv=function(t){for(const e of o(this,Xt))e.unselect();o(this,Xt).clear();for(const e of t)e.isEmpty()||(o(this,Xt).add(e),e.select());S(this,tt,yn).call(this,{hasSelectedEditor:this.hasSelection})},Et(jl,"TRANSLATE_SMALL",1),Et(jl,"TRANSLATE_BIG",10);let Jo=jl;var He,ls,Di,Kl,cs,Gn,Ql,us,Nn,Hs,to,ds,qr,Gi,Gu,df;const wn=class wn{constructor(t){E(this,Gi);E(this,He,null);E(this,ls,!1);E(this,Di,null);E(this,Kl,null);E(this,cs,null);E(this,Gn,null);E(this,Ql,!1);E(this,us,null);E(this,Nn,null);E(this,Hs,null);E(this,to,null);E(this,ds,!1);x(this,Nn,t),x(this,ds,t._uiManager.useNewAltTextFlow),o(wn,qr)||x(wn,qr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){wn._l10n??(wn._l10n=t)}async render(){const t=x(this,Di,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,Kl,document.createElement("span"));t.append(e),o(this,ds)?(t.classList.add("new"),t.setAttribute("data-l10n-id",o(wn,qr).missing),e.setAttribute("data-l10n-id",o(wn,qr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=o(this,Nn)._uiManager._signal;t.addEventListener("contextmenu",Vi,{signal:i}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),o(this,Nn)._uiManager.editAltText(o(this,Nn)),o(this,ds)&&o(this,Nn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,Gi,Gu)}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(x(this,Ql,!0),r(a))},{signal:i}),await S(this,Gi,df).call(this),t}finish(){o(this,Di)&&(o(this,Di).focus({focusVisible:o(this,Ql)}),x(this,Ql,!1))}isEmpty(){return o(this,ds)?o(this,He)===null:!o(this,He)&&!o(this,ls)}hasData(){return o(this,ds)?o(this,He)!==null||!!o(this,Hs):this.isEmpty()}get guessedText(){return o(this,Hs)}async setGuessedText(t){o(this,He)===null&&(x(this,Hs,t),x(this,to,await wn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),S(this,Gi,df).call(this))}toggleAltTextBadge(t=!1){var e;if(!o(this,ds)||o(this,He)){(e=o(this,us))==null||e.remove(),x(this,us,null);return}if(!o(this,us)){const i=x(this,us,document.createElement("div"));i.className="noAltTextBadge",o(this,Nn).div.append(i)}o(this,us).classList.toggle("hidden",!t)}serialize(t){let e=o(this,He);return!t&&o(this,Hs)===e&&(e=o(this,to)),{altText:e,decorative:o(this,ls),guessedText:o(this,Hs),textWithDisclaimer:o(this,to)}}get data(){return{altText:o(this,He),decorative:o(this,ls)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(x(this,Hs,i),x(this,to,r)),!(o(this,He)===t&&o(this,ls)===e)&&(a||(x(this,He,t),x(this,ls,e)),S(this,Gi,df).call(this))}toggle(t=!1){o(this,Di)&&(!t&&o(this,Gn)&&(clearTimeout(o(this,Gn)),x(this,Gn,null)),o(this,Di).disabled=!t)}shown(){o(this,Nn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,Gi,Gu)}})}destroy(){var t,e;(t=o(this,Di))==null||t.remove(),x(this,Di,null),x(this,Kl,null),x(this,cs,null),(e=o(this,us))==null||e.remove(),x(this,us,null)}};He=new WeakMap,ls=new WeakMap,Di=new WeakMap,Kl=new WeakMap,cs=new WeakMap,Gn=new WeakMap,Ql=new WeakMap,us=new WeakMap,Nn=new WeakMap,Hs=new WeakMap,to=new WeakMap,ds=new WeakMap,qr=new WeakMap,Gi=new WeakSet,Gu=function(){return o(this,He)&&"added"||o(this,He)===null&&this.guessedText&&"review"||"missing"},df=async function(){var r,a,c;const t=o(this,Di);if(!t)return;if(o(this,ds)){if(t.classList.toggle("done",!!o(this,He)),t.setAttribute("data-l10n-id",o(wn,qr)[o(this,Gi,Gu)]),(r=o(this,Kl))==null||r.setAttribute("data-l10n-id",o(wn,qr)[`${o(this,Gi,Gu)}-label`]),!o(this,He)){(a=o(this,cs))==null||a.remove();return}}else{if(!o(this,He)&&!o(this,ls)){t.classList.remove("done"),(c=o(this,cs))==null||c.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=o(this,cs);if(!e){x(this,cs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${o(this,Nn).id}`;const d=100,p=o(this,Nn)._uiManager._signal;p.addEventListener("abort",()=>{clearTimeout(o(this,Gn)),x(this,Gn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,Gn,setTimeout(()=>{x(this,Gn,null),o(this,cs).classList.add("show"),o(this,Nn)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:p}),t.addEventListener("mouseleave",()=>{var f;o(this,Gn)&&(clearTimeout(o(this,Gn)),x(this,Gn,null)),(f=o(this,cs))==null||f.classList.remove("show")},{signal:p})}o(this,ls)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=o(this,He)),e.parentNode||t.append(e);const i=o(this,Nn).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},E(wn,qr,null),Et(wn,"_l10n",null);let Bf=wn;var Td,eo,Rd,Pd,Id,Md,Ld,Jl,Us,no,Xr,hr,Fb,jb,Hv;const e0=class e0{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:c=null,signal:d}){E(this,hr);E(this,Td);E(this,eo,!1);E(this,Rd,null);E(this,Pd);E(this,Id);E(this,Md);E(this,Ld);E(this,Jl);E(this,Us,null);E(this,no);E(this,Xr,null);x(this,Td,t),x(this,Rd,i),x(this,Pd,e),x(this,Id,r),x(this,Md,a),x(this,Ld,c),x(this,no,new AbortController),x(this,Jl,AbortSignal.any([d,o(this,no).signal])),t.addEventListener("touchstart",S(this,hr,Fb).bind(this),{passive:!1,signal:o(this,Jl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return zt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=o(this,no))==null||t.abort(),x(this,no,null)}};Td=new WeakMap,eo=new WeakMap,Rd=new WeakMap,Pd=new WeakMap,Id=new WeakMap,Md=new WeakMap,Ld=new WeakMap,Jl=new WeakMap,Us=new WeakMap,no=new WeakMap,Xr=new WeakMap,hr=new WeakSet,Fb=function(t){var r,a,c;if((r=o(this,Pd))!=null&&r.call(this)||t.touches.length<2)return;if(!o(this,Xr)){x(this,Xr,new AbortController);const d=AbortSignal.any([o(this,Jl),o(this,Xr).signal]),p=o(this,Td),f={signal:d,passive:!1};p.addEventListener("touchmove",S(this,hr,jb).bind(this),f),p.addEventListener("touchend",S(this,hr,Hv).bind(this),f),p.addEventListener("touchcancel",S(this,hr,Hv).bind(this),f),(a=o(this,Id))==null||a.call(this)}if(ii(t),t.touches.length!==2||(c=o(this,Rd))!=null&&c.call(this)){x(this,Us,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),x(this,Us,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},jb=function(t){var F;if(!o(this,Us)||t.touches.length!==2)return;let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:a}=e,{screenX:c,screenY:d}=i,p=o(this,Us),{touch0X:f,touch0Y:g,touch1X:y,touch1Y:w}=p,A=y-f,b=w-g,C=c-r,k=d-a,T=Math.hypot(C,k)||1,M=Math.hypot(A,b)||1;if(!o(this,eo)&&Math.abs(M-T)<=e0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(p.touch0X=r,p.touch0Y=a,p.touch1X=c,p.touch1Y=d,t.preventDefault(),!o(this,eo)){x(this,eo,!0);return}const z=[(r+c)/2,(a+d)/2];(F=o(this,Md))==null||F.call(this,z,M,T)},Hv=function(t){var e;o(this,Xr).abort(),x(this,Xr,null),(e=o(this,Ld))==null||e.call(this),o(this,Us)&&(t.preventDefault(),x(this,Us,null),x(this,eo,!1))};let Hf=e0;var io,Ni,se,Zl,Yr,Dd,so,Ye,ro,$s,Kr,Nd,ao,Vn,Od,oo,Gs,hs,tc,ec,mi,lo,Fd,Qf,St,Uv,jd,$v,hf,zb,Bb,Gv,pf,Vv,Hb,Ub,$b,Wv,Gb,qv,Vb,Wb,qb,Xv,Vu;const Nt=class Nt{constructor(t){E(this,St);E(this,io,null);E(this,Ni,null);E(this,se,null);E(this,Zl,!1);E(this,Yr,null);E(this,Dd,"");E(this,so,!1);E(this,Ye,null);E(this,ro,null);E(this,$s,null);E(this,Kr,null);E(this,Nd,"");E(this,ao,!1);E(this,Vn,null);E(this,Od,!1);E(this,oo,!1);E(this,Gs,!1);E(this,hs,null);E(this,tc,0);E(this,ec,0);E(this,mi,null);E(this,lo,null);Et(this,"_editToolbar",null);Et(this,"_initialOptions",Object.create(null));Et(this,"_initialData",null);Et(this,"_isVisible",!0);Et(this,"_uiManager",null);Et(this,"_focusEventsAllowed",!0);E(this,Fd,!1);E(this,Qf,Nt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,c];const[d,p]=this.parentDimensions;this.x=t.x/d,this.y=t.y/p,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Nt.prototype._resizeWithKeyboard,e=Jo.TRANSLATE_SMALL,i=Jo.TRANSLATE_BIG;return zt(this,"_resizerKeyboardManager",new Bh([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Nt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return zt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Nk({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Nt._l10n??(Nt._l10n=t),Nt._l10nResizer||(Nt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Nt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Nt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,Fd)}set _isDraggable(t){var e;x(this,Fd,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,Qf)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):S(this,St,Vu).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(o(this,ao)?x(this,ao,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[a,c]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/a,this.y=(e+r)/c,this.fixAndSetPosition()}translate(t,e){S(this,St,Uv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){o(this,Vn)||x(this,Vn,[this.x,this.y,this.width,this.height]),S(this,St,Uv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){o(this,Vn)||x(this,Vn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,a]}=this;if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:d}=this;const[p,f]=this.getBaseTranslation();c+=p,d+=f;const{style:g}=i;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*d).toFixed(2)}%`,this._onTranslating(c,d),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!o(this,Vn)&&(o(this,Vn)[0]!==this.x||o(this,Vn)[1]!==this.y)}get _hasBeenResized(){return!!o(this,Vn)&&(o(this,Vn)[2]!==this.width||o(this,Vn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Nt,r=i/t,a=i/e;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:a,y:c,width:d,height:p}=this;if(d*=i,p*=r,a*=i,c*=r,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(i-d,a)),c=Math.max(0,Math.min(r-p,c));break;case 90:a=Math.max(0,Math.min(i-p,a)),c=Math.min(r,Math.max(d,c));break;case 180:a=Math.min(i,Math.max(d,a)),c=Math.min(r,Math.max(p,c));break;case 270:a=Math.min(i,Math.max(p,a)),c=Math.max(0,Math.min(r-d,c));break}this.x=a/=i,this.y=c/=r;const[f,g]=this.getBaseTranslation();a+=f,c+=g,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return S(i=Nt,jd,$v).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return S(i=Nt,jd,$v).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,r]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/i).toFixed(2)}%`,o(this,so)||(a.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,r=i.endsWith("%"),a=!o(this,so)&&e.endsWith("%");if(r&&a)return;const[c,d]=this.parentDimensions;r||(t.width=`${(100*parseFloat(i)/c).toFixed(2)}%`),!o(this,so)&&!a&&(t.height=`${(100*parseFloat(e)/d).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=o(this,se))==null||t.finish()}async addEditToolbar(){return this._editToolbar||o(this,oo)?this._editToolbar:(this._editToolbar=new Iv(this),this.div.append(this._editToolbar.render()),o(this,se)&&await this._editToolbar.addAltText(o(this,se)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=o(this,se))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,se)||(Bf.initialize(Nt._l10n),x(this,se,new Bf(this)),o(this,io)&&(o(this,se).data=o(this,io),x(this,io,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=o(this,se))==null?void 0:t.data}set altTextData(t){o(this,se)&&(o(this,se).data=t)}get guessedAltText(){var t;return(t=o(this,se))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=o(this,se))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=o(this,se))==null?void 0:e.serialize(t)}hasAltText(){return!!o(this,se)&&!o(this,se).isEmpty()}hasAltTextData(){var t;return((t=o(this,se))==null?void 0:t.hasData())??!1}render(){var a;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=o(this,Zl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),S(this,St,qv).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),zf(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,lo)||x(this,lo,new Hf({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,St,Hb).bind(this),onPinching:S(this,St,Ub).bind(this),onPinchEnd:S(this,St,$b).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),this.div}pointerdown(t){const{isMac:e}=_n.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,ao,!0),this._isDraggable){S(this,St,Gb).call(this,t);return}S(this,St,Wv).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,hs)&&clearTimeout(o(this,hs)),x(this,hs,setTimeout(()=>{var t;x(this,hs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[a,c]=this.pageDimensions,[d,p]=this.pageTranslation,f=t/r,g=e/r,y=this.x*a,w=this.y*c,A=this.width*a,b=this.height*c;switch(i){case 0:return[y+f+d,c-w-g-b+p,y+f+A+d,c-w-g+p];case 90:return[y+g+d,c-w+f+p,y+g+b+d,c-w+f+A+p];case 180:return[y-f-A+d,c-w+g+p,y-f+d,c-w+g+b+p];case 270:return[y-g-b+d,c-w-f-A+p,y-g+d,c-w-f+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,a,c]=t,d=a-i,p=c-r;switch(this.rotation){case 0:return[i,e-c,d,p];case 90:return[i,e-r,p,d];case 180:return[a,e-r,d,p];case 270:return[a,e-c,p,d];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){x(this,oo,!0)}disableEditMode(){x(this,oo,!1)}isInEditMode(){return o(this,oo)}shouldGetKeyboardEvents(){return o(this,Gs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:c}=window;return e<c&&r>0&&t<a&&i>0}rebuild(){S(this,St,qv).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Zt("An editor must be serializable")}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});r.rotation=t.rotation,x(r,io,t.accessibilityData);const[a,c]=r.pageDimensions,[d,p,f,g]=r.getRectInCurrentCoords(t.rect,c);return r.x=d/a,r.y=p/c,r.width=f/a,r.height=g/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=o(this,Kr))==null||t.abort(),x(this,Kr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,hs)&&(clearTimeout(o(this,hs)),x(this,hs,null)),S(this,St,Vu).call(this),this.removeEditToolbar(),o(this,mi)){for(const i of o(this,mi).values())clearTimeout(i);x(this,mi,null)}this.parent=null,(e=o(this,lo))==null||e.destroy(),x(this,lo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,St,zb).call(this),o(this,Ye).classList.remove("hidden"),zf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,$s,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=o(this,Ye).children;if(!o(this,Ni)){x(this,Ni,Array.from(e));const c=S(this,St,Vb).bind(this),d=S(this,St,Wb).bind(this),p=this._uiManager._signal;for(const f of o(this,Ni)){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:p}),f.addEventListener("blur",d,{signal:p}),f.addEventListener("focus",S(this,St,qb).bind(this,g),{signal:p}),f.setAttribute("data-l10n-id",Nt._l10nResizer[g])}}const i=o(this,Ni)[0];let r=0;for(const c of e){if(c===i)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(o(this,Ni).length/4);if(a!==r){if(a<r)for(let d=0;d<r-a;d++)o(this,Ye).append(o(this,Ye).firstChild);else if(a>r)for(let d=0;d<a-r;d++)o(this,Ye).firstChild.before(o(this,Ye).lastChild);let c=0;for(const d of e){const f=o(this,Ni)[c++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",Nt._l10nResizer[f])}}S(this,St,Xv).call(this,0),x(this,Gs,!0),o(this,Ye).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){o(this,Gs)&&S(this,St,Vv).call(this,o(this,Nd),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,St,Vu).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,a;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(e=this._editToolbar)==null||e.show(),(i=o(this,se))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,r,a;(t=o(this,Ye))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(a=o(this,se))==null||a.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return o(this,Od)}set isEditing(t){x(this,Od,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,so,!0);const i=t/e,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){o(this,mi)||x(this,mi,new Map);const{action:i}=t;let r=o(this,mi).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),o(this,mi).delete(i),o(this,mi).size===0&&x(this,mi,null)},Nt._telemetryTimeout),o(this,mi).set(i,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,Zl,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,Zl,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};io=new WeakMap,Ni=new WeakMap,se=new WeakMap,Zl=new WeakMap,Yr=new WeakMap,Dd=new WeakMap,so=new WeakMap,Ye=new WeakMap,ro=new WeakMap,$s=new WeakMap,Kr=new WeakMap,Nd=new WeakMap,ao=new WeakMap,Vn=new WeakMap,Od=new WeakMap,oo=new WeakMap,Gs=new WeakMap,hs=new WeakMap,tc=new WeakMap,ec=new WeakMap,mi=new WeakMap,lo=new WeakMap,Fd=new WeakMap,Qf=new WeakMap,St=new WeakSet,Uv=function([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},jd=new WeakSet,$v=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},hf=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},zb=function(){if(o(this,Ye))return;x(this,Ye,document.createElement("div")),o(this,Ye).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");o(this,Ye).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",S(this,St,Bb).bind(this,i),{signal:e}),r.addEventListener("contextmenu",Vi,{signal:e}),r.tabIndex=-1}this.div.prepend(o(this,Ye))},Bb=function(t,e){var g;e.preventDefault();const{isMac:i}=_n.platform;if(e.button!==0||e.ctrlKey&&i)return;(g=o(this,se))==null||g.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,x(this,ro,[e.screenX,e.screenY]);const a=new AbortController,c=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,St,Vv).bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ii,{passive:!1,signal:c}),window.addEventListener("contextmenu",Vi,{signal:c}),x(this,$s,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const d=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var y;a.abort(),this.parent.togglePointerEvents(!0),(y=o(this,se))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=d,this.div.style.cursor=p,S(this,St,pf).call(this)};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})},Gv=function(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e;const[a,c]=this.parentDimensions;this.setDims(a*i,c*r),this.fixAndSetPosition(),this._onResized()},pf=function(){if(!o(this,$s))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=o(this,$s);x(this,$s,null);const a=this.x,c=this.y,d=this.width,p=this.height;a===t&&c===e&&d===i&&p===r||this.addCommands({cmd:S(this,St,Gv).bind(this,a,c,d,p),undo:S(this,St,Gv).bind(this,t,e,i,r),mustExec:!0})},Vv=function(t,e){const[i,r]=this.parentDimensions,a=this.x,c=this.y,d=this.width,p=this.height,f=Nt.MIN_SIZE/i,g=Nt.MIN_SIZE/r,y=S(this,St,hf).call(this,this.rotation),w=(J,nt)=>[y[0]*J+y[2]*nt,y[1]*J+y[3]*nt],A=S(this,St,hf).call(this,360-this.rotation),b=(J,nt)=>[A[0]*J+A[2]*nt,A[1]*J+A[3]*nt];let C,k,T=!1,M=!1;switch(t){case"topLeft":T=!0,C=(J,nt)=>[0,0],k=(J,nt)=>[J,nt];break;case"topMiddle":C=(J,nt)=>[J/2,0],k=(J,nt)=>[J/2,nt];break;case"topRight":T=!0,C=(J,nt)=>[J,0],k=(J,nt)=>[0,nt];break;case"middleRight":M=!0,C=(J,nt)=>[J,nt/2],k=(J,nt)=>[0,nt/2];break;case"bottomRight":T=!0,C=(J,nt)=>[J,nt],k=(J,nt)=>[0,0];break;case"bottomMiddle":C=(J,nt)=>[J/2,nt],k=(J,nt)=>[J/2,0];break;case"bottomLeft":T=!0,C=(J,nt)=>[0,nt],k=(J,nt)=>[J,0];break;case"middleLeft":M=!0,C=(J,nt)=>[0,nt/2],k=(J,nt)=>[J,nt/2];break}const z=C(d,p),F=k(d,p);let D=w(...F);const B=Nt._round(a+D[0]),N=Nt._round(c+D[1]);let $=1,G=1,et,Q;if(e.fromKeyboard)({deltaX:et,deltaY:Q}=e);else{const{screenX:J,screenY:nt}=e,[X,it]=o(this,ro);[et,Q]=this.screenToPageTranslation(J-X,nt-it),o(this,ro)[0]=J,o(this,ro)[1]=nt}if([et,Q]=b(et/i,Q/r),T){const J=Math.hypot(d,p);$=G=Math.max(Math.min(Math.hypot(F[0]-z[0]-et,F[1]-z[1]-Q)/J,1/d,1/p),f/d,g/p)}else M?$=Math.max(f,Math.min(1,Math.abs(F[0]-z[0]-et)))/d:G=Math.max(g,Math.min(1,Math.abs(F[1]-z[1]-Q)))/p;const At=Nt._round(d*$),kt=Nt._round(p*G);D=w(...k(At,kt));const dt=B-D[0],It=N-D[1];o(this,Vn)||x(this,Vn,[this.x,this.y,this.width,this.height]),this.width=At,this.height=kt,this.x=dt,this.y=It,this.setDims(i*At,r*kt),this.fixAndSetPosition(),this._onResizing()},Hb=function(){var t;x(this,$s,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=o(this,se))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},Ub=function(t,e,i){let a=.7*(i/e)+1-.7;if(a===1)return;const c=S(this,St,hf).call(this,this.rotation),d=(B,N)=>[c[0]*B+c[2]*N,c[1]*B+c[3]*N],[p,f]=this.parentDimensions,g=this.x,y=this.y,w=this.width,A=this.height,b=Nt.MIN_SIZE/p,C=Nt.MIN_SIZE/f;a=Math.max(Math.min(a,1/w,1/A),b/w,C/A);const k=Nt._round(w*a),T=Nt._round(A*a);if(k===w&&T===A)return;o(this,Vn)||x(this,Vn,[g,y,w,A]);const M=d(w/2,A/2),z=Nt._round(g+M[0]),F=Nt._round(y+M[1]),D=d(k/2,T/2);this.x=z-D[0],this.y=F-D[1],this.width=k,this.height=T,this.setDims(p*k,f*T),this.fixAndSetPosition(),this._onResizing()},$b=function(){var t;(t=o(this,se))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),S(this,St,pf).call(this)},Wv=function(t){const{isMac:e}=_n.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Gb=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:a},d=f=>{r.abort(),x(this,Yr,null),x(this,ao,!1),this._uiManager.endDragSession()||S(this,St,Wv).call(this,f),i&&this._onStopDragging()};e&&(x(this,tc,t.clientX),x(this,ec,t.clientY),x(this,Yr,t.pointerId),x(this,Dd,t.pointerType),window.addEventListener("pointermove",f=>{i||(i=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:w}=f;if(w!==o(this,Yr)){ii(f);return}const[A,b]=this.screenToPageTranslation(g-o(this,tc),y-o(this,ec));x(this,tc,g),x(this,ec,y),this._uiManager.dragSelectedEditors(A,b)},c),window.addEventListener("touchmove",ii,c),window.addEventListener("pointerdown",f=>{f.pointerType===o(this,Dd)&&(o(this,lo)||f.isPrimary)&&d(f),ii(f)},c));const p=f=>{if(!o(this,Yr)||o(this,Yr)===f.pointerId){d(f);return}ii(f)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})},qv=function(){if(o(this,Kr)||!this.div)return;x(this,Kr,new AbortController);const t=this._uiManager.combinedSignal(o(this,Kr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Vb=function(t){Nt._resizerKeyboardManager.exec(this,t)},Wb=function(t){var e;o(this,Gs)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==o(this,Ye)&&S(this,St,Vu).call(this)},qb=function(t){x(this,Nd,o(this,Gs)?t:"")},Xv=function(t){if(o(this,Ni))for(const e of o(this,Ni))e.tabIndex=t},Vu=function(){x(this,Gs,!1),S(this,St,Xv).call(this,-1),S(this,St,pf).call(this)},E(Nt,jd),Et(Nt,"_l10n",null),Et(Nt,"_l10nResizer",null),Et(Nt,"_borderLineWidth",-1),Et(Nt,"_colorManager",new Dv),Et(Nt,"_zIndex",1),Et(Nt,"_telemetryTimeout",1e3);let me=Nt;class Nk extends me{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const OA=3285377520,hi=4294901760,ns=65535;class Xb{constructor(t){this.h1=t?t&4294967295:OA,this.h2=t?t&4294967295:OA}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let C=0,k=t.length;C<k;C++){const T=t.charCodeAt(C);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,a=i-r*4,c=new Uint32Array(e.buffer,0,r);let d=0,p=0,f=this.h1,g=this.h2;const y=3432918353,w=461845907,A=y&ns,b=w&ns;for(let C=0;C<r;C++)C&1?(d=c[C],d=d*y&hi|d*A&ns,d=d<<15|d>>>17,d=d*w&hi|d*b&ns,f^=d,f=f<<13|f>>>19,f=f*5+3864292196):(p=c[C],p=p*y&hi|p*A&ns,p=p<<15|p>>>17,p=p*w&hi|p*b&ns,g^=p,g=g<<13|g>>>19,g=g*5+3864292196);switch(d=0,a){case 3:d^=e[r*4+2]<<16;case 2:d^=e[r*4+1]<<8;case 1:d^=e[r*4],d=d*y&hi|d*A&ns,d=d<<15|d>>>17,d=d*w&hi|d*b&ns,r&1?f^=d:g^=d}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&hi|t*36045&ns,e=e*4283543511&hi|((e<<16|t>>>16)*2950163797&hi)>>>16,t^=e>>>1,t=t*444984403&hi|t*60499&ns,e=e*3301882366&hi|((e<<16|t>>>16)*3120437893&hi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Yv=Object.freeze({map:null,hash:"",transfer:void 0});var co,uo,Ue,Jf,Yb;class Ky{constructor(){E(this,Jf);E(this,co,!1);E(this,uo,null);E(this,Ue,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=o(this,Ue).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return o(this,Ue).get(t)}remove(t){if(o(this,Ue).delete(t),o(this,Ue).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of o(this,Ue).values())if(e instanceof me)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=o(this,Ue).get(t);let r=!1;if(i!==void 0)for(const[a,c]of Object.entries(e))i[a]!==c&&(r=!0,i[a]=c);else r=!0,o(this,Ue).set(t,e);r&&S(this,Jf,Yb).call(this),e instanceof me&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return o(this,Ue).has(t)}getAll(){return o(this,Ue).size>0?Gy(o(this,Ue)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return o(this,Ue).size}resetModified(){o(this,co)&&(x(this,co,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Kb(this)}get serializable(){if(o(this,Ue).size===0)return Yv;const t=new Map,e=new Xb,i=[],r=Object.create(null);let a=!1;for(const[c,d]of o(this,Ue)){const p=d instanceof me?d.serialize(!1,r):d;p&&(t.set(c,p),e.update(`${c}:${JSON.stringify(p)}`),a||(a=!!p.bitmap))}if(a)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Yv}get editorStats(){let t=null;const e=new Map;for(const i of o(this,Ue).values()){if(!(i instanceof me))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:a}=r;e.has(a)||e.set(a,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const c=t[a]||(t[a]=new Map);for(const[d,p]of Object.entries(r)){if(d==="type")continue;let f=c.get(d);f||(f=new Map,c.set(d,f));const g=f.get(p)??0;f.set(p,g+1)}}for(const[i,r]of e)t[i]=r.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){x(this,uo,null)}get modifiedIds(){if(o(this,uo))return o(this,uo);const t=[];for(const e of o(this,Ue).values())!(e instanceof me)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return x(this,uo,{ids:new Set(t),hash:t.join(",")})}}co=new WeakMap,uo=new WeakMap,Ue=new WeakMap,Jf=new WeakSet,Yb=function(){o(this,co)||(x(this,co,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var zd;class Kb extends Ky{constructor(e){super();E(this,zd);const{map:i,hash:r,transfer:a}=e.serializable,c=structuredClone(i,a?{transfer:a}:null);x(this,zd,{map:c,hash:r,transfer:a})}get print(){Zt("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,zd)}get modifiedIds(){return zt(this,"modifiedIds",{ids:new Set,hash:""})}}zd=new WeakMap;var nc;class Ok{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){E(this,nc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),o(this,nc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||o(this,nc).has(t.loadedName))){if(ke(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:a}=t,c=new FontFace(i,r,a);this.addNativeFontFace(c);try{await c.load(),o(this,nc).add(i),e==null||e(t)}catch{Dt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Dt(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return zt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(fn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),zt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(ke(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return zt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(F,D){return F.charCodeAt(D)<<24|F.charCodeAt(D+1)<<16|F.charCodeAt(D+2)<<8|F.charCodeAt(D+3)&255}function r(F,D,B,N){const $=F.substring(0,D),G=F.substring(D+B);return $+N+G}let a,c;const d=this._document.createElement("canvas");d.width=1,d.height=1;const p=d.getContext("2d");let f=0;function g(F,D){if(++f>30){Dt("Load test font never loaded."),D();return}if(p.font="30px "+F,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(g.bind(null,F,D))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,y.length,y);const b=16,C=1482184792;let k=i(w,b);for(a=0,c=y.length-3;a<c;a+=4)k=k-C+i(y,a)|0;a<y.length&&(k=k-C+i(y+"XXX",a)|0),w=r(w,b,4,Ak(k));const T=`url(data:font/opentype;base64,${btoa(w)});`,M=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(M);const z=this._document.createElement("div");z.style.visibility="hidden",z.style.width=z.style.height="10px",z.style.position="absolute",z.style.top=z.style.left="0px";for(const F of[t.loadedName,y]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=F,z.append(D)}this._document.body.append(z),g(y,()=>{z.remove(),e.complete()})}}nc=new WeakMap;class Fk{constructor(t,{disableFontFace:e=!1,fontExtraProperties:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this.fontExtraProperties=i===!0,this._inspectFont=r}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${kk(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(c){Dt(`getPathGenerator - ignoring character: "${c}".`)}const a=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=a}}const Zp={DATA:1,ERROR:2},Ce={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function FA(){}function Ln(u){if(u instanceof va||u instanceof Tv||u instanceof ud||u instanceof LA||u instanceof jf||u instanceof gv)return u;switch(u instanceof Error||typeof u=="object"&&u!==null||Zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),u.name){case"AbortException":return new va(u.message);case"InvalidPDFException":return new Tv(u.message);case"MissingPDFException":return new ud(u.message);case"PasswordException":return new LA(u.message,u.code);case"UnexpectedResponseException":return new jf(u.message,u.status);case"UnknownErrorException":return new gv(u.message,u.details)}return new gv(u.message,u.toString())}var ic,bi,Qb,Jb,Zb,ff;class Wu{constructor(t,e,i){E(this,bi);E(this,ic,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",S(this,bi,Qb).bind(this),{signal:o(this,ic).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(c){a.reject(c)}return a.promise}sendWithStream(t,e,i,r){const a=this.streamId++,c=this.sourceName,d=this.targetName,p=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},p.postMessage({sourceName:c,targetName:d,action:t,streamId:a,data:e,desiredSize:f.desiredSize},r),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[a].pullCall=g,p.postMessage({sourceName:c,targetName:d,stream:Ce.PULL,streamId:a,desiredSize:f.desiredSize}),g.promise},cancel:f=>{ke(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[a].cancelCall=g,this.streamControllers[a].isClosed=!0,p.postMessage({sourceName:c,targetName:d,stream:Ce.CANCEL,streamId:a,reason:Ln(f)}),g.promise}},i)}destroy(){var t;(t=o(this,ic))==null||t.abort(),x(this,ic,null)}}ic=new WeakMap,bi=new WeakSet,Qb=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){S(this,bi,Zb).call(this,t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Zp.DATA)r.resolve(t.data);else if(t.callback===Zp.ERROR)r.reject(Ln(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(c){a.postMessage({sourceName:i,targetName:r,callback:Zp.DATA,callbackId:t.callbackId,data:c})},function(c){a.postMessage({sourceName:i,targetName:r,callback:Zp.ERROR,callbackId:t.callbackId,reason:Ln(c)})});return}if(t.streamId){S(this,bi,Jb).call(this,t);return}e(t.data)},Jb=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,c=this,d=this.actionHandler[t.action],p={enqueue(f,g=1,y){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=g,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:Ce.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:Ce.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){ke(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:Ce.ERROR,streamId:e,reason:Ln(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};p.sinkCapability.resolve(),p.ready=p.sinkCapability.promise,this.streamSinks[e]=p,Promise.try(d,t.data,p).then(function(){a.postMessage({sourceName:i,targetName:r,stream:Ce.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:Ce.START_COMPLETE,streamId:e,reason:Ln(f)})})},Zb=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,c=this.streamControllers[e],d=this.streamSinks[e];switch(t.stream){case Ce.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Ln(t.reason));break;case Ce.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Ln(t.reason));break;case Ce.PULL:if(!d){a.postMessage({sourceName:i,targetName:r,stream:Ce.PULL_COMPLETE,streamId:e,success:!0});break}d.desiredSize<=0&&t.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=t.desiredSize,Promise.try(d.onPull||FA).then(function(){a.postMessage({sourceName:i,targetName:r,stream:Ce.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:Ce.PULL_COMPLETE,streamId:e,reason:Ln(f)})});break;case Ce.ENQUEUE:if(ke(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Ce.CLOSE:if(ke(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),S(this,bi,ff).call(this,c,e);break;case Ce.ERROR:ke(c,"error should have stream controller"),c.controller.error(Ln(t.reason)),S(this,bi,ff).call(this,c,e);break;case Ce.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Ln(t.reason)),S(this,bi,ff).call(this,c,e);break;case Ce.CANCEL:if(!d)break;const p=Ln(t.reason);Promise.try(d.onCancel||FA,p).then(function(){a.postMessage({sourceName:i,targetName:r,stream:Ce.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:Ce.CANCEL_COMPLETE,streamId:e,reason:Ln(f)})}),d.sinkCapability.reject(p),d.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},ff=async function(t,e){var i,r,a;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(r=t.pullCall)==null?void 0:r.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]};var Bd;class t_{constructor({enableHWA:t=!1}){E(this,Bd,!1);x(this,Bd,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!o(this,Bd)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Zt("Abstract method `_createCanvas` called.")}}Bd=new WeakMap;class jk extends t_{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class e_{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class n_ extends e_{async _fetch(t){const e=await gm(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):mm(e)}}class i_{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,a){return"none"}destroy(t=!1){}}var ho,sc,Vs,Ws,cn,po,fo,at,an,qu,Il,mf,Ml,s_,Kv,Ll,Xu,Yu,Qv,Ku;class zk extends i_{constructor({docId:e,ownerDocument:i=globalThis.document}){super();E(this,at);E(this,ho);E(this,sc);E(this,Vs);E(this,Ws);E(this,cn);E(this,po);E(this,fo,0);x(this,Ws,e),x(this,cn,i)}addFilter(e){if(!e)return"none";let i=o(this,at,an).get(e);if(i)return i;const[r,a,c]=S(this,at,mf).call(this,e),d=e.length===1?r:`${r}${a}${c}`;if(i=o(this,at,an).get(d),i)return o(this,at,an).set(e,i),i;const p=`g_${o(this,Ws)}_transfer_map_${vn(this,fo)._++}`,f=S(this,at,Ml).call(this,p);o(this,at,an).set(e,f),o(this,at,an).set(d,f);const g=S(this,at,Ll).call(this,p);return S(this,at,Yu).call(this,r,a,c,g),f}addHCMFilter(e,i){var b;const r=`${e}-${i}`,a="base";let c=o(this,at,qu).get(a);if((c==null?void 0:c.key)===r||(c?((b=c.filter)==null||b.remove(),c.key=r,c.url="none",c.filter=null):(c={key:r,url:"none",filter:null},o(this,at,qu).set(a,c)),!e||!i))return c.url;const d=S(this,at,Ku).call(this,e);e=gt.makeHexColor(...d);const p=S(this,at,Ku).call(this,i);if(i=gt.makeHexColor(...p),o(this,at,Il).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return c.url;const f=new Array(256);for(let C=0;C<=255;C++){const k=C/255;f[C]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const g=f.join(","),y=`g_${o(this,Ws)}_hcm_filter`,w=c.filter=S(this,at,Ll).call(this,y);S(this,at,Yu).call(this,g,g,g,w),S(this,at,Kv).call(this,w);const A=(C,k)=>{const T=d[C]/255,M=p[C]/255,z=new Array(k+1);for(let F=0;F<=k;F++)z[F]=T+F/k*(M-T);return z.join(",")};return S(this,at,Yu).call(this,A(0,5),A(1,5),A(2,5),w),c.url=S(this,at,Ml).call(this,y),c.url}addAlphaFilter(e){let i=o(this,at,an).get(e);if(i)return i;const[r]=S(this,at,mf).call(this,[e]),a=`alpha_${r}`;if(i=o(this,at,an).get(a),i)return o(this,at,an).set(e,i),i;const c=`g_${o(this,Ws)}_alpha_map_${vn(this,fo)._++}`,d=S(this,at,Ml).call(this,c);o(this,at,an).set(e,d),o(this,at,an).set(a,d);const p=S(this,at,Ll).call(this,c);return S(this,at,Qv).call(this,r,p),d}addLuminosityFilter(e){let i=o(this,at,an).get(e||"luminosity");if(i)return i;let r,a;if(e?([r]=S(this,at,mf).call(this,[e]),a=`luminosity_${r}`):a="luminosity",i=o(this,at,an).get(a),i)return o(this,at,an).set(e,i),i;const c=`g_${o(this,Ws)}_luminosity_map_${vn(this,fo)._++}`,d=S(this,at,Ml).call(this,c);o(this,at,an).set(e,d),o(this,at,an).set(a,d);const p=S(this,at,Ll).call(this,c);return S(this,at,s_).call(this,p),e&&S(this,at,Qv).call(this,r,p),d}addHighlightHCMFilter(e,i,r,a,c){var M;const d=`${i}-${r}-${a}-${c}`;let p=o(this,at,qu).get(e);if((p==null?void 0:p.key)===d||(p?((M=p.filter)==null||M.remove(),p.key=d,p.url="none",p.filter=null):(p={key:d,url:"none",filter:null},o(this,at,qu).set(e,p)),!i||!r))return p.url;const[f,g]=[i,r].map(S(this,at,Ku).bind(this));let y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),w=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[A,b]=[a,c].map(S(this,at,Ku).bind(this));w<y&&([y,w,A,b]=[w,y,b,A]),o(this,at,Il).style.color="";const C=(z,F,D)=>{const B=new Array(256),N=(w-y)/D,$=z/255,G=(F-z)/(255*D);let et=0;for(let Q=0;Q<=D;Q++){const At=Math.round(y+Q*N),kt=$+Q*G;for(let dt=et;dt<=At;dt++)B[dt]=kt;et=At+1}for(let Q=et;Q<256;Q++)B[Q]=B[et-1];return B.join(",")},k=`g_${o(this,Ws)}_hcm_${e}_filter`,T=p.filter=S(this,at,Ll).call(this,k);return S(this,at,Kv).call(this,T),S(this,at,Yu).call(this,C(A[0],b[0],5),C(A[1],b[1],5),C(A[2],b[2],5),T),p.url=S(this,at,Ml).call(this,k),p.url}destroy(e=!1){var i,r,a,c;e&&((i=o(this,po))!=null&&i.size)||((r=o(this,Vs))==null||r.parentNode.parentNode.remove(),x(this,Vs,null),(a=o(this,sc))==null||a.clear(),x(this,sc,null),(c=o(this,po))==null||c.clear(),x(this,po,null),x(this,fo,0))}}ho=new WeakMap,sc=new WeakMap,Vs=new WeakMap,Ws=new WeakMap,cn=new WeakMap,po=new WeakMap,fo=new WeakMap,at=new WeakSet,an=function(){return o(this,sc)||x(this,sc,new Map)},qu=function(){return o(this,po)||x(this,po,new Map)},Il=function(){if(!o(this,Vs)){const e=o(this,cn).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=o(this,cn).createElementNS(Ls,"svg");r.setAttribute("width",0),r.setAttribute("height",0),x(this,Vs,o(this,cn).createElementNS(Ls,"defs")),e.append(r),r.append(o(this,Vs)),o(this,cn).body.append(e)}return o(this,Vs)},mf=function(e){if(e.length===1){const f=e[0],g=new Array(256);for(let w=0;w<256;w++)g[w]=f[w]/255;const y=g.join(",");return[y,y,y]}const[i,r,a]=e,c=new Array(256),d=new Array(256),p=new Array(256);for(let f=0;f<256;f++)c[f]=i[f]/255,d[f]=r[f]/255,p[f]=a[f]/255;return[c.join(","),d.join(","),p.join(",")]},Ml=function(e){if(o(this,ho)===void 0){x(this,ho,"");const i=o(this,cn).URL;i!==o(this,cn).baseURI&&(vm(i)?Dt('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,ho,i.split("#",1)[0]))}return`url(${o(this,ho)}#${e})`},s_=function(e){const i=o(this,cn).createElementNS(Ls,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},Kv=function(e){const i=o(this,cn).createElementNS(Ls,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Ll=function(e){const i=o(this,cn).createElementNS(Ls,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),o(this,at,Il).append(i),i},Xu=function(e,i,r){const a=o(this,cn).createElementNS(Ls,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",r),e.append(a)},Yu=function(e,i,r,a){const c=o(this,cn).createElementNS(Ls,"feComponentTransfer");a.append(c),S(this,at,Xu).call(this,c,"feFuncR",e),S(this,at,Xu).call(this,c,"feFuncG",i),S(this,at,Xu).call(this,c,"feFuncB",r)},Qv=function(e,i){const r=o(this,cn).createElementNS(Ls,"feComponentTransfer");i.append(r),S(this,at,Xu).call(this,r,"feFuncA",e)},Ku=function(e){return o(this,at,Il).style.color=e,Yy(getComputedStyle(o(this,at,Il)).getPropertyValue("color"))};class r_{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class a_ extends r_{async _fetch(t){const e=await gm(t,"arraybuffer");return new Uint8Array(e)}}fn&&Dt("Please use the `legacy` build in Node.js environments.");async function o_(u){const e=await process.getBuiltinModule("fs").promises.readFile(u);return new Uint8Array(e)}class Bk extends i_{}class Hk extends t_{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Uk extends e_{async _fetch(t){return o_(t)}}class $k extends r_{async _fetch(t){return o_(t)}}const hn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Jv(u,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),u.clip(r)}class Qy{getPattern(){Zt("Abstract method `getPattern` called.")}}class Gk extends Qy{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let a;if(r===hn.STROKE||r===hn.FILL){const c=e.current.getClippedPathBoundingBox(r,oe(t))||[0,0,0,0],d=Math.ceil(c[2]-c[0])||1,p=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",d,p),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),i=gt.transform(i,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),Jv(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),a=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(i);a.setTransform(y)}else Jv(t,this._bbox),a=this._createGradient(t);return a}}function wv(u,t,e,i,r,a,c,d){const p=t.coords,f=t.colors,g=u.data,y=u.width*4;let w;p[e+1]>p[i+1]&&(w=e,e=i,i=w,w=a,a=c,c=w),p[i+1]>p[r+1]&&(w=i,i=r,r=w,w=c,c=d,d=w),p[e+1]>p[i+1]&&(w=e,e=i,i=w,w=a,a=c,c=w);const A=(p[e]+t.offsetX)*t.scaleX,b=(p[e+1]+t.offsetY)*t.scaleY,C=(p[i]+t.offsetX)*t.scaleX,k=(p[i+1]+t.offsetY)*t.scaleY,T=(p[r]+t.offsetX)*t.scaleX,M=(p[r+1]+t.offsetY)*t.scaleY;if(b>=M)return;const z=f[a],F=f[a+1],D=f[a+2],B=f[c],N=f[c+1],$=f[c+2],G=f[d],et=f[d+1],Q=f[d+2],At=Math.round(b),kt=Math.round(M);let dt,It,J,nt,X,it,Z,L;for(let U=At;U<=kt;U++){if(U<k){const yt=U<b?0:(b-U)/(b-k);dt=A-(A-C)*yt,It=z-(z-B)*yt,J=F-(F-N)*yt,nt=D-(D-$)*yt}else{let yt;U>M?yt=1:k===M?yt=0:yt=(k-U)/(k-M),dt=C-(C-T)*yt,It=B-(B-G)*yt,J=N-(N-et)*yt,nt=$-($-Q)*yt}let ht;U<b?ht=0:U>M?ht=1:ht=(b-U)/(b-M),X=A-(A-T)*ht,it=z-(z-G)*ht,Z=F-(F-et)*ht,L=D-(D-Q)*ht;const bt=Math.round(Math.min(dt,X)),Mt=Math.round(Math.max(dt,X));let vt=y*U+bt*4;for(let yt=bt;yt<=Mt;yt++)ht=(dt-yt)/(dt-X),ht<0?ht=0:ht>1&&(ht=1),g[vt++]=It-(It-it)*ht|0,g[vt++]=J-(J-Z)*ht|0,g[vt++]=nt-(nt-L)*ht|0,g[vt++]=255}}function Vk(u,t,e){const i=t.coords,r=t.colors;let a,c;switch(t.type){case"lattice":const d=t.verticesPerRow,p=Math.floor(i.length/d)-1,f=d-1;for(a=0;a<p;a++){let g=a*d;for(let y=0;y<f;y++,g++)wv(u,e,i[g],i[g+1],i[g+d],r[g],r[g+1],r[g+d]),wv(u,e,i[g+d+1],i[g+1],i[g+d],r[g+d+1],r[g+1],r[g+d])}break;case"triangles":for(a=0,c=i.length;a<c;a+=3)wv(u,e,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class Wk extends Qy{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const d=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-d,g=Math.ceil(this._bounds[3])-p,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/y,b=g/w,C={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-p,scaleX:1/A,scaleY:1/b},k=y+4,T=w+4,M=i.getCanvas("mesh",k,T),z=M.context,F=z.createImageData(y,w);if(e){const B=F.data;for(let N=0,$=B.length;N<$;N+=4)B[N]=e[0],B[N+1]=e[1],B[N+2]=e[2],B[N+3]=255}for(const B of this._figures)Vk(F,B,C);return z.putImageData(F,2,2),{canvas:M.canvas,offsetX:d-2*A,offsetY:p-2*b,scaleX:A,scaleY:b}}getPattern(t,e,i,r){Jv(t,this._bbox);let a;if(r===hn.SHADING)a=gt.singularValueDecompose2dScale(oe(t));else if(a=gt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const d=gt.singularValueDecompose2dScale(this.matrix);a=[a[0]*d[0],a[1]*d[1]]}const c=this._createMeshCanvas(a,r===hn.SHADING?null:this._background,e.cachedCanvases);return r!==hn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class qk extends Qy{getPattern(){return"hotpink"}}function Xk(u){switch(u[0]){case"RadialAxial":return new Gk(u);case"Mesh":return new Wk(u);case"Dummy":return new qk}throw new Error(`Unknown IR type: ${u[0]}`)}const jA={COLORED:1,UNCOLORED:2},Zf=class Zf{constructor(t,e,i,r,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:r,tilingType:a,color:c,canvasGraphicsFactory:d}=this;let{xstep:p,ystep:f}=this;p=Math.abs(p),f=Math.abs(f),fm("TilingType: "+a);const g=e[0],y=e[1],w=e[2],A=e[3],b=w-g,C=A-y,k=gt.singularValueDecompose2dScale(this.matrix),T=gt.singularValueDecompose2dScale(this.baseTransform),M=k[0]*T[0],z=k[1]*T[1];let F=b,D=C,B=!1,N=!1;const $=Math.ceil(p*M),G=Math.ceil(f*z),et=Math.ceil(b*M),Q=Math.ceil(C*z);$>=et?F=p:B=!0,G>=Q?D=f:N=!0;const At=this.getSizeAndScale(F,this.ctx.canvas.width,M),kt=this.getSizeAndScale(D,this.ctx.canvas.height,z),dt=t.cachedCanvases.getCanvas("pattern",At.size,kt.size),It=dt.context,J=d.createCanvasGraphics(It);if(J.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(J,r,c),It.translate(-At.scale*g,-kt.scale*y),J.transform(At.scale,0,0,kt.scale,0,0),It.save(),this.clipBbox(J,g,y,w,A),J.baseTransform=oe(J.ctx),J.executeOperatorList(i),J.endDrawing(),It.restore(),B||N){const nt=dt.canvas;B&&(F=p),N&&(D=f);const X=this.getSizeAndScale(F,this.ctx.canvas.width,M),it=this.getSizeAndScale(D,this.ctx.canvas.height,z),Z=X.size,L=it.size,U=t.cachedCanvases.getCanvas("pattern-workaround",Z,L),ht=U.context,bt=B?Math.floor(b/p):0,Mt=N?Math.floor(C/f):0;for(let vt=0;vt<=bt;vt++)for(let yt=0;yt<=Mt;yt++)ht.drawImage(nt,Z*vt,L*yt,Z,L,0,0,Z,L);return{canvas:U.canvas,scaleX:X.scale,scaleY:it.scale,offsetX:g,offsetY:y}}return{canvas:dt.canvas,scaleX:At.scale,scaleY:kt.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,i){const r=Math.max(Zf.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*i);return a>=r?a=r:i=a/t,{scale:i,size:a}}clipBbox(t,e,i,r,a){const c=r-e,d=a-i;t.ctx.rect(e,i,c,d),t.current.updateRectMinMax(oe(t.ctx),[e,i,r,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,a=t.current;switch(e){case jA.COLORED:const c=this.ctx;r.fillStyle=c.fillStyle,r.strokeStyle=c.strokeStyle,a.fillColor=c.fillStyle,a.strokeColor=c.strokeStyle;break;case jA.UNCOLORED:const d=gt.makeHexColor(i[0],i[1],i[2]);r.fillStyle=d,r.strokeStyle=d,a.fillColor=d,a.strokeColor=d;break;default:throw new xk(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,r){let a=i;r!==hn.SHADING&&(a=gt.transform(a,e.baseTransform),this.matrix&&(a=gt.transform(a,this.matrix)));const c=this.createPatternCanvas(e);let d=new DOMMatrix(a);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const p=t.createPattern(c.canvas,"repeat");return p.setTransform(d),p}};Et(Zf,"MAX_PATTERN_SIZE",3e3);let Zv=Zf;function Yk({src:u,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:c=!1}){const d=_n.isLittleEndian?4278190080:255,[p,f]=c?[a,d]:[d,a],g=i>>3,y=i&7,w=u.length;e=new Uint32Array(e.buffer);let A=0;for(let b=0;b<r;b++){for(const k=t+g;t<k;t++){const T=t<w?u[t]:255;e[A++]=T&128?f:p,e[A++]=T&64?f:p,e[A++]=T&32?f:p,e[A++]=T&16?f:p,e[A++]=T&8?f:p,e[A++]=T&4?f:p,e[A++]=T&2?f:p,e[A++]=T&1?f:p}if(y===0)continue;const C=t<w?u[t++]:255;for(let k=0;k<y;k++)e[A++]=C&1<<7-k?f:p}return{srcPos:t,destPos:A}}const zA=16,BA=100,Kk=15,HA=10,UA=1e3,jn=16;function Qk(u,t){if(u._removeMirroring)throw new Error("Context is already forwarding operations.");u.__originalSave=u.save,u.__originalRestore=u.restore,u.__originalRotate=u.rotate,u.__originalScale=u.scale,u.__originalTranslate=u.translate,u.__originalTransform=u.transform,u.__originalSetTransform=u.setTransform,u.__originalResetTransform=u.resetTransform,u.__originalClip=u.clip,u.__originalMoveTo=u.moveTo,u.__originalLineTo=u.lineTo,u.__originalBezierCurveTo=u.bezierCurveTo,u.__originalRect=u.rect,u.__originalClosePath=u.closePath,u.__originalBeginPath=u.beginPath,u._removeMirroring=()=>{u.save=u.__originalSave,u.restore=u.__originalRestore,u.rotate=u.__originalRotate,u.scale=u.__originalScale,u.translate=u.__originalTranslate,u.transform=u.__originalTransform,u.setTransform=u.__originalSetTransform,u.resetTransform=u.__originalResetTransform,u.clip=u.__originalClip,u.moveTo=u.__originalMoveTo,u.lineTo=u.__originalLineTo,u.bezierCurveTo=u.__originalBezierCurveTo,u.rect=u.__originalRect,u.closePath=u.__originalClosePath,u.beginPath=u.__originalBeginPath,delete u._removeMirroring},u.save=function(){t.save(),this.__originalSave()},u.restore=function(){t.restore(),this.__originalRestore()},u.translate=function(i,r){t.translate(i,r),this.__originalTranslate(i,r)},u.scale=function(i,r){t.scale(i,r),this.__originalScale(i,r)},u.transform=function(i,r,a,c,d,p){t.transform(i,r,a,c,d,p),this.__originalTransform(i,r,a,c,d,p)},u.setTransform=function(i,r,a,c,d,p){t.setTransform(i,r,a,c,d,p),this.__originalSetTransform(i,r,a,c,d,p)},u.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},u.rotate=function(i){t.rotate(i),this.__originalRotate(i)},u.clip=function(i){t.clip(i),this.__originalClip(i)},u.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},u.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},u.bezierCurveTo=function(e,i,r,a,c,d){t.bezierCurveTo(e,i,r,a,c,d),this.__originalBezierCurveTo(e,i,r,a,c,d)},u.rect=function(e,i,r,a){t.rect(e,i,r,a),this.__originalRect(e,i,r,a)},u.closePath=function(){t.closePath(),this.__originalClosePath()},u.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Jk{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function tf(u,t,e,i,r,a,c,d,p,f){const[g,y,w,A,b,C]=oe(u);if(y===0&&w===0){const M=c*g+b,z=Math.round(M),F=d*A+C,D=Math.round(F),B=(c+p)*g+b,N=Math.abs(Math.round(B)-z)||1,$=(d+f)*A+C,G=Math.abs(Math.round($)-D)||1;return u.setTransform(Math.sign(g),0,0,Math.sign(A),z,D),u.drawImage(t,e,i,r,a,0,0,N,G),u.setTransform(g,y,w,A,b,C),[N,G]}if(g===0&&A===0){const M=d*w+b,z=Math.round(M),F=c*y+C,D=Math.round(F),B=(d+f)*w+b,N=Math.abs(Math.round(B)-z)||1,$=(c+p)*y+C,G=Math.abs(Math.round($)-D)||1;return u.setTransform(0,Math.sign(y),Math.sign(w),0,z,D),u.drawImage(t,e,i,r,a,0,0,G,N),u.setTransform(g,y,w,A,b,C),[G,N]}u.drawImage(t,e,i,r,a,c,d,p,f);const k=Math.hypot(g,y),T=Math.hypot(w,A);return[k*p,T*f]}function Zk(u){const{width:t,height:e}=u;if(t>UA||e>UA)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let c=new Uint8Array(a*(e+1)),d,p,f;const g=t+7&-8;let y=new Uint8Array(g*e),w=0;for(const T of u.data){let M=128;for(;M>0;)y[w++]=T&M?0:255,M>>=1}let A=0;for(w=0,y[w]!==0&&(c[0]=1,++A),p=1;p<t;p++)y[w]!==y[w+1]&&(c[p]=y[w]?2:1,++A),w++;for(y[w]!==0&&(c[p]=2,++A),d=1;d<e;d++){w=d*g,f=d*a,y[w-g]!==y[w]&&(c[f]=y[w]?1:8,++A);let T=(y[w]?4:0)+(y[w-g]?8:0);for(p=1;p<t;p++)T=(T>>2)+(y[w+1]?4:0)+(y[w-g+1]?8:0),r[T]&&(c[f+p]=r[T],++A),w++;if(y[w-g]!==y[w]&&(c[f+p]=y[w]?2:4,++A),A>i)return null}for(w=g*(e-1),f=d*a,y[w]!==0&&(c[f]=8,++A),p=1;p<t;p++)y[w]!==y[w+1]&&(c[f+p]=y[w]?4:8,++A),w++;if(y[w]!==0&&(c[f+p]=4,++A),A>i)return null;const b=new Int32Array([0,a,-1,0,-a,0,0,0,1]),C=new Path2D;for(d=0;A&&d<=e;d++){let T=d*a;const M=T+t;for(;T<M&&!c[T];)T++;if(T===M)continue;C.moveTo(T%a,d);const z=T;let F=c[T];do{const D=b[F];do T+=D;while(!c[T]);const B=c[T];B!==5&&B!==10?(F=B,c[T]=0):(F=B&51*F>>4,c[T]&=F>>2|F<<2),C.lineTo(T%a,T/a|0),c[T]||--A}while(z!==T);--d}return y=null,c=null,function(T){T.save(),T.scale(1/t,-1/e),T.translate(0,-e),T.fill(C),T.beginPath(),T.restore()}}class $A{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=vb,this.textMatrixScale=1,this.fontMatrix=kv,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=rn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=gt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=gt.applyTransform(e,t),r=gt.applyTransform(e.slice(2),t),a=gt.applyTransform([e[0],e[3]],t),c=gt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],r[0],a[0],c[0]),this.minY=Math.min(this.minY,i[1],r[1],a[1],c[1]),this.maxX=Math.max(this.maxX,i[0],r[0],a[0],c[0]),this.maxY=Math.max(this.maxY,i[1],r[1],a[1],c[1])}updateScalingPathMinMax(t,e){gt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,a,c,d,p,f,g){const y=gt.bezierBoundingBox(e,i,r,a,c,d,p,f,g);g||this.updateRectMinMax(t,y)}getPathBoundingBox(t=hn.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===hn.STROKE){e||Zt("Stroke bounding box must include transform.");const r=gt.singularValueDecompose2dScale(e),a=r[0]*this.lineWidth/2,c=r[1]*this.lineWidth/2;i[0]-=a,i[1]-=c,i[2]+=a,i[3]+=c}return i}updateClipFromPath(){const t=gt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=hn.FILL,e=null){return gt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function GA(u,t){if(t instanceof ImageData){u.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%jn,a=(e-r)/jn,c=r===0?a:a+1,d=u.createImageData(i,jn);let p=0,f;const g=t.data,y=d.data;let w,A,b,C;if(t.kind===rf.GRAYSCALE_1BPP){const k=g.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),M=T.length,z=i+7>>3,F=4294967295,D=_n.isLittleEndian?4278190080:255;for(w=0;w<c;w++){for(b=w<a?jn:r,f=0,A=0;A<b;A++){const B=k-p;let N=0;const $=B>z?i:B*8-7,G=$&-8;let et=0,Q=0;for(;N<G;N+=8)Q=g[p++],T[f++]=Q&128?F:D,T[f++]=Q&64?F:D,T[f++]=Q&32?F:D,T[f++]=Q&16?F:D,T[f++]=Q&8?F:D,T[f++]=Q&4?F:D,T[f++]=Q&2?F:D,T[f++]=Q&1?F:D;for(;N<$;N++)et===0&&(Q=g[p++],et=128),T[f++]=Q&et?F:D,et>>=1}for(;f<M;)T[f++]=0;u.putImageData(d,0,w*jn)}}else if(t.kind===rf.RGBA_32BPP){for(A=0,C=i*jn*4,w=0;w<a;w++)y.set(g.subarray(p,p+C)),p+=C,u.putImageData(d,0,A),A+=jn;w<c&&(C=i*r*4,y.set(g.subarray(p,p+C)),u.putImageData(d,0,A))}else if(t.kind===rf.RGB_24BPP)for(b=jn,C=i*b,w=0;w<c;w++){for(w>=a&&(b=r,C=i*b),f=0,A=C;A--;)y[f++]=g[p++],y[f++]=g[p++],y[f++]=g[p++],y[f++]=255;u.putImageData(d,0,w*jn)}else throw new Error(`bad image kind: ${t.kind}`)}function VA(u,t){if(t.bitmap){u.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%jn,a=(e-r)/jn,c=r===0?a:a+1,d=u.createImageData(i,jn);let p=0;const f=t.data,g=d.data;for(let y=0;y<c;y++){const w=y<a?jn:r;({srcPos:p}=Yk({src:f,srcPos:p,dest:g,width:i,height:w,nonBlackColor:0})),u.putImageData(d,0,y*jn)}}function ju(u,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)u[i]!==void 0&&(t[i]=u[i]);u.setLineDash!==void 0&&(t.setLineDash(u.getLineDash()),t.lineDashOffset=u.lineDashOffset)}function ef(u){if(u.strokeStyle=u.fillStyle="#000000",u.fillRule="nonzero",u.globalAlpha=1,u.lineWidth=1,u.lineCap="butt",u.lineJoin="miter",u.miterLimit=10,u.globalCompositeOperation="source-over",u.font="10px sans-serif",u.setLineDash!==void 0&&(u.setLineDash([]),u.lineDashOffset=0),!fn){const{filter:t}=u;t!=="none"&&t!==""&&(u.filter="none")}}function WA(u,t){if(t)return!0;const e=gt.singularValueDecompose2dScale(u);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*ya.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const tT=["butt","round","square"],eT=["miter","round","bevel"],nT={},qA={};var Wi,ty,ey,ny;const n0=class n0{constructor(t,e,i,r,a,{optionalContentConfig:c,markedContentStack:d=null},p,f){E(this,Wi);this.ctx=t,this.current=new $A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=c,this.cachedCanvases=new Jk(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=p,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,c=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,c),this.ctx.fillStyle=d,i){const p=this.cachedCanvases.getCanvas("transparent",a,c);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform(...oe(this.compositeCtx))}this.ctx.save(),ef(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=oe(this.ctx)}executeOperatorList(t,e,i,r){const a=t.argsArray,c=t.fnArray;let d=e||0;const p=a.length;if(p===d)return d;const f=p-d>HA&&typeof i=="function",g=f?Date.now()+Kk:0;let y=0;const w=this.commonObjs,A=this.objs;let b;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,i),d;if(b=c[d],b!==Ii.dependency)this[b].apply(this,a[d]);else for(const C of a[d]){const k=C.startsWith("g_")?w:A;if(!k.has(C))return k.get(C,i),d}if(d++,d===p)return d;if(f&&++y>HA){if(Date.now()>g)return i(),d;y=0}}}endDrawing(){S(this,Wi,ty).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),S(this,Wi,ey).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),d=i,p=r,f="prescale1",g,y;for(;a>2&&d>1||c>2&&p>1;){let w=d,A=p;a>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),a/=d/w),c>2&&p>1&&(A=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p)/2,c/=p/A),g=this.cachedCanvases.getCanvas(f,w,A),y=g.context,y.clearRect(0,0,w,A),y.drawImage(t,0,0,d,p,0,0,w,A),t=g.canvas,d=w,p=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:p}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:r}=t,a=this.current.fillColor,c=this.current.patternFill,d=oe(e);let p,f,g,y;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;f=JSON.stringify(c?d:[d.slice(0,4),a]),p=this._cachedBitmapsMap.get($),p||(p=new Map,this._cachedBitmapsMap.set($,p));const G=p.get(f);if(G&&!c){const et=Math.round(Math.min(d[0],d[2])+d[4]),Q=Math.round(Math.min(d[1],d[3])+d[5]);return{canvas:G,offsetX:et,offsetY:Q}}g=G}g||(y=this.cachedCanvases.getCanvas("maskCanvas",i,r),VA(y.context,t));let w=gt.transform(d,[1/i,0,0,-1/r,0,0]);w=gt.transform(w,[1,0,0,1,0,-r]);const[A,b,C,k]=gt.getAxialAlignedBoundingBox([0,0,i,r],w),T=Math.round(C-A)||1,M=Math.round(k-b)||1,z=this.cachedCanvases.getCanvas("fillCanvas",T,M),F=z.context,D=A,B=b;F.translate(-D,-B),F.transform(...w),g||(g=this._scaleImage(y.canvas,es(F)),g=g.img,p&&c&&p.set(f,g)),F.imageSmoothingEnabled=WA(oe(F),t.interpolate),tf(F,g,0,0,g.width,g.height,0,0,i,r),F.globalCompositeOperation="source-in";const N=gt.transform(es(F),[1,0,0,1,-D,-B]);return F.fillStyle=c?a.getPattern(e,this,N,hn.FILL):a,F.fillRect(0,0,i,r),p&&!c&&(this.cachedCanvases.delete("fillCanvas"),p.set(f,z.canvas)),{canvas:z.canvas,offsetX:Math.round(D),offsetY:Math.round(B)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=tT[t]}setLineJoin(t){this.ctx.lineJoin=eT[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=r.context;const a=this.ctx;a.setTransform(...oe(this.suspendedCtx)),ju(this.suspendedCtx,a),Qk(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ju(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const a=r[0],c=r[1],d=r[2]-a,p=r[3]-c;d===0||p===0||(this.genericComposeSMask(e.context,i,d,p,e.subtype,e.backdrop,e.transferMap,a,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,a,c,d,p,f,g,y){let w=t.canvas,A=p-g,b=f-y;if(c){const k=gt.makeHexColor(...c);if(A<0||b<0||A+i>w.width||b+r>w.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,r),M=T.context;M.drawImage(w,-A,-b),M.globalCompositeOperation="destination-atop",M.fillStyle=k,M.fillRect(0,0,i,r),M.globalCompositeOperation="source-over",w=T.canvas,A=b=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(A,b,i,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=k,t.fillRect(A,b,i,r),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&d?e.filter=this.filterFactory.addAlphaFilter(d):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(d));const C=new Path2D;C.rect(p,f,i,r),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(w,A,b,i,r,p,f,i,r),e.restore()}save(){this.inSMaskMode?(ju(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ju(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,r,a,c){this.ctx.transform(t,e,i,r,a,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const r=this.ctx,a=this.current;let c=a.x,d=a.y,p,f;const g=oe(r),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,w=y?i.slice(0):null;for(let A=0,b=0,C=t.length;A<C;A++)switch(t[A]|0){case Ii.rectangle:c=e[b++],d=e[b++];const k=e[b++],T=e[b++],M=c+k,z=d+T;r.moveTo(c,d),k===0||T===0?r.lineTo(M,z):(r.lineTo(M,d),r.lineTo(M,z),r.lineTo(c,z)),y||a.updateRectMinMax(g,[c,d,M,z]),r.closePath();break;case Ii.moveTo:c=e[b++],d=e[b++],r.moveTo(c,d),y||a.updatePathMinMax(g,c,d);break;case Ii.lineTo:c=e[b++],d=e[b++],r.lineTo(c,d),y||a.updatePathMinMax(g,c,d);break;case Ii.curveTo:p=c,f=d,c=e[b+4],d=e[b+5],r.bezierCurveTo(e[b],e[b+1],e[b+2],e[b+3],c,d),a.updateCurvePathMinMax(g,p,f,e[b],e[b+1],e[b+2],e[b+3],c,d,w),b+=6;break;case Ii.curveTo2:p=c,f=d,r.bezierCurveTo(c,d,e[b],e[b+1],e[b+2],e[b+3]),a.updateCurvePathMinMax(g,p,f,c,d,e[b],e[b+1],e[b+2],e[b+3],w),c=e[b+2],d=e[b+3],b+=4;break;case Ii.curveTo3:p=c,f=d,c=e[b+2],d=e[b+3],r.bezierCurveTo(e[b],e[b+1],c,d,c,d),a.updateCurvePathMinMax(g,p,f,e[b],e[b+1],c,d,c,d,w),b+=4;break;case Ii.closePath:r.closePath();break}y&&a.updateScalingPathMinMax(g,w),a.setCurrentPoint(c,d)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,es(e),hn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let a=!1;r&&(e.save(),e.fillStyle=i.getPattern(e,this,es(e),hn.FILL),a=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),a&&e.restore(),t&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=nT}eoClip(){this.pendingClip=qA}beginText(){this.current.textMatrix=vb,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const i=new Path2D,r=e.getTransform().invertSelf();for(const{transform:a,x:c,y:d,fontSize:p,path:f}of t)i.addPath(f,new DOMMatrix(a).preMultiplySelf(r).translate(c,d).scale(p,-p));e.clip(i),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||kv,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Dt("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const a=i.loadedName||"sans-serif",c=((g=i.systemFontInfo)==null?void 0:g.css)||`"${a}", ${i.fallbackName}`;let d="normal";i.black?d="900":i.bold&&(d="bold");const p=i.italic?"italic":"normal";let f=e;e<zA?f=zA:e>BA&&(f=BA),this.current.fontSizeScale=e/f,this.ctx.font=`${p} ${d} ${f}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,r,a,c){this.current.textMatrix=[t,e,i,r,a,c],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,r,a){const c=this.ctx,d=this.current,p=d.font,f=d.textRenderingMode,g=d.fontSize/d.fontSizeScale,y=f&rn.FILL_STROKE_MASK,w=!!(f&rn.ADD_TO_PATH_FLAG),A=d.patternFill&&!p.missingFile,b=d.patternStroke&&!p.missingFile;let C;if((p.disableFontFace||w||A||b)&&(C=p.getPathGenerator(this.commonObjs,t)),p.disableFontFace||A||b){if(c.save(),c.translate(e,i),c.scale(g,-g),y===rn.FILL||y===rn.FILL_STROKE)if(r){const k=c.getTransform();c.setTransform(...r),c.fill(S(this,Wi,ny).call(this,C,k,r))}else c.fill(C);if(y===rn.STROKE||y===rn.FILL_STROKE)if(a){const k=c.getTransform();c.setTransform(...a),c.stroke(S(this,Wi,ny).call(this,C,k,a))}else c.lineWidth/=g,c.stroke(C);c.restore()}else(y===rn.FILL||y===rn.FILL_STROKE)&&c.fillText(t,e,i),(y===rn.STROKE||y===rn.FILL_STROKE)&&c.strokeText(t,e,i);w&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:oe(c),x:e,y:i,fontSize:g,path:C})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return zt(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const a=this.ctx,c=e.fontSizeScale,d=e.charSpacing,p=e.wordSpacing,f=e.fontDirection,g=e.textHScale*f,y=t.length,w=i.vertical,A=w?1:-1,b=i.defaultVMetrics,C=r*e.fontMatrix[0],k=e.textRenderingMode===rn.FILL&&!i.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),f>0?a.scale(g,-1):a.scale(g,1);let T,M;if(e.patternFill){a.save();const N=e.fillColor.getPattern(a,this,es(a),hn.FILL);T=oe(a),a.restore(),a.fillStyle=N}if(e.patternStroke){a.save();const N=e.strokeColor.getPattern(a,this,es(a),hn.STROKE);M=oe(a),a.restore(),a.strokeStyle=N}let z=e.lineWidth;const F=e.textMatrixScale;if(F===0||z===0){const N=e.textRenderingMode&rn.FILL_STROKE_MASK;(N===rn.STROKE||N===rn.FILL_STROKE)&&(z=this.getSinglePixelWidth())}else z/=F;if(c!==1&&(a.scale(c,c),z/=c),a.lineWidth=z,i.isInvalidPDFjsFont){const N=[];let $=0;for(const G of t)N.push(G.unicode),$+=G.width;a.fillText(N.join(""),0,0),e.x+=$*C*g,a.restore(),this.compose();return}let D=0,B;for(B=0;B<y;++B){const N=t[B];if(typeof N=="number"){D+=A*N*r/1e3;continue}let $=!1;const G=(N.isSpace?p:0)+d,et=N.fontChar,Q=N.accent;let At,kt,dt=N.width;if(w){const J=N.vmetric||b,nt=-(N.vmetric?J[1]:dt*.5)*C,X=J[2]*C;dt=J?-J[0]:dt,At=nt/c,kt=(D+X)/c}else At=D/c,kt=0;if(i.remeasure&&dt>0){const J=a.measureText(et).width*1e3/r*c;if(dt<J&&this.isFontSubpixelAAEnabled){const nt=dt/J;$=!0,a.save(),a.scale(nt,1),At/=nt}else dt!==J&&(At+=(dt-J)/2e3*r/c)}if(this.contentVisible&&(N.isInFont||i.missingFile)){if(k&&!Q)a.fillText(et,At,kt);else if(this.paintChar(et,At,kt,T,M),Q){const J=At+r*Q.offset.x/c,nt=kt-r*Q.offset.y/c;this.paintChar(Q.fontChar,J,nt,T,M)}}const It=w?dt*C-G*f:dt*C+G*f;D+=It,$&&a.restore()}w?e.y-=D:e.x+=D*g,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,r=i.font,a=i.fontSize,c=i.fontDirection,d=r.vertical?1:-1,p=i.charSpacing,f=i.wordSpacing,g=i.textHScale*c,y=i.fontMatrix||kv,w=t.length,A=i.textRenderingMode===rn.INVISIBLE;let b,C,k,T;if(!(A||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(g,c),b=0;b<w;++b){if(C=t[b],typeof C=="number"){T=d*C*a/1e3,this.ctx.translate(T,0),i.x+=T*g;continue}const M=(C.isSpace?f:0)+p,z=r.charProcOperatorList[C.operatorListId];if(!z){Dt(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),e.scale(a,a),e.transform(...y),this.executeOperatorList(z),this.restore()),k=gt.applyTransform([C.width,0],y)[0]*a+M,e.translate(k,0),i.x+=k*g}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,r,a,c){this.ctx.rect(i,r,a-i,c-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],r=this.baseTransform||oe(this.ctx),a={createCanvasGraphics:c=>new n0(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Zv(t,i,this.ctx,a,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=gt.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=gt.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Xk(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,es(e),hn.SHADING);const r=es(e);if(r){const{width:a,height:c}=e.canvas,[d,p,f,g]=gt.getAxialAlignedBoundingBox([0,0,a,c],r);this.ctx.fillRect(d,p,f-d,g-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Zt("Should not call beginInlineImage")}beginImageData(){Zt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=oe(this.ctx),e)){const i=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],i,r),this.current.updateRectMinMax(oe(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||fm("TODO: Support non-isolated groups."),t.knockout&&Dt("Knockout groups not supported.");const i=oe(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=gt.getAxialAlignedBoundingBox(t.bbox,oe(e));const a=[0,0,e.canvas.width,e.canvas.height];r=gt.intersect(r,a)||[0,0,0,0];const c=Math.floor(r[0]),d=Math.floor(r[1]),p=Math.max(Math.ceil(r[2])-c,1),f=Math.max(Math.ceil(r[3])-d,1);this.current.startNewPathAndClipBox([0,0,p,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,p,f),w=y.context;w.translate(-c,-d),w.transform(...i),t.smask?this.smaskStack.push({canvas:y.canvas,context:w,offsetX:c,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(c,d),e.save()),ju(e,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=oe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const a=gt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,i,r,a){if(S(this,Wi,ty).call(this),ef(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const c=e[2]-e[0],d=e[3]-e[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=c,e[3]=d;const[p,f]=gt.singularValueDecompose2dScale(oe(this.ctx)),{viewportScale:g}=this,y=Math.ceil(c*this.outputScaleX*g),w=Math.ceil(d*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,w);const{canvas:A,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(p,0,0,-f,0,d*f),ef(this.ctx)}else ef(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],c,d),this.ctx.clip(),this.ctx.beginPath()}this.current=new $A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),S(this,Wi,ey).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=Zk(t)),r.compiled)){r.compiled(i);return}const a=this._createMaskCanvas(t),c=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,r=0,a,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const d=this.ctx;d.save();const p=oe(d);d.transform(e,i,r,a,0,0);const f=this._createMaskCanvas(t);d.setTransform(1,0,0,1,f.offsetX-p[4],f.offsetY-p[5]);for(let g=0,y=c.length;g<y;g+=2){const w=gt.transform(p,[e,i,r,a,c[g],c[g+1]]),[A,b]=gt.applyTransform([0,0],w);d.drawImage(f.canvas,A,b)}d.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const a of t){const{data:c,width:d,height:p,transform:f}=a,g=this.cachedCanvases.getCanvas("maskCanvas",d,p),y=g.context;y.save();const w=this.getObject(c,a);VA(y,w),y.globalCompositeOperation="source-in",y.fillStyle=r?i.getPattern(y,this,es(e),hn.FILL):i,y.fillRect(0,0,d,p),y.restore(),e.save(),e.transform(...f),e.scale(1,-1),tf(e,g.canvas,0,0,d,p,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Dt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,r){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){Dt("Dependent image isn't ready yet");return}const c=a.width,d=a.height,p=[];for(let f=0,g=r.length;f<g;f+=2)p.push({transform:[e,0,0,i,r[f],r[f+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(a,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,a=this.cachedCanvases.getCanvas("inlineImage",i,r),c=a.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,r=this.ctx;if(this.save(),!fn){const{filter:d}=r;d!=="none"&&d!==""&&(r.filter="none")}r.scale(1/e,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",e,i).context;GA(p,t),a=this.applyTransferMapsToCanvas(p)}const c=this._scaleImage(a,es(r));r.imageSmoothingEnabled=WA(oe(r),t.interpolate),tf(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const a=t.width,c=t.height,p=this.cachedCanvases.getCanvas("inlineImage",a,c).context;GA(p,t),r=this.applyTransferMapsToCanvas(p)}for(const a of e)i.save(),i.transform(...a.transform),i.scale(1,-1),tf(i,r,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===qA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=oe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:a}=this.ctx.getTransform();let c,d;if(i===0&&r===0){const p=Math.abs(e),f=Math.abs(a);if(p===f)if(t===0)c=d=1/p;else{const g=p*t;c=d=g<1?1/g:1}else if(t===0)c=1/p,d=1/f;else{const g=p*t,y=f*t;c=g<1?1/g:1,d=y<1?1/y:1}}else{const p=Math.abs(e*a-i*r),f=Math.hypot(e,i),g=Math.hypot(r,a);if(t===0)c=g/p,d=f/p;else{const y=t*p;c=g>y?g/y:1,d=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[r,a]=this.getScaleForStroking();if(e.lineWidth=i||1,r===1&&a===1){e.stroke();return}const c=e.getLineDash();if(t&&e.save(),e.scale(r,a),c.length>0){const d=Math.max(r,a);e.setLineDash(c.map(p=>p/d)),e.lineDashOffset/=d}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Wi=new WeakSet,ty=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ey=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},ny=function(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r};let Bl=n0;for(const u in Ii)Bl.prototype[u]!==void 0&&(Bl.prototype[Ii[u]]=Bl.prototype[u]);var Hd,Ud;class cr{static get workerPort(){return o(this,Hd)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,Hd,t)}static get workerSrc(){return o(this,Ud)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,Ud,t)}}Hd=new WeakMap,Ud=new WeakMap,E(cr,Hd,null),E(cr,Ud,"");var mo,$d;class iT{constructor({parsedData:t,rawData:e}){E(this,mo);E(this,$d);x(this,mo,t),x(this,$d,e)}getRaw(){return o(this,$d)}get(t){return o(this,mo).get(t)??null}getAll(){return Gy(o(this,mo))}has(t){return o(this,mo).has(t)}}mo=new WeakMap,$d=new WeakMap;const Dl=Symbol("INTERNAL");var Gd,Vd,Wd,rc;class sT{constructor(t,{name:e,intent:i,usage:r,rbGroups:a}){E(this,Gd,!1);E(this,Vd,!1);E(this,Wd,!1);E(this,rc,!0);x(this,Gd,!!(t&ei.DISPLAY)),x(this,Vd,!!(t&ei.PRINT)),this.name=e,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(o(this,Wd))return o(this,rc);if(!o(this,rc))return!1;const{print:t,view:e}=this.usage;return o(this,Gd)?(e==null?void 0:e.viewState)!=="OFF":o(this,Vd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Dl&&Zt("Internal method `_setVisible` called."),x(this,Wd,i),x(this,rc,e)}}Gd=new WeakMap,Vd=new WeakMap,Wd=new WeakMap,rc=new WeakMap;var Qr,Yt,ac,oc,qd,iy;class rT{constructor(t,e=ei.DISPLAY){E(this,qd);E(this,Qr,null);E(this,Yt,new Map);E(this,ac,null);E(this,oc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,oc,t.order);for(const i of t.groups)o(this,Yt).set(i.id,new sT(e,i));if(t.baseState==="OFF")for(const i of o(this,Yt).values())i._setVisible(Dl,!1);for(const i of t.on)o(this,Yt).get(i)._setVisible(Dl,!0);for(const i of t.off)o(this,Yt).get(i)._setVisible(Dl,!1);x(this,ac,this.getHash())}}isVisible(t){if(o(this,Yt).size===0)return!0;if(!t)return fm("Optional content group not defined."),!0;if(t.type==="OCG")return o(this,Yt).has(t.id)?o(this,Yt).get(t.id).visible:(Dt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return S(this,qd,iy).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!o(this,Yt).has(e))return Dt(`Optional content group not found: ${e}`),!0;if(o(this,Yt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!o(this,Yt).has(e))return Dt(`Optional content group not found: ${e}`),!0;if(!o(this,Yt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!o(this,Yt).has(e))return Dt(`Optional content group not found: ${e}`),!0;if(!o(this,Yt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!o(this,Yt).has(e))return Dt(`Optional content group not found: ${e}`),!0;if(o(this,Yt).get(e).visible)return!1}return!0}return Dt(`Unknown optional content policy ${t.policy}.`),!0}return Dt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var a;const r=o(this,Yt).get(t);if(!r){Dt(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const c of r.rbGroups)for(const d of c)d!==t&&((a=o(this,Yt).get(d))==null||a._setVisible(Dl,!1,!0));r._setVisible(Dl,!!e,!0),x(this,Qr,null)}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const a=o(this,Yt).get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!a.visible,e);break}}x(this,Qr,null)}get hasInitialVisibility(){return o(this,ac)===null||this.getHash()===o(this,ac)}getOrder(){return o(this,Yt).size?o(this,oc)?o(this,oc).slice():[...o(this,Yt).keys()]:null}getGroups(){return o(this,Yt).size>0?Gy(o(this,Yt)):null}getGroup(t){return o(this,Yt).get(t)||null}getHash(){if(o(this,Qr)!==null)return o(this,Qr);const t=new Xb;for(const[e,i]of o(this,Yt))t.update(`${e}:${i.visible}`);return x(this,Qr,t.hexdigest())}}Qr=new WeakMap,Yt=new WeakMap,ac=new WeakMap,oc=new WeakMap,qd=new WeakSet,iy=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const a=t[r];let c;if(Array.isArray(a))c=S(this,qd,iy).call(this,a);else if(o(this,Yt).has(a))c=o(this,Yt).get(a).visible;else return Dt(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"};class aT{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ke(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:c,contentDispositionFilename:d}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=d,(a==null?void 0:a.length)>0){const p=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((p,f)=>{this._onReceiveData({begin:p,chunk:f})}),t.addProgressListener((p,f)=>{this._onProgress({loaded:p,total:f})}),t.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(i),!0)});ke(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,r,a;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(a=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||a.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ke(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new oT(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new lT(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class oT{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=qy(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class lT{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function cT(u){let t=!0,e=i("filename\\*","i").exec(u);if(e){e=e[1];let g=d(e);return g=unescape(g),g=p(g),g=f(g),a(g)}if(e=c(u),e){const g=f(e);return a(g)}if(e=i("filename","i").exec(u),e){e=e[1];let g=d(e);return g=f(g),a(g)}function i(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const w=new TextDecoder(g,{fatal:!0}),A=mm(y);y=w.decode(A),t=!1}catch{}}return y}function a(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function c(g){const y=[];let w;const A=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=A.exec(g))!==null;){let[,C,k,T]=w;if(C=parseInt(C,10),C in y){if(C===0)break;continue}y[C]=[k,T]}const b=[];for(let C=0;C<y.length&&C in y;++C){let[k,T]=y[C];T=d(T),k&&(T=unescape(T),C===0&&(T=p(T))),b.push(T)}return b.join("")}function d(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let w=0;w<y.length;++w){const A=y[w].indexOf('"');A!==-1&&(y[w]=y[w].slice(0,A),y.length=w+1),y[w]=y[w].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function p(g){const y=g.indexOf("'");if(y===-1)return g;const w=g.slice(0,y),b=g.slice(y+1).replace(/^[^']*'/,"");return r(w,b)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,w,A,b){if(A==="q"||A==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,k){return String.fromCharCode(parseInt(k,16))}),r(w,b);try{b=atob(b)}catch{}return r(w,b)})}return""}function l_(u,t){const e=new Headers;if(!u||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function ym(u){try{return new URL(u).origin}catch{}return null}function c_({responseHeaders:u,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(u.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*e)||i||!t||u.get("Accept-Ranges")!=="bytes"||(u.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function u_(u){const t=u.get("Content-Disposition");if(t){let e=cT(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(qy(e))return e}return null}function wm(u,t){return u===404||u===0&&t.startsWith("file:")?new ud('Missing PDF "'+t+'".'):new jf(`Unexpected server response (${u}) while retrieving PDF "${t}".`,u)}function d_(u){return u===200||u===206}function h_(u,t,e){return{method:"GET",headers:u,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function p_(u){return u instanceof Uint8Array?u.buffer:u instanceof ArrayBuffer?u:(Dt(`getArrayBuffer - unexpected data format: ${u}`),new Uint8Array(u).buffer)}class XA{constructor(t){Et(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=l_(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ke(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new uT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new dT(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class uT{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,h_(i,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=ym(a.url),!d_(a.status))throw wm(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const c=a.headers,{allowRangeRequests:d,suggestedLength:p}=c_({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=p||this._contentLength,this._filename=u_(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new va("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:p_(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class dT{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${i-1}`);const c=r.url;fetch(c,h_(a,this._withCredentials,this._abortController)).then(d=>{const p=ym(d.url);if(p!==t._responseOrigin)throw new Error(`Expected range response-origin "${p}" to match "${t._responseOrigin}".`);if(!d_(d.status))throw wm(d.status,c);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:p_(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const xv=200,Av=206;function hT(u){const t=u.response;return typeof t!="string"?t:mm(t).buffer}class pT{constructor({url:t,httpHeaders:e,withCredentials:i}){Et(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=l_(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,c]of this.headers)e.setRequestHeader(a,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Av):r.expectedStatus=xv,e.responseType="arraybuffer",ke(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var r;const i=this.pendingRequests[t];i&&((r=i.onProgress)==null||r.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const a=r.status||xv;if(!(a===xv&&i.expectedStatus===Av)&&a!==i.expectedStatus){i.onError(r.status);return}const d=hT(r);if(a===Av){const p=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);f?i.onDone({begin:parseInt(f[1],10),chunk:d}):(Dt('Missing or invalid "Content-Range" header.'),i.onError(0))}else d?i.onDone({begin:0,chunk:d}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class fT{constructor(t){this._source=t,this._manager=new pT(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ke(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new mT(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new gT(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class mT{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=ym(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[p,...f]=d.split(": ");return[p,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:c}=c_({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=u_(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=wm(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class gT{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=ym((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=wm(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const vT=/^[a-z][a-z0-9\-+.]+:/i;function yT(u){if(vT.test(u))return new URL(u);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(u))}class wT{constructor(t){this.source=t,this.url=yT(t.url),ke(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ke(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new xT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new AT(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class xT{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new ud(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new va("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class AT{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const bT=1e5,Mn=30,_T=.8;var ZA,Jr,On,Xd,Yd,go,qs,Kd,Qd,vo,lc,cc,Zr,uc,Jd,dc,yo,Zd,th,wo,xo,eh,ta,hc,pr,f_,m_,sy,si,gf,ry,g_,v_;const Me=class Me{constructor({textContentSource:t,container:e,viewport:i}){E(this,pr);E(this,Jr,Promise.withResolvers());E(this,On,null);E(this,Xd,!1);E(this,Yd,!!((ZA=globalThis.FontInspector)!=null&&ZA.enabled));E(this,go,null);E(this,qs,null);E(this,Kd,0);E(this,Qd,0);E(this,vo,null);E(this,lc,null);E(this,cc,0);E(this,Zr,0);E(this,uc,Object.create(null));E(this,Jd,[]);E(this,dc,null);E(this,yo,[]);E(this,Zd,new WeakMap);E(this,th,null);var p;if(t instanceof ReadableStream)x(this,dc,t);else if(typeof t=="object")x(this,dc,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,On,x(this,lc,e)),x(this,Zr,i.scale*(globalThis.devicePixelRatio||1)),x(this,cc,i.rotation),x(this,qs,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:a,pageX:c,pageY:d}=i.rawDims;x(this,th,[1,0,0,-1,-c,d+a]),x(this,Qd,r),x(this,Kd,a),S(p=Me,si,g_).call(p),Qo(e,i),o(this,Jr).promise.finally(()=>{o(Me,hc).delete(this),x(this,qs,null),x(this,uc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=_n.platform;return zt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{o(this,vo).read().then(({value:e,done:i})=>{if(i){o(this,Jr).resolve();return}o(this,go)??x(this,go,e.lang),Object.assign(o(this,uc),e.styles),S(this,pr,f_).call(this,e.items),t()},o(this,Jr).reject)};return x(this,vo,o(this,dc).getReader()),o(Me,hc).add(this),t(),o(this,Jr).promise}update({viewport:t,onBefore:e=null}){var a;const i=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==o(this,cc)&&(e==null||e(),x(this,cc,r),Qo(o(this,lc),{rotation:r})),i!==o(this,Zr)){e==null||e(),x(this,Zr,i);const c={div:null,properties:null,ctx:S(a=Me,si,gf).call(a,o(this,go))};for(const d of o(this,yo))c.properties=o(this,Zd).get(d),c.div=d,S(this,pr,sy).call(this,c)}}cancel(){var e;const t=new va("TextLayer task cancelled.");(e=o(this,vo))==null||e.cancel(t).catch(()=>{}),x(this,vo,null),o(this,Jr).reject(t)}get textDivs(){return o(this,yo)}get textContentItemsStr(){return o(this,Jd)}static cleanup(){if(!(o(this,hc).size>0)){o(this,wo).clear();for(const{canvas:t}of o(this,xo).values())t.remove();o(this,xo).clear()}}};Jr=new WeakMap,On=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,go=new WeakMap,qs=new WeakMap,Kd=new WeakMap,Qd=new WeakMap,vo=new WeakMap,lc=new WeakMap,cc=new WeakMap,Zr=new WeakMap,uc=new WeakMap,Jd=new WeakMap,dc=new WeakMap,yo=new WeakMap,Zd=new WeakMap,th=new WeakMap,wo=new WeakMap,xo=new WeakMap,eh=new WeakMap,ta=new WeakMap,hc=new WeakMap,pr=new WeakSet,f_=function(t){var r,a;if(o(this,Xd))return;(a=o(this,qs)).ctx??(a.ctx=S(r=Me,si,gf).call(r,o(this,go)));const e=o(this,yo),i=o(this,Jd);for(const c of t){if(e.length>bT){Dt("Ignoring additional textDivs for performance reasons."),x(this,Xd,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const d=o(this,On);x(this,On,document.createElement("span")),o(this,On).classList.add("markedContent"),c.id!==null&&o(this,On).setAttribute("id",`${c.id}`),d.append(o(this,On))}else c.type==="endMarkedContent"&&x(this,On,o(this,On).parentNode);continue}i.push(c.str),S(this,pr,m_).call(this,c)}},m_=function(t){var C;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};o(this,yo).push(e);const r=gt.transform(o(this,th),t.transform);let a=Math.atan2(r[1],r[0]);const c=o(this,uc)[t.fontName];c.vertical&&(a+=Math.PI/2);let d=o(this,Yd)&&c.fontSubstitution||c.fontFamily;d=Me.fontFamilyMap.get(d)||d;const p=Math.hypot(r[2],r[3]),f=p*S(C=Me,si,v_).call(C,d,o(this,go));let g,y;a===0?(g=r[4],y=r[5]-f):(g=r[4]+f*Math.sin(a),y=r[5]-f*Math.cos(a));const w="calc(var(--scale-factor)*",A=e.style;o(this,On)===o(this,lc)?(A.left=`${(100*g/o(this,Qd)).toFixed(2)}%`,A.top=`${(100*y/o(this,Kd)).toFixed(2)}%`):(A.left=`${w}${g.toFixed(2)}px)`,A.top=`${w}${y.toFixed(2)}px)`),A.fontSize=`${w}${(o(Me,ta)*p).toFixed(2)}px)`,A.fontFamily=d,i.fontSize=p,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,o(this,Yd)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),a!==0&&(i.angle=a*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const k=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);k!==T&&Math.max(k,T)/Math.min(k,T)>1.5&&(b=!0)}if(b&&(i.canvasWidth=c.vertical?t.height:t.width),o(this,Zd).set(e,i),o(this,qs).div=e,o(this,qs).properties=i,S(this,pr,sy).call(this,o(this,qs)),i.hasText&&o(this,On).append(e),i.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),o(this,On).append(k)}},sy=function(t){var d;const{div:e,properties:i,ctx:r}=t,{style:a}=e;let c="";if(o(Me,ta)>1&&(c=`scale(${1/o(Me,ta)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:p}=a,{canvasWidth:f,fontSize:g}=i;S(d=Me,si,ry).call(d,r,g*o(this,Zr),p);const{width:y}=r.measureText(e.textContent);y>0&&(c=`scaleX(${f*o(this,Zr)/y}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(a.transform=c)},si=new WeakSet,gf=function(t=null){let e=o(this,xo).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,xo).set(t,e),o(this,eh).set(e,{size:0,family:""})}return e},ry=function(t,e,i){const r=o(this,eh).get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)},g_=function(){if(o(this,ta)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,ta,t.getBoundingClientRect().height),t.remove()},v_=function(t,e){const i=o(this,wo).get(t);if(i)return i;const r=S(this,si,gf).call(this,e);r.canvas.width=r.canvas.height=Mn,S(this,si,ry).call(this,r,Mn,t);const a=r.measureText("");let c=a.fontBoundingBoxAscent,d=Math.abs(a.fontBoundingBoxDescent);if(c){const g=c/(c+d);return o(this,wo).set(t,g),r.canvas.width=r.canvas.height=0,g}r.strokeStyle="red",r.clearRect(0,0,Mn,Mn),r.strokeText("g",0,0);let p=r.getImageData(0,0,Mn,Mn).data;d=0;for(let g=p.length-1-3;g>=0;g-=4)if(p[g]>0){d=Math.ceil(g/4/Mn);break}r.clearRect(0,0,Mn,Mn),r.strokeText("A",0,Mn),p=r.getImageData(0,0,Mn,Mn).data,c=0;for(let g=0,y=p.length;g<y;g+=4)if(p[g]>0){c=Mn-Math.floor(g/4/Mn);break}r.canvas.width=r.canvas.height=0;const f=c?c/(c+d):_T;return o(this,wo).set(t,f),f},E(Me,si),E(Me,wo,new Map),E(Me,xo,new Map),E(Me,eh,new WeakMap),E(Me,ta,null),E(Me,hc,new Set);let dd=Me;class hd{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(a){var p;if(!a)return;let c=null;const d=a.name;if(d==="#text")c=a.value;else if(hd.shouldBuildText(d))(p=a==null?void 0:a.attributes)!=null&&p.textContent?c=a.attributes.textContent:a.value&&(c=a.value);else return;if(c!==null&&e.push({str:c}),!!a.children)for(const f of a.children)r(f)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const ET=65536,ST=100,CT=5e3,kT=fn?Hk:jk,TT=fn?Uk:n_,RT=fn?Bk:zk,PT=fn?$k:a_;function IT(u={}){typeof u=="string"||u instanceof URL?u={url:u}:(u instanceof ArrayBuffer||ArrayBuffer.isView(u))&&(u={data:u});const t=new ay,{docId:e}=t,i=u.url?MT(u.url):null,r=u.data?LT(u.data):null,a=u.httpHeaders||null,c=u.withCredentials===!0,d=u.password??null,p=u.range instanceof y_?u.range:null,f=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:ET;let g=u.worker instanceof Hl?u.worker:null;const y=u.verbosity,w=typeof u.docBaseUrl=="string"&&!vm(u.docBaseUrl)?u.docBaseUrl:null,A=typeof u.cMapUrl=="string"?u.cMapUrl:null,b=u.cMapPacked!==!1,C=u.CMapReaderFactory||TT,k=typeof u.standardFontDataUrl=="string"?u.standardFontDataUrl:null,T=u.StandardFontDataFactory||PT,M=u.stopAtErrors!==!0,z=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,F=u.isEvalSupported!==!1,D=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!fn,B=typeof u.isImageDecoderSupported=="boolean"?u.isImageDecoderSupported:!fn&&(_n.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(u.canvasMaxAreaInBytes)?u.canvasMaxAreaInBytes:-1,$=typeof u.disableFontFace=="boolean"?u.disableFontFace:fn,G=u.fontExtraProperties===!0,et=u.enableXfa===!0,Q=u.ownerDocument||globalThis.document,At=u.disableRange===!0,kt=u.disableStream===!0,dt=u.disableAutoFetch===!0,It=u.pdfBug===!0,J=u.CanvasFactory||kT,nt=u.FilterFactory||RT,X=u.enableHWA===!0,it=p?p.length:u.length??NaN,Z=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!fn&&!$,L=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:C===n_&&T===a_&&A&&k&&Uu(A,document.baseURI)&&Uu(k,document.baseURI),U=null;gk(y);const ht={canvasFactory:new J({ownerDocument:Q,enableHWA:X}),filterFactory:new nt({docId:e,ownerDocument:Q}),cMapReaderFactory:L?null:new C({baseUrl:A,isCompressed:b}),standardFontDataFactory:L?null:new T({baseUrl:k})};if(!g){const vt={verbosity:y,port:cr.workerPort};g=vt.port?Hl.fromPort(vt):new Hl(vt),t._worker=g}const bt={docId:e,apiVersion:"4.10.38",data:r,password:d,disableAutoFetch:dt,rangeChunkSize:f,length:it,docBaseUrl:w,enableXfa:et,evaluatorOptions:{maxImageSize:z,disableFontFace:$,ignoreErrors:M,isEvalSupported:F,isOffscreenCanvasSupported:D,isImageDecoderSupported:B,canvasMaxAreaInBytes:N,fontExtraProperties:G,useSystemFonts:Z,cMapUrl:L?A:null,standardFontDataUrl:L?k:null}},Mt={disableFontFace:$,fontExtraProperties:G,ownerDocument:Q,pdfBug:It,styleElement:U,loadingParams:{disableAutoFetch:dt,enableXfa:et}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const vt=g.messageHandler.sendWithPromise("GetDocRequest",bt,r?[r.buffer]:null);let yt;if(p)yt=new aT(p,{disableRange:At,disableStream:kt});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Ot;if(fn)if(Uu(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ot=XA}else Ot=wT;else Ot=Uu(i)?XA:fT;yt=new Ot({url:i,length:it,httpHeaders:a,withCredentials:c,rangeChunkSize:f,disableRange:At,disableStream:kt})}return vt.then(Ot=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Wt=new Wu(e,Ot,g.port),Ee=new FT(Wt,t,yt,Mt,ht);t._transport=Ee,Wt.send("Ready",null)})}).catch(t._capability.reject),t}function MT(u){if(u instanceof URL)return u.href;try{return new URL(u,window.location).href}catch{if(fn&&typeof u=="string")return u}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function LT(u){if(fn&&typeof Buffer<"u"&&u instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return mm(u);if(u instanceof ArrayBuffer||ArrayBuffer.isView(u)||typeof u=="object"&&!isNaN(u==null?void 0:u.length))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function YA(u){return typeof u=="object"&&Number.isInteger(u==null?void 0:u.num)&&u.num>=0&&Number.isInteger(u==null?void 0:u.gen)&&u.gen>=0}var tm;const em=class em{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${vn(em,tm)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,a}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};tm=new WeakMap,E(em,tm,0);let ay=em;class y_{constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class DT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ea,Xs,xi,Nl,vf;class NT{constructor(t,e,i,r=!1){E(this,xi);E(this,ea,null);E(this,Xs,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new NA:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new w_,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new zh({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:r=jr.ENABLE,transform:a=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:p=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:y=!1}){var F,D;(F=this._stats)==null||F.time("Overall");const w=this._transport.getRenderingIntent(i,r,g,y),{renderingIntent:A,cacheKey:b}=w;x(this,Xs,!1),S(this,xi,vf).call(this),d||(d=this._transport.getOptionalContentConfig(A));let C=this._intentStates.get(b);C||(C=Object.create(null),this._intentStates.set(b,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const k=!!(A&ei.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(w));const T=B=>{var N;C.renderTasks.delete(M),(this._maybeCleanupAfterRender||k)&&x(this,Xs,!0),S(this,xi,Nl).call(this,!k),B?(M.capability.reject(B),this._abortOperatorList({intentState:C,reason:B instanceof Error?B:new Error(B)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new ly({callback:T,params:{canvasContext:t,viewport:e,transform:a,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:f});(C.renderTasks||(C.renderTasks=new Set)).add(M);const z=M.task;return Promise.all([C.displayReadyCapability.promise,d]).then(([B,N])=>{var $;if(this.destroyed){T();return}if(($=this._stats)==null||$.time("Rendering"),!(N.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:B,optionalContentConfig:N}),M.operatorListChanged()}).catch(T),z}getOperatorList({intent:t="display",annotationMode:e=jr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var f;function a(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(p))}const c=this._transport.getRenderingIntent(t,e,i,r,!0);let d=this._intentStates.get(c.cacheKey);d||(d=Object.create(null),this._intentStates.set(c.cacheKey,d));let p;return d.opListReadCapability||(p=Object.create(null),p.operatorListChanged=a,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(p),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(c)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>hd.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function a(){c.read().then(function({value:p,done:f}){if(f){i(d);return}d.lang??(d.lang=p.lang),Object.assign(d.styles,p.styles),d.items.push(...p.items),a()},r)}const c=e.getReader(),d={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),x(this,Xs,!1),S(this,xi,vf).call(this),Promise.all(t)}cleanup(t=!1){x(this,Xs,!0);const e=S(this,xi,Nl).call(this,!1);return t&&e&&this._stats&&(this._stats=new NA),e}_startRenderPage(t,e){var r,a;const i=this._intentStates.get(e);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(a=i.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&S(this,xi,Nl).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:a,transfer:c}=i,p=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:r},c).getReader(),f=this._intentStates.get(e);f.streamReader=p;const g=()=>{p.read().then(({value:y,done:w})=>{if(w){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const w of f.renderTasks)w.operatorListChanged();S(this,xi,Nl).call(this,!0)}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Wy){let r=ST;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new va(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}ea=new WeakMap,Xs=new WeakMap,xi=new WeakSet,Nl=function(t=!1){if(S(this,xi,vf).call(this),!o(this,Xs)||this.destroyed)return!1;if(t)return x(this,ea,setTimeout(()=>{x(this,ea,null),S(this,xi,Nl).call(this,!1)},CT)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Xs,!1),!0},vf=function(){o(this,ea)&&(clearTimeout(o(this,ea)),x(this,ea,null))};var Ys,nm;class OT{constructor(){E(this,Ys,new Map);E(this,nm,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};o(this,nm).then(()=>{for(const[r]of o(this,Ys))r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:a}=i;if(a.aborted){Dt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);r=()=>a.removeEventListener("abort",c),a.addEventListener("abort",c)}o(this,Ys).set(e,r)}removeEventListener(t,e){const i=o(this,Ys).get(e);i==null||i(),o(this,Ys).delete(e)}terminate(){for(const[,t]of o(this,Ys))t==null||t();o(this,Ys).clear()}}Ys=new WeakMap,nm=new WeakMap;var im,Ao,bo,pc,yf,fc,wf;const ae=class ae{constructor({name:t=null,port:e=null,verbosity:i=vk()}={}){E(this,pc);var r;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((r=o(ae,bo))!=null&&r.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(o(ae,bo)||x(ae,bo,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Wu("main","worker",t),this._messageHandler.on("ready",function(){}),S(this,pc,yf).call(this)}_initialize(){if(o(ae,Ao)||o(ae,fc,wf)){this._setupFakeWorker();return}let{workerSrc:t}=ae;try{ae._isSameOrigin(window.location.href,t)||(t=ae._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Wu("main","worker",e),r=()=>{a.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;e.addEventListener("error",()=>{this._webWorker||r()},{signal:a.signal}),i.on("test",d=>{if(a.abort(),this.destroyed||!d){r();return}this._messageHandler=i,this._port=e,this._webWorker=e,S(this,pc,yf).call(this)}),i.on("ready",d=>{if(a.abort(),this.destroyed){r();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const d=new Uint8Array;i.send("test",d,[d.buffer])};c();return}catch{fm("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){o(ae,Ao)||(Dt("Setting up fake worker."),x(ae,Ao,!0)),ae._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new OT;this._port=e;const i=`fake${vn(ae,im)._++}`,r=new Wu(i+"_worker",i,e);t.setup(r,e),this._messageHandler=new Wu(i,i+"_worker",e),S(this,pc,yf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,i;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=o(ae,bo))==null||e.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=o(this,bo))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ae(t)}static get workerSrc(){if(cr.workerSrc)return cr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return zt(this,"_setupFakeWorkerGlobal",(async()=>o(this,fc,wf)?o(this,fc,wf):(await import(this.workerSrc)).WorkerMessageHandler)())}};im=new WeakMap,Ao=new WeakMap,bo=new WeakMap,pc=new WeakSet,yf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},fc=new WeakSet,wf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},E(ae,fc),E(ae,im,0),E(ae,Ao,!1),E(ae,bo),fn&&(x(ae,Ao,!0),cr.workerSrc||(cr.workerSrc="./pdf.worker.mjs")),ae._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(e,i);return i.origin===r.origin},ae._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Hl=ae;var Ks,ps,mc,gc,Qs,_o,Qu;class FT{constructor(t,e,i,r,a){E(this,_o);E(this,Ks,new Map);E(this,ps,new Map);E(this,mc,new Map);E(this,gc,new Map);E(this,Qs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new w_,this.fontLoader=new Ok({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return zt(this,"annotationStorage",new Ky)}getRenderingIntent(t,e=jr.ENABLE,i=null,r=!1,a=!1){let c=ei.DISPLAY,d=Yv;switch(t){case"any":c=ei.ANY;break;case"display":break;case"print":c=ei.PRINT;break;default:Dt(`getRenderingIntent - invalid intent: ${t}`)}const p=c&ei.PRINT&&i instanceof Kb?i:this.annotationStorage;switch(e){case jr.DISABLE:c+=ei.ANNOTATIONS_DISABLE;break;case jr.ENABLE:break;case jr.ENABLE_FORMS:c+=ei.ANNOTATIONS_FORMS;break;case jr.ENABLE_STORAGE:c+=ei.ANNOTATIONS_STORAGE,d=p.serializable;break;default:Dt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(c+=ei.IS_EDITING),a&&(c+=ei.OPLIST);const{ids:f,hash:g}=p.modifiedIds,y=[c,d.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:d,modifiedIds:f}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=o(this,Qs))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of o(this,ps).values())t.push(r._destroy());o(this,ps).clear(),o(this,mc).clear(),o(this,gc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,a;this.commonObjs.clear(),this.fontLoader.clear(),o(this,Ks).clear(),this.filterFactory.destroy(),dd.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new va("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{ke(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:c}){if(c){r.close();return}ke(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{var d;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:c}=this._fullReader;return(!r||!a)&&(this._lastProgress&&((d=e.onProgress)==null||d.call(e,this._lastProgress)),this._fullReader.onProgress=p=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:p.loaded,total:p.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:c}}),t.on("GetRangeReader",(i,r)=>{ke(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:c,done:d}){if(d){r.close();return}ke(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{a.cancel(c),r.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new DT(i,this))}),t.on("DocException",i=>{e._capability.reject(Ln(i))}),t.on("PasswordRequest",i=>{x(this,Qs,Promise.withResolvers());try{if(!e.onPassword)throw Ln(i);const r=a=>{a instanceof Error?o(this,Qs).reject(a):o(this,Qs).resolve({password:a})};e.onPassword(r,i.code)}catch(r){o(this,Qs).reject(r)}return o(this,Qs).promise}),t.on("DataLoaded",i=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;o(this,ps).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,a])=>{var c;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:d,fontExtraProperties:p,pdfBug:f}=this._params;if("error"in a){const A=a.error;Dt(`Error during font loading: ${A}`),this.commonObjs.resolve(i,A);break}const g=f&&((c=globalThis.FontInspector)!=null&&c.enabled)?(A,b)=>globalThis.FontInspector.fontAdded(A,b):null,y=new Fk(a,{disableFontFace:d,fontExtraProperties:p,inspectFont:g});this.fontLoader.bind(y).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!p&&y.data&&(y.data=null),this.commonObjs.resolve(i,y)});break;case"CopyLocalImage":const{imageRef:w}=a;ke(w,"The imageRef must be defined.");for(const A of o(this,ps).values())for(const[,b]of A.objs)if((b==null?void 0:b.ref)===w)return b.dataLen?(this.commonObjs.resolve(i,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,a,c])=>{var p;if(this.destroyed)return;const d=o(this,ps).get(r);if(!d.objs.has(i)){if(d._intentStates.size===0){(p=c==null?void 0:c.bitmap)==null||p.close();return}switch(a){case"Image":d.objs.resolve(i,c),(c==null?void 0:c.dataLen)>hk&&(d._maybeCleanupAfterRender=!0);break;case"Pattern":d.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",i=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Dt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=o(this,mc).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&o(this,gc).set(a.refStr,t);const c=new NT(e,a,this,this._params.pdfBug);return o(this,ps).set(e,c),c});return o(this,mc).set(e,r),r}getPageIndex(t){return YA(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return S(this,_o,Qu).call(this,"GetFieldObjects")}hasJSActions(){return S(this,_o,Qu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return S(this,_o,Qu).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return S(this,_o,Qu).call(this,"GetOptionalContentConfig").then(e=>new rT(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=o(this,Ks).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>{var a,c;return{info:r[0],metadata:r[1]?new iT(r[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return o(this,Ks).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of o(this,ps).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),o(this,Ks).clear(),this.filterFactory.destroy(!0),dd.cleanup()}}cachedPageNumber(t){if(!YA(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return o(this,gc).get(e)??null}}Ks=new WeakMap,ps=new WeakMap,mc=new WeakMap,gc=new WeakMap,Qs=new WeakMap,_o=new WeakSet,Qu=function(t,e=null){const i=o(this,Ks).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return o(this,Ks).set(t,r),r};const zu=Symbol("INITIAL_DATA");var Wn,nh,oy;class w_{constructor(){E(this,nh);E(this,Wn,Object.create(null))}get(t,e=null){if(e){const r=S(this,nh,oy).call(this,t);return r.promise.then(()=>e(r.data)),null}const i=o(this,Wn)[t];if(!i||i.data===zu)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=o(this,Wn)[t];return!!e&&e.data!==zu}delete(t){const e=o(this,Wn)[t];return!e||e.data===zu?!1:(delete o(this,Wn)[t],!0)}resolve(t,e=null){const i=S(this,nh,oy).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in o(this,Wn)){const{data:i}=o(this,Wn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}x(this,Wn,Object.create(null))}*[Symbol.iterator](){for(const t in o(this,Wn)){const{data:e}=o(this,Wn)[t];e!==zu&&(yield[t,e])}}}Wn=new WeakMap,nh=new WeakSet,oy=function(t){var e;return(e=o(this,Wn))[t]||(e[t]={...Promise.withResolvers(),data:zu})};var na;class jT{constructor(t){E(this,na,null);x(this,na,t),this.onContinue=null}get promise(){return o(this,na).capability.promise}cancel(t=0){o(this,na).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=o(this,na).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=o(this,na);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}na=new WeakMap;var ia,Eo;const Ga=class Ga{constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:c,pageIndex:d,canvasFactory:p,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:w=null}){E(this,ia,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=d,this.canvasFactory=p,this.filterFactory=f,this._pdfBug=y,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new jT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,p;if(this.cancelled)return;if(this._canvas){if(o(Ga,Eo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(Ga,Eo).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:a,background:c}=this.params;this.gfx=new Bl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:r,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),o(this,ia)&&(window.cancelAnimationFrame(o(this,ia)),x(this,ia,null)),o(Ga,Eo).delete(this._canvas),this.callback(t||new Wy(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,ia,window.requestAnimationFrame(()=>{x(this,ia,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(Ga,Eo).delete(this._canvas),this.callback())))}};ia=new WeakMap,Eo=new WeakMap,E(Ga,Eo,new WeakSet);let ly=Ga;const zT="4.10.38",BT="f9bea397f";function KA(u){return Math.floor(Math.max(0,Math.min(1,u))*255).toString(16).padStart(2,"0")}function Bu(u){return Math.max(0,Math.min(255,255*u))}class QA{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Bu(t),[t,t,t]}static G_HTML([t]){const e=KA(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Bu)}static RGB_HTML(t){return`#${t.map(KA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[Bu(1-Math.min(1,t+r)),Bu(1-Math.min(1,i+r)),Bu(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,a=1-e,c=1-i,d=Math.min(r,a,c);return["CMYK",r,a,c,d]}}class HT{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Zt("Abstract method `_createSVG` called.")}}class Jy extends HT{_createSVG(t){return document.createElementNS(Ls,t)}}class x_{static setupStorage(t,e,i,r,a){const c=r.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),a==="print")break;t.addEventListener("input",d=>{r.setValue(e,{value:d.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",d=>{r.setValue(e,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),a==="print")break;t.addEventListener("input",d=>{r.setValue(e,{value:d.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const d of i.children)d.attributes.value===c.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}t.addEventListener("input",d=>{const p=d.target.options,f=p.selectedIndex===-1?"":p[p.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:a}){const{attributes:c}=e,d=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[p,f]of Object.entries(c))if(f!=null)switch(p){case"class":f.length&&t.setAttribute(p,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!d||p!=="href"&&p!=="newWindow")&&t.setAttribute(p,f)}d&&a.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){var y,w;const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,a=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:a,linkService:i});const d=a!=="richText",p=t.div;if(p.append(c),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;p.style.transform=A}d&&p.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);c.append(A),d&&hd.shouldBuildText(r.name)&&f.push(A)}return{textDivs:f}}const g=[[r,-1,c]];for(;g.length>0;){const[A,b,C]=g.at(-1);if(b+1===A.children.length){g.pop();continue}const k=A.children[++g.at(-1)[1]];if(k===null)continue;const{name:T}=k;if(T==="#text"){const z=document.createTextNode(k.value);f.push(z),C.append(z);continue}const M=(y=k==null?void 0:k.attributes)!=null&&y.xmlns?document.createElementNS(k.attributes.xmlns,T):document.createElement(T);if(C.append(M),k.attributes&&this.setAttributes({html:M,element:k,storage:e,intent:a,linkService:i}),((w=k.children)==null?void 0:w.length)>0)g.push([k,-1,M]);else if(k.value){const z=document.createTextNode(k.value);d&&hd.shouldBuildText(T)&&f.push(z),M.append(z)}}for(const A of p.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Hh=1e3,UT=9,Zo=new WeakSet;function ga(u){return{width:u[2]-u[0],height:u[3]-u[1]}}class $T{static create(t){switch(t.data.annotationType){case Ie.LINK:return new A_(t);case Ie.TEXT:return new GT(t);case Ie.WIDGET:switch(t.data.fieldType){case"Tx":return new VT(t);case"Btn":return t.data.radioButton?new E_(t):t.data.checkBox?new qT(t):new XT(t);case"Ch":return new YT(t);case"Sig":return new WT(t)}return new nl(t);case Ie.POPUP:return new uy(t);case Ie.FREETEXT:return new R_(t);case Ie.LINE:return new QT(t);case Ie.SQUARE:return new JT(t);case Ie.CIRCLE:return new ZT(t);case Ie.POLYLINE:return new P_(t);case Ie.CARET:return new eR(t);case Ie.INK:return new Zy(t);case Ie.POLYGON:return new tR(t);case Ie.HIGHLIGHT:return new I_(t);case Ie.UNDERLINE:return new nR(t);case Ie.SQUIGGLY:return new iR(t);case Ie.STRIKEOUT:return new sR(t);case Ie.STAMP:return new M_(t);case Ie.FILEATTACHMENT:return new rR(t);default:return new _e(t)}}}var So,vc,yc,ih,cy;const i0=class i0{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){E(this,ih);E(this,So,null);E(this,vc,!1);E(this,yc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return i0._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;o(this,So)||x(this,So,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&S(this,ih,cy).call(this,e),(i=o(this,yc))==null||i.popup.updateEdited(t)}resetEdited(){var t;o(this,So)&&(S(this,ih,cy).call(this,o(this,So).rect),(t=o(this,yc))==null||t.popup.resetEdited(),x(this,So,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof nl||(a.tabIndex=Hh);const{style:c}=a;if(c.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof uy){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:d,height:p}=ga(e.rect);if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,k=e.borderStyle.verticalCornerRadius;if(C>0||k>0){const M=`calc(${C}px * var(--scale-factor)) / calc(${k}px * var(--scale-factor))`;c.borderRadius=M}else if(this instanceof E_){const M=`calc(${d}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`;c.borderRadius=M}switch(e.borderStyle.style){case Fu.SOLID:c.borderStyle="solid";break;case Fu.DASHED:c.borderStyle="dashed";break;case Fu.BEVELED:Dt("Unimplemented border style: beveled");break;case Fu.INSET:Dt("Unimplemented border style: inset");break;case Fu.UNDERLINE:c.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(x(this,vc,!0),c.borderColor=gt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):c.borderWidth=0}const f=gt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:y,pageX:w,pageY:A}=r.rawDims;c.left=`${100*(f[0]-w)/g}%`,c.top=`${100*(f[1]-A)/y}%`;const{rotation:b}=e;return e.hasOwnCanvas||b===0?(c.width=`${100*d/g}%`,c.height=`${100*p/y}%`):this.setRotation(b,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:a,height:c}=ga(this.data.rect);let d,p;t%180===0?(d=100*a/i,p=100*c/r):(d=100*c/i,p=100*a/r),e.style.width=`${d}%`,e.style.height=`${p}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const a=r.detail[e],c=a[0],d=a.slice(1);r.target.style[i]=QA[`${c}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[i]:QA[`${c}_rgb`](d)})};return zt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail)){const a=t[r]||i[r];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,a]of Object.entries(e)){const c=i[r];if(c){const d={detail:{[r]:a},target:t};c(d),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,a]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,k,T,M]=t.subarray(2,6);if(r===C&&a===k&&e===T&&i===M)return}const{style:c}=this.container;let d;if(o(this,vc)){const{borderColor:C,borderWidth:k}=c;c.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const p=r-e,f=a-i,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const w=g.createElement("defs");y.append(w);const A=g.createElement("clipPath"),b=`clippath_${this.data.id}`;A.setAttribute("id",b),A.setAttribute("clipPathUnits","objectBoundingBox"),w.append(A);for(let C=2,k=t.length;C<k;C+=8){const T=t[C],M=t[C+1],z=t[C+2],F=t[C+3],D=g.createElement("rect"),B=(z-e)/p,N=(a-M)/f,$=(T-z)/p,G=(M-F)/f;D.setAttribute("x",B),D.setAttribute("y",N),D.setAttribute("width",$),D.setAttribute("height",G),A.append(D),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${N}" width="${$}" height="${G}"/>`)}o(this,vc)&&(d.push("</g></svg>')"),c.backgroundImage=d.join("")),this.container.append(y),this.container.style.clipPath=`url(#${b})`}_createPopup(){const{data:t}=this,e=x(this,yc,new uy({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:a,id:c,exportValues:d}of r){if(a===-1||c===e)continue;const p=typeof d=="string"?d:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!Zo.has(f)){Dt(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:p,domElement:f})}return i}for(const r of document.getElementsByName(t)){const{exportValue:a}=r,c=r.getAttribute("data-element-id");c!==e&&Zo.has(r)&&i.push({id:c,exportValue:a,domElement:r})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};So=new WeakMap,vc=new WeakMap,yc=new WeakMap,ih=new WeakSet,cy=function(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:c,pageX:d,pageY:p}}}}=this;i==null||i.splice(0,4,...t);const{width:f,height:g}=ga(t);e.left=`${100*(t[0]-d)/a}%`,e.top=`${100*(c-t[3]+p)/c}%`,r===0?(e.width=`${100*f/a}%`,e.height=`${100*g/c}%`):this.setRotation(r)};let _e=i0;var ni,za,b_,__;class A_ extends _e{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});E(this,ni);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let a=!1;return e.url?(i.addLinkAttributes(r,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(r,e.action),a=!0):e.attachment?(S(this,ni,b_).call(this,r,e.attachment,e.attachmentDest),a=!0):e.setOCGState?(S(this,ni,__).call(this,r,e.setOCGState),a=!0):e.dest?(this._bindLink(r,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),a=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(r,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(r),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&S(this,ni,za).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),S(this,ni,za).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const c=r.get(a);c&&(e[c]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1})}e.onclick||(e.onclick=()=>!1),S(this,ni,za).call(this)}_bindResetFormAction(e,i){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),S(this,ni,za).call(this),!this._fieldObjects){Dt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var y;r==null||r();const{fields:a,refs:c,include:d}=i,p=[];if(a.length!==0||c.length!==0){const w=new Set(c);for(const A of a){const b=this._fieldObjects[A]||[];for(const{id:C}of b)w.add(C)}for(const A of Object.values(this._fieldObjects))for(const b of A)w.has(b.id)===d&&p.push(b)}else for(const w of Object.values(this._fieldObjects))p.push(...w);const f=this.annotationStorage,g=[];for(const w of p){const{id:A}=w;switch(g.push(A),w.type){case"text":{const C=w.defaultValue||"";f.setValue(A,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;f.setValue(A,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";f.setValue(A,{value:C});break}default:continue}const b=document.querySelector(`[data-element-id="${A}"]`);if(b){if(!Zo.has(b)){Dt(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}ni=new WeakSet,za=function(){this.container.setAttribute("data-internal-link","")},b_=function(e,i,r=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(i.content,i.filename,r),!1},S(this,ni,za).call(this)},__=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),S(this,ni,za).call(this)};class GT extends _e{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class nl extends _e{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return _n.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,a){i.includes("mouse")?t.addEventListener(i,c=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{var d;if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}a&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(c)}}))})}_setEventListeners(t,e,i,r){var a,c,d;for(const[p,f]of i)(f==="Action"||(a=this.data.actions)!=null&&a[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,p,f,r),f==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":gt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||UT,a=t.style;let c;const d=2,p=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-d),g=Math.round(f/(mv*r))||1,y=f/g;c=Math.min(r,p(y/mv))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-d);c=Math.min(r,p(f/mv))}a.fontSize=`calc(${c}px * var(--scale-factor))`,a.color=gt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class VT extends nl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const a=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),a.setValue(c.id,{[r]:i})}render(){var r,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let d=c.value||"";const p=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;p&&d.length>p&&(d=d.slice(0,p));let f=c.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const g={userValue:d,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=f??d,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",f??d),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Zo.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Hh,this._setRequired(i,this.data.required),p&&(i.maxLength=p),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),g.formattedValue=null}),i.addEventListener("resetform",w=>{const A=this.data.defaultFieldValue??"";i.value=g.userValue=A,g.formattedValue=null});let y=w=>{const{formattedValue:A}=g;A!=null&&(w.target.value=A),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",A=>{var C;if(g.focused)return;const{target:b}=A;g.userValue&&(b.value=g.userValue),g.lastCommittedValue=b.value,g.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(g.focused=!0)}),i.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const b={value(C){g.userValue=C.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),C.target.value=g.userValue},formattedValue(C){const{formattedValue:k}=C.detail;g.formattedValue=k,k!=null&&C.target!==document.activeElement&&(C.target.value=k),t.setValue(e,{formattedValue:k})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var z;const{charLimit:k}=C.detail,{target:T}=C;if(k===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",k);let M=g.userValue;!M||M.length<=k||(M=M.slice(0,k),T.value=g.userValue=M,t.setValue(e,{value:M}),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(b,A)}),i.addEventListener("keydown",A=>{var k;g.commitKey=1;let b=-1;if(A.key==="Escape"?b=0:A.key==="Enter"&&!this.data.multiLine?b=2:A.key==="Tab"&&(g.commitKey=3),b===-1)return;const{value:C}=A.target;g.lastCommittedValue!==C&&(g.lastCommittedValue=C,g.userValue=C,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:b,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const w=y;y=null,i.addEventListener("blur",A=>{var C,k;if(!g.focused||!A.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(g.focused=!1);const{value:b}=A.target;g.userValue=b,g.lastCommittedValue!==b&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:g.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),w(A)}),(a=this.data.actions)!=null&&a.Keystroke&&i.addEventListener("beforeinput",A=>{var D;g.lastCommittedValue=null;const{data:b,target:C}=A,{value:k,selectionStart:T,selectionEnd:M}=C;let z=T,F=M;switch(A.inputType){case"deleteWordBackward":{const B=k.substring(0,T).match(/\w*[^\w]*$/);B&&(z-=B[0].length);break}case"deleteWordForward":{const B=k.substring(T).match(/^[^\w]*\w*/);B&&(F+=B[0].length);break}case"deleteContentBackward":T===M&&(z-=1);break;case"deleteContentForward":T===M&&(F+=1);break}A.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:b||"",willCommit:!1,selStart:z,selEnd:F}})}),this._setEventListeners(i,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/p;i.classList.add("comb"),i.style.letterSpacing=`calc(${A}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class WT extends nl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class qT extends nl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Zo.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=Hh,a.addEventListener("change",c=>{const{name:d,checked:p}=c.target;for(const f of this._getElementsByName(d,i)){const g=p&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(i,{value:p})}),a.addEventListener("resetform",c=>{const d=e.defaultFieldValue||"Off";c.target.checked=d===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",c=>{const d={value(p){p.target.checked=p.detail.value!=="Off",t.setValue(i,{value:p.target.checked})}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class E_ extends nl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const a=document.createElement("input");if(Zo.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=Hh,a.addEventListener("change",c=>{const{name:d,checked:p}=c.target;for(const f of this._getElementsByName(d,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:p})}),a.addEventListener("resetform",c=>{const d=e.defaultFieldValue;c.target.checked=d!=null&&d===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;a.addEventListener("updatefromsandbox",d=>{const p={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const w=g&&y.id===i;y.domElement&&(y.domElement.checked=w),t.setValue(y.id,{value:w})}}};this._dispatchEventFromSandbox(p,d)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class XT extends A_{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class YT extends nl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Zo.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Hh;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,i.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),a=!1),r.append(y)}let c=null;if(a){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),c=()=>{g.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const d=g=>{const y=g?"value":"textContent",{options:w,multiple:A}=r;return A?Array.prototype.filter.call(w,b=>b.selected).map(b=>b[y]):w.selectedIndex===-1?null:w[w.selectedIndex][y]};let p=d(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(w){c==null||c();const A=w.detail.value,b=new Set(Array.isArray(A)?A:[A]);for(const C of r.options)C.selected=b.has(C.value);t.setValue(e,{value:d(!0)}),p=d(!1)},multipleSelection(w){r.multiple=!0},remove(w){const A=r.options,b=w.detail.remove;A[b].selected=!1,r.remove(b),A.length>0&&Array.prototype.findIndex.call(A,k=>k.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:d(!0),items:f(w)}),p=d(!1)},clear(w){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),p=d(!1)},insert(w){const{index:A,displayValue:b,exportValue:C}=w.detail.insert,k=r.children[A],T=document.createElement("option");T.textContent=b,T.value=C,k?k.before(T):r.append(T),t.setValue(e,{value:d(!0),items:f(w)}),p=d(!1)},items(w){const{items:A}=w.detail;for(;r.length!==0;)r.remove(0);for(const b of A){const{displayValue:C,exportValue:k}=b,T=document.createElement("option");T.textContent=C,T.value=k,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:d(!0),items:f(w)}),p=d(!1)},indices(w){const A=new Set(w.detail.indices);for(const b of w.target.options)b.selected=A.has(b.index);t.setValue(e,{value:d(!0)}),p=d(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{var A;const y=d(!0),w=d(!1);t.setValue(e,{value:y}),g.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,change:w,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(e,{value:d(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class uy extends _e{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:_e._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new KT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${Vy}${i}`).join(",")),this.container}}var wc,sm,rm,xc,Co,ye,Js,Ac,sh,rh,bc,Zs,Oi,tr,ah,er,oh,ko,To,Qt,xf,dy,S_,C_,k_,T_,Af,bf,hy;class KT{constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:a,contentsObj:c,richText:d,parent:p,rect:f,parentRect:g,open:y}){E(this,Qt);E(this,wc,S(this,Qt,k_).bind(this));E(this,sm,S(this,Qt,hy).bind(this));E(this,rm,S(this,Qt,bf).bind(this));E(this,xc,S(this,Qt,Af).bind(this));E(this,Co,null);E(this,ye,null);E(this,Js,null);E(this,Ac,null);E(this,sh,null);E(this,rh,null);E(this,bc,null);E(this,Zs,!1);E(this,Oi,null);E(this,tr,null);E(this,ah,null);E(this,er,null);E(this,oh,null);E(this,ko,null);E(this,To,!1);var w;x(this,ye,t),x(this,oh,r),x(this,Js,c),x(this,er,d),x(this,rh,p),x(this,Co,e),x(this,ah,f),x(this,bc,g),x(this,sh,i),x(this,Ac,Xy.toDateObject(a)),this.trigger=i.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",o(this,xc)),A.addEventListener("mouseenter",o(this,rm)),A.addEventListener("mouseleave",o(this,sm)),A.classList.add("popupTriggerArea");for(const A of i)(w=A.container)==null||w.addEventListener("keydown",o(this,wc));o(this,ye).hidden=!0,y&&S(this,Qt,Af).call(this)}render(){if(o(this,Oi))return;const t=x(this,Oi,document.createElement("div"));if(t.className="popup",o(this,Co)){const a=t.style.outlineColor=gt.makeHexColor(...o(this,Co));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:t.style.backgroundColor=gt.makeHexColor(...o(this,Co).map(d=>Math.floor(.7*(255-d)+d)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=o(this,oh),t.append(e),o(this,Ac)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,Ac).valueOf()})),e.append(a)}const r=o(this,Qt,xf);if(r)x_.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(o(this,Js));t.append(a)}o(this,ye).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let a=0,c=r.length;a<c;++a){const d=r[a];i.append(document.createTextNode(d)),a<c-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;o(this,ko)||x(this,ko,{contentsObj:o(this,Js),richText:o(this,er)}),t&&x(this,tr,null),e&&(x(this,er,S(this,Qt,C_).call(this,e)),x(this,Js,null)),(i=o(this,Oi))==null||i.remove(),x(this,Oi,null)}resetEdited(){var t;o(this,ko)&&({contentsObj:vn(this,Js)._,richText:vn(this,er)._}=o(this,ko),x(this,ko,null),(t=o(this,Oi))==null||t.remove(),x(this,Oi,null),x(this,tr,null))}forceHide(){x(this,To,this.isVisible),o(this,To)&&(o(this,ye).hidden=!0)}maybeShow(){o(this,To)&&(o(this,Oi)||S(this,Qt,bf).call(this),x(this,To,!1),o(this,ye).hidden=!1)}get isVisible(){return o(this,ye).hidden===!1}}wc=new WeakMap,sm=new WeakMap,rm=new WeakMap,xc=new WeakMap,Co=new WeakMap,ye=new WeakMap,Js=new WeakMap,Ac=new WeakMap,sh=new WeakMap,rh=new WeakMap,bc=new WeakMap,Zs=new WeakMap,Oi=new WeakMap,tr=new WeakMap,ah=new WeakMap,er=new WeakMap,oh=new WeakMap,ko=new WeakMap,To=new WeakMap,Qt=new WeakSet,xf=function(){const t=o(this,er),e=o(this,Js);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&o(this,er).html||null},dy=function(){var t,e,i;return((i=(e=(t=o(this,Qt,xf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},S_=function(){var t,e,i;return((i=(e=(t=o(this,Qt,xf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},C_=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:o(this,Qt,S_),fontSize:o(this,Qt,dy)?`calc(${o(this,Qt,dy)}px * var(--scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:r});return i},k_=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&o(this,Zs))&&S(this,Qt,Af).call(this)},T_=function(){if(o(this,tr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:a}}}=o(this,rh);let c=!!o(this,bc),d=c?o(this,bc):o(this,ah);for(const b of o(this,sh))if(!d||gt.intersect(b.data.rect,d)!==null){d=b.data.rect,c=!0;break}const p=gt.normalizeRect([d[0],t[3]-d[1]+t[1],d[2],t[3]-d[3]+t[1]]),g=c?d[2]-d[0]+5:0,y=p[0]+g,w=p[1];x(this,tr,[100*(y-r)/e,100*(w-a)/i]);const{style:A}=o(this,ye);A.left=`${o(this,tr)[0]}%`,A.top=`${o(this,tr)[1]}%`},Af=function(){x(this,Zs,!o(this,Zs)),o(this,Zs)?(S(this,Qt,bf).call(this),o(this,ye).addEventListener("click",o(this,xc)),o(this,ye).addEventListener("keydown",o(this,wc))):(S(this,Qt,hy).call(this),o(this,ye).removeEventListener("click",o(this,xc)),o(this,ye).removeEventListener("keydown",o(this,wc)))},bf=function(){o(this,Oi)||this.render(),this.isVisible?o(this,Zs)&&o(this,ye).classList.add("focused"):(S(this,Qt,T_).call(this),o(this,ye).hidden=!1,o(this,ye).style.zIndex=parseInt(o(this,ye).style.zIndex)+1e3)},hy=function(){o(this,ye).classList.remove("focused"),!(o(this,Zs)||!this.isVisible)&&(o(this,ye).hidden=!0,o(this,ye).style.zIndex=parseInt(o(this,ye).style.zIndex)-1e3)};class R_ extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Lt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var lh;class QT extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,lh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:r}=ga(e.rect),a=this.svgFactory.create(i,r,!0),c=x(this,lh,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}lh=new WeakMap;var ch;class JT extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,ch,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:r}=ga(e.rect),a=this.svgFactory.create(i,r,!0),c=e.borderStyle.width,d=x(this,ch,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",c/2),d.setAttribute("y",c/2),d.setAttribute("width",i-c),d.setAttribute("height",r-c),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),a.append(d),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}ch=new WeakMap;var uh;class ZT extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,uh,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:r}=ga(e.rect),a=this.svgFactory.create(i,r,!0),c=e.borderStyle.width,d=x(this,uh,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",i/2),d.setAttribute("cy",r/2),d.setAttribute("rx",i/2-c/2),d.setAttribute("ry",r/2-c/2),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),a.append(d),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap;var dh;class P_ extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,dh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:r,popupRef:a}}=this;if(!i)return this.container;const{width:c,height:d}=ga(e),p=this.svgFactory.create(c,d,!0);let f=[];for(let y=0,w=i.length;y<w;y+=2){const A=i[y]-e[0],b=e[3]-i[y+1];f.push(`${A},${b}`)}f=f.join(" ");const g=x(this,dh,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",f),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),p.append(g),this.container.append(p),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,dh)}addHighlightArea(){this.container.classList.add("highlightArea")}}dh=new WeakMap;class tR extends P_{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class eR extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var hh,Ro,ph,py;class Zy extends _e{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,ph);E(this,hh,null);E(this,Ro,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Lt.HIGHLIGHT:Lt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:r,borderStyle:a,popupRef:c}}=this,{transform:d,width:p,height:f}=S(this,ph,py).call(this,i,e),g=this.svgFactory.create(p,f,!0),y=x(this,hh,this.svgFactory.createElement("svg:g"));g.append(y),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",d);for(let w=0,A=r.length;w<A;w++){const b=this.svgFactory.createElement(this.svgElementName);o(this,Ro).push(b),b.setAttribute("points",r[w].join(",")),y.append(b)}return!c&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:r,rect:a}=e,c=o(this,hh);if(i>=0&&c.setAttribute("stroke-width",i||1),r)for(let d=0,p=o(this,Ro).length;d<p;d++)o(this,Ro)[d].setAttribute("points",r[d].join(","));if(a){const{transform:d,width:p,height:f}=S(this,ph,py).call(this,this.data.rotation,a);c.parentElement.setAttribute("viewBox",`0 0 ${p} ${f}`),c.setAttribute("transform",d)}}getElementsToTriggerPopup(){return o(this,Ro)}addHighlightArea(){this.container.classList.add("highlightArea")}}hh=new WeakMap,Ro=new WeakMap,ph=new WeakSet,py=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class I_ extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Lt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class nR extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class iR extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class sR extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class M_ extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Lt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var fh,mh,fy;class rR extends _e{constructor(e){var r;super(e,{isRenderable:!0});E(this,mh);E(this,fh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",S(this,mh,fy).bind(this)),x(this,fh,r);const{isMac:a}=_n.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(a?c.metaKey:c.ctrlKey)&&S(this,mh,fy).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return o(this,fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}fh=new WeakMap,mh=new WeakSet,fy=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var gh,Po,Io,vh,tl,L_,my;class aR{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:c,structTreeLayer:d}){E(this,tl);E(this,gh,null);E(this,Po,null);E(this,Io,new Map);E(this,vh,null);this.div=t,x(this,gh,e),x(this,Po,i),x(this,vh,d||null),this.page=a,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return o(this,Io).size>0}async render(t){var c;const{annotations:e}=t,i=this.div;Qo(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Jy,annotationStorage:t.annotationStorage||new Ky,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const p=d.annotationType===Ie.POPUP;if(p){const y=r.get(d.id);if(!y)continue;a.elements=y}else{const{width:y,height:w}=ga(d.rect);if(y<=0||w<=0)continue}a.data=d;const f=$T.create(a);if(!f.isRenderable)continue;if(!p&&d.popupRef){const y=r.get(d.popupRef);y?y.push(f):r.set(d.popupRef,[f])}const g=f.render();d.hidden&&(g.style.visibility="hidden"),await S(this,tl,L_).call(this,g,d.id),f._isEditable&&(o(this,Io).set(f.data.id,f),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(f))}S(this,tl,my).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Qo(e,{rotation:t.rotation}),S(this,tl,my).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(o(this,Io).values())}getEditableAnnotation(t){return o(this,Io).get(t)}}gh=new WeakMap,Po=new WeakMap,Io=new WeakMap,vh=new WeakMap,tl=new WeakSet,L_=async function(t,e){var c,d;const i=t.firstChild||t,r=i.id=`${Vy}${e}`,a=await((c=o(this,vh))==null?void 0:c.getAriaAttributes(r));if(a)for(const[p,f]of a)i.setAttribute(p,f);this.div.append(t),(d=o(this,gh))==null||d.moveElementInDOM(this.div,t,i,!1)},my=function(){if(!o(this,Po))return;const t=this.div;for(const[e,i]of o(this,Po)){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i)}o(this,Po).clear()};const nf=/\r\n?|\n/g;var Fi,qn,yh,Mo,Xn,Te,D_,N_,O_,_f,dr,Ef,Sf,F_,vy,j_;const ee=class ee extends me{constructor(e){super({...e,name:"freeTextEditor"});E(this,Te);E(this,Fi);E(this,qn,"");E(this,yh,`${this.id}-editor`);E(this,Mo,null);E(this,Xn);x(this,Fi,e.color||ee._defaultColor||me._defaultLineColor),x(this,Xn,e.fontSize||ee._defaultFontSize)}static get _keyboardManager(){const e=ee.prototype,i=c=>c.isEmpty(),r=Jo.TRANSLATE_SMALL,a=Jo.TRANSLATE_BIG;return zt(this,"_keyboardManager",new Bh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:i}]]))}static initialize(e,i){me.initialize(e,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case Bt.FREETEXT_SIZE:ee._defaultFontSize=i;break;case Bt.FREETEXT_COLOR:ee._defaultColor=i;break}}updateParams(e,i){switch(e){case Bt.FREETEXT_SIZE:S(this,Te,D_).call(this,i);break;case Bt.FREETEXT_COLOR:S(this,Te,N_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Bt.FREETEXT_SIZE,ee._defaultFontSize],[Bt.FREETEXT_COLOR,ee._defaultColor||me._defaultLineColor]]}get propertiesToUpdate(){return[[Bt.FREETEXT_SIZE,o(this,Xn)],[Bt.FREETEXT_COLOR,o(this,Fi)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-ee._internalPadding*e,-(ee._internalPadding+o(this,Xn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Lt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,Mo,new AbortController);const e=this._uiManager.combinedSignal(o(this,Mo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,yh)),this._isDraggable=!0,(e=o(this,Mo))==null||e.abort(),x(this,Mo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=o(this,qn),i=x(this,qn,S(this,Te,O_).call(this).trimEnd());if(e===i)return;const r=a=>{if(x(this,qn,a),!a){this.remove();return}S(this,Te,Sf).call(this),this._uiManager.rebuild(this),S(this,Te,_f).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(e)},mustExec:!1}),S(this,Te,_f).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ee._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,yh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${o(this,Xn)}px * var(--scale-factor))`,r.color=o(this,Fi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),zf(this,this.div,["dblclick","keydown"]),this.width){const[a,c]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[p,f]=this.getInitialTranslation();[p,f]=this.pageTranslationToScreen(p,f);const[g,y]=this.pageDimensions,[w,A]=this.pageTranslation;let b,C;switch(this.rotation){case 0:b=e+(d[0]-w)/g,C=i+this.height-(d[1]-A)/y;break;case 90:b=e+(d[0]-w)/g,C=i-(d[1]-A)/y,[p,f]=[f,-p];break;case 180:b=e-this.width+(d[0]-w)/g,C=i-(d[1]-A)/y,[p,f]=[-p,-f];break;case 270:b=e+(d[0]-w-this.height*y)/g,C=i+(d[1]-A-this.width*g)/y,[p,f]=[-f,p];break}this.setAt(b*a,C*c,p,f)}else this.setAt(e*a,i*c,this.width*a,this.height*c);S(this,Te,Sf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var b,C,k;const i=e.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const a=S(b=ee,dr,vy).call(b,i.getData("text")||"").replaceAll(nf,`
`);if(!a)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const d=c.getRangeAt(0);if(!a.includes(`
`)){d.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:p,startOffset:f}=d,g=[],y=[];if(p.nodeType===Node.TEXT_NODE){const T=p.parentElement;if(y.push(p.nodeValue.slice(f).replaceAll(nf,"")),T!==this.editorDiv){let M=g;for(const z of this.editorDiv.childNodes){if(z===T){M=y;continue}M.push(S(C=ee,dr,Ef).call(C,z))}}g.push(p.nodeValue.slice(0,f).replaceAll(nf,""))}else if(p===this.editorDiv){let T=g,M=0;for(const z of this.editorDiv.childNodes)M++===f&&(T=y),T.push(S(k=ee,dr,Ef).call(k,z))}x(this,qn,`${g.join(`
`)}${a}${y.join(`
`)}`),S(this,Te,Sf).call(this);const w=new Range;let A=g.reduce((T,M)=>T+M.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const M=T.nodeValue.length;if(A<=M){w.setStart(T,A),w.setEnd(T,A);break}A-=M}c.removeAllRanges(),c.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,r){var d;let a=null;if(e instanceof R_){const{data:{defaultAppearanceData:{fontSize:p,fontColor:f},rect:g,rotation:y,id:w,popupRef:A},textContent:b,textPosition:C,parent:{page:{pageNumber:k}}}=e;if(!b||b.length===0)return null;a=e={annotationType:Lt.FREETEXT,color:Array.from(f),fontSize:p,value:b.join(`
`),position:C,pageIndex:k-1,rect:g.slice(0),rotation:y,id:w,deleted:!1,popupRef:A}}const c=await super.deserialize(e,i,r);return x(c,Xn,e.fontSize),x(c,Fi,gt.makeHexColor(...e.color)),x(c,qn,S(d=ee,dr,vy).call(d,e.value)),c.annotationElementId=e.id||null,c._initialData=a,c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=ee._internalPadding*this.parentScale,r=this.getRect(i,i),a=me._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,Fi)),c={annotationType:Lt.FREETEXT,color:a,fontSize:o(this,Xn),value:S(this,Te,F_).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?c:this.annotationElementId&&!S(this,Te,j_).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${o(this,Xn)}px * var(--scale-factor))`,r.color=o(this,Fi),i.replaceChildren();for(const c of o(this,qn).split(`
`)){const d=document.createElement("div");d.append(c?document.createTextNode(c):document.createElement("br")),i.append(d)}const a=ee._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(a,a),popupContent:o(this,qn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Fi=new WeakMap,qn=new WeakMap,yh=new WeakMap,Mo=new WeakMap,Xn=new WeakMap,Te=new WeakSet,D_=function(e){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-o(this,Xn))*this.parentScale),x(this,Xn,a),S(this,Te,_f).call(this)},r=o(this,Xn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},N_=function(e){const i=a=>{x(this,Fi,this.editorDiv.style.color=a)},r=o(this,Fi);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},O_=function(){var r;const e=[];this.editorDiv.normalize();let i=null;for(const a of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(e.push(S(r=ee,dr,Ef).call(r,a)),i=a);return e.join(`
`)},_f=function(){const[e,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:a,div:c}=this,d=c.style.display,p=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",a.div.append(this.div),r=c.getBoundingClientRect(),c.remove(),c.style.display=d,c.classList.toggle("hidden",p)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/i):(this.width=r.height/e,this.height=r.width/i),this.fixAndSetPosition()},dr=new WeakSet,Ef=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(nf,"")},Sf=function(){if(this.editorDiv.replaceChildren(),!!o(this,qn))for(const e of o(this,qn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},F_=function(){return o(this,qn).replaceAll(""," ")},vy=function(e){return e.replaceAll(" ","")},j_=function(e){const{value:i,fontSize:r,color:a,pageIndex:c}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==r||e.color.some((d,p)=>d!==a[p])||e.pageIndex!==c},E(ee,dr),Et(ee,"_freeTextDefaultContent",""),Et(ee,"_internalPadding",0),Et(ee,"_defaultColor",null),Et(ee,"_defaultFontSize",10),Et(ee,"_type","freetext"),Et(ee,"_editorType",Lt.FREETEXT);let gy=ee;class lt{toSVGPath(){Zt("Abstract method `toSVGPath` must be implemented.")}get box(){Zt("Abstract getter `box` must be implemented.")}serialize(t,e){Zt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,a,c){c||(c=new Float32Array(t.length));for(let d=0,p=t.length;d<p;d+=2)c[d]=e+t[d]*r,c[d+1]=i+t[d+1]*a;return c}static _rescaleAndSwap(t,e,i,r,a,c){c||(c=new Float32Array(t.length));for(let d=0,p=t.length;d<p;d+=2)c[d]=e+t[d+1]*r,c[d+1]=i+t[d]*a;return c}static _translate(t,e,i,r){r||(r=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)r[a]=e+t[a],r[a+1]=i+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,a){switch(a){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,a,c){return[(t+5*i)/6,(e+5*r)/6,(5*i+a)/6,(5*r+c)/6,(i+a)/2,(r+c)/2]}}Et(lt,"PRECISION",1e-4);var Yn,ji,_c,Ec,fs,jt,Lo,Do,wh,xh,Sc,Cc,sa,Ah,am,om,Ne,Ju,z_,B_,H_,U_,$_,G_;const Fs=class Fs{constructor({x:t,y:e},i,r,a,c,d=0){E(this,Ne);E(this,Yn);E(this,ji,[]);E(this,_c);E(this,Ec);E(this,fs,[]);E(this,jt,new Float32Array(18));E(this,Lo);E(this,Do);E(this,wh);E(this,xh);E(this,Sc);E(this,Cc);E(this,sa,[]);x(this,Yn,i),x(this,Cc,a*r),x(this,Ec,c),o(this,jt).set([NaN,NaN,NaN,NaN,t,e],6),x(this,_c,d),x(this,xh,o(Fs,Ah)*r),x(this,wh,o(Fs,om)*r),x(this,Sc,r),o(this,sa).push(t,e)}isEmpty(){return isNaN(o(this,jt)[8])}add({x:t,y:e}){var G;x(this,Lo,t),x(this,Do,e);const[i,r,a,c]=o(this,Yn);let[d,p,f,g]=o(this,jt).subarray(8,12);const y=t-f,w=e-g,A=Math.hypot(y,w);if(A<o(this,wh))return!1;const b=A-o(this,xh),C=b/A,k=C*y,T=C*w;let M=d,z=p;d=f,p=g,f+=k,g+=T,(G=o(this,sa))==null||G.push(t,e);const F=-T/b,D=k/b,B=F*o(this,Cc),N=D*o(this,Cc);return o(this,jt).set(o(this,jt).subarray(2,8),0),o(this,jt).set([f+B,g+N],4),o(this,jt).set(o(this,jt).subarray(14,18),12),o(this,jt).set([f-B,g-N],16),isNaN(o(this,jt)[6])?(o(this,fs).length===0&&(o(this,jt).set([d+B,p+N],2),o(this,fs).push(NaN,NaN,NaN,NaN,(d+B-i)/a,(p+N-r)/c),o(this,jt).set([d-B,p-N],14),o(this,ji).push(NaN,NaN,NaN,NaN,(d-B-i)/a,(p-N-r)/c)),o(this,jt).set([M,z,d,p,f,g],6),!this.isEmpty()):(o(this,jt).set([M,z,d,p,f,g],6),Math.abs(Math.atan2(z-p,M-d)-Math.atan2(T,k))<Math.PI/2?([d,p,f,g]=o(this,jt).subarray(2,6),o(this,fs).push(NaN,NaN,NaN,NaN,((d+f)/2-i)/a,((p+g)/2-r)/c),[d,p,M,z]=o(this,jt).subarray(14,18),o(this,ji).push(NaN,NaN,NaN,NaN,((M+d)/2-i)/a,((z+p)/2-r)/c),!0):([M,z,d,p,f,g]=o(this,jt).subarray(0,6),o(this,fs).push(((M+5*d)/6-i)/a,((z+5*p)/6-r)/c,((5*d+f)/6-i)/a,((5*p+g)/6-r)/c,((d+f)/2-i)/a,((p+g)/2-r)/c),[f,g,d,p,M,z]=o(this,jt).subarray(12,18),o(this,ji).push(((M+5*d)/6-i)/a,((z+5*p)/6-r)/c,((5*d+f)/6-i)/a,((5*p+g)/6-r)/c,((d+f)/2-i)/a,((p+g)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=o(this,fs),e=o(this,ji);if(isNaN(o(this,jt)[6])&&!this.isEmpty())return S(this,Ne,z_).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);S(this,Ne,H_).call(this,i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return S(this,Ne,B_).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,r,a,c){return new V_(t,e,i,r,a,c)}getOutlines(){var y;const t=o(this,fs),e=o(this,ji),i=o(this,jt),[r,a,c,d]=o(this,Yn),p=new Float32Array((((y=o(this,sa))==null?void 0:y.length)??0)+2);for(let w=0,A=p.length-2;w<A;w+=2)p[w]=(o(this,sa)[w]-r)/c,p[w+1]=(o(this,sa)[w+1]-a)/d;if(p[p.length-2]=(o(this,Lo)-r)/c,p[p.length-1]=(o(this,Do)-a)/d,isNaN(i[6])&&!this.isEmpty())return S(this,Ne,U_).call(this,p);const f=new Float32Array(o(this,fs).length+24+o(this,ji).length);let g=t.length;for(let w=0;w<g;w+=2){if(isNaN(t[w])){f[w]=f[w+1]=NaN;continue}f[w]=t[w],f[w+1]=t[w+1]}g=S(this,Ne,G_).call(this,f,g);for(let w=e.length-6;w>=6;w-=6)for(let A=0;A<6;A+=2){if(isNaN(e[w+A])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=e[w+A],f[g+1]=e[w+A+1],g+=2}return S(this,Ne,$_).call(this,f,g),this.newFreeDrawOutline(f,p,o(this,Yn),o(this,Sc),o(this,_c),o(this,Ec))}};Yn=new WeakMap,ji=new WeakMap,_c=new WeakMap,Ec=new WeakMap,fs=new WeakMap,jt=new WeakMap,Lo=new WeakMap,Do=new WeakMap,wh=new WeakMap,xh=new WeakMap,Sc=new WeakMap,Cc=new WeakMap,sa=new WeakMap,Ah=new WeakMap,am=new WeakMap,om=new WeakMap,Ne=new WeakSet,Ju=function(){const t=o(this,jt).subarray(4,6),e=o(this,jt).subarray(16,18),[i,r,a,c]=o(this,Yn);return[(o(this,Lo)+(t[0]-e[0])/2-i)/a,(o(this,Do)+(t[1]-e[1])/2-r)/c,(o(this,Lo)+(e[0]-t[0])/2-i)/a,(o(this,Do)+(e[1]-t[1])/2-r)/c]},z_=function(){const[t,e,i,r]=o(this,Yn),[a,c,d,p]=S(this,Ne,Ju).call(this);return`M${(o(this,jt)[2]-t)/i} ${(o(this,jt)[3]-e)/r} L${(o(this,jt)[4]-t)/i} ${(o(this,jt)[5]-e)/r} L${a} ${c} L${d} ${p} L${(o(this,jt)[16]-t)/i} ${(o(this,jt)[17]-e)/r} L${(o(this,jt)[14]-t)/i} ${(o(this,jt)[15]-e)/r} Z`},B_=function(t){const e=o(this,ji);t.push(`L${e[4]} ${e[5]} Z`)},H_=function(t){const[e,i,r,a]=o(this,Yn),c=o(this,jt).subarray(4,6),d=o(this,jt).subarray(16,18),[p,f,g,y]=S(this,Ne,Ju).call(this);t.push(`L${(c[0]-e)/r} ${(c[1]-i)/a} L${p} ${f} L${g} ${y} L${(d[0]-e)/r} ${(d[1]-i)/a}`)},U_=function(t){const e=o(this,jt),[i,r,a,c]=o(this,Yn),[d,p,f,g]=S(this,Ne,Ju).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/a,(e[3]-r)/c,NaN,NaN,NaN,NaN,(e[4]-i)/a,(e[5]-r)/c,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(e[16]-i)/a,(e[17]-r)/c,NaN,NaN,NaN,NaN,(e[14]-i)/a,(e[15]-r)/c],0),this.newFreeDrawOutline(y,t,o(this,Yn),o(this,Sc),o(this,_c),o(this,Ec))},$_=function(t,e){const i=o(this,ji);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},G_=function(t,e){const i=o(this,jt).subarray(4,6),r=o(this,jt).subarray(16,18),[a,c,d,p]=o(this,Yn),[f,g,y,w]=S(this,Ne,Ju).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-a)/d,(i[1]-c)/p,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,w,NaN,NaN,NaN,NaN,(r[0]-a)/d,(r[1]-c)/p],e),e+=24},E(Fs,Ah,8),E(Fs,am,2),E(Fs,om,o(Fs,Ah)+o(Fs,am));let Uf=Fs;var kc,No,nr,bh,Kn,_h,be,lm,W_;class V_ extends lt{constructor(e,i,r,a,c,d){super();E(this,lm);E(this,kc);E(this,No,new Float32Array(4));E(this,nr);E(this,bh);E(this,Kn);E(this,_h);E(this,be);x(this,be,e),x(this,Kn,i),x(this,kc,r),x(this,_h,a),x(this,nr,c),x(this,bh,d),this.lastPoint=[NaN,NaN],S(this,lm,W_).call(this,d);const[p,f,g,y]=o(this,No);for(let w=0,A=e.length;w<A;w+=2)e[w]=(e[w]-p)/g,e[w+1]=(e[w+1]-f)/y;for(let w=0,A=i.length;w<A;w+=2)i[w]=(i[w]-p)/g,i[w+1]=(i[w+1]-f)/y}toSVGPath(){const e=[`M${o(this,be)[4]} ${o(this,be)[5]}`];for(let i=6,r=o(this,be).length;i<r;i+=6){if(isNaN(o(this,be)[i])){e.push(`L${o(this,be)[i+4]} ${o(this,be)[i+5]}`);continue}e.push(`C${o(this,be)[i]} ${o(this,be)[i+1]} ${o(this,be)[i+2]} ${o(this,be)[i+3]} ${o(this,be)[i+4]} ${o(this,be)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,r,a],c){const d=r-e,p=a-i;let f,g;switch(c){case 0:f=lt._rescale(o(this,be),e,a,d,-p),g=lt._rescale(o(this,Kn),e,a,d,-p);break;case 90:f=lt._rescaleAndSwap(o(this,be),e,i,d,p),g=lt._rescaleAndSwap(o(this,Kn),e,i,d,p);break;case 180:f=lt._rescale(o(this,be),r,i,-d,p),g=lt._rescale(o(this,Kn),r,i,-d,p);break;case 270:f=lt._rescaleAndSwap(o(this,be),r,a,-d,-p),g=lt._rescaleAndSwap(o(this,Kn),r,a,-d,-p);break}return{outline:Array.from(f),points:[Array.from(g)]}}get box(){return o(this,No)}newOutliner(e,i,r,a,c,d=0){return new Uf(e,i,r,a,c,d)}getNewOutline(e,i){const[r,a,c,d]=o(this,No),[p,f,g,y]=o(this,kc),w=c*g,A=d*y,b=r*g+p,C=a*y+f,k=this.newOutliner({x:o(this,Kn)[0]*w+b,y:o(this,Kn)[1]*A+C},o(this,kc),o(this,_h),e,o(this,bh),i??o(this,nr));for(let T=2;T<o(this,Kn).length;T+=2)k.add({x:o(this,Kn)[T]*w+b,y:o(this,Kn)[T+1]*A+C});return k.getOutlines()}}kc=new WeakMap,No=new WeakMap,nr=new WeakMap,bh=new WeakMap,Kn=new WeakMap,_h=new WeakMap,be=new WeakMap,lm=new WeakSet,W_=function(e){const i=o(this,be);let r=i[4],a=i[5],c=r,d=a,p=r,f=a,g=r,y=a;const w=e?Math.max:Math.min;for(let b=6,C=i.length;b<C;b+=6){if(isNaN(i[b]))c=Math.min(c,i[b+4]),d=Math.min(d,i[b+5]),p=Math.max(p,i[b+4]),f=Math.max(f,i[b+5]),y<i[b+5]?(g=i[b+4],y=i[b+5]):y===i[b+5]&&(g=w(g,i[b+4]));else{const k=gt.bezierBoundingBox(r,a,...i.slice(b,b+6));c=Math.min(c,k[0]),d=Math.min(d,k[1]),p=Math.max(p,k[2]),f=Math.max(f,k[3]),y<k[3]?(g=k[2],y=k[3]):y===k[3]&&(g=w(g,k[2]))}r=i[b+4],a=i[b+5]}const A=o(this,No);A[0]=c-o(this,nr),A[1]=d-o(this,nr),A[2]=p-c+2*o(this,nr),A[3]=f-d+2*o(this,nr),this.lastPoint=[g,y]};var Eh,Sh,ra,zi,Sn,q_,Cf,X_,Y_,wy;class yy{constructor(t,e=0,i=0,r=!0){E(this,Sn);E(this,Eh);E(this,Sh);E(this,ra,[]);E(this,zi,[]);let a=1/0,c=-1/0,d=1/0,p=-1/0;const f=10**-4;for(const{x:k,y:T,width:M,height:z}of t){const F=Math.floor((k-e)/f)*f,D=Math.ceil((k+M+e)/f)*f,B=Math.floor((T-e)/f)*f,N=Math.ceil((T+z+e)/f)*f,$=[F,B,N,!0],G=[D,B,N,!1];o(this,ra).push($,G),a=Math.min(a,F),c=Math.max(c,D),d=Math.min(d,B),p=Math.max(p,N)}const g=c-a+2*i,y=p-d+2*i,w=a-i,A=d-i,b=o(this,ra).at(r?-1:-2),C=[b[0],b[2]];for(const k of o(this,ra)){const[T,M,z]=k;k[0]=(T-w)/g,k[1]=(M-A)/y,k[2]=(z-A)/y}x(this,Eh,new Float32Array([w,A,g,y])),x(this,Sh,C)}getOutlines(){o(this,ra).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of o(this,ra))e[3]?(t.push(...S(this,Sn,wy).call(this,e)),S(this,Sn,X_).call(this,e)):(S(this,Sn,Y_).call(this,e),t.push(...S(this,Sn,wy).call(this,e)));return S(this,Sn,q_).call(this,t)}}Eh=new WeakMap,Sh=new WeakMap,ra=new WeakMap,zi=new WeakMap,Sn=new WeakSet,q_=function(t){const e=[],i=new Set;for(const c of t){const[d,p,f]=c;e.push([d,p,c],[d,f,c])}e.sort((c,d)=>c[1]-d[1]||c[0]-d[0]);for(let c=0,d=e.length;c<d;c+=2){const p=e[c][2],f=e[c+1][2];p.push(f),f.push(p),i.add(p),i.add(f)}const r=[];let a;for(;i.size>0;){const c=i.values().next().value;let[d,p,f,g,y]=c;i.delete(c);let w=d,A=p;for(a=[d,f],r.push(a);;){let b;if(i.has(g))b=g;else if(i.has(y))b=y;else break;i.delete(b),[d,p,f,g,y]=b,w!==d&&(a.push(w,A,d,A===p?p:f),w=d),A=A===p?f:p}a.push(w,A)}return new oR(r,o(this,Eh),o(this,Sh))},Cf=function(t){const e=o(this,zi);let i=0,r=e.length-1;for(;i<=r;){const a=i+r>>1,c=e[a][0];if(c===t)return a;c<t?i=a+1:r=a-1}return r+1},X_=function([,t,e]){const i=S(this,Sn,Cf).call(this,t);o(this,zi).splice(i,0,[t,e])},Y_=function([,t,e]){const i=S(this,Sn,Cf).call(this,t);for(let r=i;r<o(this,zi).length;r++){const[a,c]=o(this,zi)[r];if(a!==t)break;if(a===t&&c===e){o(this,zi).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[a,c]=o(this,zi)[r];if(a!==t)break;if(a===t&&c===e){o(this,zi).splice(r,1);return}}},wy=function(t){const[e,i,r]=t,a=[[e,i,r]],c=S(this,Sn,Cf).call(this,r);for(let d=0;d<c;d++){const[p,f]=o(this,zi)[d];for(let g=0,y=a.length;g<y;g++){const[,w,A]=a[g];if(!(f<=w||A<=p)){if(w>=p){if(A>f)a[g][1]=f;else{if(y===1)return[];a.splice(g,1),g--,y--}continue}a[g][2]=p,A>f&&a.push([e,f,A])}}}return a};var Ch,Tc;class oR extends lt{constructor(e,i,r){super();E(this,Ch);E(this,Tc);x(this,Tc,e),x(this,Ch,i),this.lastPoint=r}toSVGPath(){const e=[];for(const i of o(this,Tc)){let[r,a]=i;e.push(`M${r} ${a}`);for(let c=2;c<i.length;c+=2){const d=i[c],p=i[c+1];d===r?(e.push(`V${p}`),a=p):p===a&&(e.push(`H${d}`),r=d)}e.push("Z")}return e.join(" ")}serialize([e,i,r,a],c){const d=[],p=r-e,f=a-i;for(const g of o(this,Tc)){const y=new Array(g.length);for(let w=0;w<g.length;w+=2)y[w]=e+g[w]*p,y[w+1]=a-g[w+1]*f;d.push(y)}return d}get box(){return o(this,Ch)}get classNamesForOutlining(){return["highlightOutline"]}}Ch=new WeakMap,Tc=new WeakMap;class xy extends Uf{newFreeDrawOutline(t,e,i,r,a,c){return new lR(t,e,i,r,a,c)}}class lR extends V_{newOutliner(t,e,i,r,a,c=0){return new xy(t,e,i,r,a,c)}}var Bi,Oo,Rc,De,kh,Pc,Th,Rh,aa,Hi,Ic,Ph,Kt,Ay,by,_y,Ba,K_,Or;const Dn=class Dn{constructor({editor:t=null,uiManager:e=null}){E(this,Kt);E(this,Bi,null);E(this,Oo,null);E(this,Rc);E(this,De,null);E(this,kh,!1);E(this,Pc,!1);E(this,Th,null);E(this,Rh);E(this,aa,null);E(this,Hi,null);E(this,Ic);var i;t?(x(this,Pc,!1),x(this,Ic,Bt.HIGHLIGHT_COLOR),x(this,Th,t)):(x(this,Pc,!0),x(this,Ic,Bt.HIGHLIGHT_DEFAULT_COLOR)),x(this,Hi,(t==null?void 0:t._uiManager)||e),x(this,Rh,o(this,Hi)._eventBus),x(this,Rc,(t==null?void 0:t.color)||((i=o(this,Hi))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),o(Dn,Ph)||x(Dn,Ph,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return zt(this,"_keyboardManager",new Bh([[["Escape","mac+Escape"],Dn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Dn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Dn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Dn.prototype._moveToPrevious],[["Home","mac+Home"],Dn.prototype._moveToBeginning],[["End","mac+End"],Dn.prototype._moveToEnd]]))}renderButton(){const t=x(this,Bi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=o(this,Hi)._signal;t.addEventListener("click",S(this,Kt,Ba).bind(this),{signal:e}),t.addEventListener("keydown",S(this,Kt,_y).bind(this),{signal:e});const i=x(this,Oo,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=o(this,Rc),t.append(i),t}renderMainDropdown(){const t=x(this,De,S(this,Kt,Ay).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===o(this,Bi)){S(this,Kt,Ba).call(this,t);return}const e=t.target.getAttribute("data-color");e&&S(this,Kt,by).call(this,e,t)}_moveToNext(t){var e,i;if(!o(this,Kt,Or)){S(this,Kt,Ba).call(this,t);return}if(t.target===o(this,Bi)){(e=o(this,De).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=o(this,De))==null?void 0:e.firstChild)||t.target===o(this,Bi)){o(this,Kt,Or)&&this._hideDropdownFromKeyboard();return}o(this,Kt,Or)||S(this,Kt,Ba).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!o(this,Kt,Or)){S(this,Kt,Ba).call(this,t);return}(e=o(this,De).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!o(this,Kt,Or)){S(this,Kt,Ba).call(this,t);return}(e=o(this,De).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=o(this,De))==null||t.classList.add("hidden"),(e=o(this,aa))==null||e.abort(),x(this,aa,null)}_hideDropdownFromKeyboard(){var t;if(!o(this,Pc)){if(!o(this,Kt,Or)){(t=o(this,Th))==null||t.unselect();return}this.hideDropdown(),o(this,Bi).focus({preventScroll:!0,focusVisible:o(this,kh)})}}updateColor(t){if(o(this,Oo)&&(o(this,Oo).style.backgroundColor=t),!o(this,De))return;const e=o(this,Hi).highlightColors.values();for(const i of o(this,De).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=o(this,Bi))==null||t.remove(),x(this,Bi,null),x(this,Oo,null),(e=o(this,De))==null||e.remove(),x(this,De,null)}};Bi=new WeakMap,Oo=new WeakMap,Rc=new WeakMap,De=new WeakMap,kh=new WeakMap,Pc=new WeakMap,Th=new WeakMap,Rh=new WeakMap,aa=new WeakMap,Hi=new WeakMap,Ic=new WeakMap,Ph=new WeakMap,Kt=new WeakSet,Ay=function(){const t=document.createElement("div"),e=o(this,Hi)._signal;t.addEventListener("contextmenu",Vi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of o(this,Hi).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",o(Dn,Ph)[i]);const c=document.createElement("span");a.append(c),c.className="swatch",c.style.backgroundColor=r,a.setAttribute("aria-selected",r===o(this,Rc)),a.addEventListener("click",S(this,Kt,by).bind(this,r),{signal:e}),t.append(a)}return t.addEventListener("keydown",S(this,Kt,_y).bind(this),{signal:e}),t},by=function(t,e){e.stopPropagation(),o(this,Rh).dispatch("switchannotationeditorparams",{source:this,type:o(this,Ic),value:t})},_y=function(t){Dn._keyboardManager.exec(this,t)},Ba=function(t){if(o(this,Kt,Or)){this.hideDropdown();return}if(x(this,kh,t.detail===0),o(this,aa)||(x(this,aa,new AbortController),window.addEventListener("pointerdown",S(this,Kt,K_).bind(this),{signal:o(this,Hi).combinedSignal(o(this,aa))})),o(this,De)){o(this,De).classList.remove("hidden");return}const e=x(this,De,S(this,Kt,Ay).call(this));o(this,Bi).append(e)},K_=function(t){var e;(e=o(this,De))!=null&&e.contains(t.target)||this.hideDropdown()},Or=function(){return o(this,De)&&!o(this,De).classList.contains("hidden")},E(Dn,Ph,null);let $f=Dn;var Mc,Ih,ir,Fo,Lc,Fn,Mh,Lh,jo,gi,Qn,Ke,Dc,sr,un,Nc,vi,Dh,Pt,Ey,kf,Q_,J_,Z_,Sy,Ha,Ai,Ol,tE,Tf,Zu,eE,nE,iE,sE,rE;const Vt=class Vt extends me{constructor(e){super({...e,name:"highlightEditor"});E(this,Pt);E(this,Mc,null);E(this,Ih,0);E(this,ir);E(this,Fo,null);E(this,Lc,null);E(this,Fn,null);E(this,Mh,null);E(this,Lh,0);E(this,jo,null);E(this,gi,null);E(this,Qn,null);E(this,Ke,!1);E(this,Dc,null);E(this,sr);E(this,un,null);E(this,Nc,"");E(this,vi);E(this,Dh,"");this.color=e.color||Vt._defaultColor,x(this,vi,e.thickness||Vt._defaultThickness),x(this,sr,e.opacity||Vt._defaultOpacity),x(this,ir,e.boxes||null),x(this,Dh,e.methodOfCreation||""),x(this,Nc,e.text||""),this._isDraggable=!1,e.highlightId>-1?(x(this,Ke,!0),S(this,Pt,kf).call(this,e),S(this,Pt,Ha).call(this)):o(this,ir)&&(x(this,Mc,e.anchorNode),x(this,Ih,e.anchorOffset),x(this,Mh,e.focusNode),x(this,Lh,e.focusOffset),S(this,Pt,Ey).call(this),S(this,Pt,Ha).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Vt.prototype;return zt(this,"_keyboardManager",new Bh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,Ke)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,vi),methodOfCreation:o(this,Dh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var r;me.initialize(e,i),Vt._defaultColor||(Vt._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case Bt.HIGHLIGHT_DEFAULT_COLOR:Vt._defaultColor=i;break;case Bt.HIGHLIGHT_THICKNESS:Vt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return o(this,Dc)}updateParams(e,i){switch(e){case Bt.HIGHLIGHT_COLOR:S(this,Pt,Q_).call(this,i);break;case Bt.HIGHLIGHT_THICKNESS:S(this,Pt,J_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Bt.HIGHLIGHT_DEFAULT_COLOR,Vt._defaultColor],[Bt.HIGHLIGHT_THICKNESS,Vt._defaultThickness]]}get propertiesToUpdate(){return[[Bt.HIGHLIGHT_COLOR,this.color||Vt._defaultColor],[Bt.HIGHLIGHT_THICKNESS,o(this,vi)||Vt._defaultThickness],[Bt.HIGHLIGHT_FREE,o(this,Ke)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,Lc,new $f({editor:this})),e.addColorPicker(o(this,Lc))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,Pt,Zu).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,S(this,Pt,Zu).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){S(this,Pt,Sy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,Pt,Ha).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?S(this,Pt,Sy).call(this):e&&(S(this,Pt,Ha).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var a,c,d;const{drawLayer:i}=this.parent;let r;o(this,Ke)?(e=(e-this.rotation+360)%360,r=S(a=Vt,Ai,Ol).call(a,o(this,gi).box,e)):r=S(c=Vt,Ai,Ol).call(c,[this.x,this.y,this.width,this.height],e),i.updateProperties(o(this,Qn),{bbox:r,root:{"data-main-rotation":e}}),i.updateProperties(o(this,un),{bbox:S(d=Vt,Ai,Ol).call(d,o(this,Fn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();o(this,Nc)&&(e.setAttribute("aria-label",o(this,Nc)),e.setAttribute("role","mark")),o(this,Ke)?e.classList.add("free"):this.div.addEventListener("keydown",S(this,Pt,tE).bind(this),{signal:this._uiManager._signal});const i=x(this,jo,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=o(this,Fo);const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),zf(this,o(this,jo),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,un),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,un),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:S(this,Pt,Tf).call(this,!0);break;case 1:case 3:S(this,Pt,Tf).call(this,!1);break}}select(){var e;super.select(),o(this,un)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,un),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),o(this,un)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,un),{rootClass:{selected:!1}}),o(this,Ke)||S(this,Pt,Tf).call(this,!1))}get _mustFixPosition(){return!o(this,Ke)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(o(this,Qn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(o(this,un),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:r,x:a,y:c}){const{x:d,y:p,width:f,height:g}=r.getBoundingClientRect(),y=new AbortController,w=e.combinedSignal(y),A=b=>{y.abort(),S(this,Ai,sE).call(this,e,b)};window.addEventListener("blur",A,{signal:w}),window.addEventListener("pointerup",A,{signal:w}),window.addEventListener("pointerdown",ii,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Vi,{signal:w}),r.addEventListener("pointermove",S(this,Ai,iE).bind(this,e),{signal:w}),this._freeHighlight=new xy({x:a,y:c},[d,p,f,g],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,r){var C,k,T,M;let a=null;if(e instanceof I_){const{data:{quadPoints:z,rect:F,rotation:D,id:B,color:N,opacity:$,popupRef:G},parent:{page:{pageNumber:et}}}=e;a=e={annotationType:Lt.HIGHLIGHT,color:Array.from(N),opacity:$,quadPoints:z,boxes:null,pageIndex:et-1,rect:F.slice(0),rotation:D,id:B,deleted:!1,popupRef:G}}else if(e instanceof Zy){const{data:{inkLists:z,rect:F,rotation:D,id:B,color:N,borderStyle:{rawWidth:$},popupRef:G},parent:{page:{pageNumber:et}}}=e;a=e={annotationType:Lt.HIGHLIGHT,color:Array.from(N),thickness:$,inkLists:z,boxes:null,pageIndex:et-1,rect:F.slice(0),rotation:D,id:B,deleted:!1,popupRef:G}}const{color:c,quadPoints:d,inkLists:p,opacity:f}=e,g=await super.deserialize(e,i,r);g.color=gt.makeHexColor(...c),x(g,sr,f||1),p&&x(g,vi,e.thickness),g.annotationElementId=e.id||null,g._initialData=a;const[y,w]=g.pageDimensions,[A,b]=g.pageTranslation;if(d){const z=x(g,ir,[]);for(let F=0;F<d.length;F+=8)z.push({x:(d[F]-A)/y,y:1-(d[F+1]-b)/w,width:(d[F+2]-d[F])/y,height:(d[F+1]-d[F+5])/w});S(C=g,Pt,Ey).call(C),S(k=g,Pt,Ha).call(k),g.rotate(g.rotation)}else if(p){x(g,Ke,!0);const z=p[0],F={x:z[0]-A,y:w-(z[1]-b)},D=new xy(F,[0,0,y,w],1,o(g,vi)/2,!0,.001);for(let $=0,G=z.length;$<G;$+=2)F.x=z[$]-A,F.y=w-(z[$+1]-b),D.add(F);const{id:B,clipPathId:N}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:D.toSVGPath()}},!0,!0);S(T=g,Pt,kf).call(T,{highlightOutlines:D.getOutlines(),highlightId:B,clipPathId:N}),S(M=g,Pt,Ha).call(M)}return g}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=me._colorManager.convert(this.color),a={annotationType:Lt.HIGHLIGHT,color:r,opacity:o(this,sr),thickness:o(this,vi),quadPoints:S(this,Pt,eE).call(this),outlines:S(this,Pt,nE).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:S(this,Pt,Zu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!S(this,Pt,rE).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Mc=new WeakMap,Ih=new WeakMap,ir=new WeakMap,Fo=new WeakMap,Lc=new WeakMap,Fn=new WeakMap,Mh=new WeakMap,Lh=new WeakMap,jo=new WeakMap,gi=new WeakMap,Qn=new WeakMap,Ke=new WeakMap,Dc=new WeakMap,sr=new WeakMap,un=new WeakMap,Nc=new WeakMap,vi=new WeakMap,Dh=new WeakMap,Pt=new WeakSet,Ey=function(){const e=new yy(o(this,ir),.001);x(this,gi,e.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,gi).box;const i=new yy(o(this,ir),.0025,.001,this._uiManager.direction==="ltr");x(this,Fn,i.getOutlines());const{lastPoint:r}=o(this,Fn);x(this,Dc,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},kf=function({highlightOutlines:e,highlightId:i,clipPathId:r}){var y,w;if(x(this,gi,e),x(this,Fn,e.getNewOutline(o(this,vi)/2+1.5,.0025)),i>=0)x(this,Qn,i),x(this,Fo,r),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),x(this,un,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,Fn).box,path:{d:o(this,Fn).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,Qn),{bbox:S(y=Vt,Ai,Ol).call(y,o(this,gi).box,(A-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,un),{bbox:S(w=Vt,Ai,Ol).call(w,o(this,Fn).box,A),path:{d:o(this,Fn).toSVGPath()}})}const[c,d,p,f]=e.box;switch(this.rotation){case 0:this.x=c,this.y=d,this.width=p,this.height=f;break;case 90:{const[A,b]=this.parentDimensions;this.x=d,this.y=1-c,this.width=p*b/A,this.height=f*A/b;break}case 180:this.x=1-c,this.y=1-d,this.width=p,this.height=f;break;case 270:{const[A,b]=this.parentDimensions;this.x=1-d,this.y=c,this.width=p*b/A,this.height=f*A/b;break}}const{lastPoint:g}=o(this,Fn);x(this,Dc,[(g[0]-c)/p,(g[1]-d)/f])},Q_=function(e){const i=(c,d)=>{var p,f;this.color=c,x(this,sr,d),(p=this.parent)==null||p.drawLayer.updateProperties(o(this,Qn),{root:{fill:c,"fill-opacity":d}}),(f=o(this,Lc))==null||f.updateColor(c)},r=this.color,a=o(this,sr);this.addCommands({cmd:i.bind(this,e,Vt._defaultOpacity),undo:i.bind(this,r,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},J_=function(e){const i=o(this,vi),r=a=>{x(this,vi,a),S(this,Pt,Z_).call(this,a)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Bt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Z_=function(e){if(!o(this,Ke))return;S(this,Pt,kf).call(this,{highlightOutlines:o(this,gi).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},Sy=function(){o(this,Qn)===null||!this.parent||(this.parent.drawLayer.remove(o(this,Qn)),x(this,Qn,null),this.parent.drawLayer.remove(o(this,un)),x(this,un,null))},Ha=function(e=this.parent){o(this,Qn)===null&&({id:vn(this,Qn)._,clipPathId:vn(this,Fo)._}=e.drawLayer.draw({bbox:o(this,gi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":o(this,sr)},rootClass:{highlight:!0,free:o(this,Ke)},path:{d:o(this,gi).toSVGPath()}},!1,!0),x(this,un,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,Ke)},bbox:o(this,Fn).box,path:{d:o(this,Fn).toSVGPath()}},o(this,Ke))),o(this,jo)&&(o(this,jo).style.clipPath=o(this,Fo)))},Ai=new WeakSet,Ol=function([e,i,r,a],c){switch(c){case 90:return[1-i-a,e,a,r];case 180:return[1-e-r,1-i-a,r,a];case 270:return[i,1-e-r,a,r]}return[e,i,r,a]},tE=function(e){Vt._keyboardManager.exec(this,e)},Tf=function(e){if(!o(this,Mc))return;const i=window.getSelection();e?i.setPosition(o(this,Mc),o(this,Ih)):i.setPosition(o(this,Mh),o(this,Lh))},Zu=function(){return o(this,Ke)?this.rotation:0},eE=function(){if(o(this,Ke))return null;const[e,i]=this.pageDimensions,[r,a]=this.pageTranslation,c=o(this,ir),d=new Float32Array(c.length*8);let p=0;for(const{x:f,y:g,width:y,height:w}of c){const A=f*e+r,b=(1-g)*i+a;d[p]=d[p+4]=A,d[p+1]=d[p+3]=b,d[p+2]=d[p+6]=A+y*e,d[p+5]=d[p+7]=b-w*i,p+=8}return d},nE=function(e){return o(this,gi).serialize(e,S(this,Pt,Zu).call(this))},iE=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},sE=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},rE=function(e){const{color:i}=this._initialData;return e.color.some((r,a)=>r!==i[a])},E(Vt,Ai),Et(Vt,"_defaultColor",null),Et(Vt,"_defaultOpacity",1),Et(Vt,"_defaultThickness",12),Et(Vt,"_type","highlight"),Et(Vt,"_editorType",Lt.HIGHLIGHT),Et(Vt,"_freeHighlightId",-1),Et(Vt,"_freeHighlight",null),Et(Vt,"_freeHighlightClipId","");let Gf=Vt;var zo;class cR{constructor(){E(this,zo,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))this.updateProperty(e,i)}updateSVGProperty(t,e){o(this,zo)[t]=e}toSVGProperties(){const t=o(this,zo);return x(this,zo,Object.create(null)),{root:t}}reset(){x(this,zo,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Zt("Not implemented")}}zo=new WeakMap;var Jn,Oc,$e,Bo,Ho,oa,la,ca,Uo,Ut,ky,Ty,Ry,td,aE,Rf,ed,Fl;const ct=class ct extends me{constructor(e){super(e);E(this,Ut);E(this,Jn,null);E(this,Oc);Et(this,"_drawId",null);x(this,Oc,e.mustBeCommitted||!1),e.drawOutlines&&(S(this,Ut,ky).call(this,e),S(this,Ut,td).call(this))}static _mergeSVGProperties(e,i){const r=new Set(Object.keys(e));for(const[a,c]of Object.entries(i))r.has(a)?Object.assign(e[a],c):e[a]=c;return e}static getDefaultDrawingOptions(e){Zt("Not implemented")}static get typesMap(){Zt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(o(ct,$e).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[r,a]of this.typesMap)e.push([r,i[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[r,a]of this.constructor.typesMap)e.push([r,i[a]]);return e}_updateProperty(e,i,r){const a=this._drawingOptions,c=a[i],d=p=>{var g;a.updateProperty(i,p);const f=o(this,Jn).updateProperty(i,p);f&&S(this,Ut,ed).call(this,f),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:d.bind(this,r),undo:d.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(o(this,Jn).getPathResizingSVGProperties(S(this,Ut,Rf).call(this)),{bbox:S(this,Ut,Fl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(o(this,Jn).getPathResizedSVGProperties(S(this,Ut,Rf).call(this)),{bbox:S(this,Ut,Fl).call(this)}))}_onTranslating(e,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:S(this,Ut,Fl).call(this,e,i)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(o(this,Jn).getPathTranslatedSVGProperties(S(this,Ut,Rf).call(this),this.parentDimensions),{bbox:S(this,Ut,Fl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,Oc)&&(x(this,Oc,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){S(this,Ut,Ry).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,Ut,td).call(this),S(this,Ut,ed).call(this,o(this,Jn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),S(this,Ut,Ry).call(this)):e&&(this._uiManager.addShouldRescale(this),S(this,Ut,td).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties({bbox:S(this,Ut,Fl).call(this)},o(this,Jn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,Ut,ed).call(this,o(this,Jn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const i=document.createElement("div");e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,i,r,a,c){Zt("Not implemented")}static startDrawing(e,i,r,a){var k;const{target:c,offsetX:d,offsetY:p,pointerId:f,pointerType:g}=a;if(o(ct,la)&&o(ct,la)!==g)return;const{viewport:{rotation:y}}=e,{width:w,height:A}=c.getBoundingClientRect(),b=x(ct,Bo,new AbortController),C=e.combinedSignal(b);if(o(ct,oa)||x(ct,oa,f),o(ct,la)??x(ct,la,g),window.addEventListener("pointerup",T=>{var M;o(ct,oa)===T.pointerId?this._endDraw(T):(M=o(ct,ca))==null||M.delete(T.pointerId)},{signal:C}),window.addEventListener("pointercancel",T=>{var M;o(ct,oa)===T.pointerId?this._currentParent.endDrawingSession():(M=o(ct,ca))==null||M.delete(T.pointerId)},{signal:C}),window.addEventListener("pointerdown",T=>{o(ct,la)===T.pointerType&&((o(ct,ca)||x(ct,ca,new Set)).add(T.pointerId),o(ct,$e).isCancellable()&&(o(ct,$e).removeLastElement(),o(ct,$e).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Vi,{signal:C}),c.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),c.addEventListener("touchmove",T=>{T.timeStamp===o(ct,Uo)&&ii(T)},{signal:C}),e.toggleDrawing(),(k=i._editorUndoBar)==null||k.hide(),o(ct,$e)){e.drawLayer.updateProperties(this._currentDrawId,o(ct,$e).startNew(d,p,w,A,y));return}i.updateUIForDefaultProperties(this),x(ct,$e,this.createDrawerInstance(d,p,w,A,y)),x(ct,Ho,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(o(ct,Ho).toSVGProperties(),o(ct,$e).defaultSVGProperties),!0,!1)}static _drawMove(e){var c;if(x(ct,Uo,-1),!o(ct,$e))return;const{offsetX:i,offsetY:r,pointerId:a}=e;if(o(ct,oa)===a){if(((c=o(ct,ca))==null?void 0:c.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(ct,$e).add(i,r)),x(ct,Uo,e.timeStamp),ii(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,x(ct,$e,null),x(ct,Ho,null),x(ct,la,null),x(ct,Uo,NaN)),o(ct,Bo)&&(o(ct,Bo).abort(),x(ct,Bo,null),x(ct,oa,NaN),x(ct,ca,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),e&&i.drawLayer.updateProperties(this._currentDrawId,o(ct,$e).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=o(ct,$e),a=this._currentDrawId,c=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(a,r.setLastElement(c))},undo:()=>{i.drawLayer.updateProperties(a,r.removeLastElement())},mustExec:!1,type:Bt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Bt.DRAW_STEP),!o(ct,$e).isEmpty()){const{pageDimensions:[r,a],scale:c}=i,d=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(ct,$e).getOutlines(r*c,a*c,c,this._INNER_MARGIN),drawingOptions:o(ct,Ho),mustBeCommitted:!e});return this._cleanup(!0),d}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,r,a,c,d){Zt("Not implemented")}static async deserialize(e,i,r){var y,w;const{rawDims:{pageWidth:a,pageHeight:c,pageX:d,pageY:p}}=i.viewport,f=this.deserializeDraw(d,p,a,c,this._INNER_MARGIN,e),g=await super.deserialize(e,i,r);return g.createDrawingOptions(e),S(y=g,Ut,ky).call(y,{drawOutlines:f}),S(w=g,Ut,td).call(w),g.onScaleChanging(),g.rotate(),g}serializeDraw(e){const[i,r]=this.pageTranslation,[a,c]=this.pageDimensions;return o(this,Jn).serialize([i,r,a,c],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Jn=new WeakMap,Oc=new WeakMap,$e=new WeakMap,Bo=new WeakMap,Ho=new WeakMap,oa=new WeakMap,la=new WeakMap,ca=new WeakMap,Uo=new WeakMap,Ut=new WeakSet,ky=function({drawOutlines:e,drawId:i,drawingOptions:r}){x(this,Jn,e),this._drawingOptions||(this._drawingOptions=r),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=S(this,Ut,Ty).call(this,e,this.parent),S(this,Ut,ed).call(this,e.box)},Ty=function(e,i){const{id:r}=i.drawLayer.draw(ct._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},Ry=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},td=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,Ut,Ty).call(this,o(this,Jn),e)}},aE=function([e,i,r,a]){const{parentDimensions:[c,d],rotation:p}=this;switch(p){case 90:return[i,1-e,r*(d/c),a*(c/d)];case 180:return[1-e,1-i,r,a];case 270:return[1-i,e,r*(d/c),a*(c/d)];default:return[e,i,r,a]}},Rf=function(){const{x:e,y:i,width:r,height:a,parentDimensions:[c,d],rotation:p}=this;switch(p){case 90:return[1-i,e,r*(c/d),a*(d/c)];case 180:return[1-e,1-i,r,a];case 270:return[i,1-e,r*(c/d),a*(d/c)];default:return[e,i,r,a]}},ed=function(e){if([this.x,this.y,this.width,this.height]=S(this,Ut,aE).call(this,e),this.div){this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()},Fl=function(){const{x:e,y:i,width:r,height:a,rotation:c,parentRotation:d,parentDimensions:[p,f]}=this;switch((c*4+d)/90){case 1:return[1-i-a,e,a,r];case 2:return[1-e-r,1-i-a,r,a];case 3:return[i,1-e-r,a,r];case 4:return[e,i-r*(p/f),a*(f/p),r*(p/f)];case 5:return[1-i,e,r*(p/f),a*(f/p)];case 6:return[1-e-a*(f/p),1-i,a*(f/p),r*(p/f)];case 7:return[i-r*(p/f),1-e-a*(f/p),r*(p/f),a*(f/p)];case 8:return[e-r,i-a,r,a];case 9:return[1-i,e-r,a,r];case 10:return[1-e,1-i,r,a];case 11:return[i-a,1-e,a,r];case 12:return[e-a*(f/p),i,a*(f/p),r*(p/f)];case 13:return[1-i-r*(p/f),e-a*(f/p),r*(p/f),a*(f/p)];case 14:return[1-e,1-i-r*(p/f),a*(f/p),r*(p/f)];case 15:return[i,1-e,r*(p/f),a*(f/p)];default:return[e,i,r,a]}},Et(ct,"_currentDrawId",-1),Et(ct,"_currentParent",null),E(ct,$e,null),E(ct,Bo,null),E(ct,Ho,null),E(ct,oa,NaN),E(ct,la,null),E(ct,ca,null),E(ct,Uo,NaN),Et(ct,"_INNER_MARGIN",3);let Cy=ct;var ms,Ge,Ve,$o,Fc,xn,Qe,yi,Go,Vo,Wo,jc,Pf;class uR{constructor(t,e,i,r,a,c){E(this,jc);E(this,ms,new Float64Array(6));E(this,Ge);E(this,Ve);E(this,$o);E(this,Fc);E(this,xn);E(this,Qe,"");E(this,yi,0);E(this,Go,new Vf);E(this,Vo);E(this,Wo);x(this,Vo,i),x(this,Wo,r),x(this,$o,a),x(this,Fc,c),[t,e]=S(this,jc,Pf).call(this,t,e);const d=x(this,Ge,[NaN,NaN,NaN,NaN,t,e]);x(this,xn,[t,e]),x(this,Ve,[{line:d,points:o(this,xn)}]),o(this,ms).set(d,0)}updateProperty(t,e){t==="stroke-width"&&x(this,Fc,e)}isEmpty(){return!o(this,Ve)||o(this,Ve).length===0}isCancellable(){return o(this,xn).length<=10}add(t,e){[t,e]=S(this,jc,Pf).call(this,t,e);const[i,r,a,c]=o(this,ms).subarray(2,6),d=t-a,p=e-c;return Math.hypot(o(this,Vo)*d,o(this,Wo)*p)<=2?null:(o(this,xn).push(t,e),isNaN(i)?(o(this,ms).set([a,c,t,e],2),o(this,Ge).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(o(this,ms)[0])&&o(this,Ge).splice(6,6),o(this,ms).set([i,r,a,c,t,e],0),o(this,Ge).push(...lt.createBezierPoints(i,r,a,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(o(this,xn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,a){x(this,Vo,i),x(this,Wo,r),x(this,$o,a),[t,e]=S(this,jc,Pf).call(this,t,e);const c=x(this,Ge,[NaN,NaN,NaN,NaN,t,e]);x(this,xn,[t,e]);const d=o(this,Ve).at(-1);return d&&(d.line=new Float32Array(d.line),d.points=new Float32Array(d.points)),o(this,Ve).push({line:c,points:o(this,xn)}),o(this,ms).set(c,0),x(this,yi,0),this.toSVGPath(),null}getLastElement(){return o(this,Ve).at(-1)}setLastElement(t){return o(this,Ve)?(o(this,Ve).push(t),x(this,Ge,t.line),x(this,xn,t.points),x(this,yi,0),{path:{d:this.toSVGPath()}}):o(this,Go).setLastElement(t)}removeLastElement(){if(!o(this,Ve))return o(this,Go).removeLastElement();o(this,Ve).pop(),x(this,Qe,"");for(let t=0,e=o(this,Ve).length;t<e;t++){const{line:i,points:r}=o(this,Ve)[t];x(this,Ge,i),x(this,xn,r),x(this,yi,0),this.toSVGPath()}return{path:{d:o(this,Qe)}}}toSVGPath(){const t=lt.svgRound(o(this,Ge)[4]),e=lt.svgRound(o(this,Ge)[5]);if(o(this,xn).length===2)return x(this,Qe,`${o(this,Qe)} M ${t} ${e} Z`),o(this,Qe);if(o(this,xn).length<=6){const r=o(this,Qe).lastIndexOf("M");x(this,Qe,`${o(this,Qe).slice(0,r)} M ${t} ${e}`),x(this,yi,6)}if(o(this,xn).length===4){const r=lt.svgRound(o(this,Ge)[10]),a=lt.svgRound(o(this,Ge)[11]);return x(this,Qe,`${o(this,Qe)} L ${r} ${a}`),x(this,yi,12),o(this,Qe)}const i=[];o(this,yi)===0&&(i.push(`M ${t} ${e}`),x(this,yi,6));for(let r=o(this,yi),a=o(this,Ge).length;r<a;r+=6){const[c,d,p,f,g,y]=o(this,Ge).slice(r,r+6).map(lt.svgRound);i.push(`C${c} ${d} ${p} ${f} ${g} ${y}`)}return x(this,Qe,o(this,Qe)+i.join(" ")),x(this,yi,o(this,Ge).length),o(this,Qe)}getOutlines(t,e,i,r){const a=o(this,Ve).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),o(this,Go).build(o(this,Ve),t,e,i,o(this,$o),o(this,Fc),r),x(this,ms,null),x(this,Ge,null),x(this,Ve,null),x(this,Qe,null),o(this,Go)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ms=new WeakMap,Ge=new WeakMap,Ve=new WeakMap,$o=new WeakMap,Fc=new WeakMap,xn=new WeakMap,Qe=new WeakMap,yi=new WeakMap,Go=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,jc=new WeakSet,Pf=function(t,e){return lt._normalizePoint(t,e,o(this,Vo),o(this,Wo),o(this,$o))};var An,Nh,Oh,Zn,gs,vs,zc,Bc,Hc,Ze,Ns,oE,lE,cE;const s0=class s0 extends lt{constructor(){super(...arguments);E(this,Ze);E(this,An);E(this,Nh,0);E(this,Oh);E(this,Zn);E(this,gs);E(this,vs);E(this,zc);E(this,Bc);E(this,Hc)}build(e,i,r,a,c,d,p){x(this,gs,i),x(this,vs,r),x(this,zc,a),x(this,Bc,c),x(this,Hc,d),x(this,Oh,p??0),x(this,Zn,e),S(this,Ze,lE).call(this)}setLastElement(e){return o(this,Zn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,Zn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of o(this,Zn)){if(e.push(`M${lt.svgRound(i[4])} ${lt.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12){e.push(`L${lt.svgRound(i[10])} ${lt.svgRound(i[11])}`);continue}for(let r=6,a=i.length;r<a;r+=6){const[c,d,p,f,g,y]=i.subarray(r,r+6).map(lt.svgRound);e.push(`C${c} ${d} ${p} ${f} ${g} ${y}`)}}return e.join("")}serialize([e,i,r,a],c){const d=[],p=[],[f,g,y,w]=S(this,Ze,oE).call(this);let A,b,C,k,T,M,z,F,D;switch(o(this,Bc)){case 0:D=lt._rescale,A=e,b=i+a,C=r,k=-a,T=e+f*r,M=i+(1-g-w)*a,z=e+(f+y)*r,F=i+(1-g)*a;break;case 90:D=lt._rescaleAndSwap,A=e,b=i,C=r,k=a,T=e+g*r,M=i+f*a,z=e+(g+w)*r,F=i+(f+y)*a;break;case 180:D=lt._rescale,A=e+r,b=i,C=-r,k=a,T=e+(1-f-y)*r,M=i+g*a,z=e+(1-f)*r,F=i+(g+w)*a;break;case 270:D=lt._rescaleAndSwap,A=e+r,b=i+a,C=-r,k=-a,T=e+(1-g-w)*r,M=i+(1-f-y)*a,z=e+(1-g)*r,F=i+(1-f)*a;break}for(const{line:B,points:N}of o(this,Zn))d.push(D(B,A,b,C,k,c?new Array(B.length):null)),p.push(D(N,A,b,C,k,c?new Array(N.length):null));return{lines:d,points:p,rect:[T,M,z,F]}}static deserialize(e,i,r,a,c,{paths:{lines:d,points:p},rotation:f,thickness:g}){const y=[];let w,A,b,C,k;switch(f){case 0:k=lt._rescale,w=-e/r,A=i/a+1,b=1/r,C=-1/a;break;case 90:k=lt._rescaleAndSwap,w=-i/a,A=-e/r,b=1/a,C=1/r;break;case 180:k=lt._rescale,w=e/r+1,A=-i/a,b=-1/r,C=1/a;break;case 270:k=lt._rescaleAndSwap,w=i/a+1,A=e/r+1,b=-1/a,C=-1/r;break}if(!d){d=[];for(const M of p){const z=M.length;if(z===2){d.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(z===4){d.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const F=new Float32Array(3*(z-2));d.push(F);let[D,B,N,$]=M.subarray(0,4);F.set([NaN,NaN,NaN,NaN,D,B],0);for(let G=4;G<z;G+=2){const et=M[G],Q=M[G+1];F.set(lt.createBezierPoints(D,B,N,$,et,Q),(G-2)*3),[D,B,N,$]=[N,$,et,Q]}}}for(let M=0,z=d.length;M<z;M++)y.push({line:k(d[M].map(F=>F??NaN),w,A,b,C),points:k(p[M].map(F=>F??NaN),w,A,b,C)});const T=new s0;return T.build(y,r,a,1,f,g,c),T}get box(){return o(this,An)}updateProperty(e,i){return e==="stroke-width"?S(this,Ze,cE).call(this,i):null}updateParentDimensions([e,i],r){const[a,c]=S(this,Ze,Ns).call(this);x(this,gs,e),x(this,vs,i),x(this,zc,r);const[d,p]=S(this,Ze,Ns).call(this),f=d-a,g=p-c,y=o(this,An);return y[0]-=f,y[1]-=g,y[2]+=2*f,y[3]+=2*g,y}updateRotation(e){return x(this,Nh,e),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,An).map(lt.svgRound).join(" ")}get defaultProperties(){const[e,i]=o(this,An);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=o(this,An);let r=0,a=0,c=0,d=0,p=0,f=0;switch(o(this,Nh)){case 90:a=i/e,c=-e/i,p=e;break;case 180:r=-1,d=-1,p=e,f=i;break;case 270:a=-i/e,c=e/i,f=i;break;default:return""}return`matrix(${r} ${a} ${c} ${d} ${lt.svgRound(p)} ${lt.svgRound(f)})`}getPathResizingSVGProperties([e,i,r,a]){const[c,d]=S(this,Ze,Ns).call(this),[p,f,g,y]=o(this,An);if(Math.abs(g-c)<=lt.PRECISION||Math.abs(y-d)<=lt.PRECISION){const k=e+r/2-(p+g/2),T=i+a/2-(f+y/2);return{path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(i)}`,transform:`${this.rotationTransform} translate(${k} ${T})`}}}const w=(r-2*c)/(g-2*c),A=(a-2*d)/(y-2*d),b=g/r,C=y/a;return{path:{"transform-origin":`${lt.svgRound(p)} ${lt.svgRound(f)}`,transform:`${this.rotationTransform} scale(${b} ${C}) translate(${lt.svgRound(c)} ${lt.svgRound(d)}) scale(${w} ${A}) translate(${lt.svgRound(-c)} ${lt.svgRound(-d)})`}}}getPathResizedSVGProperties([e,i,r,a]){const[c,d]=S(this,Ze,Ns).call(this),p=o(this,An),[f,g,y,w]=p;if(p[0]=e,p[1]=i,p[2]=r,p[3]=a,Math.abs(y-c)<=lt.PRECISION||Math.abs(w-d)<=lt.PRECISION){const T=e+r/2-(f+y/2),M=i+a/2-(g+w/2);for(const{line:z,points:F}of o(this,Zn))lt._translate(z,T,M,z),lt._translate(F,T,M,F);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(r-2*c)/(y-2*c),b=(a-2*d)/(w-2*d),C=-A*(f+c)+e+c,k=-b*(g+d)+i+d;if(A!==1||b!==1||C!==0||k!==0)for(const{line:T,points:M}of o(this,Zn))lt._rescale(T,C,k,A,b,T),lt._rescale(M,C,k,A,b,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],r){const[a,c]=r,d=o(this,An),p=e-d[0],f=i-d[1];if(o(this,gs)===a&&o(this,vs)===c)for(const{line:g,points:y}of o(this,Zn))lt._translate(g,p,f,g),lt._translate(y,p,f,y);else{const g=o(this,gs)/a,y=o(this,vs)/c;x(this,gs,a),x(this,vs,c);for(const{line:w,points:A}of o(this,Zn))lt._rescale(w,p,f,g,y,w),lt._rescale(A,p,f,g,y,A);d[2]*=g,d[3]*=y}return d[0]=e,d[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(i)}`}}}get defaultSVGProperties(){const e=o(this,An);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e[0])} ${lt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};An=new WeakMap,Nh=new WeakMap,Oh=new WeakMap,Zn=new WeakMap,gs=new WeakMap,vs=new WeakMap,zc=new WeakMap,Bc=new WeakMap,Hc=new WeakMap,Ze=new WeakSet,Ns=function(e=o(this,Hc)){const i=o(this,Oh)+e/2*o(this,zc);return o(this,Bc)%180===0?[i/o(this,gs),i/o(this,vs)]:[i/o(this,vs),i/o(this,gs)]},oE=function(){const[e,i,r,a]=o(this,An),[c,d]=S(this,Ze,Ns).call(this,0);return[e+c,i+d,r-2*c,a-2*d]},lE=function(){const e=x(this,An,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of o(this,Zn)){if(a.length<=12){for(let p=4,f=a.length;p<f;p+=6){const[g,y]=a.subarray(p,p+2);e[0]=Math.min(e[0],g),e[1]=Math.min(e[1],y),e[2]=Math.max(e[2],g),e[3]=Math.max(e[3],y)}continue}let c=a[4],d=a[5];for(let p=6,f=a.length;p<f;p+=6){const[g,y,w,A,b,C]=a.subarray(p,p+6);gt.bezierBoundingBox(c,d,g,y,w,A,b,C,e),c=b,d=C}}const[i,r]=S(this,Ze,Ns).call(this);e[0]=Math.min(1,Math.max(0,e[0]-i)),e[1]=Math.min(1,Math.max(0,e[1]-r)),e[2]=Math.min(1,Math.max(0,e[2]+i)),e[3]=Math.min(1,Math.max(0,e[3]+r)),e[2]-=e[0],e[3]-=e[1]},cE=function(e){const[i,r]=S(this,Ze,Ns).call(this);x(this,Hc,e);const[a,c]=S(this,Ze,Ns).call(this),[d,p]=[a-i,c-r],f=o(this,An);return f[0]-=d,f[1]-=p,f[2]+=2*d,f[3]+=2*p,f};let Vf=s0;var Uc;const r0=class r0 extends cR{constructor(e){super();E(this,Uc);x(this,Uc,e),super.updateProperties({fill:"none",stroke:me._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,i){e==="stroke-width"&&(i??(i=this["stroke-width"]),i*=o(this,Uc).realScale),super.updateSVGProperty(e,i)}clone(){const e=new r0(o(this,Uc));return e.updateAll(this),e}};Uc=new WeakMap;let Py=r0;var cm,uE;const zl=class zl extends Cy{constructor(e){super({...e,name:"inkEditor"});E(this,cm);this._willKeepAspectRatio=!0}static initialize(e,i){me.initialize(e,i),this._defaultDrawingOptions=new Py(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return zt(this,"typesMap",new Map([[Bt.INK_THICKNESS,"stroke-width"],[Bt.INK_COLOR,"stroke"],[Bt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,r,a,c){return new uR(e,i,r,a,c,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,r,a,c,d){return Vf.deserialize(e,i,r,a,c,d)}static async deserialize(e,i,r){let a=null;if(e instanceof Zy){const{data:{inkLists:d,rect:p,rotation:f,id:g,color:y,opacity:w,borderStyle:{rawWidth:A},popupRef:b},parent:{page:{pageNumber:C}}}=e;a=e={annotationType:Lt.INK,color:Array.from(y),thickness:A,opacity:w,paths:{points:d},boxes:null,pageIndex:C-1,rect:p.slice(0),rotation:f,id:g,deleted:!1,popupRef:b}}const c=await super.deserialize(e,i,r);return c.annotationElementId=e.id||null,c._initialData=a,c}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:r}){this._drawingOptions=zl.getDefaultDrawingOptions({stroke:gt.makeHexColor(...e),"stroke-width":i,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r,rect:a}=this.serializeDraw(e),{_drawingOptions:{stroke:c,"stroke-opacity":d,"stroke-width":p}}=this,f={annotationType:Lt.INK,color:me._colorManager.convert(c),opacity:d,thickness:p,paths:{lines:i,points:r},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?f:this.annotationElementId&&!S(this,cm,uE).call(this,f)?null:(f.id=this.annotationElementId,f)}renderAnnotationElement(e){const{points:i,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i}),null}};cm=new WeakSet,uE=function(e){const{color:i,thickness:r,opacity:a,pageIndex:c}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((d,p)=>d!==i[p])||e.thickness!==r||e.opacity!==a||e.pageIndex!==c},Et(zl,"_type","ink"),Et(zl,"_editorType",Lt.INK),Et(zl,"_defaultDrawingOptions",null);let Iy=zl;var pe,Je,ua,rr,da,$c,ys,ws,ti,Gc,Gt,nd,id,If,Ly,Mf,Dy,Lf,dE;const ad=class ad extends me{constructor(e){super({...e,name:"stampEditor"});E(this,Gt);E(this,pe,null);E(this,Je,null);E(this,ua,null);E(this,rr,null);E(this,da,null);E(this,$c,"");E(this,ys,null);E(this,ws,null);E(this,ti,!1);E(this,Gc,!1);x(this,rr,e.bitmapUrl),x(this,da,e.bitmapFile)}static initialize(e,i){me.initialize(e,i)}static get supportedTypes(){return zt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return zt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(Lt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:c,height:d}=e||this.copyCanvas(null,null,!0).imageData,p=await r.guess({name:"altText",request:{data:a,width:c,height:d,channels:a.length/(c*d)}});if(!p)throw new Error("No response from the AI service.");if(p.error)throw new Error("Error from the AI service.");if(p.cancel)return null;if(!p.output)throw new Error("No valid response from the AI service.");const f=p.output;return await this.setGuessedAltText(f),i&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;o(this,Je)&&(x(this,pe,null),this._uiManager.imageManager.deleteId(o(this,Je)),(e=o(this,ys))==null||e.remove(),x(this,ys,null),o(this,ws)&&(clearTimeout(o(this,ws)),x(this,ws,null))),super.remove()}rebuild(){if(!this.parent){o(this,Je)&&S(this,Gt,If).call(this);return}super.rebuild(),this.div!==null&&(o(this,Je)&&o(this,ys)===null&&S(this,Gt,If).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(o(this,ua)||o(this,pe)||o(this,rr)||o(this,da)||o(this,Je))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),o(this,pe)?S(this,Gt,Ly).call(this):S(this,Gt,If).call(this),this.width&&!this.annotationElementId){const[r,a]=this.parentDimensions;this.setAt(e*r,i*a,this.width*r,this.height*a)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,ws)!==null&&clearTimeout(o(this,ws)),x(this,ws,setTimeout(()=>{x(this,ws,null),S(this,Gt,Dy).call(this)},200))}copyCanvas(e,i,r=!1){var A;e||(e=224);const{width:a,height:c}=o(this,pe),d=new Pv;let p=o(this,pe),f=a,g=c,y=null;if(i){if(a>i||c>i){const $=Math.min(i/a,i/c);f=Math.floor(a*$),g=Math.floor(c*$)}y=document.createElement("canvas");const b=y.width=Math.ceil(f*d.sx),C=y.height=Math.ceil(g*d.sy);o(this,ti)||(p=S(this,Gt,Mf).call(this,b,C));const k=y.getContext("2d");k.filter=this._uiManager.hcmFilter;let T="white",M="#cfcfd8";this._uiManager.hcmFilter!=="none"?M="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",M="#42414d");const z=15,F=z*d.sx,D=z*d.sy,B=new OffscreenCanvas(F*2,D*2),N=B.getContext("2d");N.fillStyle=T,N.fillRect(0,0,F*2,D*2),N.fillStyle=M,N.fillRect(0,0,F,D),N.fillRect(F,D,F,D),k.fillStyle=k.createPattern(B,"repeat"),k.fillRect(0,0,b,C),k.drawImage(p,0,0,p.width,p.height,0,0,b,C)}let w=null;if(r){let b,C;if(d.symmetric&&p.width<e&&p.height<e)b=p.width,C=p.height;else if(p=o(this,pe),a>e||c>e){const M=Math.min(e/a,e/c);b=Math.floor(a*M),C=Math.floor(c*M),o(this,ti)||(p=S(this,Gt,Mf).call(this,b,C))}const T=new OffscreenCanvas(b,C).getContext("2d",{willReadFrequently:!0});T.drawImage(p,0,0,p.width,p.height,0,0,b,C),w={width:b,height:C,data:T.getImageData(0,0,b,C).data}}return{canvas:y,width:f,height:g,imageData:w}}getImageForAltText(){return o(this,ys)}static async deserialize(e,i,r){var C;let a=null;if(e instanceof M_){const{data:{rect:k,rotation:T,id:M,structParent:z,popupRef:F},container:D,parent:{page:{pageNumber:B}}}=e,N=D.querySelector("canvas"),$=r.imageManager.getFromCanvas(D.id,N);N.remove();const G=((C=await i._structTree.getAriaAttributes(`${Vy}${M}`))==null?void 0:C.get("aria-label"))||"";a=e={annotationType:Lt.STAMP,bitmapId:$.id,bitmap:$.bitmap,pageIndex:B-1,rect:k.slice(0),rotation:T,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:G},isSvg:!1,structParent:z,popupRef:F}}const c=await super.deserialize(e,i,r),{rect:d,bitmap:p,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:w}=e;g&&r.imageManager.isValidId(g)?(x(c,Je,g),p&&x(c,pe,p)):x(c,rr,f),x(c,ti,y);const[A,b]=c.pageDimensions;return c.width=(d[2]-d[0])/A,c.height=(d[3]-d[1])/b,c.annotationElementId=e.id||null,w&&(c.altTextData=w),c._initialData=a,x(c,Gc,!!a),c}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Lt.STAMP,bitmapId:o(this,Je),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,ti),structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=S(this,Gt,Lf).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:a,altText:c}=this.serializeAltText(!1);if(!a&&c&&(r.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const p=S(this,Gt,dE).call(this,r);if(p.isSame)return null;p.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const d=o(this,ti)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(o(this,Je)))i.stamps.set(o(this,Je),{area:d,serialized:r}),r.bitmap=S(this,Gt,Lf).call(this,!1);else if(o(this,ti)){const p=i.stamps.get(o(this,Je));d>p.area&&(p.area=d,p.serialized.bitmap.close(),p.serialized.bitmap=S(this,Gt,Lf).call(this,!1))}return r}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};pe=new WeakMap,Je=new WeakMap,ua=new WeakMap,rr=new WeakMap,da=new WeakMap,$c=new WeakMap,ys=new WeakMap,ws=new WeakMap,ti=new WeakMap,Gc=new WeakMap,Gt=new WeakSet,nd=function(e,i=!1){if(!e){this.remove();return}x(this,pe,e.bitmap),i||(x(this,Je,e.id),x(this,ti,e.isSvg)),e.file&&x(this,$c,e.file.name),S(this,Gt,Ly).call(this)},id=function(){if(x(this,ua,null),this._uiManager.enableWaiting(!1),!!o(this,ys)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,pe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,pe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},If=function(){if(o(this,Je)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,Je)).then(r=>S(this,Gt,nd).call(this,r,!0)).finally(()=>S(this,Gt,id).call(this));return}if(o(this,rr)){const r=o(this,rr);x(this,rr,null),this._uiManager.enableWaiting(!0),x(this,ua,this._uiManager.imageManager.getFromUrl(r).then(a=>S(this,Gt,nd).call(this,a)).finally(()=>S(this,Gt,id).call(this)));return}if(o(this,da)){const r=o(this,da);x(this,da,null),this._uiManager.enableWaiting(!0),x(this,ua,this._uiManager.imageManager.getFromFile(r).then(a=>S(this,Gt,nd).call(this,a)).finally(()=>S(this,Gt,id).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=ad.supportedTypesStr;const i=this._uiManager._signal;x(this,ua,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,Gt,nd).call(this,a)}r()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>S(this,Gt,id).call(this))),e.click()},Ly=function(){var y;const{div:e}=this;let{width:i,height:r}=o(this,pe);const[a,c]=this.pageDimensions,d=.75;if(this.width)i=this.width*a,r=this.height*c;else if(i>d*a||r>d*c){const w=Math.min(d*a/i,d*c/r);i*=w,r*=w}const[p,f]=this.parentDimensions;this.setDims(i*p/a,r*f/c),this._uiManager.enableWaiting(!1);const g=x(this,ys,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=i/a,this.height=r/c,(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),S(this,Gt,Dy).call(this),o(this,Gc)||(this.parent.addUndoableEditor(this),x(this,Gc,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,$c)&&g.setAttribute("aria-label",o(this,$c))},Mf=function(e,i){const{width:r,height:a}=o(this,pe);let c=r,d=a,p=o(this,pe);for(;c>2*e||d>2*i;){const f=c,g=d;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),d>2*i&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const y=new OffscreenCanvas(c,d);y.getContext("2d").drawImage(p,0,0,f,g,0,0,c,d),p=y.transferToImageBitmap()}return p},Dy=function(){const[e,i]=this.parentDimensions,{width:r,height:a}=this,c=new Pv,d=Math.ceil(r*e*c.sx),p=Math.ceil(a*i*c.sy),f=o(this,ys);if(!f||f.width===d&&f.height===p)return;f.width=d,f.height=p;const g=o(this,ti)?o(this,pe):S(this,Gt,Mf).call(this,d,p),y=f.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,d,p)},Lf=function(e){if(e){if(o(this,ti)){const a=this._uiManager.imageManager.getSvgUrl(o(this,Je));if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=o(this,pe),i.getContext("2d").drawImage(o(this,pe),0,0),i.toDataURL()}if(o(this,ti)){const[i,r]=this.pageDimensions,a=Math.round(this.width*i*ya.PDF_TO_CSS_UNITS),c=Math.round(this.height*r*ya.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(a,c);return d.getContext("2d").drawImage(o(this,pe),0,0,o(this,pe).width,o(this,pe).height,0,0,a,c),d.transferToImageBitmap()}return structuredClone(o(this,pe))},dE=function(e){var d;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,a=e.pageIndex===i,c=(((d=e.accessibilityData)==null?void 0:d.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&c,isSameAltText:c}},Et(ad,"_type","stamp"),Et(ad,"_editorType",Lt.STAMP);let My=ad;var qo,Vc,xs,ha,ar,wi,pa,Wc,Xo,Ui,or,dn,lr,mt,fa,le,hE,is,Oy,Fy,Df;const Pi=class Pi{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:c,drawLayer:d,textLayer:p,viewport:f,l10n:g}){E(this,le);E(this,qo);E(this,Vc,!1);E(this,xs,null);E(this,ha,null);E(this,ar,null);E(this,wi,new Map);E(this,pa,!1);E(this,Wc,!1);E(this,Xo,!1);E(this,Ui,null);E(this,or,null);E(this,dn,null);E(this,lr,null);E(this,mt);const y=[...o(Pi,fa).values()];if(!Pi._initialized){Pi._initialized=!0;for(const w of y)w.initialize(g,t)}t.registerEditorTypes(y),x(this,mt,t),this.pageIndex=e,this.div=i,x(this,qo,a),x(this,xs,c),this.viewport=f,x(this,dn,p),this.drawLayer=d,this._structTree=r,o(this,mt).addLayer(this)}get isEmpty(){return o(this,wi).size===0}get isInvisible(){return this.isEmpty&&o(this,mt).getMode()===Lt.NONE}updateToolbar(t){o(this,mt).updateToolbar(t)}updateMode(t=o(this,mt).getMode()){switch(S(this,le,Df).call(this),t){case Lt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Lt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Lt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of o(Pi,fa).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=o(this,dn))==null?void 0:e.div)}setEditingState(t){o(this,mt).setEditingState(t)}addCommands(t){o(this,mt).addCommands(t)}cleanUndoStack(t){o(this,mt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=o(this,xs))==null||e.div.classList.toggle("disabled",!t)}async enable(){x(this,Xo,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of o(this,wi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(o(this,mt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!o(this,xs)){x(this,Xo,!1);return}const e=o(this,xs).getEditableAnnotations();for(const i of e){if(i.hide(),o(this,mt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}x(this,Xo,!1)}disable(){var r;x(this,Wc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const a of o(this,wi).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);(r=this.getEditableAnnotation(a.annotationElementId))==null||r.show(),a.remove()}if(o(this,xs)){const a=o(this,xs).getEditableAnnotations();for(const c of a){const{id:d}=c.data;if(o(this,mt).isDeletedAnnotationElement(d))continue;let p=e.get(d);if(p){p.resetAnnotationElement(c),p.show(!1),c.show();continue}p=t.get(d),p&&(o(this,mt).addChangedExistingAnnotation(p),p.renderAnnotationElement(c)&&p.show(!1)),c.show()}}S(this,le,Df).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of o(Pi,fa).values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Wc,!1)}getEditableAnnotation(t){var e;return((e=o(this,xs))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){o(this,mt).getActive()!==t&&o(this,mt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=o(this,dn))!=null&&t.div&&!o(this,lr)){x(this,lr,new AbortController);const e=o(this,mt).combinedSignal(o(this,lr));o(this,dn).div.addEventListener("pointerdown",S(this,le,hE).bind(this),{signal:e}),o(this,dn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=o(this,dn))!=null&&t.div&&o(this,lr)&&(o(this,lr).abort(),x(this,lr,null),o(this,dn).div.classList.remove("highlighting"))}enableClick(){if(o(this,ha))return;x(this,ha,new AbortController);const t=o(this,mt).combinedSignal(o(this,ha));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=o(this,ha))==null||t.abort(),x(this,ha,null)}attach(t){o(this,wi).set(t.id,t);const{annotationElementId:e}=t;e&&o(this,mt).isDeletedAnnotationElement(e)&&o(this,mt).removeDeletedAnnotationElement(t)}detach(t){var e;o(this,wi).delete(t.id),(e=o(this,qo))==null||e.removePointerInTextLayer(t.contentDiv),!o(this,Wc)&&t.annotationElementId&&o(this,mt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),o(this,mt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(o(this,mt).addDeletedAnnotationElement(t.annotationElementId),me.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),o(this,mt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!o(this,Xo)),o(this,mt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!o(this,ar)&&(t._focusEventsAllowed=!1,x(this,ar,setTimeout(()=>{x(this,ar,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:o(this,mt)._signal}),e.focus())},0))),t._structTreeParentId=(i=o(this,qo))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return o(this,mt).getId()}combinedSignal(t){return o(this,mt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=o(this,le,is))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){o(this,mt).updateToolbar(t),o(this,mt).updateMode(t);const{offsetX:i,offsetY:r}=S(this,le,Fy).call(this),a=this.getNextId(),c=S(this,le,Oy).call(this,{parent:this,id:a,x:i,y:r,uiManager:o(this,mt),isCentered:!0,...e});c&&this.add(c)}async deserialize(t){var e;return await((e=o(Pi,fa).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,o(this,mt)))||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),a=S(this,le,Oy).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:o(this,mt),isCentered:e,...i});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(S(this,le,Fy).call(this),!0)}setSelected(t){o(this,mt).setSelected(t)}toggleSelected(t){o(this,mt).toggleSelected(t)}unselect(t){o(this,mt).unselect(t)}pointerup(t){var i;const{isMac:e}=_n.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&o(this,pa)&&(x(this,pa,!1),!((i=o(this,le,is))!=null&&i.isDrawer&&o(this,le,is).supportMultipleDrawings))){if(!o(this,Vc)){x(this,Vc,!0);return}if(o(this,mt).getMode()===Lt.STAMP){o(this,mt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var r;if(o(this,mt).getMode()===Lt.HIGHLIGHT&&this.enableTextSelection(),o(this,pa)){x(this,pa,!1);return}const{isMac:e}=_n.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(x(this,pa,!0),(r=o(this,le,is))!=null&&r.isDrawer){this.startDrawingSession(t);return}const i=o(this,mt).getActive();x(this,Vc,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus(),o(this,Ui)){o(this,le,is).startDrawing(this,o(this,mt),!1,t);return}o(this,mt).setCurrentDrawingSession(this),x(this,Ui,new AbortController);const e=o(this,mt).combinedSignal(o(this,Ui));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(x(this,or,null),this.commitOrRemove())},{signal:e}),o(this,le,is).startDrawing(this,o(this,mt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&x(this,or,e);return}o(this,or)&&setTimeout(()=>{var e;(e=o(this,or))==null||e.focus(),x(this,or,null)},0)}endDrawingSession(t=!1){return o(this,Ui)?(o(this,mt).setCurrentDrawingSession(null),o(this,Ui).abort(),x(this,Ui,null),x(this,or,null),o(this,le,is).endDrawing(t)):null}findNewParent(t,e,i){const r=o(this,mt).findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return o(this,Ui)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,Ui)&&o(this,le,is).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=o(this,mt).getActive())==null?void 0:t.parent)===this&&(o(this,mt).commitOrRemove(),o(this,mt).setActiveEditor(null)),o(this,ar)&&(clearTimeout(o(this,ar)),x(this,ar,null));for(const i of o(this,wi).values())(e=o(this,qo))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,o(this,wi).clear(),o(this,mt).removeLayer(this)}render({viewport:t}){this.viewport=t,Qo(this.div,t);for(const e of o(this,mt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){o(this,mt).commitOrRemove(),S(this,le,Df).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Qo(this.div,{rotation:i}),e!==i)for(const r of o(this,wi).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return o(this,mt).viewParameters.realScale}};qo=new WeakMap,Vc=new WeakMap,xs=new WeakMap,ha=new WeakMap,ar=new WeakMap,wi=new WeakMap,pa=new WeakMap,Wc=new WeakMap,Xo=new WeakMap,Ui=new WeakMap,or=new WeakMap,dn=new WeakMap,lr=new WeakMap,mt=new WeakMap,fa=new WeakMap,le=new WeakSet,hE=function(t){o(this,mt).unselectAll();const{target:e}=t;if(e===o(this,dn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&o(this,dn).div.contains(e)){const{isMac:i}=_n.platform;if(t.button!==0||t.ctrlKey&&i)return;o(this,mt).showAllEditors("highlight",!0,!0),o(this,dn).div.classList.add("free"),this.toggleDrawing(),Gf.startHighlighting(this,o(this,mt).direction==="ltr",{target:o(this,dn).div,x:t.x,y:t.y}),o(this,dn).div.addEventListener("pointerup",()=>{o(this,dn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,mt)._signal}),t.preventDefault()}},is=function(){return o(Pi,fa).get(o(this,mt).getMode())},Oy=function(t){const e=o(this,le,is);return e?new e.prototype.constructor(t):null},Fy=function(){const{x:t,y:e,width:i,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,t),c=Math.max(0,e),d=Math.min(window.innerWidth,t+i),p=Math.min(window.innerHeight,e+r),f=(a+d)/2-t,g=(c+p)/2-e,[y,w]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:w}},Df=function(){for(const t of o(this,wi).values())t.isEmpty()&&t.remove()},Et(Pi,"_initialized",!1),E(Pi,fa,new Map([gy,Iy,My,Gf].map(t=>[t._editorType,t])));let Ny=Pi;var $i,Fh,bn,Yo,um,pE,As,zy,fE,By;const on=class on{constructor({pageIndex:t}){E(this,As);E(this,$i,null);E(this,Fh,0);E(this,bn,new Map);E(this,Yo,new Map);this.pageIndex=t}setParent(t){if(!o(this,$i)){x(this,$i,t);return}if(o(this,$i)!==t){if(o(this,bn).size>0)for(const e of o(this,bn).values())e.remove(),t.append(e);x(this,$i,t)}}static get _svgFactory(){return zt(this,"_svgFactory",new Jy)}draw(t,e=!1,i=!1){const r=vn(this,Fh)._++,a=S(this,As,zy).call(this),c=on._svgFactory.createElement("defs");a.append(c);const d=on._svgFactory.createElement("path");c.append(d);const p=`path_p${this.pageIndex}_${r}`;d.setAttribute("id",p),d.setAttribute("vector-effect","non-scaling-stroke"),e&&o(this,Yo).set(r,d);const f=i?S(this,As,fE).call(this,c,p):null,g=on._svgFactory.createElement("use");return a.append(g),g.setAttribute("href",`#${p}`),this.updateProperties(a,t),o(this,bn).set(r,a),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=vn(this,Fh)._++,r=S(this,As,zy).call(this),a=on._svgFactory.createElement("defs");r.append(a);const c=on._svgFactory.createElement("path");a.append(c);const d=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke");let p;if(e){const y=on._svgFactory.createElement("mask");a.append(y),p=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",p),y.setAttribute("maskUnits","objectBoundingBox");const w=on._svgFactory.createElement("rect");y.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const A=on._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${d}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=on._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${d}`),p&&f.setAttribute("mask",`url(#${p})`);const g=f.cloneNode();return r.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),o(this,bn).set(i,r),i}finalizeDraw(t,e){o(this,Yo).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var p;if(!e)return;const{root:i,bbox:r,rootClass:a,path:c}=e,d=typeof t=="number"?o(this,bn).get(t):t;if(d){if(i&&S(this,As,By).call(this,d,i),r&&S(p=on,um,pE).call(p,d,r),a){const{classList:f}=d;for(const[g,y]of Object.entries(a))f.toggle(g,y)}if(c){const g=d.firstChild.firstChild;S(this,As,By).call(this,g,c)}}}updateParent(t,e){if(e===this)return;const i=o(this,bn).get(t);i&&(o(e,$i).append(i),o(this,bn).delete(t),o(e,bn).set(t,i))}remove(t){o(this,Yo).delete(t),o(this,$i)!==null&&(o(this,bn).get(t).remove(),o(this,bn).delete(t))}destroy(){x(this,$i,null);for(const t of o(this,bn).values())t.remove();o(this,bn).clear(),o(this,Yo).clear()}};$i=new WeakMap,Fh=new WeakMap,bn=new WeakMap,Yo=new WeakMap,um=new WeakSet,pE=function(t,[e,i,r,a]){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*r}%`,c.height=`${100*a}%`},As=new WeakSet,zy=function(){const t=on._svgFactory.create(1,1,!0);return o(this,$i).append(t),t.setAttribute("aria-hidden",!0),t},fE=function(t,e){const i=on._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const a=on._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),r},By=function(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)},E(on,um);let jy=on;globalThis.pdfjsTestingUtils={HighlightOutliner:yy};Tt.AbortException;Tt.AnnotationEditorLayer;Tt.AnnotationEditorParamsType;Tt.AnnotationEditorType;Tt.AnnotationEditorUIManager;Tt.AnnotationLayer;Tt.AnnotationMode;Tt.ColorPicker;Tt.DOMSVGFactory;Tt.DrawLayer;Tt.FeatureTest;var dR=Tt.GlobalWorkerOptions;Tt.ImageKind;Tt.InvalidPDFException;Tt.MissingPDFException;Tt.OPS;Tt.OutputScale;Tt.PDFDataRangeTransport;Tt.PDFDateString;Tt.PDFWorker;Tt.PasswordResponses;Tt.PermissionFlag;Tt.PixelsPerInch;Tt.RenderingCancelledException;Tt.TextLayer;Tt.TouchManager;Tt.UnexpectedResponseException;Tt.Util;Tt.VerbosityLevel;Tt.XfaLayer;Tt.build;Tt.createValidAbsoluteUrl;Tt.fetchData;var hR=Tt.getDocument;Tt.getFilenameFromUrl;Tt.getPdfFilenameFromUrl;Tt.getXfaPageViewport;Tt.isDataScheme;Tt.isPdfFile;Tt.noContextMenu;Tt.normalizeUnicode;Tt.setLayerDimensions;Tt.shadow;Tt.stopEvent;Tt.version;const pR="/assets/pdf.worker.min-yatZIOMy.mjs";dR.workerSrc=pR;const fR="AIzaSyCcfyMVBskK7RfIPU53LpUib8obl-fILM0",mR=new dk(fR);async function JA(u,t,e){const i=mR.getGenerativeModel({model:u}),r={inlineData:{data:t.split(",")[1],mimeType:"image/jpeg"}};return(await(await i.generateContent([e,r])).response).text()}async function gR(u,t){try{return await JA("gemini-pro-latest",u,t)}catch(e){if(console.warn("gemini-pro-latest failed, trying gemini-1.5-flash-latest",e),e.toString().includes("503"))return await JA("gemini-1.5-flash-latest",u,t);throw e}}async function vR(u){const t=await u.arrayBuffer(),i=await(await hR(t).promise).getPage(1),r=i.getViewport({scale:1.5}),a=document.createElement("canvas"),c=a.getContext("2d");if(!c)throw new Error("Could not get canvas context");a.height=r.height,a.width=r.width;const d={canvasContext:c,viewport:r};return await i.render(d).promise,a.toDataURL("image/jpeg")}const yR=u=>Y.jsx("img",{alt:"Alpenblick Logo",...u}),Hu={logoUrl:"https://alpenblick.net/media/AB_Logo_Kreativeagentur_rn.svg",subtitleText:"PDFs & Bilder intelligent umbenennen.",footerLinkText:"Alpenblick",footerLink:"https://alpenblick.net/",footerTemplate:"Renamer | Mit {{heart}} von {{link}} entwickelt.  2024"},wR="Telekom, Vodafone, O2, Apple, Amazon";function xR(){const[u,t]=Rt.useState([]),[e,i]=Rt.useState(!1),[r,a]=Rt.useState(null),[c,d]=Rt.useState(null),[p,f]=Rt.useState([]);Rt.useEffect(()=>{const D=localStorage.getItem("directoryHistory");if(D){const B=JSON.parse(D);f(B.map(N=>({name:N,handle:{}})))}},[]);const g=(D,B)=>{f(N=>{const $=[{name:D,handle:B},...N.filter(G=>G.name!==D)].slice(0,10);return localStorage.setItem("directoryHistory",JSON.stringify($.map(G=>G.name))),$})},y=Rt.useCallback(D=>{const B=D.map(N=>({id:`${N.name}-${N.lastModified}`,file:N,status:"pending"}));t(N=>[...N,...B])},[]);Rt.useEffect(()=>{const D=async N=>{i(!0),t($=>$.map(G=>G.id===N.id?{...G,status:"analyzing"}:G));try{let $;if(N.file.type==="application/pdf")$=await vR(N.file);else if(N.file.type.startsWith("image/"))$=await new Promise((At,kt)=>{const dt=new FileReader;dt.onload=()=>At(dt.result),dt.onerror=It=>kt(It),dt.readAsDataURL(N.file)});else throw new Error(`Unsupported file type: ${N.file.type}`);const G=NC.replace("{{ANBIETER_LISTE}}",wR),et=await gR($,G),Q=N.file.name.split(".").pop()||"";t(At=>At.map(kt=>kt.id===N.id?{...kt,status:"renamed",newName:`${et}.${Q}`}:kt))}catch($){console.error($);const G=$ instanceof Error?$.message:"An unknown error occurred.";t(et=>et.map(Q=>Q.id===N.id?{...Q,status:"error",errorMessage:G}:Q))}finally{u.find(G=>G.status==="pending")||i(!1)}},B=u.find(N=>N.status==="pending");B?D(B):i(!1)},[u]);const w=D=>{t(B=>B.filter((N,$)=>$!==D))},A=()=>{t([])},b=D=>{const B=p.find(N=>N.name===D);B&&(d(B.handle),a(B.name),t(N=>N.map($=>$.status==="saved"?{...$,status:"renamed"}:$)))},C=async()=>{try{const D=await window.showDirectoryPicker();return d(D),a(D.name),g(D.name,D),t(B=>B.map(N=>N.status==="saved"?{...N,status:"renamed"}:N)),D}catch(D){return console.error("Error selecting directory:",D),null}},k=D=>{const B=u[D],N=document.createElement("a");N.href=URL.createObjectURL(B.file),N.download=B.newName||B.file.name,document.body.appendChild(N),N.click(),document.body.removeChild(N),t($=>$.map((G,et)=>et===D?{...G,status:"downloaded"}:G))},T=async D=>{let B=c;if(B||(B=await C()),!B){t($=>$.map((G,et)=>et===D?{...G,status:"cancelled"}:G));return}const N=u[D];if(N.newName)try{const G=await(await B.getFileHandle(N.newName,{create:!0})).createWritable();await G.write(N.file),await G.close(),t(et=>et.map((Q,At)=>At===D?{...Q,status:"saved"}:Q))}catch($){console.error("Error saving file:",$);const G=$ instanceof Error?$.message:"An unknown error occurred.";t(et=>et.map((Q,At)=>At===D?{...Q,status:"error",errorMessage:G}:Q))}},M=()=>{u.forEach((D,B)=>{D.newName&&k(B)})},z=async()=>{let D=c;if(D||(D=await C()),!D){t(G=>G.map(et=>et.status==="renamed"?{...et,status:"cancelled"}:et));return}const N=u.filter(G=>G.status==="renamed").map(async G=>{if(!G.newName)return null;try{const Q=await(await D.getFileHandle(G.newName,{create:!0})).createWritable();return await Q.write(G.file),await Q.close(),{id:G.id,status:"saved"}}catch(et){console.error("Error saving file:",et);const Q=et instanceof Error?et.message:"An unknown error occurred.";return{id:G.id,status:"error",errorMessage:Q}}}),$=await Promise.all(N);t(G=>{const et=new Map($.filter(Q=>Q).map(Q=>[Q.id,Q]));return G.map(Q=>{const At=et.get(Q.id);return At?{...Q,status:At.status,errorMessage:At.errorMessage}:Q})})},F=()=>Hu.footerTemplate.split(/(\{\{.*?\}\})/g).map((B,N)=>B==="{{heart}}"?Y.jsx(bC,{className:"h-5 w-5 inline-block align-middle text-blue-400 mx-1",style:{position:"relative",top:"-1px"}},N):B==="{{link}}"?Y.jsx("a",{href:Hu.footerLink,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-400",children:Hu.footerLinkText},N):B);return Y.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-200 flex flex-col items-center p-4 sm:p-6 lg:p-8",children:Y.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[Y.jsxs("header",{className:"text-center mb-12 flex flex-col items-center",children:[Y.jsx(yR,{className:"w-auto h-20 mb-6",src:Hu.logoUrl}),Y.jsx("p",{className:"text-lg text-gray-400",children:Hu.subtitleText})]}),Y.jsxs("main",{className:"space-y-6",children:[Y.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 sm:p-8 shadow-lg",children:Y.jsx(RC,{onFilesAdded:y,isProcessing:e})}),u.length>0&&Y.jsx("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6 sm:p-8 shadow-lg",children:Y.jsx(DC,{files:u,onDelete:w,onDownload:k,onSend:T,onClearAll:A,onDownloadAll:M,onSaveAll:z,isProcessing:e,directoryName:r,onSelectDirectory:C,directoryHistory:p.map(D=>D.name),onSelectFromHistory:b})}),Y.jsxs("div",{className:"flex items-start text-sm text-gray-500 bg-gray-800/50 p-4 rounded-lg mt-8",children:[Y.jsx(AC,{className:"w-5 h-5 mr-3 mt-0.5 flex-shrink-0"}),Y.jsx("span",{children:"Ihre Dateien werden lokal im Browser verarbeitet. Fr die Analyse wird die erste Seite des Dokuments als Bild an die Google Gemini API gesendet. Es werden keine vollstndigen Dateien hochgeladen."})]})]}),Y.jsx("footer",{className:"text-center mt-12 text-gray-600 text-sm",children:Y.jsx("p",{children:F()})})]})})}x1.createRoot(document.getElementById("root")).render(Y.jsx(tb.StrictMode,{children:Y.jsx(xR,{})}));
